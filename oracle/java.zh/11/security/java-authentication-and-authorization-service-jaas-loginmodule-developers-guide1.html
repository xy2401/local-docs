<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content>
      <meta name="description" content>
      <title>Java Authentication and Authorization Service (JAAS): LoginModule Developer's Guide</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Security Developer’s Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Security Developer’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="security-developer-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-21T08:42:26-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1993, 2018">
      <meta name="dcterms.category" content="java">
      <meta name="dcterms.identifier" content="E94828-01">
      
      <meta name="dcterms.product" content="en/java/javase/11">
      <meta name="dcterms.release" content="11">
      <link rel="prev" href="jaas-authorization-tutorial.html" title="Previous" type="text/html">
      <link rel="next" href="java-generic-security-services-java-gss-api1.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Security Developer Guide">
    <meta name="dcterms.isVersionOf" content="SECURITY">
  <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="jaas-authorization-tutorial.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="java-generic-security-services-java-gss-api1.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Security Developer’s Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="java-authentication-and-authorization-service-jaas1.html" property="item" typeof="WebPage"><span property="name">Java Authentication and Authorization Service (JAAS)</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Java Authentication and Authorization Service (JAAS): LoginModule Developer's Guide</li>
            </ol>
            <a id="GUID-CB46C30D-FFF1-466F-B2F5-6DE0BD5DA43A" name="GUID-CB46C30D-FFF1-466F-B2F5-6DE0BD5DA43A"></a>
            
            <h2 id="JSSEC-GUID-CB46C30D-FFF1-466F-B2F5-6DE0BD5DA43A" class="sect2">Java Authentication and Authorization Service (JAAS): LoginModule Developer's Guide</h2>
         </header>
         <div class="ind">
            <div>
               <p></p>
               <p>JAAS provides subject-based authorization on authenticated identities. This document focuses on the authentication aspect of JAAS, specifically the <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/spi/LoginModule.html" target="_blank"><span class="apiname">LoginModule</span></a> interface.
               </p>
               <div class="section">
                  <p class="subhead1" id="GUID-CB46C30D-FFF1-466F-B2F5-6DE0BD5DA43A__GUID-39874DEC-3315-4CF0-BFA9-02DC88B47C3B">Who Should Read This Document</p>
                  <p>This document is intended for experienced programmers who require the ability to write a <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/spi/LoginModule.html" target="_blank"><span class="apiname">LoginModule</span></a> implementing an authentication technology.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CB46C30D-FFF1-466F-B2F5-6DE0BD5DA43A__GUID-A7125EFB-A4B6-4D29-AFC8-88818607E0D1">Related Documentation</p>
                  <p>This document assumes you have already read the following:</p>
                  <ul style="list-style-type: disc;">
                     <li><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/jaas/JAASRefGuide.html" target="_blank">Java Authentication and Authorization Service (JAAS) Reference Guide</a></li>
                  </ul>
                  <p>It also discusses various classes and interfaces in the JAAS API. See the Javadoc API documentation for the JAAS API specification for more detailed information:</p>
                  <ul style="list-style-type: disc;">
                     <li><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/package-summary.html" target="_blank"><span class="apiname">javax.security.auth </span></a></li>
                     <li><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/package-summary.html" target="_blank"><span class="apiname">javax.security.auth.callback</span></a></li>
                     <li><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/kerberos/package-summary.html" target="_blank"><span class="apiname">javax.security.auth.kerberos</span></a></li>
                     <li><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/login/package-summary.html" target="_blank"> <span class="apiname">javax.security.auth.login </span></a></li>
                     <li><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/spi/package-summary.html" target="_blank"><span class="apiname">javax.security.auth.spi </span></a></li>
                     <li><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/x500/package-summary.html" target="_blank"><span class="apiname">javax.security.auth.x500 </span></a></li>
                  </ul>
                  <p>The following packages contain supported <span class="apiname">LoginModule</span> examples:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li><a href="https://docs.oracle.com/javase/10/docs/api/com/sun/security/auth/package-summary.html" target="_blank"><span class="apiname">com.sun.security.auth</span></a></li>
                     <li><a href="https://docs.oracle.com/javase/10/docs/api/com/sun/security/auth/callback/package-summary.html" target="_blank"><span class="apiname">com.sun.security.auth.callback</span></a></li>
                     <li><a href="https://docs.oracle.com/javase/10/docs/api/com/sun/security/auth/login/package-summary.html" target="_blank"><span class="apiname">com.sun.security.auth.login</span></a></li>
                     <li><a href="https://docs.oracle.com/javase/10/docs/api/com/sun/security/auth/module/package-summary.html" target="_blank"><span class="apiname">com.sun.security.auth.module</span></a></li>
                  </ul>
                  <p>The following <span class="bold">tutorials</span> for JAAS authentication and authorization can be run by everyone:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li><a href="jaas-authentication-tutorial.html#GUID-BFEBDB00-9826-499C-A20F-E9463883DED4">JAAS Authentication Tutorial</a></li>
                     <li><a href="jaas-authorization-tutorial.html#GUID-D43CF965-8A5F-4A23-A2AF-F41DD5F8B411">JAAS Authorization Tutorial</a></li>
                  </ul>
                  <p>Similar tutorials for JAAS authentication and authorization, but which demonstrate the use of a Kerberos LoginModule and thus which require a Kerberos installation, can be found at</p>
                  <ul style="list-style-type: disc;">
                     <li><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/jgss/tutorials/AcnOnly.html" target="_blank">JAAS Authentication</a></li>
                     <li><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/jgss/tutorials/AcnAndAzn.html" target="_blank">JAAS Authorization</a></li>
                  </ul>
                  <p>These two tutorials are a part of <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/jgss/tutorials/index.html" target="_blank">Introduction to JAAS and Java GSS-API Tutorials</a> that utilize Kerberos as the underlying technology for authentication and secure communication.
                  </p>
               </div>
               <!-- class="section" -->
            </div>
            <div class="sect2"><a id="GUID-3F7CF22D-A207-49EE-B1CC-575FBF3789DE" name="GUID-3F7CF22D-A207-49EE-B1CC-575FBF3789DE"></a><h3 id="JSSEC-GUID-3F7CF22D-A207-49EE-B1CC-575FBF3789DE" class="sect3">Introduction to LoginModule</h3>
               <div>
                  <p></p>
                  <p>Authentication technology providers must implement the <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/spi/LoginModule.html" target="_blank"><span class="apiname">LoginModule</span></a> interface. <code class="codeph">LoginModule</code>s are plugged in under applications to provide a particular type of authentication.
                  </p>
                  <p>While applications write to the <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/login/LoginContext.html" target="_blank"><span class="apiname">LoginContext</span></a> Application Programming Interface (API), authentication technology providers implement the <code class="codeph">LoginModule</code> interface. A <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/login/Configuration.html" target="_blank"><span class="apiname">Configuration</span></a> specifies the <code class="codeph">LoginModule</code>(s) to be used with a particular login application. Different <code class="codeph">LoginModule</code>s can be plugged in under the application without requiring any modifications to the application itself.
                  </p>
                  <p>The <code class="codeph">LoginContext</code> is responsible for reading the <code class="codeph">Configuration</code> and instantiating the specified <code class="codeph">LoginModule</code>s. Each <code class="codeph">LoginModule</code> is initialized with a <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/Subject.html" target="_blank"><span class="apiname">Subject</span></a>, a <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/CallbackHandler.html" target="_blank"><span class="apiname">CallbackHandler</span></a>, shared <code class="codeph">LoginModule</code> state, and <code class="codeph">LoginModule</code>-specific options.
                  </p>
                  <p>The <span class="bold"><code class="codeph">Subject</code></span> represents the user or service currently being authenticated and is updated by a <code class="codeph">LoginModule</code> with relevant <a href="https://docs.oracle.com/javase/10/docs/api/java/security/Principal.html" target="_blank"><span class="apiname">Principal</span></a>s and credentials if authentication succeeds. <code class="codeph">LoginModule</code>s use the <span class="bold"><code class="codeph">CallbackHandler</code></span> to communicate with users (to prompt for user names and passwords, for example), as described in the login method description. Note that the <code class="codeph">CallbackHandler</code> may be null. A <code class="codeph">LoginModule</code> that requires a <code class="codeph">CallbackHandler</code> to authenticate the <code class="codeph">Subject</code> may throw a <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/login/LoginException.html" target="_blank"><span class="apiname">LoginException</span></a> if it was initialized with a <code class="codeph">null</code> <code class="codeph">CallbackHandler</code>. <code class="codeph">LoginModule</code>s optionally use the <span class="bold">shared state</span> to share information or data among themselves.
                  </p>
                  <p>The <span class="bold"><code class="codeph">LoginModule</code>-specific options</span> represent the options configured for this <code class="codeph">LoginModule</code> in the login <code class="codeph">Configuration</code>. The options are defined by the <code class="codeph">LoginModule</code> itself and control the behavior within it. For example, a <code class="codeph">LoginModule</code> may define options to support debugging/testing capabilities. Options are defined using a key-value syntax, such as <span class="variable" translate="no">debug=true</span>. The <code class="codeph">LoginModule</code> stores the options as a <code class="codeph">Map</code> so that the values may be retrieved using the key. Note that there is no limit to the number of options a <code class="codeph">LoginModule</code> chooses to define.
                  </p>
                  <p>The calling application sees the authentication process as a single operation invoked via a call to the <code class="codeph">LoginContext</code>'s <code class="codeph">login</code> method. However, the authentication process within each <code class="codeph">LoginModule</code> proceeds in two distinct phases. In the first phase of authentication, the <code class="codeph">LoginContext</code>'s <code class="codeph">login</code> method invokes the <code class="codeph">login</code> method of each <code class="codeph">LoginModule</code> specified in the <code class="codeph">Configuration</code>. The <code class="codeph">login</code> method for a <code class="codeph">LoginModule</code> performs the actual authentication (prompting for and verifying a password for example) and saves its authentication status as private state information. Once finished, the <code class="codeph">LoginModule</code>'s <code class="codeph">login</code> method returns <code class="codeph">true</code> (if it succeeded) or <code class="codeph">false</code> (if it should be ignored), or it throws a <code class="codeph">LoginException</code> to specify a failure. In the failure case, the <code class="codeph">LoginModule</code> must not retry the authentication or introduce delays. The responsibility of such tasks belongs to the application. If the application attempts to retry the authentication, each <code class="codeph">LoginModule</code>'s <code class="codeph">login</code> method will be called again.
                  </p>
                  <p>In the second phase, if the <code class="codeph">LoginContext</code>'s overall authentication succeeded (calls to the relevant <span class="variable" translate="no">required</span>, <span class="variable" translate="no">requisite</span>, <span class="variable" translate="no">sufficient</span> and <span class="variable" translate="no">optional</span> <code class="codeph">LoginModule</code>s' <code class="codeph">login</code> methods succeeded), then the <code class="codeph">commit</code> method for each <code class="codeph">LoginModule</code> gets invoked. (For an explanation of the <code class="codeph">LoginModule</code> flags <span class="variable" translate="no">required</span>, <span class="variable" translate="no">requisite</span>, <span class="variable" translate="no">sufficient</span> and <span class="variable" translate="no">optional</span>, please consult the <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/login/Configuration.html" target="_blank"><span class="apiname">Configuration</span></a> documentation and <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/jaas/JAASRefGuide.html#AppendixB" target="_blank">Appendix B: Example Login Configurations</a> in the JAAS Reference Guide.) The <code class="codeph">commit</code> method for a <code class="codeph">LoginModule</code> checks its privately saved state to see if its own authentication succeeded. If the overall <code class="codeph">LoginContext</code> authentication succeeded and the <code class="codeph">LoginModule</code>'s own authentication succeeded, then the <code class="codeph">commit</code> method associates the relevant <code class="codeph">Principal</code>s (authenticated identities) and credentials (authentication data such as cryptographic keys) with the <code class="codeph">Subject</code>.
                  </p>
                  <p>If the <code class="codeph">LoginContext</code>'s overall authentication failed (the relevant REQUIRED, REQUISITE, SUFFICIENT and OPTIONAL <code class="codeph">LoginModule</code>s' <code class="codeph">login</code> methods did not succeed), then the <code class="codeph">abort</code> method for each <code class="codeph">LoginModule</code> gets invoked. In this case, the <code class="codeph">LoginModule</code> removes/destroys any authentication state originally saved.
                  </p>
                  <p>Logging out a <code class="codeph">Subject</code> involves only one phase. The <code class="codeph">LoginContext</code> invokes the <code class="codeph">LoginModule</code>'s <code class="codeph">logout</code> method. The <code class="codeph">logout</code> method for the <code class="codeph">LoginModule</code> then performs the logout procedures, such as removing <code class="codeph">Principal</code>s or credentials from the <code class="codeph">Subject</code>, or logging session information.
                  </p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-EE1C4BBE-289F-4419-A233-43F2D897765B" name="GUID-EE1C4BBE-289F-4419-A233-43F2D897765B"></a><h3 id="JSSEC-GUID-EE1C4BBE-289F-4419-A233-43F2D897765B" class="sect3">Steps to Implement a LoginModule</h3>
               <div>
                  <p>The following are the steps required to implement and test a <code class="codeph">LoginModule</code>:
                  </p>
               </div>
               <div class="sect3"><a id="GUID-A4140569-4124-4AE7-81CC-145537BE0F42" name="GUID-A4140569-4124-4AE7-81CC-145537BE0F42"></a><h4 id="JSSEC-GUID-A4140569-4124-4AE7-81CC-145537BE0F42" class="sect4">Step 1: Understand the Authentication Technology</h4>
                  <div>
                     <p>First, understand the authentication technology to be implemented by your new <code class="codeph">LoginModule</code> provider and determine its requirements.
                     </p>
                     <ol>
                        <li class="stepexpand"><span>Determine whether or not your <code class="codeph">LoginModule</code> will require some form of user interaction (retrieving a user name and password, for example). If so, you will need to become familiar with the <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/CallbackHandler.html" target="_blank"><span class="apiname">CallbackHandler</span></a> interface and the <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/package-summary.html" target="_blank"><span class="apiname">javax.security.auth.callback</span></a> package.</span><div>
                              <p> In that package you will find several possible <code class="codeph">Callback</code> implementations to use. (Alternatively, you can create your own <code class="codeph">Callback</code> implementations.) The <code class="codeph">LoginModule</code> will invoke the <code class="codeph">CallbackHandler</code> specified by the application itself and passed to the <code class="codeph">LoginModule</code>'s <code class="codeph">initialize</code> method. The <code class="codeph">LoginModule</code> passes the <code class="codeph">CallbackHandler</code> an array of appropriate <code class="codeph">Callback</code>s. See <a href="java-authentication-and-authorization-service-jaas-loginmodule-developers-guide1.html#GUID-E9C5810B-ADB6-4454-869D-B269ECA8145F__LOGINMODULE.LOGINMETHOD-21144491">LoginModule.login Method</a> in <a href="java-authentication-and-authorization-service-jaas-loginmodule-developers-guide1.html#GUID-E9C5810B-ADB6-4454-869D-B269ECA8145F" title="The LoginModule interface specifies five abstract methods that require implementations.">Step 3: Implement the Abstract LoginModule Methods</a>.
                              </p>
                              <div class="p">
                                 <div class="infoboxnote" id="GUID-A4140569-4124-4AE7-81CC-145537BE0F42__GUID-E00E32FE-7328-4E56-B91F-04095BA3A9D6">
                                    <p class="notep1">Note:</p>It is possible for <code class="codeph">LoginModule</code> implementations not to have any end-user interactions. Such <code class="codeph">LoginModule</code>s would not need to access the <code class="codeph">callback</code> package.
                                 </div>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Determine what configuration options you want to make available to the user, who specifies configuration information in whatever form the current Configuration implementation expects (for example, in files). For each option, decide the option name and possible values.</span><div> For example, if a <code class="codeph">LoginModule</code> may be configured to consult a particular authentication server host, decide on the option's key name ("auth_server", for example), as well as the possible server hostnames valid for that option ("server_one.example.com" and "server_two.example.com", for example).
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A6BAE987-54F4-4634-9D03-7EB986C7F484" name="GUID-A6BAE987-54F4-4634-9D03-7EB986C7F484"></a><h4 id="JSSEC-GUID-A6BAE987-54F4-4634-9D03-7EB986C7F484" class="sect4">Step 2: Name the LoginModule Implementation</h4>
                  <div>
                     <p>Decide on the proper package and class name for your <code class="codeph">LoginModule</code>.
                     </p>
                     <div class="example" id="GUID-A6BAE987-54F4-4634-9D03-7EB986C7F484__GUID-61466AE4-79E1-4B1F-9BFA-6DD64DEB781C">
                        <p>For example, a <code class="codeph">LoginModule</code> developed by IBM might be called <code class="codeph">com.ibm.auth.Module</code> where <code class="codeph">com.ibm.auth</code> is the package name and <code class="codeph">Module</code> is the name of the <code class="codeph">LoginModule</code> class implementation.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-E9C5810B-ADB6-4454-869D-B269ECA8145F" name="GUID-E9C5810B-ADB6-4454-869D-B269ECA8145F"></a><h4 id="JSSEC-GUID-E9C5810B-ADB6-4454-869D-B269ECA8145F" class="sect4">Step 3: Implement the Abstract LoginModule Methods</h4>
                  <div>
                     <p>The <code class="codeph">LoginModule</code> interface specifies five abstract methods that require implementations.
                     </p>
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/spi/LoginModule.html#initialize-javax.security.auth.Subject-javax.security.auth.callback.CallbackHandler-java.util.Map-java.util.Map-" target="_blank"><span class="apiname">initialize</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/spi/LoginModule.html#login--" target="_blank"><span class="apiname">login</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/spi/LoginModule.html#commit--" target="_blank"><span class="apiname">commit</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/spi/LoginModule.html#abort--" target="_blank"><span class="apiname">abort</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/spi/LoginModule.html#logout--" target="_blank"><span class="apiname">logout</span></a></p>
                           </li>
                        </ul>
                        <p>In addition to these methods, a <span class="apiname">LoginModule</span> implementation must provide a public constructor with no arguments. This allows for its proper instantiation by a <span class="apiname">LoginContext</span>. Note that if no constructor is provided in your <span class="apiname">LoginModule</span> implementation, a default no-argument constructor is automatically inherited from the <span class="apiname">Object</span> class.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E9C5810B-ADB6-4454-869D-B269ECA8145F__LOGINMODULE.INITIALIZEMETHOD-2114401D">
                        <p class="subhead3" id="GUID-E9C5810B-ADB6-4454-869D-B269ECA8145F__GUID-0822523A-1E3A-4661-9778-C49C77B24CE0">LoginModule.initialize Method</p><pre class="pre codeblock"><code>    public void initialize(
        Subject subject,
        CallbackHandler handler,
        Map&lt;java.lang.String, ?&gt; sharedState,
        Map&lt;java.lang.String, ?&gt; options);
</code></pre><p>The <code class="codeph">initialize</code> method is called to initialize the <code class="codeph">LoginModule</code> with the relevant authentication and state information.
                        </p>
                        <p>This method is called by a <code class="codeph">LoginContext</code> immediately after this <code class="codeph">LoginModule</code> has been instantiated, and prior to any calls to its other public methods. The method implementation should store away the provided arguments for future use.
                        </p>
                        <p>The <code class="codeph">initialize</code> method may additionally peruse the provided <span class="variable" translate="no">sharedState</span> to determine what additional authentication state it was provided by other <code class="codeph">LoginModule</code>s, and may also traverse through the provided <span class="variable" translate="no">options</span> to determine what configuration options were specified to affect the <code class="codeph">LoginModule</code>'s behavior. It may save option values in variables for future use.
                        </p>
                        <p>Below is a list of options commonly supported by <span class="apiname">LoginModule</span>s. Note that the following is simply a guideline. Modules are free to support a subset (or none) of the following options.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li><code class="codeph">tryFirstPass</code> - If <code class="codeph">true</code>, the first <span class="apiname">LoginModule</span> in the stack saves the password entered, and subsequent <span class="apiname">LoginModules</span> also try to use it. If authentication fails, the <span class="apiname">LoginModule</span>s prompt for a new password and retry the authentication.
                           </li>
                           <li><code class="codeph">useFirstPass</code> - If <code class="codeph">true</code>, the first <span class="apiname">LoginModule</span> in the stack saves the password entered, and subsequent <span class="apiname">LoginModules</span> also try to use it. <span class="apiname">LoginModule</span>s do not prompt for a new password if authentication fails (authentication simply fails).
                           </li>
                           <li><code class="codeph">tryMappedPass</code> - If <code class="codeph">true</code>, the first <span class="apiname">LoginModule</span> in the stack saves the password entered, and subsequent <span class="apiname">LoginModules</span> attempt to map it into their service-specific password. If authentication fails, the <span class="apiname">LoginModule</span>s prompt for a new password and retry the authentication.
                           </li>
                           <li><code class="codeph">useMappedPass</code> - If <code class="codeph">true</code>, the first <span class="apiname">LoginModule</span> in the stack saves the password entered, and subsequent <span class="apiname">LoginModules</span> attempt to map it into their service-specific password. <span class="apiname">LoginModule</span>s do not prompt for a new password if authentication fails (authentication simply fails).
                           </li>
                           <li><code class="codeph">moduleBanner</code> - If <code class="codeph">true</code>, then when invoking the <span class="apiname">CallbackHandler</span>, the <span class="apiname">LoginModule</span> provides a <span class="apiname">TextOutputCallback</span> as the first <span class="apiname">Callback</span>, which describes the <span class="apiname">LoginModule</span> performing the authentication.
                           </li>
                           <li><code class="codeph">debug</code> - If <code class="codeph">true</code>, instructs a <span class="apiname">LoginModule</span> to output debugging information.
                           </li>
                        </ul>
                        <p>The <code class="codeph">initialize</code> method may freely ignore state or options it does not understand, although it would be wise to log such an event if it does occur.
                        </p>
                        <p>Note that the <code class="codeph">LoginContext</code> invoking this <code class="codeph">LoginModule</code> (and the other configured <code class="codeph">LoginModule</code>s, as well), all share the same references to the provided <code class="codeph">Subject</code> and <code class="codeph">sharedState</code>. Modifications to the <code class="codeph">Subject</code> and <code class="codeph">sharedState</code> will, therefore, be seen by all.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E9C5810B-ADB6-4454-869D-B269ECA8145F__LOGINMODULE.LOGINMETHOD-21144491">
                        <p class="subhead3" id="GUID-E9C5810B-ADB6-4454-869D-B269ECA8145F__GUID-912E9E9F-1904-4A45-AB1E-A80D2E6B1358">LoginModule.login Method</p><pre class="pre codeblock"><code>    boolean login() throws LoginException;
</code></pre><p>The <code class="codeph">login</code> method is called to authenticate a <code class="codeph">Subject</code>. This is phase 1 of authentication.
                        </p>
                        <p>This method implementation should perform the actual authentication. For example, it may cause prompting for a user name and password, and then attempt to verify the password against a password database. Another example implementation may inform the user to insert their finger into a fingerprint reader, and then match the input fingerprint against a fingerprint database.</p>
                        <p>If your <code class="codeph">LoginModule</code> requires some form of user interaction (retrieving a user name and password, for example), it should not do so directly. That is because there are various ways of communicating with a user, and it is desirable for <code class="codeph">LoginModule</code>s to remain independent of the different types of user interaction. Rather, the <code class="codeph">LoginModule</code>'s <code class="codeph">login</code> method should invoke the <code class="codeph">handle</code> method of the <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/CallbackHandler.html" target="_blank"><span class="apiname">CallbackHandler</span></a> interface passed to the <code class="codeph">initialize</code> method to perform the user interaction and set appropriate results, such as the user name and password. The <code class="codeph">LoginModule</code> passes the <code class="codeph">CallbackHandler</code> an array of appropriate <code class="codeph">Callback</code>s, for example a <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/NameCallback.html" target="_blank"><span class="apiname">NameCallback</span></a> for the user name and a <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/PasswordCallback.html" target="_blank"><span class="apiname">PasswordCallback</span></a> for the password, and the <code class="codeph">CallbackHandler</code> performs the requested user interaction and sets appropriate values in the <code class="codeph">Callback</code>s. For example, to process a <code class="codeph">NameCallback</code>, the <code class="codeph">CallbackHandler</code> may prompt for a name, retrieve the value from the user, and call the <code class="codeph">NameCallback</code>'s <code class="codeph">setName</code> method to store the name.
                        </p>
                        <p>The authentication process may also involve communication over a network. For example, if this method implementation performs the equivalent of a <span class="variable" translate="no">kinit</span> in Kerberos, then it would need to contact the KDC. If a password database entry itself resides in a remote naming service, then that naming service needs to be contacted, perhaps via the Java Naming and Directory Interface (JNDI). Implementations might also interact with an underlying operating system. For example, if a user has already logged into an operating system like Solaris, Linux, macOS, or Windows, this method might simply import the underlying operating system's identity information.
                        </p>
                        <p>The <code class="codeph">login</code> method should
                        </p>
                        <ol>
                           <li>Determine whether or not this <code class="codeph">LoginModule</code> should be ignored. One example of when it should be ignored is when a user attempts to authenticate under an identity irrelevant to this <code class="codeph">LoginModule</code> (if a user attempts to authenticate as <span class="variable" translate="no">root</span> using NIS, for example). If this <code class="codeph">LoginModule</code> should be ignored, <code class="codeph">login</code> should return <code class="codeph">false</code>. Otherwise, it should do the following:
                           </li>
                           <li>Call the <code class="codeph">CallbackHandler</code> <code class="codeph">handle</code> method if user interaction is required.
                           </li>
                           <li>Perform the authentication.</li>
                           <li>Store the authentication result (success or failure).</li>
                           <li>If authentication succeeded, save any relevant state information that may be needed by the <code class="codeph">commit</code> method.
                           </li>
                           <li>Return <code class="codeph">true</code> if authentication succeeds, or throw a <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/login/LoginException.html" target="_blank"><span class="apiname">LoginException</span></a> such as <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/login/FailedLoginException.html" target="_blank"><span class="apiname">FailedLoginException</span></a> if authentication fails.
                           </li>
                        </ol>
                        <p>Note that the <code class="codeph">login</code> method implementation should not associate any new <code class="codeph">Principal</code> or credential information with the saved <code class="codeph">Subject</code> object. This method merely performs the authentication, and then stores away the authentication result and corresponding authentication state. This result and state will later be accessed by the <code class="codeph">commit</code> or <code class="codeph">abort</code> method. Note that the result and state should typically not be saved in the <span class="variable" translate="no">sharedState</span> <code class="codeph">Map</code>, as they are not intended to be shared with other <code class="codeph">LoginModule</code>s.
                        </p>
                        <p>An example of where this method might find it useful to store state information in the <span class="variable" translate="no">sharedState</span> <code class="codeph">Map</code> is when <code class="codeph">LoginModule</code>s are configured to share passwords. In this case, the entered password would be saved as shared state. By sharing passwords, the user only enters the password once, and can still be authenticated to multiple <code class="codeph">LoginModule</code>s. The standard conventions for saving and retrieving names and passwords from the <span class="variable" translate="no">sharedState</span> <code class="codeph">Map</code> are the following:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li><code class="codeph">javax.security.auth.login.name</code> - Use this as the shared state map key for saving/retrieving a name. The value should be a <span class="apiname">String</span>.
                           </li>
                           <li><code class="codeph">javax.security.auth.login.password</code> - Use this as the shared state map key for saving/retrieving a password. The value should be a <span class="apiname">char</span> array.
                           </li>
                        </ul>
                        <p>If authentication fails, the <code class="codeph">login</code> method should not retry the authentication. This is the responsibility of the application. Multiple <code class="codeph">LoginContext</code> <code class="codeph">login</code> method calls by an application are preferred over multiple login attempts from within <code class="codeph">LoginModule.login()</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E9C5810B-ADB6-4454-869D-B269ECA8145F__LOGINMODULE.COMMITMETHOD-21144844">
                        <p class="subhead3" id="GUID-E9C5810B-ADB6-4454-869D-B269ECA8145F__GUID-7C5914F5-D28C-47EC-ADDE-1BB7FEEE6E90">LoginModule.commit Method</p><pre class="pre codeblock"><code>    boolean commit() throws LoginException;
</code></pre><p>The <code class="codeph">commit</code> method is called to commit the authentication process. This is phase 2 of authentication when phase 1 succeeds. It is called if the <code class="codeph">LoginContext</code>'s overall authentication succeeded (that is, if the relevant REQUIRED, REQUISITE, SUFFICIENT and OPTIONAL <code class="codeph">LoginModule</code>s succeeded.)
                        </p>
                        <p>This method should access the authentication result and corresponding authentication state saved by the <code class="codeph">login</code> method.
                        </p>
                        <p>If the authentication result denotes that the <code class="codeph">login</code> method failed, then this <code class="codeph">commit</code> method should remove/destroy any corresponding state that was originally saved.
                        </p>
                        <p>If the saved result instead denotes that this <code class="codeph">LoginModule</code>'s <code class="codeph">login</code> method succeeded, then the corresponding state information should be accessed to build any relevant <code class="codeph">Principal</code> and credential information. Such <code class="codeph">Principal</code>s and credentials should then be added to the <code class="codeph">Subject</code> stored away by the <code class="codeph">initialize</code> method.
                        </p>
                        <p>After adding <code class="codeph">Principal</code>s and credentials, dispensable state fields should be destroyed expeditiously. Likely fields to destroy would be user names and passwords stored during the authentication process.
                        </p>
                        <p>The <code class="codeph">commit</code> method should save private state indicating whether the commit succeeded or failed.
                        </p>
                        <p>The following chart depicts what a <code class="codeph">LoginModule</code>'s <code class="codeph">commit</code> method should return. The different boxes represent the different situations that may occur. For example, the top-left corner box depicts what the <code class="codeph">commit</code> method should return if both the previous call to <code class="codeph">login</code> succeeded and the <code class="codeph">commit</code> method itself succeeded.
                        </p>
                        <div class="tblformalwide" id="GUID-E9C5810B-ADB6-4454-869D-B269ECA8145F__GUID-80D5A33A-9B15-45EA-87FD-1C17A26F795C">
                           <p class="titleintable">Table 6-2 LoginModule.commit Method Return Values</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="LoginModule.commit Method Return Values" summary="LoginModule.commit method return values" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d93925e1134">&nbsp;Login Status</th>
                                    <th align="left" valign="bottom" id="d93925e1136">COMMIT: SUCCESS</th>
                                    <th align="left" valign="bottom" id="d93925e1138">COMMIT: FAILURE</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td rowspan="1" colspan="1" align="left" valign="top" id="d93925e1142" headers="d93925e1134 ">LOGIN: SUCCESS</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d93925e1142 d93925e1136 ">return TRUE</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d93925e1142 d93925e1138 ">throw EXCEPTION</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td rowspan="1" colspan="1" align="left" valign="top" id="d93925e1149" headers="d93925e1134 ">LOGIN: FAILURE</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d93925e1149 d93925e1136 ">return FALSE</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d93925e1149 d93925e1138 ">return FALSE</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-E9C5810B-ADB6-4454-869D-B269ECA8145F__LOGINMODULE.ABORTMETHOD-21144BEF">
                        <p class="subhead3" id="GUID-E9C5810B-ADB6-4454-869D-B269ECA8145F__GUID-03B7472C-DFE1-4235-A75D-786A68C898FB">LoginModule.abort Method</p><pre class="pre codeblock"><code>    boolean abort() throws LoginException;
</code></pre><p>The <code class="codeph">abort</code> method is called to abort the authentication process. This is phase 2 of authentication when phase 1 fails. It is called if the <code class="codeph">LoginContext</code>'s overall authentication failed.
                        </p>
                        <p>This method first accesses this <code class="codeph">LoginModule</code>'s authentication result and corresponding authentication state saved by the <code class="codeph">login</code> (and possibly <code class="codeph">commit</code>) methods, and then clears out and destroys the information. Sample state to destroy would be user names and passwords.
                        </p>
                        <p>If this <code class="codeph">LoginModule</code>'s authentication attempt failed, then there shouldn't be any private state to clean up.
                        </p>
                        <p>The following charts depict what a <code class="codeph">LoginModule</code>'s <code class="codeph">abort</code> method should return. This first chart assumes that the previous call to <code class="codeph">login</code> succeeded. For instance, the <code class="codeph">abort</code> method should return TRUE if both the previous call to <code class="codeph">login</code> and <code class="codeph">commit</code> succeeded, and the <code class="codeph">abort</code> method itself also succeeded.
                        </p>
                        <div class="tblformalwide" id="GUID-E9C5810B-ADB6-4454-869D-B269ECA8145F__GUID-BBDD2DC0-2F02-45A3-86D5-05E37240DC3A">
                           <p class="titleintable">Table 6-3 LoginModule.abort Method Return Values: Login Succeeded</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="LoginModule.abort Method Return Values: Login Succeeded" summary="LoginModule.abort method return values: login succeeded" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d93925e1219">&nbsp;Login Status</th>
                                    <th align="left" valign="bottom" id="d93925e1221">ABORT: SUCCESS</th>
                                    <th align="left" valign="bottom" id="d93925e1223">ABORT: FAILURE</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td rowspan="1" colspan="1" align="left" valign="top" id="d93925e1227" headers="d93925e1219 ">COMMIT: SUCCESS</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d93925e1227 d93925e1221 ">return TRUE</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d93925e1227 d93925e1223 ">throw EXCEPTION</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td rowspan="1" colspan="1" align="left" valign="top" id="d93925e1234" headers="d93925e1219 ">COMMIT: FAILURE</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d93925e1234 d93925e1221 ">return TRUE</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d93925e1234 d93925e1223 ">throw EXCEPTION</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>The second chart depicts what a <span class="apiname">LoginModule</span>'s abort method should return, assuming that the previous call to login failed. For instance, the <span class="apiname">abort</span> method should return FALSE if the previous call to <span class="apiname">login</span> failed, the previous call to <span class="apiname">commit</span> succeeded, and the <span class="apiname">abort</span> method itself also succeeded.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformalwide" id="GUID-E9C5810B-ADB6-4454-869D-B269ECA8145F__LOGINMODULE.ABORTMETHODRETURNVALUES-2119026E">
                        <p class="titleintable">Table 6-4 LoginModule.abort Method Return Values: Login Failed</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="LoginModule.abort Method Return Values: Login Failed" summary="LoginModule.abort method return values: login failed" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d93925e1268">&nbsp;Login Status</th>
                                 <th align="left" valign="bottom" id="d93925e1270">ABORT: SUCCESS</th>
                                 <th align="left" valign="bottom" id="d93925e1272">ABORT: FAILURE</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td rowspan="1" colspan="1" align="left" valign="top" id="d93925e1276" headers="d93925e1268 ">COMMIT: SUCCESS</td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d93925e1276 d93925e1270 ">return FALSE</td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d93925e1276 d93925e1272 ">return FALSE</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td rowspan="1" colspan="1" align="left" valign="top" id="d93925e1283" headers="d93925e1268 ">COMMIT: FAILURE</td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d93925e1283 d93925e1270 ">return FALSE</td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d93925e1283 d93925e1272 ">return FALSE</td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section" id="GUID-E9C5810B-ADB6-4454-869D-B269ECA8145F__LOGINMODULE.LOGOUTMETHOD-21144F6A">
                        <p class="subhead3" id="GUID-E9C5810B-ADB6-4454-869D-B269ECA8145F__GUID-573BBE6D-4875-4D18-ACEA-A55F648D0A26">LoginModule.logout Method</p><pre class="pre codeblock"><code>    boolean logout() throws LoginException;
</code></pre><p>The <code class="codeph">logout</code> method is called to log out a <code class="codeph">Subject</code>.
                        </p>
                        <p>This method removes <code class="codeph">Principal</code>s, and removes/destroys credentials associated with the <code class="codeph">Subject</code> during the <code class="codeph">commit</code> operation. This method should not touch those <code class="codeph">Principal</code>s or credentials previously existing in the <code class="codeph">Subject</code>, or those added by other <code class="codeph">LoginModule</code>s.
                        </p>
                        <p>If the <code class="codeph">Subject</code> has been marked <span class="variable" translate="no">read-only</span> (the <code class="codeph">Subject</code>'s <code class="codeph">isReadOnly</code> method returns <span class="variable" translate="no">true</span>), then this method should only destroy credentials associated with the <code class="codeph">Subject</code> during the <code class="codeph">commit</code> operation (removing the credentials is not possible). If the <code class="codeph">Subject</code> has been marked as <span class="variable" translate="no">read-only</span> and the credentials associated with the <code class="codeph">Subject</code> during the <code class="codeph">commit</code> operation are not destroyable (they do not implement the <code class="codeph">Destroyable</code> interface), then this method may throw a <code class="codeph">LoginException</code>.
                        </p>
                        <p>The <code class="codeph">logout</code> method should return <code class="codeph">true</code> if logout succeeds, or otherwise throw a <code class="codeph">LoginException</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-4A0BD9DC-B45F-4606-A6BD-8BAC22952C52" name="GUID-4A0BD9DC-B45F-4606-A6BD-8BAC22952C52"></a><h4 id="JSSEC-GUID-4A0BD9DC-B45F-4606-A6BD-8BAC22952C52" class="sect4">Step 4: Choose or Write a Sample Application</h4>
                  <div>
                     <p>Either choose an existing sample application for your testing, or write a new one.</p>
                     <p>See <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/jaas/JAASRefGuide.html" target="_blank">Java Authentication and Authorization Service (JAAS) Reference Guide</a> for information about application requirements and a sample application you can use for your testing.
                     </p>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-6DEAB2A4-2ADE-4CC8-B188-F0A58A38F61C" name="GUID-6DEAB2A4-2ADE-4CC8-B188-F0A58A38F61C"></a><h4 id="JSSEC-GUID-6DEAB2A4-2ADE-4CC8-B188-F0A58A38F61C" class="sect4">Step 5: Compile the LoginModule and Application</h4>
                  <div>
                     <p>Compile your new <code class="codeph">LoginModule</code> and the application you will use for testing.
                     </p>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-800F2CC8-C4BC-4AE7-B29A-1BFBE01D9979" name="GUID-800F2CC8-C4BC-4AE7-B29A-1BFBE01D9979"></a><h4 id="JSSEC-GUID-800F2CC8-C4BC-4AE7-B29A-1BFBE01D9979" class="sect4">Step 6: Prepare for Testing</h4>
                  <div>
                     <p></p>
                     <div class="section" id="GUID-800F2CC8-C4BC-4AE7-B29A-1BFBE01D9979__STEP6APLACEYOURLOGINMODULEANDAPPLIC-83D213BF">
                        <p class="subhead3" id="GUID-800F2CC8-C4BC-4AE7-B29A-1BFBE01D9979__GUID-033837DB-93BE-4480-AB46-CED193887B99">Step 6a: Place Your <code class="codeph">LoginModule</code> and Application Code in JAR Files
                        </p>
                        <p>Place your <code class="codeph">LoginModule</code> and application code in separate JAR files, in preparation for referencing the JAR files in the policy in <a href="java-authentication-and-authorization-service-jaas-loginmodule-developers-guide1.html#GUID-800F2CC8-C4BC-4AE7-B29A-1BFBE01D9979__STEP6CSETLOGINMODULEANDAPPLICATIONJ-83D21A8B">Step 6b: Set LoginModule and Application JAR File Permissions</a>. Here is a sample command for creating a JAR file:
                        </p><pre class="pre codeblock"><code>jar cvf &lt;JAR file name&gt; &lt;list of classes, separated by spaces&gt;
</code></pre><p>This command creates a JAR file with the specified name containing the specified classes.</p>
                        <p>For more information on the <span class="bold">jar</span> tool, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/java/javase/11/security&amp;id=JSWOR614" target="_blank">jar</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-800F2CC8-C4BC-4AE7-B29A-1BFBE01D9979__STEP6CSETLOGINMODULEANDAPPLICATIONJ-83D21A8B">
                        <p class="subhead3" id="GUID-800F2CC8-C4BC-4AE7-B29A-1BFBE01D9979__GUID-35E27494-91ED-4B42-AF0C-A6E8AEA620E5">Step 6b: Set <code class="codeph">LoginModule</code> and Application JAR File Permissions
                        </p>
                        <p>If your <code class="codeph">LoginModule</code> and/or application performs security-sensitive tasks that will trigger security checks (making network connections, reading or writing files on a local disk, etc.), it will need to be granted the required permissions if it is run while a security manager is installed; see <a href="permissions-jdk1.html#GUID-1E8E213A-D7F2-49F1-A2F0-EFB3397A8C95" title="A permission represents access to a system resource. In order for a resource access to be allowed for an applet (or an application running with a security manager), the corresponding permission must be explicitly granted to the code attempting the access.">Permissions in the JDK</a>.
                        </p>
                        <p>Since <code class="codeph">LoginModule</code>s usually associate <code class="codeph">Principal</code>s and credentials with an authenticated Subject, some types of permissions a <code class="codeph">LoginModule</code> will typically require are <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/AuthPermission.html" target="_blank"><span class="apiname">AuthPermission</span></a>s with target names "modifyPrincipals", "modifyPublicCredentials", and "modifyPrivateCredentials".
                        </p>
                        <p>A sample statement granting permissions to a <code class="codeph">LoginModule</code> whose code is in <code class="codeph">MyLM.jar</code> appears below. Such a statement could appear in a policy file. In this example, the <code class="codeph">MyLM.jar</code> file is assumed to be in the <code class="codeph">/localWork</code> directory.
                        </p><pre class="pre codeblock"><code>grant codeBase "file:/localWork/MyLM.jar" {
    permission javax.security.auth.AuthPermission "modifyPrincipals";
    permission javax.security.auth.AuthPermission "modifyPublicCredentials";
    permission javax.security.auth.AuthPermission "modifyPrivateCredentials";
};
</code></pre><div class="infoboxnote" id="GUID-800F2CC8-C4BC-4AE7-B29A-1BFBE01D9979__GUID-AF562355-EB12-48C5-A4A3-686DB9A8DA32">
                           <p class="notep1">Note:</p> Since a <code class="codeph">LoginModule</code> is always invoked within an <code class="codeph">AccessController.doPrivileged</code> call, it should not have to call <code class="codeph">doPrivileged</code> itself. If it does, it may inadvertently open up a security hole. For example, a <code class="codeph">LoginModule</code> that invokes the application-provided <code class="codeph">CallbackHandler</code> inside a <code class="codeph">doPrivileged</code> call opens up a security hole by permitting the application's <code class="codeph">CallbackHandler</code> to gain access to resources it would otherwise not have been able to access.
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-800F2CC8-C4BC-4AE7-B29A-1BFBE01D9979__STEP6DCREATEACONFIGURATIONREFERENCI-83D21DD1">
                        <p class="subhead3" id="GUID-800F2CC8-C4BC-4AE7-B29A-1BFBE01D9979__GUID-38008F4A-62F7-45D8-B3DF-04E9B499C382">Step 6c: Create a Configuration Referencing the LoginModule</p>
                        <p>Because JAAS supports a pluggable authentication architecture, your new <code class="codeph">LoginModule</code> can be used without requiring modifications to existing applications. Only the login <code class="codeph">Configuration</code> needs to be updated in order to indicate use of a new <code class="codeph">LoginModule</code>.
                        </p>
                        <p>The default <code class="codeph">Configuration</code> implementation from Oracle reads configuration information from configuration files, as described in <a href="https://docs.oracle.com/javase/10/docs/api/com/sun/security/auth/login/ConfigFile.html" target="_blank"><span class="apiname">ConfigFile</span></a>.
                        </p>
                        <p>Create a configuration file to be used for testing. For example, to configure the previously-mentioned hypothetical IBM <code class="codeph">LoginModule</code> for an application, the configuration file might look like this:
                        </p><pre class="pre codeblock"><code>    AppName {
        com.ibm.auth.Module REQUIRED debug=true;
    };
</code></pre><p>where <code class="codeph">AppName</code> should be whatever name the application uses to refer to this entry in the login configuration file. The application specifies this name as the first argument to the <code class="codeph">LoginContext</code> constructor.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-D8079E42-9E73-4378-9D34-E528BE727857" name="GUID-D8079E42-9E73-4378-9D34-E528BE727857"></a><h4 id="JSSEC-GUID-D8079E42-9E73-4378-9D34-E528BE727857" class="sect4">Step 7: Test Use of the LoginModule</h4>
                  <div>
                     <p>Test your application and its use of the <code class="codeph">LoginModule</code>. When you run the application, specify the login configuration file to be used. For example, suppose your application is named <code class="codeph">MyApp</code>, it is located in <code class="codeph">MyApp.jar</code>, and your configuration file is <code class="codeph">test.conf</code>.
                     </p>
                     <div class="section">
                        <p>You could run the application and specify the configuration file via the following:</p><pre class="pre codeblock"><code>
java -classpath MyApp.jar
 -Djava.security.auth.login.config=test.conf MyApp
</code></pre><p>Type all that on one line. Multiple lines are used here for legibility.</p>
                        <p>To specify a policy file named <code class="codeph">my.policy</code> and run the application with a security manager installed, do the following:
                        </p><pre class="pre codeblock"><code>
java -classpath MyApp.jar -Djava.security.manager
 -Djava.security.policy=my.policy
 -Djava.security.auth.login.config=test.conf MyApp
</code></pre><p>Again, type all that on one line.</p>
                        <p>You may want to configure the <code class="codeph">LoginModule</code> with a <span class="variable" translate="no">debug</span> option to help ensure that it is working correctly.
                        </p>
                        <p>Debug your code and continue testing as needed. If you have problems, review the steps above and ensure they are all completed.</p>
                        <p>Be sure to vary user input and the <code class="codeph">LoginModule</code> options specified in the configuration file.
                        </p>
                        <p>Be sure to also include testing using different installation options (e.g., placing the <code class="codeph">LoginModule</code> on the class path or module path) and execution environments (with or without a security manager running). In particular, in order to ensure your <code class="codeph">LoginModule</code> works when a security manager is installed and the <code class="codeph">LoginModule</code>, you need to test such an installation and execution environment, after granting required permissions, as described in <a href="java-authentication-and-authorization-service-jaas-loginmodule-developers-guide1.html#GUID-800F2CC8-C4BC-4AE7-B29A-1BFBE01D9979__STEP6CSETLOGINMODULEANDAPPLICATIONJ-83D21A8B">Step 6b: Set LoginModule and Application JAR File Permissions</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>If you find during testing that your <code class="codeph">LoginModule</code> or application needs modifications, make the modifications, recompile (<a href="java-authentication-and-authorization-service-jaas-loginmodule-developers-guide1.html#GUID-6DEAB2A4-2ADE-4CC8-B188-F0A58A38F61C" title="Compile your new LoginModule and the application you will use for testing.">Step 5: Compile the LoginModule and Application</a>).</span></li>
                        <li><span>Place the updated code in a JAR file (<a href="java-authentication-and-authorization-service-jaas-loginmodule-developers-guide1.html#GUID-800F2CC8-C4BC-4AE7-B29A-1BFBE01D9979__STEP6APLACEYOURLOGINMODULEANDAPPLIC-83D213BF">Step 6a: Place Your LoginModule and Application Code in JAR Files</a>).</span></li>
                        <li><span>If needed fix or add to the permissions (<a href="java-authentication-and-authorization-service-jaas-loginmodule-developers-guide1.html#GUID-800F2CC8-C4BC-4AE7-B29A-1BFBE01D9979__STEP6CSETLOGINMODULEANDAPPLICATIONJ-83D21A8B">Step 6b: Set LoginModule and Application JAR File Permissions</a>).</span></li>
                        <li><span>If needed modify the login configuration file (<a href="java-authentication-and-authorization-service-jaas-loginmodule-developers-guide1.html#GUID-800F2CC8-C4BC-4AE7-B29A-1BFBE01D9979__STEP6DCREATEACONFIGURATIONREFERENCI-83D21DD1">Step 6c: Create a Configuration Referencing the LoginModule</a>).</span></li>
                        <li><span>Re-run the application and repeat these steps as needed.</span></li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-F799DF94-AD31-47CC-8760-863492F506EF" name="GUID-F799DF94-AD31-47CC-8760-863492F506EF"></a><h4 id="JSSEC-GUID-F799DF94-AD31-47CC-8760-863492F506EF" class="sect4">Step 8: Document Your LoginModule Implementation</h4>
                  <div>
                     <p>Write documentation for clients of your <code class="codeph">LoginModule</code>.
                     </p>
                     <div class="section">Example documentation you may want to include is:</div>
                     <!-- class="section" -->
                     <ul>
                        <li><span>A README or User Guide describing</span><ol>
                              <li><span>The authentication process employed by your <code class="codeph">LoginModule</code> implementation.</span></li>
                              <li><span>Information on how to install the <code class="codeph">LoginModule</code>.</span></li>
                              <li><span>Configuration options accepted by the <code class="codeph">LoginModule</code>. For each option, specify the option name and possible values (or types of values), as well as the behavior the option controls.</span></li>
                              <li><span>The permissions required by your <code class="codeph">LoginModule</code> when it is run with a security manager.</span></li>
                           </ol>
                        </li>
                        <li><span>An example <code class="codeph">Configuration</code> file that references your new <code class="codeph">LoginModule</code>.</span></li>
                        <li><span>An example policy file granting your <code class="codeph">LoginModule</code> the required permissions.</span></li>
                        <li><span>API documentation. Putting Javadoc comments into your source code as you write it will make the Javadoc API documentation easy to generate.</span></li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-0A07484F-050E-4162-AE90-3A975AB26055" name="GUID-0A07484F-050E-4162-AE90-3A975AB26055"></a><h4 id="JSSEC-GUID-0A07484F-050E-4162-AE90-3A975AB26055" class="sect4">Step 9: Make LoginModule JAR File and Documents Available</h4>
                  <div>
                     <p>Make your <code class="codeph">LoginModule</code> JAR file and documentation available to clients.
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
