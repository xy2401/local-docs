<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The semantics of what deprecation means has been clarified, including whether an API may be removed in the near future.">
      <meta name="description" content="The semantics of what deprecation means has been clarified, including whether an API may be removed in the near future.">
      <title>Enhanced Deprecation</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Core Libraries">
      <meta property="og:description" content="The semantics of what deprecation means has been clarified, including whether an API may be removed in the near future.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Core Libraries">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="java-core-libraries-developer-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-20T08:11:40-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2018">
      <meta name="dcterms.category" content="java">
      <meta name="dcterms.identifier" content="E94895-01">
      
      <meta name="dcterms.product" content="en/java/javase/11">
      <meta name="dcterms.release" content="11">
      <link rel="prev" href="serialization-filtering1.html" title="Previous" type="text/html">
      <link rel="next" href="xml-catalog-api1.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Java Core Libraries Developer Guide">
    <meta name="dcterms.isVersionOf" content="CORE">
  <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="serialization-filtering1.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="xml-catalog-api1.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Core Libraries</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Enhanced Deprecation</li>
            </ol>
            <a id="GUID-23B13A9E-2727-42DC-B03A-E374B3C4CE96" name="GUID-23B13A9E-2727-42DC-B03A-E374B3C4CE96"></a>
            
            <h2 id="JSCOR-GUID-23B13A9E-2727-42DC-B03A-E374B3C4CE96" class="sect2"><span class="enumeration_chapter">3 </span>Enhanced Deprecation
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The semantics of what deprecation means has been clarified, including whether an API may be removed in the near future.</p>
               <p>If you are a library maintainer, you can take advantage of the updated deprecation syntax to inform users of your library about the status of APIs provided by your library. </p>
               <p>If you are a library or application developer, you can use the <code class="codeph">jdeprscan</code> tool to find uses of deprecated JDK API elements in your applications or libraries.
               </p>
               <div class="section">
                  <p class="subhead1" id="GUID-23B13A9E-2727-42DC-B03A-E374B3C4CE96__GUID-DFE09963-C4D2-48B7-AC0D-706CDD96BD19">Topics</p>
                  <ul style="list-style-type: disc;">
                     <li><a href="enhanced-deprecation1.html#GUID-BB859EA8-E6F7-4239-9A52-4F1BDE27BB09" title="Deprecation is a notification to library consumers that they should migrate code from a deprecated API.">Deprecation in the JDK</a></li>
                     <li><a href="enhanced-deprecation1.html#GUID-E182DAF6-282B-4C1F-8CCF-0A61008E3F11" title="Deprecating an API requires using two different mechanisms: the @Deprecated annotation and the @deprecated Javadoc tag.">How to Deprecate APIs</a></li>
                     <li><a href="enhanced-deprecation1.html#GUID-97A6BB09-6F7D-4ED0-BF53-22D40757B0B2" title="When an API is deprecated, developers must be notified. The deprecated API may cause problems in your code, or, if it is eventually removed, cause failures at run time.">Notifications and Warnings</a></li>
                     <li><a href="enhanced-deprecation1.html#GUID-F0CD4B54-CD8A-4153-87F9-7E7481F9AAFC" title="jdeprscan is a static analysis tool that reports on an application’s use of deprecated JDK API elements. Run jdeprscan to help identify possible issues in compiled class files or jar files.">Running jdeprscan</a> 
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div>
            <div class="sect2"><a id="GUID-BB859EA8-E6F7-4239-9A52-4F1BDE27BB09" name="GUID-BB859EA8-E6F7-4239-9A52-4F1BDE27BB09"></a><h3 id="JSCOR-GUID-BB859EA8-E6F7-4239-9A52-4F1BDE27BB09" class="sect3">Deprecation in the JDK</h3>
               <div>
                  <p>Deprecation is a notification to library consumers that they should migrate code from a deprecated API. </p>
                  <div class="p">In the JDK, APIs have been deprecated for widely varying reasons, such as:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The API is dangerous (for example, the <span class="apiname">Thread.stop</span> method).
                           </p>
                        </li>
                        <li>
                           <p>There is a simple rename (for example, AWT <span class="apiname">Component.show/hide</span> replaced by <span class="apiname">setVisible</span>).
                           </p>
                        </li>
                        <li>
                           <p>A newer, better API can be used instead.</p>
                        </li>
                        <li>
                           <p>The deprecated API is going to be removed.</p>
                        </li>
                     </ul>
                  </div>
                  <p>In prior releases, APIs were deprecated but virtually never removed. Starting with JDK 9, APIs may be marked as deprecated for removal. This indicates that the API is eligible to be removed in the next release of the JDK platform. If your application or library consumes any of these APIs, then you should make a plan to migrate from them soon.</p>
                  <p>For a list of deprecated APIs in the current release of the JDK, see the <a href="https://docs.oracle.com/javase/10/docs/api/deprecated-list.html" target="_blank">Deprecated API</a> page in the API specification.
                  </p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-E182DAF6-282B-4C1F-8CCF-0A61008E3F11" name="GUID-E182DAF6-282B-4C1F-8CCF-0A61008E3F11"></a><h3 id="JSCOR-GUID-E182DAF6-282B-4C1F-8CCF-0A61008E3F11" class="sect3">How to Deprecate APIs</h3>
               <div>
                  <p>Deprecating an API requires using two different mechanisms: the <span class="apiname">@Deprecated</span> annotation and the <span class="apiname">@deprecated</span> Javadoc tag. 
                  </p>
                  <p>The <span class="apiname">@Deprecated</span> annotation marks an API in a way that is recorded in the class file and is available at runtime. This allows various tools, such as <code class="codeph">javac</code> and <code class="codeph">jdeprscan</code>, to detect and flag usage of deprecated APIs. The <span class="apiname">@deprecated</span> Javadoc tag is used in documentation of deprecated APIs, for example, to describe the reason for deprecation, and to suggest alternative APIs.
                  </p>
                  <p>Note the capitalization: the annotation starts with an uppercase&nbsp;<span class="italic">D</span> and the Javadoc tag starts with a lowercase&nbsp;<span class="italic">d</span>.
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-E182DAF6-282B-4C1F-8CCF-0A61008E3F11__GUID-6BB43188-865A-4AE4-A600-24412287822E">Using the @Deprecated Annotation</p>
                     <p>To indicate deprecation, precede the module, class, method, or member declaration with <span class="apiname">@Deprecated</span>. The annotation contains these elements:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="apiname">@Deprecated(since="</span><code class="codeph"><span class="codeinlineitalic">&lt;version&gt;</span></code><span class="apiname">")</span></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="italic">&lt;version&gt;</span> is the version when the API was deprecated. This is for informational purposes. The default is the empty string (<code class="codeph">"</code><code class="codeph">"</code>).
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p><span class="apiname">@Deprecated(forRemoval=</span><code class="codeph"><span class="codeinlineitalic">&lt;boolean&gt;</span></code><span class="apiname">)</span></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="apiname">forRemoval=true</span> indicates that the API is subject to removal in a future release.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="apiname">forRemoval=false</span> recommends that code should no longer use this API; however, there is no current intent to remove the API. This is the default value.
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>For example: <span class="apiname">@Deprecated(since="9", forRemoval=true)</span></p>
                     <div class="p">The <span class="apiname">@Deprecated</span> annotation causes the Javadoc-generated documentation to be marked with one of the following, wherever that program element appears:
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Deprecated.</span></p>
                           </li>
                           <li>
                              <p><span class="bold">Deprecated, for removal: This API element is subject to removal in a future version.</span></p>
                           </li>
                        </ul>
                     </div>
                     <p>The <code class="codeph">javadoc</code> tool generates a page named <code>deprecated-list.html</code> which contains the list of deprecated APIs, and adds a link in the navigation bar to that page.
                     </p>
                     <p>The following is a simple example of using the <span class="apiname">@Deprecated</span> annotation from the <span class="apiname">java.lang.Thread</span> class:
                     </p><pre class="pre codeblock"><code>public class Thread implements Runnable {
	... 
	@Deprecated(since="1.2")
	public final void stop() {
		...
	}
	...</code></pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E182DAF6-282B-4C1F-8CCF-0A61008E3F11__GUID-A436F32E-3553-48C7-B37B-7BCCAC4E4B47">Semantics of Deprecation</p>
                     <p>The two elements of the <span class="apiname">@Deprecated</span> annotation give developers the opportunity to clarify what deprecation means for their exported APIs. 
                     </p>
                     <div class="p">For the JDK platform:
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="apiname">@Deprecated(forRemoval=true)</span> indicates that the API is eligible to be removed in a future release of the JDK platform.
                              </p>
                           </li>
                           <li>
                              <p><span class="apiname">@Deprecated(since="</span><code class="codeph"><span class="codeinlineitalic">&lt;version&gt;</span></code><span class="apiname">")</span> contains the JDK version string that indicates when the API element was deprecated, for those deprecated in JDK 9 and beyond.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <p>If you maintain libraries and produce your own APIs, then you probably use the <span class="apiname">@Deprecated</span> annotation. You should determine and communicate your policy around API removals. For example, if you release a new library every 6 weeks, then you may choose to deprecate an API for removal, but not remove it for several months to give your customers time to migrate.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E182DAF6-282B-4C1F-8CCF-0A61008E3F11__GUID-47F5AA2E-7ED7-425A-B07D-B419E29715FD">Using the @deprecated Javadoc Tag</p>
                     <p>Use the <span class="apiname">@deprecated</span> tag in the javadoc comment  of any deprecated program element to indicate that it should no longer be used (even though it may continue to work). This tag is valid in all class, method, or field documentation comments. The <span class="apiname">@deprecated</span> tag must be followed by a space or a newline. In the paragraph following the <span class="apiname">@deprecated</span> tag, explain why the item was deprecated, and suggest what to use instead. Mark the text that refers to  new versions of the same functionality with an <span class="apiname">@link </span> tag.
                     </p>
                     <div class="p">When it encounters an <span class="apiname">@deprecated</span> tag, the <code class="codeph">javadoc</code> tool moves the text following the <span class="apiname">@deprecated</span> tag to the front of the description and precedes it with a warning. For example, this source:<pre class="pre codeblock"><code>  /**
   * ...
   * @deprecated  This method does not properly convert bytes into
   * characters.  As of JDK&nbsp;1.1, the preferred way to do this is via the
   * {@code String} constructors that take a {@link
   * java.nio.charset.Charset}, charset name, or that use the platform's
   * default charset.
   * ...
   */
   @Deprecated(since="1.1")
   public String(byte ascii[], int hibyte) {
      ...
</code></pre></div>
                     <p>generates the following output:</p><pre class="pre codeblock"><code><a href="https://docs.oracle.com/javase/10/docs/api/java/lang/Deprecated.html" target="_blank">@Deprecated</a>(<a href="https://docs.oracle.com/javase/10/docs/api/java/lang/Deprecated.html#since--" target="_blank">since</a>="1.1")
public&nbsp;String​(byte[]&nbsp;ascii, 
              int&nbsp;hibyte)
<span class="bold">Deprecated.</span> This method does not properly convert bytes into characters. As of 
JDK&nbsp;1.1, the preferred way to do this is via the <span class="bold">String</span> constructors that take a 
<a href="https://docs.oracle.com/javase/10/docs/api/java/nio/charset/Charset.html" target="_blank">Charset</a>, charset name, or that use the platform's default charset.</code></pre><p>If you use the <span class="apiname">@deprecated</span> Javadoc tag without the corresponding <span class="apiname">@Deprecated</span> annotation, a warning is generated.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-97A6BB09-6F7D-4ED0-BF53-22D40757B0B2" name="GUID-97A6BB09-6F7D-4ED0-BF53-22D40757B0B2"></a><h3 id="JSCOR-GUID-97A6BB09-6F7D-4ED0-BF53-22D40757B0B2" class="sect3">Notifications and Warnings</h3>
               <div>
                  <p>When an API is deprecated, developers must be notified. The deprecated API may cause problems in your code, or, if it is eventually removed, cause failures at run time.</p>
                  <p>The Java compiler generates warnings about deprecated APIs. There are options to generate more information about warnings, and you can also suppress deprecation warnings.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-97A6BB09-6F7D-4ED0-BF53-22D40757B0B2__GUID-BB4D07CD-36FB-4032-8EAE-DE14765C266B">Compiler Deprecation Warnings</p>
                     <p>If the deprecation is <code class="codeph">forRemoval=false</code>, the Java compiler generates an <span class="q">"ordinary deprecation warning"</span>. If the deprecation is <code class="codeph">forRemoval=true</code>, the compiler generates a <span class="q">"removal warning"</span>.
                     </p>
                     <p>The two kinds of warnings are controlled by separate <code class="codeph">-Xlint </code>flags: <code class="codeph">-Xlint:deprecation</code> and <code class="codeph">-Xlint:removal</code>. The <code class="codeph">javac -Xlint:removal</code> option is enabled by default, so removal warnings are shown.
                     </p>
                     <p></p>
                     <p>The warnings can also be turned off  independently (note the <span class="q">"&#x2013;"</span>): <code class="codeph">-Xlint:-deprecation</code> and <code class="codeph">-Xlint:-removal</code>.
                     </p>
                     <p>This is an example of an ordinary deprecation warning.</p><pre class="pre codeblock"><code>$ <span class="bold">javac src/example/DeprecationExample.java</span>	
Note: src/example/DeprecationExample.java uses or overrides a deprecated API.	
Note: Recompile with -Xlint:deprecation for details.	
</code></pre><p>Use the <code class="codeph">javac -Xlint:deprecation</code> option to see what API is deprecated.
                     </p><pre class="pre codeblock"><code>$ <span class="bold">javac -Xlint:deprecation src/example/DeprecationExample.java</span>	
src/example/DeprecationExample.java:12: warning: [deprecation] getSelectedValues() in JList has been deprecated	
   Object[] values = jlist.getSelectedValues();	
                     ^	
1 warning	</code></pre><p>Here is an example of a removal warning.</p><pre class="pre codeblock"><code>public class RemovalExample {
    public static void main(String[] args) {
        System.runFinalizersOnExit(true);
    }
}
$ <span class="bold">javac RemovalExample.java
</span>RemovalExample.java:3: warning: [removal] runFinalizersOnExit(boolean) in System 
has been deprecated and marked for removal
        System.runFinalizersOnExit(true);
              ^
1 warning
==========</code></pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-97A6BB09-6F7D-4ED0-BF53-22D40757B0B2__GUID-79034A97-AC3B-478C-BB08-68231E917364">Suppressing Deprecation Warnings</p>
                     <p>The <code class="codeph">javac -Xlint</code> options control warnings for all files compiled in a particular run of  <code class="codeph">javac</code>. You may have identified specific locations in source code that generate warnings that you no longer want to see. You can use the <code class="codeph">@SuppressWarnings</code> annotation to suppress warnings whenever that code is compiled. Place the <code class="codeph">@SuppressWarnings</code> annotation at the declaration of the class, method, field, or local variable that uses a deprecated API.
                     </p>
                     <div class="p">The <code class="codeph">@SuppressWarnings</code> options are:
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="apiname">@SuppressWarnings("deprecation")</span> — Suppresses only the ordinary deprecation warnings.
                              </p>
                           </li>
                           <li>
                              <p><span class="apiname">@SuppressWarnings("removal")</span> — Suppresses only the removal warnings.
                              </p>
                           </li>
                           <li>
                              <p><span class="apiname">@SuppressWarnings({"deprecation","removal"})</span> — Suppresses both types of warnings.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <p>Here’s an example of suppressing a warning.</p><pre class="pre codeblock"><code>   @SuppressWarnings("deprecation")
   Object[] values = jlist.getSelectedValues();</code></pre><p>With the <code class="codeph">@SuppressWarnings</code> annotation, no warnings are issued for this line, even if warnings are enabled on the command line.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-F0CD4B54-CD8A-4153-87F9-7E7481F9AAFC" name="GUID-F0CD4B54-CD8A-4153-87F9-7E7481F9AAFC"></a><h3 id="JSCOR-GUID-F0CD4B54-CD8A-4153-87F9-7E7481F9AAFC" class="sect3">Running jdeprscan</h3>
               <div>
                  <p><code class="codeph">jdeprscan</code> is a static analysis tool that reports on an application’s use of deprecated JDK API elements. Run <code class="codeph">jdeprscan</code> to help identify possible issues in compiled class files or jar files.
                  </p>
                  <p>You can find out about deprecated JDK APIs from the compiler notifications. However, if you don’t recompile with every JDK release, or if the warnings were suppressed, or if you depend on third-party libraries that are distributed as binary artifacts, then you should run <code class="codeph">jdeprscan</code>.
                  </p>
                  <p>It’s important to discover dependencies on deprecated APIs before the APIs are removed from the JDK. If the binary uses an API that is deprecated for removal in the current JDK release, and you don’t recompile, then you won’t get any notifications. When the API is removed in a future JDK release, then the binary will simply fail at runtime. <code class="codeph">jdeprscan</code> lets you detect such usage now, well before the API is removed.
                  </p>
                  <p>For the complete syntax of how to run the tool and how to interpret the output, see <code class="codeph"><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/java/javase/11/core&amp;id=JSWOR-GUID-2B7588B0-92DB-4A88-88D4-24D183660A62" target="_blank">jdeprscan</a></code> in the <span><cite>Java Platform, Standard Edition Tools Reference</cite></span>.
                  </p>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
