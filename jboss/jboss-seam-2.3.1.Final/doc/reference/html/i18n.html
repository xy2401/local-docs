<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Chapter 17. Internationalization, localization and themes</title><link rel="stylesheet" href="css/seamframework.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.74.0"/><link rel="home" href="index.html" title="Seam - Contextual Components"/><link rel="up" href="index.html" title="Seam - Contextual Components"/><link rel="prev" href="security.html" title="Chapter 16. Security"/><link rel="next" href="text.html" title="Chapter 18. Seam Text"/></head><body><p id="title"><a href="http://www.seamframework.org" class="site_href"><strong>SeamFramework.org</strong></a><a href="http://www.seamframework.org/Documentation" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="security.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="text.html"><strong>Next</strong></a></li></ul><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="i18n"/>Chapter 17. Internationalization, localization and themes</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="i18n.html#d0e13916">17.1. Internationalizing your app</a></span></dt><dd><dl><dt><span class="section"><a href="i18n.html#d0e13926">17.1.1. Application server configuration</a></span></dt><dt><span class="section"><a href="i18n.html#d0e13942">17.1.2. Translated application strings</a></span></dt><dt><span class="section"><a href="i18n.html#d0e13970">17.1.3. Other encoding settings</a></span></dt></dl></dd><dt><span class="section"><a href="i18n.html#locales">17.2. Locales</a></span></dt><dt><span class="section"><a href="i18n.html#labels">17.3. Labels</a></span></dt><dd><dl><dt><span class="section"><a href="i18n.html#d0e14067">17.3.1. Defining labels</a></span></dt><dt><span class="section"><a href="i18n.html#d0e14140">17.3.2. Displaying labels</a></span></dt><dt><span class="section"><a href="i18n.html#d0e14166">17.3.3. Faces messages</a></span></dt></dl></dd><dt><span class="section"><a href="i18n.html#d0e14184">17.4. Timezones</a></span></dt><dt><span class="section"><a href="i18n.html#d0e14213">17.5. Themes</a></span></dt><dt><span class="section"><a href="i18n.html#d0e14258">17.6. Persisting locale and theme preferences via cookies</a></span></dt></dl></div><p>Seam makes it easy to build internationalized applications. 
	First, let's walk through all the stages needed to 
	internationalize and localize your app. Then we'll take a look at 
	the components Seam bundles.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e13916"/>17.1. Internationalizing your app</h2></div></div></div><p>A JEE application consists of many components and all of them 
		must be configured properly for your application to be 
		localized.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Note that all i18n features in Seam work only in JSF 
			context.</p></div><p>Starting at the bottom, the first step is to ensure that your 
		database server and client is using the correct character encoding 
		for your locale. Normally you'll want to use UTF-8. How to do 
		this is outside the scope of this tutorial.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e13926"/>17.1.1. Application server configuration</h3></div></div></div><p>To ensure that the application server receives the request 
			parameters in the correct encoding from client requests you have to 
			configure the tomcat connector. If you use JBoss AS, add the system 
			properties <span class="property">
			org.apache.catalina.connector.URI_ENCODING</span> and <span class="property">
			org.apache.catalina.connector.USE_BODY_ENCODING_FOR_QUERY_STRING</span> 
			to the server configuration. For JBoss AS 7.1.1 change <code class="filename">
			${JBOSS_HOME}/standalone/configuration/standalone.xml</code>:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">system-properties</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.apache.catalina.connector.URI_ENCODING&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;UTF-8&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.apache.catalina.connector.USE_BODY_ENCODING_FOR_QUERY_STRING&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">system-properties</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e13942"/>17.1.2. Translated application strings</h3></div></div></div><p>You'll also need localized strings for all the <span class="emphasis"><em>
			messages</em></span> in your application (for example field labels on 
			your views). First you need to ensure that your resource bundle is 
			encoded using the desired character encoding. By default ASCII is 
			used. Although ASCII is enough for many languages, it doesn't 
			provide characters for all languages.</p><p>Resource bundles must be created in ASCII, or use Unicode 
			escape codes to represent Unicode characters. Since you don't 
			compile a property file to byte code, there is no way to tell the 
			JVM which character set to use. So you must use either ASCII 
			characters or escape characters not in the ASCII character set. You 
			can represent a Unicode character in any Java file using \uXXXX, 
			where XXXX is the hexadecimal representation of the character.</p><p>You can write your translation of labels (
			<a class="xref" href="i18n.html#labels" title="17.3. Labels">Section 17.3, “Labels”</a>) to your messages resource bundle in the 
			native encoding and then convert the content of the file into the 
			escaped format through the tool <code class="literal">native2ascii</code> 
			provided in the JDK. This tool will convert a file written in your 
			native encoding to one that represents non-ASCII characters as 
			Unicode escape sequences.</p><p>Usage of this tool is described 
			<a class="ulink" href="http://java.sun.com/j2se/1.5.0/docs/tooldocs/index.html#intl">
			here for Java 5</a> or 
			<a class="ulink" href="http://java.sun.com/javase/6/docs/technotes/tools/#intl">
			here for Java 6</a>. For example, to convert a file from 
			UTF-8:</p><pre class="programlisting"><code class="prompt">$ native2ascii -encoding UTF-8 messages_cs.properties &gt; messages_cs_escaped.properties</code></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e13970"/>17.1.3. Other encoding settings</h3></div></div></div><p>We need to make sure that the view displays your localized 
			data and messages using the correct character set and also any data 
			submitted uses the correct encoding.</p><p>To set the display character encoding, you need to use the 
			<code class="literal">&lt;f:view locale="cs_CZ"/&gt;</code> tag 
			(here we tell JSF to use the Czech locale). You may want to change 
			the encoding of the xml document itself if you want to embed 
			localized strings in the xml. To do this alter the encoding 
			attribute in xml declaration <code class="literal">&lt;?xml 
			version="1.0" encoding="UTF-8"?&gt;</code> as 
			required.</p><p>Also JSF/Facelets should submit any requests using the 
			specified character encoding, but to make sure any requests that 
			don't specify an encoding you can force the request encoding 
			using a servlet filter. Configure this in <code class="literal">
			components.xml</code>:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">web:character-encoding-filter</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">encoding</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;UTF-8&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">override-client</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">url-pattern</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;*.seam&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="locales"/>17.2. Locales</h2></div></div></div><p>Each user login session has an associated instance of <code class="literal">
		java.util.Locale</code> (available to the application as a 
		component named <code class="literal">locale</code>). Under normal 
		circumstances, you won't need to do any special configuration to 
		set the locale. Seam just delegates to JSF to determine the active 
		locale:</p><div class="itemizedlist"><ul><li><p>If there is a locale associated with the HTTP request (the 
				browser locale), and that locale is in the list of supported 
				locales from <code class="literal">faces-config.xml</code>, use that locale 
				for the rest of the session.</p></li><li><p>Otherwise, if a default locale was specified in the <code class="literal">
				faces-config.xml</code>, use that locale for the rest of the 
				session.</p></li><li><p>Otherwise, use the default locale of the server.</p></li></ul></div><p>It is <span class="emphasis"><em>possible</em></span> to set the locale manually 
		via the Seam configuration properties <code class="literal">
		org.jboss.seam.international.localeSelector.language</code>, 
		<code class="literal">
		org.jboss.seam.international.localeSelector.country</code> and 
		<code class="literal">
		org.jboss.seam.international.localeSelector.variant</code>, but we 
		can't think of any good reason to ever do this.</p><p>It is, however, useful to allow the user to set the locale 
		manually via the application user interface. Seam provides built-in 
		functionality for overriding the locale determined by the algorithm 
		above. All you have to do is add the following fragment to a form in 
		your JSP or Facelets page:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{localeSelector.language}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:selectItem</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">itemLabel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;English&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">itemValue</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;en&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:selectItem</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">itemLabel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Deutsch&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">itemValue</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;de&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:selectItem</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">itemLabel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Francais&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">itemValue</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;fr&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{localeSelector.select}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{messages['ChangeLanguage']}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>Or, if you want a list of all supported locales from <code class="literal">
		faces-config.xml</code>, just use:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{localeSelector.localeString}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:selectItems</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{localeSelector.supportedLocales}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{localeSelector.select}&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{messages['ChangeLanguage']}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>When the user selects an item from the drop-down, then clicks 
		the command button, the Seam and JSF locales will be overridden for 
		the rest of the session.</p><p>The brings us to the question of where the supported locales 
		are defined. Typically, you provide a list of locales for which you 
		have matching resource bundles in the <code class="literal">
		&lt;locale-config&gt;</code> element of the JSF configuration file 
		(/META-INF/faces-config.xml). However, you have learned to appreciate 
		that Seam's component configuration mechanism is more powerful 
		than what is provided in Java EE. For that reason, you can configure 
		the supported locales, and the default locale of the server, using 
		the built-in component named <code class="literal">
		org.jboss.seam.international.localeConfig</code>. To use it, you 
		first declare an XML namespace for Seam's international package 
		in the Seam component descriptor. You then define the default locale 
		and supported locales as follows:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">international:locale-config</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">default-locale</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;fr_CA&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">supported-locales</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;en&nbsp;fr_CA&nbsp;fr_FR&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>Naturally, if you pronounce that you support a locale, you 
		better provide a resource bundle to match it! Up next, you'll 
		learn how to define the language-specific labels.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="labels"/>17.3. Labels</h2></div></div></div><p>JSF supports internationalization of user interface labels and 
		descriptive text via the use of <code class="literal">&lt;f:loadBundle 
		/&gt;</code>. You can use this approach in Seam applications. 
		Alternatively, you can take advantage of the Seam <code class="literal">
		messages</code> component to display templated labels with 
		embedded EL expressions.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e14067"/>17.3.1. Defining labels</h3></div></div></div><p>Seam provides a <code class="literal">java.util.ResourceBundle</code> 
			(available to the application as a <code class="literal">
			org.jboss.seam.core.resourceBundle</code>). You'll need to 
			make your internationalized labels available via this special 
			resource bundle. By default, the resource bundle used by Seam is 
			named <code class="literal">messages</code> and so you'll need to define 
			your labels in files named <code class="literal">messages.properties</code>, 
			<code class="literal">messages_en.properties</code>, <code class="literal">
			messages_en_AU.properties</code>, etc. These files usually belong 
			in the <code class="literal">WEB-INF/classes</code> directory.</p><p>So, in <code class="literal">messages_en.properties</code>:</p><pre class="programlisting">Hello=Hello</pre><p>And in <code class="literal">messages_en_AU.properties</code>:</p><pre class="programlisting">Hello=G'day</pre><p>You can select a different name for the resource bundle by 
			setting the Seam configuration property named <code class="literal">
			org.jboss.seam.core.resourceLoader.bundleNames</code>. You can 
			even specify a list of resource bundle names to be searched (depth 
			first) for messages.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">core:resource-loader</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">core:bundle-names</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">mycompany_messages</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">standard_messages</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">core:bundle-names</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">core:resource-loader</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>If you want to define a message just for a particular page, 
			you can specify it in a resource bundle with the same name as the 
			JSF view id, with the leading <code class="literal">/</code> and trailing file 
			extension removed. So we could put our message in <code class="literal">
			welcome/hello_en.properties</code> if we only needed to display 
			the message on <code class="literal">/welcome/hello.jsp</code>.</p><p>You can even specify an explicit bundle name in <code class="literal">
			pages.xml</code>:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">page</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">view-id</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;/welcome/hello.jsp&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">bundle</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;HelloMessages&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>Then we could use messages defined in <code class="literal">
			HelloMessages.properties</code> on <code class="literal">
			/welcome/hello.jsp</code>.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e14140"/>17.3.2. Displaying labels</h3></div></div></div><p>If you define your labels using the Seam resource bundle, 
			you'll be able to use them without having to type <code class="literal">
			&lt;f:loadBundle ... /&gt;</code> on every page. Instead, you can 
			simply type:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{messages['Hello']}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>or:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:outputText</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{messages.Hello}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>Even better, the messages themselves may contain EL 
			expressions:</p><pre class="programlisting">Hello=Hello, #{user.firstName} #{user.lastName}</pre><pre class="programlisting">Hello=G'day, #{user.firstName}</pre><p>You can even use the messages in your code:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">private</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Map</span><!-- <br/> --><span class="java_operator">&lt;</span><!-- <br/> --><span class="java_type">String</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">String</span><!-- <br/> --><span class="java_operator">&gt;</span><!-- <br/> --><span class="java_plain">&nbsp;messages</span><!-- <br/> --><span class="java_separator">;</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">In</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;#{messages['Hello']}&quot;</span><!-- <br/> --><span class="java_separator">)</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">private</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">String</span><!-- <br/> --><span class="java_plain">&nbsp;helloMessage</span><!-- <br/> --><span class="java_separator">;</span></pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e14166"/>17.3.3. Faces messages</h3></div></div></div><p>The <code class="literal">facesMessages</code> component is a 
			super-convenient way to display success or failure messages to the 
			user. The functionality we just described also works for faces 
			messages:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Name</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">&quot;hello&quot;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">Stateless</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">HelloBean</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Hello</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">In</span><span class="java_plain">&nbsp;</span><span class="java_type">FacesMessages</span><span class="java_plain">&nbsp;facesMessages</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;sayIt</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;facesMessages</span><span class="java_separator">.</span><span class="java_plain">addFromResourceBundle</span><span class="java_separator">(</span><span class="java_literal">&quot;Hello&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre><p>This will display <code class="literal">Hello, Gavin King</code> or 
			<code class="literal">G'day, Gavin</code>, depending upon the user's 
			locale.</p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e14184"/>17.4. Timezones</h2></div></div></div><p>There is also a session-scoped instance of <code class="literal">
		java.util.Timezone</code>, named <code class="literal">
		org.jboss.seam.international.timezone</code>, and a Seam component 
		for changing the timezone named <code class="literal">
		org.jboss.seam.international.timezoneSelector</code>. By default, 
		the timezone is the default timezone of the server. Unfortunately, 
		the JSF specification says that all dates and times should be assumed 
		to be UTC, and displayed as UTC, unless a timezone is explicitly 
		specified using <code class="literal">&lt;f:convertDateTime&gt;</code>. This is 
		an extremely inconvenient default behavior.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
				You can use application parameter to set up different default time 
				zone for JSF 2 in 
				<code class="filename">web.xml</code>.
            </p><pre xmlns="" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">context-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">javax.faces.DATETIMECONVERTER_DEFAULT_TIMEZONE_IS_SYSTEM_TIMEZONE</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">param-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">param-value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">param-value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">context-param</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div><p>Seam overrides this behavior, and defaults all dates and times 
		to the Seam timezone. </p><p>Seam also provides a default date converter to convert a string 
		value to a date. This saves you from having to specify a converter on 
		input fields that are simply capturing a date. The pattern is 
		selected according the the user's locale and the time zone is 
		selected as described above.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e14213"/>17.5. Themes</h2></div></div></div><p>Seam applications are also very easily skinnable. The theme API 
		is very similar to the localization API, but of course these two 
		concerns are orthogonal, and some applications support both 
		localization and themes.</p><p>First, configure the set of supported themes:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">theme:theme-selector</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">cookie-enabled</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">theme:available-themes</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">default</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">accessible</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">printable</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">theme:available-themes</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">theme:theme-selector</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>Note that the first theme listed is the default theme.</p><p>Themes are defined in a properties file with the same name as 
		the theme. For example, the <code class="literal">default</code> theme is 
		defined as a set of entries in <code class="literal">default.properties</code>. 
		For example, <code class="literal">default.properties</code> might 
		define:</p><pre class="programlisting">css ../screen.css
template /template.xhtml</pre><p>Usually the entries in a theme resource bundle will be paths to 
		CSS styles or images and names of facelets templates (unlike 
		localization resource bundles which are usually text).</p><p>Now we can use these entries in our JSP or facelets pages. For 
		example, to theme the stylesheet in a facelets page:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">href</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{theme.css}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">rel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stylesheet&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/css&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>Or, when the page definition resides in a subdirectory:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">link</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">href</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{facesContext.externalContext.requestContextPath}#{theme.css}&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">rel</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;stylesheet&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">type</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;text/css&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre><p>Most powerfully, facelets lets us theme the template used by a 
		<code class="literal">&lt;ui:composition&gt;</code>:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">ui:composition</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:ui</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/facelets&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:h</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/html&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:f</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;http://java.sun.com/jsf/core&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">template</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{theme.template}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>Just like the locale selector, there is a built-in theme 
		selector to allow the user to freely switch themes:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XHTML"><!-- XHTML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{themeSelector.theme}&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">f:selectItems</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{themeSelector.themes}&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">h:selectOneMenu</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">h:commandButton</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">action</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;#{themeSelector.select}&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Select&nbsp;Theme&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e14258"/>17.6. Persisting locale and theme preferences via cookies</h2></div></div></div><p>The locale selector, theme selector and timezone selector all 
		support persistence of locale and theme preference to a cookie. 
		Simply set the <code class="literal">cookie-enabled</code> property in <code class="literal">
		components.xml</code>:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">theme:theme-selector</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">cookie-enabled</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">theme:available-themes</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">default</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">accessible</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">printable</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">value</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">theme:available-themes</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">theme:theme-selector</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">international:locale-selector</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">cookie-enabled</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;true&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="security.html"><strong>Prev</strong>Chapter 16. Security</a></li><li class="up"><a accesskey="u" href="#"><strong>Top of page</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Front page</strong></a></li><li class="next"><a accesskey="n" href="text.html"><strong>Next</strong>Chapter 18. Seam Text</a></li></ul></body></html>