<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="author" content="Eric Bottard">
<title>Spring Shell Reference Documentation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:initial}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px 0}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:.4em .75em 0 .75em;line-height:1;vertical-align:top}
.colist>table tr>td:first-of-type img{max-width:initial}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
<!-- Generate a nice TOC -->
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js"></script>
<!-- We do not need the tocify CSS because the asciidoc CSS already provides most of what we neeed -->

<style>
.tocify-header {
    font-style: italic;
}

.tocify-subheader {
    font-style: normal;
}

.tocify ul {
    margin: 0;
 }

.tocify-focus {
    color: #7a2518;
    background-color: rgba(0, 0, 0, 0.1);
}

.tocify-focus > a {
    color: #7a2518;
}
</style>

<script type="text/javascript">
    $(function () {
        // Add a new container for the tocify toc into the existing toc so we can re-use its
        // styling
        $("#toc").append("<div id='generated-toc'></div>");
        $("#generated-toc").tocify({
            extendPage: false,
            context: "#content",
            highlightOnScroll: false,
            hideEffect: "slideUp",
            // Use the IDs that asciidoc already provides so that TOC links and intra-document
            // links are the same. Anything else might confuse users when they create bookmarks.
            hashGenerator: function(text, element) {
                return $(element).attr("id");
            },
            // Smooth scrolling doesn't work properly if we use the asciidoc IDs
            smoothScroll: false,
            // Set to 'none' to use the tocify classes
            theme: "none",
            // Handle book (may contain h1) and article (only h2 deeper)
            selectors: $( "#content" ).has( "h1" ).size() > 0 ? "h1,h2,h3,h4,h5" : "h2,h3,h4,h5",
            ignoreSelector: ".discrete"
        });

        // Switch between static asciidoc toc and dynamic tocify toc based on browser size
        // This is set to match the media selectors in the asciidoc CSS
        // Without this, we keep the dynamic toc even if it is moved from the side to preamble
        // position which will cause odd scrolling behavior
        var handleTocOnResize = function() {
            if ($(document).width() < 768) {
                $("#generated-toc").hide();
                $(".sectlevel0").show();
                $(".sectlevel1").show();
            }
            else {
                $("#generated-toc").show();
                $(".sectlevel0").hide();
                $(".sectlevel1").hide();
            }
        }

        $(window).resize(handleTocOnResize);
        handleTocOnResize();
    });
</script>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Spring Shell Reference Documentation</h1>
<div class="details">
<span id="author" class="author">Eric Bottard</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_what_is_spring_shell">What is Spring Shell?</a></li>
<li><a href="#_using_spring_shell">Using Spring Shell</a>
<ul class="sectlevel2">
<li><a href="#_getting_started">Getting Started</a></li>
<li><a href="#_writing_your_own_commands">Writing your own Commands</a></li>
<li><a href="#_invoking_your_commands">Invoking your Commands</a></li>
<li><a href="#validating-command-arguments">Validating Command Arguments</a></li>
<li><a href="#dynamic-command-availability">Dynamic Command Availability</a></li>
<li><a href="#organizing-commands">Organizing Commands</a></li>
<li><a href="#built-in-commands">Built-In Commands</a></li>
<li><a href="#_customizing_the_shell">Customizing the Shell</a></li>
</ul>
</li>
<li><a href="#extending-spring-shell">Extending Spring Shell</a>
<ul class="sectlevel2">
<li><a href="#support-for-shell-1-and-jcommander">Support for Spring Shell 1 and JCommander</a></li>
<li><a href="#_discovering_methods_that_can_act_as_commands">Discovering Methods that Can Act as Commands</a></li>
<li><a href="#_resolving_parameter_values">Resolving Parameter Values</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Version 2.0.1.RELEASE</p>
</div>
<div class="paragraph">
<p>&#169; 2017 Pivotal Software, Inc.</p>
</div>
<div class="paragraph">
<p><em>Copies of this document may be made for your own use and for distribution to
others, provided that you do not charge any fee for such copies and further
provided that each copy contains this Copyright Notice, whether distributed in
print or electronically.</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_is_spring_shell">What is Spring Shell?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Not all applications need a fancy web user interface!
Sometimes, interacting with an application using an interactive terminal is
the most appropriate way to get things done.</p>
</div>
<div class="paragraph">
<p>Spring Shell allows one to easily create such a runnable application, where the
user will enter textual commands that will get executed until the program terminates.
The Spring Shell project provides the infrastructure to create such a REPL (Read, Eval,
Print Loop), allowing the developer to concentrate on the commands implementation, using
the familiar Spring programming model.</p>
</div>
<div class="paragraph">
<p>Advanced features such as parsing, <kbd>TAB</kbd> completion, colorization of output, fancy ascii-art
table display, input conversion and validation all come for free, with the developer only
having to focus on core command logic.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_spring_shell">Using Spring Shell</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_getting_started">Getting Started</h3>
<div class="paragraph">
<p>To see what Spring Shell has to offer, let&#8217;s write a trivial shell application that
has a simple command to add two numbers together.</p>
</div>
<div class="sect3">
<h4 id="_let_s_write_a_simple_boot_app">Let&#8217;s Write a Simple Boot App</h4>
<div class="paragraph">
<p>Starting with version 2, Spring Shell has been rewritten from the ground up with various
enhancements in mind, one of which is easy integration with Spring Boot, although it is
not a strong requirement.
For the purpose of this tutorial, let&#8217;s create a simple Boot application, for example
using <a href="http://start.spring.io" class="bare">start.spring.io</a>. This minimal application only depends on <code>spring-boot-starter</code>
and configures the <code>spring-boot-maven-plugin</code>, generating an executable Ã¼ber-jar:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">...
<span class="tag">&lt;dependencies&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
    ...</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adding_a_dependency_on_spring_shell">Adding a Dependency on Spring Shell</h4>
<div class="paragraph">
<p>The easiest way to get going with Spring Shell is to depend on the <code>spring-shell-starter</code> artifact.
This comes with everything one needs to use Spring Shell and plays nicely with Boot,
configuring only the necessary beans as needed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">...
<span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.springframework.shell<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>spring-shell-starter<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>2.0.1.RELEASE<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
...</code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Given that Spring Shell will kick in and start the REPL by virtue of this dependency being present,
you&#8217;ll need to either build skipping tests (<code>-DskipTests</code>) throughout this tutorial or remove the sample integration test
that was generated by <a href="http://start.spring.io" class="bare">start.spring.io</a>. If you don&#8217;t do so, the integration test will create
the Spring <code>ApplicationContext</code> and, depending on your build tool, will stay stuck in the eval loop or crash with a NPE.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_your_first_command">Your first command</h4>
<div class="paragraph">
<p>It&#8217;s time to add our first command. Create a new class (name it however you want) and
annotate it with <code>@ShellComponent</code> (a variation of <code>@Component</code> that is used to restrict
the set of classes that are scanned for candidate commands).</p>
</div>
<div class="paragraph">
<p>Then, create an <code>add</code> method that takes two ints (<code>a</code> and <code>b</code>) and returns their sum. Annotate it
with <code>@ShellMethod</code> and provide a description of the command in the annotation (the only piece of
information that is required):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.example.demo</span>;

<span class="keyword">import</span> <span class="include">org.springframework.shell.standard.ShellMethod</span>;
<span class="keyword">import</span> <span class="include">org.springframework.shell.standard.ShellComponent</span>;

<span class="annotation">@ShellComponent</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">MyCommands</span> {

    <span class="annotation">@ShellMethod</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Add two integers together.</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="type">int</span> add(<span class="type">int</span> a, <span class="type">int</span> b) {
        <span class="keyword">return</span> a + b;
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_let_s_give_it_a_ride">Let&#8217;s Give It a Ride!</h4>
<div class="paragraph">
<p>Build the application and run the generated jar, like so;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">./mvnw clean install -DskipTests
[...]

java -jar target/demo-0.0.1-SNAPSHOT.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll be greeted by the following screen (the banner comes from Spring Boot, and can be customized
<a href="http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-banner">as usual</a>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v1.5.6.RELEASE)

shell:&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Below is a yellow <code>shell:&gt;</code> prompt that invites you to type commands. Type <code>add 1 2</code> then <kbd>ENTER</kbd> and admire the magic!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">shell:&gt;add 1 2
3</code></pre>
</div>
</div>
<div class="paragraph">
<p>Try to play with the shell (hint: there is a <code>help</code> command) and when you&#8217;re done, type <code>exit</code> <kbd>ENTER</kbd>.</p>
</div>
<div class="paragraph">
<p>The rest of this document delves deeper into the whole Spring Shell programming model.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_writing_your_own_commands">Writing your own Commands</h3>
<div class="paragraph">
<p>The way Spring Shell decides to turn a method into an actual shell command is entirely pluggable
(see <a href="#extending-spring-shell">Extending Spring Shell</a>), but as of Spring Shell 2.x, the recommended way to write commands
is to use the new API described in this section (the so-called <em>standard</em> API).</p>
</div>
<div class="paragraph">
<p>Using the <em>standard</em> API, methods on beans will be turned into executable commands provided that</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the bean class bears the <code>@ShellComponent</code> annotation. This is used to restrict the set of beans that
are considered.</p>
</li>
<li>
<p>the method bears the <code>@ShellMethod</code> annotation.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>@ShellComponent</code> is a stereotype annotation itself meta-annotated with <code>@Component</code>. As such, it
can be used in addition to the filtering mechanism to also <em>declare</em> beans (<em>e.g.</em> using <code>@ComponentScan</code>).</p>
</div>
<div class="paragraph">
<p>The name of the created bean can be customized using the <code>value</code> attribute of the annotation.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_it_s_all_about_documentation">It&#8217;s all about Documentation!</h4>
<div class="paragraph">
<p>The only required attribute of the <code>@ShellMethod</code> annotation is its <code>value</code> attribute, which should be used
to write a short, one-sentence, description of what the command does. This is important so that your users can
get consistent help about your commands without having to leave the shell (see <a href="#help-command">Integrated Documentation with the <code>help</code> Command</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The description of your command should be short, one or two sentences only. For better consistency, it is
recommended that it starts with a capital letter and ends with a dot.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_customizing_the_command_name_s">Customizing the Command Name(s)</h4>
<div class="paragraph">
<p>By default, there is no need to specify the <em>key</em> for your command (<em>i.e.</em> the word(s) that should be used
to invoke it in the shell). The name of the method will be used as the command key, turning camelCase names into
dashed, gnu-style, names (that is, <code>sayHello()</code> will become <code>say-hello</code>).</p>
</div>
<div class="paragraph">
<p>It is possible, however, to explicitly set the command key, using the <code>key</code> attribute of the annotation, like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">        <span class="annotation">@ShellMethod</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">Add numbers.</span><span class="delimiter">&quot;</span></span>, key = <span class="string"><span class="delimiter">&quot;</span><span class="content">sum</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="type">int</span> add(<span class="type">int</span> a, <span class="type">int</span> b) {
                <span class="keyword">return</span> a + b;
        }</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>key</code> attribute accepts multiple values.
If you set multiple keys for a single method, then the command will be registered using those different aliases.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The command key can contain pretty much any character, including spaces. When coming up with names though,
keep in mind that consistency is often appreciated by users (<em>i.e.</em> avoid mixing dashed-names with spaced names, <em>etc.</em>)</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_invoking_your_commands">Invoking your Commands</h3>
<div class="sect3">
<h4 id="_by_name_em_vs_em_positional_parameters">By Name <em>vs.</em> Positional Parameters</h4>
<div class="paragraph">
<p>As seen above, decorating a method with <code>@ShellMethod</code> is the sole requirement for creating a command.
When doing so, the user can set the value of all method parameters in two possible ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>using a parameter key (<em>e.g.</em> <code>--arg value</code>). This approach is called "by name" parameters</p>
</li>
<li>
<p>or without a key, simply setting parameter values in the same order they appear in the method signature ("positional" parameters).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These two approaches can be mixed and matched, with named parameters always taking precedence (as they are less
prone to ambiguity). As such, given the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">        <span class="annotation">@ShellMethod</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Display stuff.</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="predefined-type">String</span> echo(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> c) {
                <span class="keyword">return</span> <span class="predefined-type">String</span>.format(<span class="string"><span class="delimiter">&quot;</span><span class="content">You said a=%d, b=%d, c=%d</span><span class="delimiter">&quot;</span></span>, a, b, c);
        }</code></pre>
</div>
</div>
<div class="paragraph">
<p>then the following invocations are all equivalent, as witnessed by the output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">shell:&gt;echo 1 2 3               <i class="conum" data-value="1"></i><b>(1)</b>
You said a=1, b=2, c=3

shell:&gt;echo --a 1 --b 2 --c 3   <i class="conum" data-value="2"></i><b>(2)</b>
You said a=1, b=2, c=3

shell:&gt;echo --b 2 --c 3 --a 1   <i class="conum" data-value="3"></i><b>(3)</b>
You said a=1, b=2, c=3

shell:&gt;echo --a 1 2 3           <i class="conum" data-value="4"></i><b>(4)</b>
You said a=1, b=2, c=3

shell:&gt;echo 1 --c 3 2           <i class="conum" data-value="5"></i><b>(5)</b>
You said a=1, b=2, c=3</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This uses positional parameters</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is an example of full by-name parameters</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>By-name parameters can be reordered as desired</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>You can use a mix of the two approaches</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The non by-name parameters are resolved in the order they appear</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_customizing_the_named_parameter_key_s">Customizing the Named Parameter Key(s)</h5>
<div class="paragraph">
<p>As seen above, the default strategy for deriving the key for a named parameter is to use the java
name of the method signature and prefixing it with two dashes (<code>--</code>). This can be customized in two ways:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>to change the default prefix for the whole method, use the <code>prefix()</code> attribute of the
<code>@ShellMethod</code> annotation</p>
</li>
<li>
<p>to override the <em>whole</em> key on a per-parameter fashion, annotate the parameter with the <code>@ShellOption</code> annotation.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Have a look at the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">        <span class="annotation">@ShellMethod</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">Display stuff.</span><span class="delimiter">&quot;</span></span>, prefix=<span class="string"><span class="delimiter">&quot;</span><span class="content">-</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="predefined-type">String</span> echo(<span class="type">int</span> a, <span class="type">int</span> b, <span class="annotation">@ShellOption</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">--third</span><span class="delimiter">&quot;</span></span>) <span class="type">int</span> c) {
                <span class="keyword">return</span> <span class="predefined-type">String</span>.format(<span class="string"><span class="delimiter">&quot;</span><span class="content">You said a=%d, b=%d, c=%d</span><span class="delimiter">&quot;</span></span>, a, b, c);
        }</code></pre>
</div>
</div>
<div class="paragraph">
<p>For such a setup, the possible parameter keys will be <code>-a</code>, <code>-b</code> and <code>--third</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is possible to specify several keys for a single parameter. If so, these will be mutually exclusive ways
to specify the same parameter (so only one of them can be used). As an example, here is the signature of the
built-in <a href="#help-command"><code>help</code></a> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">        <span class="annotation">@ShellMethod</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Describe a command.</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="predefined-type">String</span> help(<span class="annotation">@ShellOption</span>({<span class="string"><span class="delimiter">&quot;</span><span class="content">-C</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">--command</span><span class="delimiter">&quot;</span></span>}) <span class="predefined-type">String</span> command) {
                ...
        }</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="optional-parameters-default-values">Optional Parameters and Default Values</h4>
<div class="paragraph">
<p>Spring Shell provides the ability to give parameters default values, which will allow the user to omit
those parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">        <span class="annotation">@ShellMethod</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Say hello.</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="predefined-type">String</span> greet(<span class="annotation">@ShellOption</span>(defaultValue=<span class="string"><span class="delimiter">&quot;</span><span class="content">World</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> who) {
                <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello </span><span class="delimiter">&quot;</span></span> + who;
        }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, the <code>greet</code> command can still be invoked as <code>greet Mother</code> (or <code>greet --who Mother</code>), but the following
is also possible:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>shell:&gt;greet
Hello World</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameter_arity">Parameter Arity</h4>
<div class="paragraph">
<p>Up to now, it has always been assumed that each parameter mapped to a single word entered by the user.
Situations may arise though, when a parameter value should be <em>multi valued</em>. This is driven by the <code>arity()</code>
attribute of the <code>@ShellOption</code> annotation. Simply use a collection or array for the parameter type, and specify how
many values are expected:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">        <span class="annotation">@ShellMethod</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Add Numbers.</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="type">float</span> add(<span class="annotation">@ShellOption</span>(arity=<span class="integer">3</span>) <span class="type">float</span><span class="type">[]</span> numbers) {
                <span class="keyword">return</span> numbers[<span class="integer">0</span>] + numbers[<span class="integer">1</span>] + numbers[<span class="integer">2</span>];
        }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The command may then be invoked using any of the following syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>shell:&gt;add 1 2 3.3
6.3
shell:&gt;add --numbers 1 2 3.3
6.3</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When using the <em>by-name</em> parameter approach, the key should <strong>not</strong> be repeated. The following does <strong>not</strong> work:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>shell:&gt;add --numbers 1 --numbers 2 --numbers 3.3</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_infinite_arity">Infinite Arity</h5>
<div class="paragraph">
<p>TO BE IMPLEMENTED</p>
</div>
</div>
<div class="sect4">
<h5 id="_special_handling_of_boolean_parameters">Special Handling of Boolean Parameters</h5>
<div class="paragraph">
<p>When it comes to parameter arity, there is a kind of parameters that receives a special treatment by default, as
is often the case in command-line utilities.
Boolean (that is, <code>boolean</code> as well as <code>java.lang.Boolean</code>) parameters behave like they have an <code>arity()</code> of <code>0</code> by default, allowing users to set their values using a "flag" approach.
Take a look at the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">        <span class="annotation">@ShellMethod</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Terminate the system.</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="predefined-type">String</span> shutdown(<span class="type">boolean</span> force) {
                <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">You said </span><span class="delimiter">&quot;</span></span> + force;
        }</code></pre>
</div>
</div>
<div class="paragraph">
<p>This allows the following invocations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>shell:&gt;shutdown
You said false
shell:&gt;shutdown --force
You said true</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This special treatment plays well with the <a href="#optional-parameters-default-values">default value</a> specification. Although the default
for boolean parameters is to have their default value be <code>false</code>, you can specify otherwise (<em>i.e.</em>
<code>@ShellOption(defaultValue="true")</code>) and the behavior will be inverted (that is, not specifying the parameter
will result in the value being <code>true</code>, and specifying the flag will result in the value being <code>false</code>)</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Having this behavior of implicit <code>arity()=0</code> prevents the user from specifying a value (<em>e.g.</em> <code>shutdown --force true</code>).
If you would like to allow this behavior (and forego the flag approach), then force an arity of <code>1</code> using the annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">        <span class="annotation">@ShellMethod</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Terminate the system.</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="predefined-type">String</span> shutdown(<span class="annotation">@ShellOption</span>(arity=<span class="integer">1</span>, defaultValue=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>) <span class="type">boolean</span> force) {
                <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">You said </span><span class="delimiter">&quot;</span></span> + force;
        }</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="quotes-handling">Quotes Handling</h4>
<div class="paragraph">
<p>Spring Shell takes user input and tokenizes it in <em>words</em>, splitting on space characters.
If the user wants to provide a parameter value that contains spaces, that value needs to be quoted.
Both single (<code>'</code>) and double (<code>"</code>) quotes are supported, and those quotes will not be part of the value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">        <span class="annotation">@ShellMethod</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Prints what has been entered.</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="predefined-type">String</span> echo(<span class="predefined-type">String</span> what) {
                <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">You said </span><span class="delimiter">&quot;</span></span> + what;
        }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>shell:&gt;echo Hello
You said Hello
shell:&gt;echo 'Hello'
You said Hello
shell:&gt;echo 'Hello World'
You said Hello World
shell:&gt;echo "Hello World"
You said Hello World</code></pre>
</div>
</div>
<div class="paragraph">
<p>Supporting both single and double quotes allows the user to easily embed one type of quotes into
a value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>shell:&gt;echo "I'm here!"
You said I'm here!
shell:&gt;echo 'He said "Hi!"'
You said He said "Hi!"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Should the user need to embed the same kind of quote that was used to quote the whole parameter,
the escape sequence uses the backslash (<code>\</code>) character:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>shell:&gt;echo 'I\'m here!'
You said I'm here!
shell:&gt;echo "He said \"Hi!\""
You said He said "Hi!"
shell:&gt;echo I\'m here!
You said I'm here!</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also possible to escape space characters when not using enclosing quotes, as such:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>shell:&gt;echo This\ is\ a\ single\ value
You said This is a single value</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="interacting-with-the-shell">Interacting with the Shell</h4>
<div class="paragraph">
<p>The Spring Shell project builds on top of the <a href="https://github.com/jline/jline3">JLine</a> library, and as such brings
a lot of nice interactive features, some of which are detailed in this section.</p>
</div>
<div class="paragraph">
<p>First and foremost, Spring Shell supports <kbd>TAB</kbd> completion almost everywhere possible. So if there
is an <code>echo</code> command and the user presses <kbd>e</kbd>, <kbd>c</kbd>, <kbd>TAB</kbd> then <code>echo</code> will appear.
Should there be several commands that start with <code>ec</code>, then the user will be prompted to choose (using <kbd>TAB</kbd> or
<span class="keyseq"><kbd>Shift</kbd>+<kbd>TAB</kbd></span> to navigate, and <kbd>ENTER</kbd> for selection.)</p>
</div>
<div class="paragraph">
<p>But completion does not stop at command keys. It also works for parameter keys (<code>--arg</code>) and even
parameter values, if the application developer registered the appropriate beans (see <a href="#providing-tab-completion">Providing TAB Completion Proposals</a>).</p>
</div>
<div class="paragraph">
<p>Another nice feature of Spring Shell apps is support for line continuation. If a command and its parameters
is too long and does not fit nicely on screen, a user may chunk it and terminate a line with a backslash (<code>\</code>) character
then hit <kbd>ENTER</kbd> and continue on the next line. Uppon submission of the whole command, this will
be parsed as if the user entered a single space on line breaks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>shell:&gt;register module --type source --name foo  \ <i class="conum" data-value="1"></i><b>(1)</b>
&gt; --uri file:///tmp/bar
Successfully registered module 'source:foo'</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>command continues on next line</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Line continuation also automatically triggers if the user has opened a quote (see <a href="#quotes-handling">Quotes Handling</a>)
and hits <kbd>ENTER</kbd> while still in the quotes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>shell:&gt;echo "Hello <i class="conum" data-value="1"></i><b>(1)</b>
dquote&gt; World"
You said Hello World</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>user presses <kbd>ENTER</kbd> here</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Lastly, Spring Shell apps benefit from a lot of keyboard shortcuts you may already be familiar with when
working with your regular OS Shell, borrowed from Emacs. Notable shortcuts include <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>r</kbd></span> to perform
a reverse search, <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>a</kbd></span> and <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>e</kbd></span> to move to beginning and end of line respectively or <kbd>Esc f</kbd> and
<kbd>Esc b</kbd> to move forward (<em>resp.</em> backward) one word at a time.</p>
</div>
<div class="sect4">
<h5 id="providing-tab-completion">Providing TAB Completion Proposals</h5>
<div class="paragraph">
<p>TBD</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="validating-command-arguments">Validating Command Arguments</h3>
<div class="paragraph">
<p>Spring Shell integrates with the <a href="http://beanvalidation.org/">Bean Validation API</a> to support
automatic and self documenting constraints on command parameters.</p>
</div>
<div class="paragraph">
<p>Annotations found on command parameters as well as annotations at the method level will be
honored and trigger validation prior to the command executing. Given the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">        <span class="annotation">@ShellMethod</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Change password.</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="predefined-type">String</span> changePassword(<span class="annotation">@Size</span>(min = <span class="integer">8</span>, max = <span class="integer">40</span>) <span class="predefined-type">String</span> password) {
                <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Password successfully set to </span><span class="delimiter">&quot;</span></span> + password;
        }</code></pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll get this behavior, for free:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>shell:&gt;change-password hello
The following constraints were not met:
	--password string : size must be between 8 and 40 (You passed 'hello')</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Applies to All Command Implementations</div>
<div class="paragraph">
<p>It is important to note that bean validation applies to all command implementations, whether
they use the "standard" API or any other API, through the use of an adapter (see <a href="#support-for-shell-1-and-jcommander">Supporting Other APIs</a>)</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="dynamic-command-availability">Dynamic Command Availability</h3>
<div class="paragraph">
<p>There may be times when registered commands don&#8217;t make sense, due to internal state of the application.
For example, maybe there is a <code>download</code> command, but it only works once the user has used <code>connect</code> on a remote
server. Now, if the user tries to use the <code>download</code> command, the shell should gracefully explain that
the command <em>does</em> exist, but that it is not available at the time.
Spring Shell lets the developer do that, even providing a short explanation of the reason for
the command not being available.</p>
</div>
<div class="paragraph">
<p>There are three possible ways for a command to indicate availability.
They all leverage a no-arg method that returns an instance of <code>Availability</code>.
Let&#8217;s start with a simple example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ShellComponent</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">MyCommands</span> {

    <span class="directive">private</span> <span class="type">boolean</span> connected;

    <span class="annotation">@ShellMethod</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Connect to the server.</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="type">void</span> connect(<span class="predefined-type">String</span> user, <span class="predefined-type">String</span> password) {
        [...]
        connected = <span class="predefined-constant">true</span>;
    }

    <span class="annotation">@ShellMethod</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Download the nuclear codes.</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="type">void</span> download() {
        [...]
    }

    <span class="directive">public</span> Availability downloadAvailability() {
        <span class="keyword">return</span> connected
            ? Availability.available()
            : Availability.unavailable(<span class="string"><span class="delimiter">&quot;</span><span class="content">you are not connected</span><span class="delimiter">&quot;</span></span>);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here you see the <code>connect</code> method is used to connect to the server (details omitted), altering state
of the command through the <code>connected</code> boolean when done.
The <code>download</code> command will be marked as <em>unavailable</em> till the user has connected, thanks to the presence
of a method named exactly as the <code>download</code> command method with the <code>Availability</code> suffix in its name.
The method returns an instance of <code>Availability</code>, constructed with one of the two factory methods.
In case of the command not being available, an explanation has to be provided.
Now, if the user tries to invoke the command while not being connected, here is what happens:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>shell:&gt;download
Command 'download' exists but is not currently available because you are not connected.
Details of the error have been omitted. You can use the stacktrace command to print the full stacktrace.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Information about currently unavailable commands is also leveraged in the integrated help. See <a href="#help-command">Integrated Documentation with the <code>help</code> Command</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The reason provided when the command is not available should read nicely if appended after "Because &#8230;&#8203;"</p>
</div>
<div class="paragraph">
<p>It&#8217;s best not to start the sentence with a capital and not add a final dot.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If for some reason naming the availability method after the name of the command method does not suit you, you
can provide an explicit name using the <code>@ShellMethodAvailability</code>, like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@ShellMethod</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Download the nuclear codes.</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@ShellMethodAvailability</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">availabilityCheck</span><span class="delimiter">&quot;</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">public</span> <span class="type">void</span> download() {
        [...]
    }

    <span class="directive">public</span> Availability availabilityCheck() { <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="keyword">return</span> connected
            ? Availability.available()
            : Availability.unavailable(<span class="string"><span class="delimiter">&quot;</span><span class="content">you are not connected</span><span class="delimiter">&quot;</span></span>);
    }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the names have to match</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Lastly, it is often the case that several commands in the same class share the same internal state and thus
should all be available or unavailable all at one. Instead of having to stick the <code>@ShellMethodAvailability</code>
on all command methods, Spring Shell allows the user to flip things around and put the <code>@ShellMethodAvailabilty</code>
annotation on the availability method, specifying the names of the commands that it controls:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@ShellMethod</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Download the nuclear codes.</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="type">void</span> download() {
        [...]
    }

    <span class="annotation">@ShellMethod</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Disconnect from the server.</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="type">void</span> disconnect() {
        [...]
    }

    <span class="annotation">@ShellMethodAvailability</span>({<span class="string"><span class="delimiter">&quot;</span><span class="content">download</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">disconnect</span><span class="delimiter">&quot;</span></span>})
    <span class="directive">public</span> Availability availabilityCheck() {
        <span class="keyword">return</span> connected
            ? Availability.available()
            : Availability.unavailable(<span class="string"><span class="delimiter">&quot;</span><span class="content">you are not connected</span><span class="delimiter">&quot;</span></span>);
    }</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The default value for the <code>@ShellMethodAvailability.value()</code> attribute is <code>"*"</code> and this serves as a special
wildcard that matches all command names. It&#8217;s thus easy to turn all commands of a single class on or off
with a single availability method. Here is an example below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ShellComponent</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Toggles</span> {
  <span class="annotation">@ShellMethodAvailability</span>
  <span class="directive">public</span> Availability availabilityOnWeekdays() {
    <span class="keyword">return</span> <span class="predefined-type">Calendar</span>.getInstance().get(DAY_OF_WEEK) == SUNDAY
      ? Availability.available()
      : Availability.unavailable(<span class="string"><span class="delimiter">&quot;</span><span class="content">today is not Sunday</span><span class="delimiter">&quot;</span></span>);
  }

  <span class="annotation">@ShellMethod</span>
  <span class="directive">public</span> <span class="type">void</span> foo() {}

  <span class="annotation">@ShellMethod</span>
  <span class="directive">public</span> <span class="type">void</span> bar() {}
}</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Spring Shell does not impose much constraints on how to write commands and how to organize classes.
But it&#8217;s often good practice to put related commands in the same class, and the availability indicators
can benefit from that.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="organizing-commands">Organizing Commands</h3>
<div class="paragraph">
<p>When your shell starts to provide a lot of functionality, you may en up
with a lot of commands, which could be confusing for your users. Typing <code>help</code>
they would see a daunting list of commands, organized by alphabetical order,
which may not always make sense.</p>
</div>
<div class="paragraph">
<p>To alleviate this, Spring Shell provides the ability to group commands together,
with reasonable defaults. Related commands would then end up in the same <em>group</em> (<em>e.g.</em> <code>User Management Commands</code>)
and be displayed together in the help screen and other places.</p>
</div>
<div class="paragraph">
<p>By default, commands will be grouped according to the class they are implemented in,
turning the camel case class name into separate words (so <code>URLRelatedCommands</code> becomes <code>URL Related Commands</code>).
This is a very sensible default, as related commands are often already in the class anyway,
for they need to use the same collaborating objects.</p>
</div>
<div class="paragraph">
<p>If however, this behavior does not suit you, you can override the group for a
command in the following ways, in order of priority:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>specifying a <code>group()</code> in the <code>@ShellMethod</code> annotation</p>
</li>
<li>
<p>placing a <code>@ShellCommandGroup</code> on the class the command is defined in. This will apply
the group for all commands defined in that class (unless overridden as above)</p>
</li>
<li>
<p>placing a <code>@ShellCommandGroup</code> on the package (<em>via</em> <code>package-info.java</code>)
the command is defined in. This will apply to all commands defined in the
package (unless overridden at the method or class level as explained above)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is a short example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">UserCommands</span> {
    <span class="annotation">@ShellMethod</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">This command ends up in the 'User Commands' group</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="type">void</span> foo() {}

    <span class="annotation">@ShellMethod</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">This command ends up in the 'Other Commands' group</span><span class="delimiter">&quot;</span></span>,
            group = <span class="string"><span class="delimiter">&quot;</span><span class="content">Other Commands</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="type">void</span> bar() {}
}

...

<span class="annotation">@ShellCommandGroup</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Other Commands</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SomeCommands</span> {
        <span class="annotation">@ShellMethod</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">This one is in 'Other Commands'</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="type">void</span> wizz() {}

        <span class="annotation">@ShellMethod</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">And this one is 'Yet Another Group'</span><span class="delimiter">&quot;</span></span>,
                group = <span class="string"><span class="delimiter">&quot;</span><span class="content">Yet Another Group</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="type">void</span> last() {}
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="built-in-commands">Built-In Commands</h3>
<div class="paragraph">
<p>Any application built using the <code>spring-shell-starter</code> artifact
(or, to be more precise, the <code>spring-shell-standard-commands</code> dependency) comes with a set of built-in commands.
These commands can be overridden or disabled individually (see <a href="#overriding-or-disabling-built-in-commands">Overriding or Disabling Built-In Commands</a>), but if they&#8217;re
not, this section describes their behavior.</p>
</div>
<div class="sect3">
<h4 id="help-command">Integrated Documentation with the <code>help</code> Command</h4>
<div class="paragraph">
<p>Running a shell application often implies that the user is in a graphically limited environment. And although, in the era of mobile
phones we&#8217;re always connected, accessing a web browser or any other rich UI application such as a pdf viewer may not always
be possible. This is why it is important that the shell commands are correctly self documented, and this is where the <code>help</code>
command comes in.</p>
</div>
<div class="paragraph">
<p>Typing <code>help</code> + <kbd>ENTER</kbd> will list all the known commands to the shell (including <a href="#dynamic-command-availability">unavailable</a> commands)
and a short description of what they do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>shell:&gt;help
AVAILABLE COMMANDS
        add: Add numbers together.
      * authenticate: Authenticate with the system.
      * blow-up: Blow Everything up.
        clear: Clear the shell screen.
        connect: Connect to the system
        disconnect: Disconnect from the system.
        exit, quit: Exit the shell.
        help: Display help about available commands.
        register module: Register a new module.
        script: Read and execute commands from a file.
        stacktrace: Display the full stacktrace of the last error.

Commands marked with (*) are currently unavailable.
Type `help &lt;command&gt;` to learn more.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Typing <code>help &lt;command&gt;</code> will display more detailed information about a command, including the available parameters, their
type and whether they are mandatory or not, <em>etc.</em></p>
</div>
<div class="paragraph">
<p>Here is the <code>help</code> command applied to itself:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>shell:&gt;help help


NAME
	help - Display help about available commands.

SYNOPSYS
	help [[-C] string]

OPTIONS
	-C or --command  string
		The command to obtain help for.  [Optional, default = &lt;none&gt;]</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_clearing_the_screen">Clearing the Screen</h4>
<div class="paragraph">
<p>The <code>clear</code> command does what you would expect and clears the screen, resetting the prompt
in the top left corner.</p>
</div>
</div>
<div class="sect3">
<h4 id="_exitting_the_shell">Exitting the Shell</h4>
<div class="paragraph">
<p>The <code>quit</code> command (also aliased as <code>exit</code>) simply requests the shell to quit, gracefully
closing the Spring application context. If not overridden, a JLine <code>History</code> bean will write a history of all
commands executed to disk, so that they are available again (see <a href="#interacting-with-the-shell">Interacting with the Shell</a>) on next launch.</p>
</div>
</div>
<div class="sect3">
<h4 id="_displaying_details_about_an_error">Displaying Details about an Error</h4>
<div class="paragraph">
<p>When an exception occurs inside command code, it is caught by the shell and a simple, one-line message is displayed
so as not to overflow the user with too much information.
There are cases though when understanding what exactly happened is important (especially if the exception has a nested cause).</p>
</div>
<div class="paragraph">
<p>To this purpose, Spring Shell remembers the last exception that occurred and the user can later use the <code>stacktrace</code>
command to print all the gory details on the console.</p>
</div>
</div>
<div class="sect3">
<h4 id="script-command">Running a Batch of Commands</h4>
<div class="paragraph">
<p>The <code>script</code> command accepts a local file as an argument and will replay commands found there, one at a time.</p>
</div>
<div class="paragraph">
<p>Reading from the file behaves exactly like inside the interactive shell, so lines starting with <code>//</code> will be considered
as comments and ignored, while lines ending with <code>\</code> will trigger line continuation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_customizing_the_shell">Customizing the Shell</h3>
<div class="sect3">
<h4 id="overriding-or-disabling-built-in-commands">Overriding or Disabling Built-In Commands</h4>
<div class="paragraph">
<p><a href="#built-in-commands">Built-in commands</a> are provided with Spring Shell to achieve everyday tasks that many if not
all shell applications need. If you&#8217;re not happy with the way they behave though, you can disable or override them, as explained in this section.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Disabling all Built-in Commands</div>
<div class="paragraph">
<p>If you don&#8217;t need built-in commands at all, then there is an easy way to "disable" them: just don&#8217;t include them!
Either use a maven exclusion on <code>spring-shell-standard-commands</code> or, if you&#8217;re selectively including Spring Shell dependencies,
don&#8217;t bring that one in!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.springframework.shell<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>spring-shell-starter<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>2.0.1.RELEASE<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;exclusions&gt;</span>
        <span class="tag">&lt;exclusion&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.springframework.shell<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>spring-shell-standard-commands<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;/exclusion&gt;</span>
    <span class="tag">&lt;/exclusion&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_disabling_specific_commands">Disabling Specific Commands</h5>
<div class="paragraph">
<p>To disable a single built-in command, simply set the <code>spring.shell.command.&lt;command&gt;.enabled</code> property to <code>false</code> in the app
<code>Environment</code>. One easy way to do this is to pass extra args to the Boot application in your <code>main()</code> entry point:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) <span class="directive">throws</span> <span class="exception">Exception</span> {
                <span class="predefined-type">String</span><span class="type">[]</span> disabledCommands = {<span class="string"><span class="delimiter">&quot;</span><span class="content">--spring.shell.command.help.enabled=false</span><span class="delimiter">&quot;</span></span>}; <i class="conum" data-value="1"></i><b>(1)</b>
                <span class="predefined-type">String</span><span class="type">[]</span> fullArgs = StringUtils.concatenateStringArrays(args, disabledCommands);
                SpringApplication.run(MyApp.class, fullArgs);
        }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This disables the integrated <code>help</code> command</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_overriding_specific_commands">Overriding Specific Commands</h5>
<div class="paragraph">
<p>If, instead of disabling a command you&#8217;d rather provide your own implementation, then you can either</p>
</div>
<div class="ulist">
<ul>
<li>
<p>disable the command like explained above and have your implementation registered with the same name</p>
</li>
<li>
<p>have your implementing class implement the <code>&lt;Command&gt;.Command</code> interface. As an example, here is how
to override the <code>clear</code> command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">MyClear</span> <span class="directive">implements</span> Clear.Command {

    <span class="annotation">@ShellMethod</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Clear the screen, only better.</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="type">void</span> clear() {
        <span class="comment">// ...</span>
    }
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Please Consider Contributing your Changes</div>
<div class="paragraph">
<p>If you feel like your implementation of a standard command could be valuable to the community,
please consider opening a pull-request at <a href="http://github.com/spring-projects/spring-shell" class="bare">github.com/spring-projects/spring-shell</a>.</p>
</div>
<div class="paragraph">
<p>Alternatively, before making any changes on your own, you can open an issue with the project. Feedback is
always welcome!</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_resulthandlers">ResultHandlers</h4>

</div>
<div class="sect3">
<h4 id="_promptprovider">PromptProvider</h4>
<div class="paragraph">
<p>After each command invocation, the shell waits for new input from the user, displaying
a <em>prompt</em> in yellow:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>shell:&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is possible to customize this behavior by registering a bean of type <code>PromptProvider</code>.
Such a bean may use internal state to decide what to display to the user (it may for example
react to <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#context-functionality-events-annotation">application events</a>)
and can use JLine&#8217;s <code>AttributedCharSequence</code> to display fancy ANSI text.</p>
</div>
<div class="paragraph">
<p>Here is a fictional example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Component</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">CustomPromptProvider</span> <span class="directive">implements</span> PromptProvider {

        <span class="directive">private</span> ConnectionDetails connection;

        <span class="annotation">@Override</span>
        <span class="directive">public</span> <span class="predefined-type">AttributedString</span> getPrompt() {
                <span class="keyword">if</span> (connection != <span class="predefined-constant">null</span>) {
                        <span class="keyword">return</span> <span class="keyword">new</span> <span class="predefined-type">AttributedString</span>(connection.getHost() + <span class="string"><span class="delimiter">&quot;</span><span class="content">:&gt;</span><span class="delimiter">&quot;</span></span>,
                                AttributedStyle.DEFAULT.foreground(AttributedStyle.YELLOW));
                }
                <span class="keyword">else</span> {
                        <span class="keyword">return</span> <span class="keyword">new</span> <span class="predefined-type">AttributedString</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">server-unknown:&gt;</span><span class="delimiter">&quot;</span></span>,
                                AttributedStyle.DEFAULT.foreground(AttributedStyle.RED));
                }
        }

        <span class="annotation">@EventListener</span>
        <span class="directive">public</span> <span class="type">void</span> handle(ConnectionUpdatedEvent event) {
                <span class="local-variable">this</span>.connection = event.getConnectionDetails();
        }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_customizing_command_line_options_behavior">Customizing Command Line Options Behavior</h4>
<div class="paragraph">
<p>Spring Shell comes with two default Spring Boot <code>ApplicationRunners</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>InteractiveShellApplicationRunner</code> bootstraps the Shell REPL. It sets up the JLine infrastructure and eventually
calls <code>Shell.run()</code></p>
</li>
<li>
<p><code>ScriptShellApplicationRunner</code> looks for program arguments that start with <code>@</code>, assumes those are local file names and
tries to run commands contained in those files (with the same semantics as the <a href="#script-command">script command</a>) and
then exits the process (by effectively disabling the <code>InteractiveShellApplicationRunner</code>, see below).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If this behavior does not suit you, simply provide one (or more) bean of type <code>ApplicationRunner</code>
and optionally disable the standard ones. You&#8217;ll want to take inspiration from the <code>ScriptShellApplicationRunner</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Order</span>(InteractiveShellApplicationRunner.PRECEDENCE - <span class="integer">100</span>) <span class="comment">// Runs before InteractiveShellApplicationRunner</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">ScriptShellApplicationRunner</span> <span class="directive">implements</span> ApplicationRunner {

        <span class="annotation">@Override</span>
        <span class="directive">public</span> <span class="type">void</span> run(ApplicationArguments args) <span class="directive">throws</span> <span class="exception">Exception</span> {
                <span class="predefined-type">List</span>&lt;<span class="predefined-type">File</span>&gt; scriptsToRun = args.getNonOptionArgs().stream()
                                .filter(s -&gt; s.startsWith(<span class="string"><span class="delimiter">&quot;</span><span class="content">@</span><span class="delimiter">&quot;</span></span>))
                                .map(s -&gt; <span class="keyword">new</span> <span class="predefined-type">File</span>(s.substring(<span class="integer">1</span>)))
                                .collect(Collectors.toList());

                <span class="type">boolean</span> batchEnabled = environment.getProperty(SPRING_SHELL_SCRIPT_ENABLED, <span class="type">boolean</span>.class, <span class="predefined-constant">true</span>);

                <span class="keyword">if</span> (!scriptsToRun.isEmpty() &amp;&amp; batchEnabled) {
                        InteractiveShellApplicationRunner.disable(environment);
                        <span class="keyword">for</span> (<span class="predefined-type">File</span> file : scriptsToRun) {
                                <span class="keyword">try</span> (<span class="predefined-type">Reader</span> reader = <span class="keyword">new</span> <span class="predefined-type">FileReader</span>(file);
                                                FileInputProvider inputProvider = <span class="keyword">new</span> FileInputProvider(reader, parser)) {
                                        shell.run(inputProvider);
                                }
                        }
                }
        }

...</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_customizing_arguments_conversion">Customizing Arguments Conversion</h4>
<div class="paragraph">
<p>Conversion from text input to actual method arguments uses the standard Spring
<a href="https://docs.spring.io/spring/docs/4.3.11.RELEASE/spring-framework-reference/htmlsingle/#core-convert">conversion</a> mechanism.
Spring Shell installs a new <code>DefaultConversionService</code> (with built-in converters enabled)
and registers to it any bean of type <code>Converter&lt;S, T&gt;</code>, <code>GenericConverter</code> or
<code>ConverterFactory&lt;S, T&gt;</code> that it finds in the application context.</p>
</div>
<div class="paragraph">
<p>This means that it&#8217;s really easy to customize conversion to your custom objects of type <code>Foo</code>:
just install a <code>Converter&lt;String, Foo&gt;</code> bean in the context.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ShellComponent</span>
<span class="type">class</span> <span class="class">ConversionCommands</span> {

        <span class="annotation">@ShellMethod</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Shows conversion using Spring converter</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="predefined-type">String</span> conversionExample(DomainObject object) {
                <span class="keyword">return</span> object.getClass();
        }

}

<span class="type">class</span> <span class="class">DomainObject</span> {
        <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">String</span> value;

        DomainObject(<span class="predefined-type">String</span> value) {
                <span class="local-variable">this</span>.value = value;
        }

        <span class="directive">public</span> <span class="predefined-type">String</span> toString() {
                <span class="keyword">return</span> value;
        }
}

<span class="annotation">@Component</span>
<span class="type">class</span> <span class="class">CustomDomainConverter</span> <span class="directive">implements</span> Converter&lt;<span class="predefined-type">String</span>, DomainObject&gt; {

        <span class="annotation">@Override</span>
        <span class="directive">public</span> DomainObject convert(<span class="predefined-type">String</span> source) {
                <span class="keyword">return</span> <span class="keyword">new</span> DomainObject(source);
        }
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Mind your String representation</div>
<div class="paragraph">
<p>As in the example above, it&#8217;s probably a good idea if you can to have
your <code>toString()</code> implementations return the converse of what was used
to create the object instance. This is because when a value fails
validation, Spring Shell prints</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>The following constraints were not met:
	--arg &lt;type&gt; : &lt;message&gt; (You passed '&lt;value.toString()&gt;')</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#validating-command-arguments">Validating Command Arguments</a> for more information.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you want to customize the <code>ConversionService</code> further, you can either</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Have the default one injected in your code and act upon it in some way</p>
</li>
<li>
<p>Override it altogether with your own (custom converters will need to be registered by hand).
The ConversionService used by Spring Shell needs to be <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-autowired-annotation-qualifiers">qualified</a> as <code>"spring-shell"</code>.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="extending-spring-shell">Extending Spring Shell</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="support-for-shell-1-and-jcommander">Support for Spring Shell 1 and JCommander</h3>

</div>
<div class="sect2">
<h3 id="_discovering_methods_that_can_act_as_commands">Discovering Methods that Can Act as Commands</h3>

</div>
<div class="sect2">
<h3 id="_resolving_parameter_values">Resolving Parameter Values</h3>
<div class="sect3">
<h4 id="_supporting_kbd_tab_kbd_completion">Supporting <kbd>TAB</kbd> Completion</h4>

</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-04-25 08:27:56 UTC
</div>
</div>
</body>
</html>