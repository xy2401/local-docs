<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>6.&nbsp;New Features and Enhancements in Spring Framework 4.3</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Spring Framework Reference Documentation"><link rel="up" href="spring-whats-new.html" title="Part&nbsp;II.&nbsp;What&#8217;s New in Spring Framework 4.x"><link rel="prev" href="new-in-4.2.html" title="5.&nbsp;New Features and Enhancements in Spring Framework 4.2"><link rel="next" href="spring-core.html" title="Part&nbsp;III.&nbsp;Core Technologies"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.&nbsp;New Features and Enhancements in Spring Framework 4.3</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="new-in-4.2.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;II.&nbsp;What&#8217;s New in Spring Framework 4.x</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="spring-core.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="new-in-4.3" href="#new-in-4.3"></a>6.&nbsp;New Features and Enhancements in Spring Framework 4.3</h2></div></div></div>

<p>Version 4.3 included a number of improvements, as described in the following sections:</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="xref" href="new-in-4.3.html#v4_3-Core-Container-Improvements" title="6.1&nbsp;Core Container Improvements">Section&nbsp;6.1, &#8220;Core Container Improvements&#8221;</a>
</li><li class="listitem">
<a class="xref" href="new-in-4.3.html#v4_3-Data-Access-Improvements" title="6.2&nbsp;Data Access Improvements">Section&nbsp;6.2, &#8220;Data Access Improvements&#8221;</a>
</li><li class="listitem">
<a class="xref" href="new-in-4.3.html#v4_3-Caching-Improvements" title="6.3&nbsp;Caching Improvements">Section&nbsp;6.3, &#8220;Caching Improvements&#8221;</a>
</li><li class="listitem">
<a class="xref" href="new-in-4.3.html#v4_3-JMS-Improvements" title="6.4&nbsp;JMS Improvements">Section&nbsp;6.4, &#8220;JMS Improvements&#8221;</a>
</li><li class="listitem">
<a class="xref" href="new-in-4.3.html#v4_3-Web-Improvements" title="6.5&nbsp;Web Improvements">Section&nbsp;6.5, &#8220;Web Improvements&#8221;</a>
</li><li class="listitem">
<a class="xref" href="new-in-4.3.html#v4_3-WebSocket-Messaging-Improvements" title="6.6&nbsp;WebSocket Messaging Improvements">Section&nbsp;6.6, &#8220;WebSocket Messaging Improvements&#8221;</a>
</li><li class="listitem">
<a class="xref" href="new-in-4.3.html#v4_3-Testing-Improvements" title="6.7&nbsp;Testing Improvements">Section&nbsp;6.7, &#8220;Testing Improvements&#8221;</a>
</li><li class="listitem">
<a class="xref" href="new-in-4.3.html#v4_3-Support-for-new-library-and-server-generations" title="6.8&nbsp;Support for new library and server generations">Section&nbsp;6.8, &#8220;Support for new library and server generations&#8221;</a>
</li></ul></div>
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="v4_3-Core-Container-Improvements" href="#v4_3-Core-Container-Improvements"></a>6.1&nbsp;Core Container Improvements</h2></div></div></div>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Core container exceptions provide richer metadata to evaluate programmatically.
</li><li class="listitem">
Java 8 default methods get detected as bean property getters/setters.
</li><li class="listitem">
Lazy candidate beans are not being created in case of injecting a primary bean.
</li><li class="listitem">
It is no longer necessary to specify the <code class="literal">@Autowired</code> annotation if the target
bean only defines one constructor.
</li><li class="listitem">
<code class="literal">@Configuration</code> classes support constructor injection.
</li><li class="listitem">
Any SpEL expression used to specify the <code class="literal">condition</code> of an <code class="literal">@EventListener</code> can
now refer to beans (e.g. <code class="literal">@beanName.method()</code>).
</li><li class="listitem">
<span class="emphasis"><em>Composed annotations</em></span> can now override array attributes in meta-annotations
with a single element of the component type of the array. For example, the
<code class="literal">String[] path</code> attribute of <code class="literal">@RequestMapping</code> can be overridden with
<code class="literal">String path</code> in a composed annotation.
</li><li class="listitem">
<code class="literal">@PersistenceContext</code>/<code class="literal">@PersistenceUnit</code> selects a primary <code class="literal">EntityManagerFactory</code>
bean if declared as such.
</li><li class="listitem">
<code class="literal">@Scheduled</code> and <code class="literal">@Schedules</code> may now be used as <span class="emphasis"><em>meta-annotations</em></span> to create
custom <span class="emphasis"><em>composed annotations</em></span> with attribute overrides.
</li><li class="listitem">
<code class="literal">@Scheduled</code> is properly supported on beans of any scope.
</li></ul></div>
</div>
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="v4_3-Data-Access-Improvements" href="#v4_3-Data-Access-Improvements"></a>6.2&nbsp;Data Access Improvements</h2></div></div></div>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">jdbc:initialize-database</code> and <code class="literal">jdbc:embedded-database</code> support a configurable
separator to be applied to each script.
</li></ul></div>
</div>
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="v4_3-Caching-Improvements" href="#v4_3-Caching-Improvements"></a>6.3&nbsp;Caching Improvements</h2></div></div></div>

<p>Spring 4.3 allows concurrent calls on a given key to be synchronized so that the
value is only computed once. This is an opt-in feature that should be enabled via
the new <code class="literal">sync</code> attribute on <code class="literal">@Cacheable</code>. This features introduces a breaking
change in the <code class="literal">Cache</code> interface as a <code class="literal">get(Object key, Callable&lt;T&gt; valueLoader)</code>
method has been added.</p>
<p>Spring 4.3 also improves the caching abstraction as follows:</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
SpEL expressions in caches-related annotations can now refer to beans (i.e.
<code class="literal">@beanName.method()</code>).
</li><li class="listitem">
<code class="literal">ConcurrentMapCacheManager</code> and <code class="literal">ConcurrentMapCache</code> now support the serialization
of cache entries via a new <code class="literal">storeByValue</code> attribute.
</li><li class="listitem">
<code class="literal">@Cacheable</code>, <code class="literal">@CacheEvict</code>, <code class="literal">@CachePut</code>, and <code class="literal">@Caching</code> may now be used as
<span class="emphasis"><em>meta-annotations</em></span> to create custom <span class="emphasis"><em>composed annotations</em></span> with attribute overrides.
</li></ul></div>
</div>
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="v4_3-JMS-Improvements" href="#v4_3-JMS-Improvements"></a>6.4&nbsp;JMS Improvements</h2></div></div></div>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">@SendTo</code> can now be specified at the class level to share a common reply destination.
</li><li class="listitem">
<code class="literal">@JmsListener</code> and <code class="literal">@JmsListeners</code> may now be used as <span class="emphasis"><em>meta-annotations</em></span> to create
custom <span class="emphasis"><em>composed annotations</em></span> with attribute overrides.
</li></ul></div>
</div>
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="v4_3-Web-Improvements" href="#v4_3-Web-Improvements"></a>6.5&nbsp;Web Improvements</h2></div></div></div>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Built-in support for <a class="link" href="mvc.html#mvc-ann-requestmapping-head-options" title="HTTP HEAD and HTTP OPTIONS">HTTP HEAD and HTTP OPTIONS</a>.
</li><li class="listitem">
<p class="simpara">New <code class="literal">@GetMapping</code>, <code class="literal">@PostMapping</code>, <code class="literal">@PutMapping</code>, <code class="literal">@DeleteMapping</code>, and <code class="literal">@PatchMapping</code>
<span class="emphasis"><em>composed annotations</em></span> for <code class="literal">@RequestMapping</code>.</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
See <a class="link" href="mvc.html#mvc-ann-requestmapping-composed" title="Composed @RequestMapping Variants">Composed @RequestMapping Variants</a> for details.
</li></ul></div>
</li><li class="listitem">
<p class="simpara">New <code class="literal">@RequestScope</code>, <code class="literal">@SessionScope</code>, and <code class="literal">@ApplicationScope</code> <span class="emphasis"><em>composed annotations</em></span>
for web scopes.</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
See <a class="link" href="beans.html#beans-factory-scopes-request" title="Request scope">Request scope</a>,
<a class="link" href="beans.html#beans-factory-scopes-session" title="Session scope">Session scope</a>, and
<a class="link" href="beans.html#beans-factory-scopes-application" title="Application scope">Application scope</a> for details.
</li></ul></div>
</li><li class="listitem">
New <code class="literal">@RestControllerAdvice</code> annotation with combined <code class="literal">@ControllerAdvice</code> with <code class="literal">@ResponseBody</code> semantics.
</li><li class="listitem">
<code class="literal">@ResponseStatus</code> is now supported at the class level and inherited by all methods.
</li><li class="listitem">
New <code class="literal">@SessionAttribute</code> annotation for access to session attributes (see <a class="link" href="mvc.html#mvc-ann-sessionattrib-global" title="Using @SessionAttribute to access pre-existing global session attributes">example</a>).
</li><li class="listitem">
New <code class="literal">@RequestAttribute</code> annotation for access to request attributes (see <a class="link" href="mvc.html#mvc-ann-requestattrib" title="Using @RequestAttribute to access request attributes">example</a>).
</li><li class="listitem">
<code class="literal">@ModelAttribute</code> allows preventing data binding via <code class="literal">binding=false</code> attribute (see <a class="link" href="mvc.html#mvc-ann-modelattrib-method-args" title="Using @ModelAttribute on a method argument">reference</a>).
</li><li class="listitem">
<code class="literal">@PathVariable</code> may be declared as optional (for use on <code class="literal">@ModelAttribute</code> methods).
</li><li class="listitem">
Consistent exposure of Errors and custom Throwables to MVC exception handlers.
</li><li class="listitem">
Consistent charset handling in HTTP message converters, including a UTF-8 default for multipart text content.
</li><li class="listitem">
Static resource handling uses the configured <code class="literal">ContentNegotiationManager</code> for media type determination.
</li><li class="listitem">
<code class="literal">RestTemplate</code> and <code class="literal">AsyncRestTemplate</code> support strict URI variable encoding via <code class="literal">DefaultUriTemplateHandler</code>.
</li><li class="listitem">
<code class="literal">AsyncRestTemplate</code> supports request interception.
</li></ul></div>
</div>
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="v4_3-WebSocket-Messaging-Improvements" href="#v4_3-WebSocket-Messaging-Improvements"></a>6.6&nbsp;WebSocket Messaging Improvements</h2></div></div></div>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">@SendTo</code> and <code class="literal">@SendToUser</code> can now be specified at class-level to share a common destination.
</li></ul></div>
</div>
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="v4_3-Testing-Improvements" href="#v4_3-Testing-Improvements"></a>6.7&nbsp;Testing Improvements</h2></div></div></div>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
The JUnit support in the <span class="emphasis"><em>Spring TestContext Framework</em></span> now requires JUnit 4.12 or higher.
</li><li class="listitem">
New <code class="literal">SpringRunner</code> <span class="emphasis"><em>alias</em></span> for the <code class="literal">SpringJUnit4ClassRunner</code>.
</li><li class="listitem">
Test related annotations may now be declared on interfaces&#8201;&#8212;&#8201;for example, for use with
<span class="emphasis"><em>test interfaces</em></span> that make use of Java 8 based interface default methods.
</li><li class="listitem">
An empty declaration of <code class="literal">@ContextConfiguration</code> can now be completely omitted if default
XML files, Groovy scripts, or <code class="literal">@Configuration</code> classes are detected.
</li><li class="listitem">
<code class="literal">@Transactional</code> test methods are no longer required to be <code class="literal">public</code> (e.g., in TestNG and JUnit 5).
</li><li class="listitem">
<code class="literal">@BeforeTransaction</code> and <code class="literal">@AfterTransaction</code> methods are no longer required to be <code class="literal">public</code>
and may now be declared on Java 8 based interface default methods.
</li><li class="listitem">
The <code class="literal">ApplicationContext</code> cache in the <span class="emphasis"><em>Spring TestContext Framework</em></span> is now bounded with a
default maximum size of 32 and a <span class="emphasis"><em>least recently used</em></span> eviction policy. The maximum size
can be configured by setting a JVM system property or Spring property called
<code class="literal">spring.test.context.cache.maxSize</code>.
</li><li class="listitem">
New <code class="literal">ContextCustomizer</code> API for customizing a test <code class="literal">ApplicationContext</code> <span class="emphasis"><em>after</em></span> bean
definitions have been loaded into the context but <span class="emphasis"><em>before</em></span> the context has been refreshed.
Customizers can be registered globally by third parties, foregoing the need to implement a
custom <code class="literal">ContextLoader</code>.
</li><li class="listitem">
<code class="literal">@Sql</code> and <code class="literal">@SqlGroup</code> may now be used as <span class="emphasis"><em>meta-annotations</em></span> to create custom <span class="emphasis"><em>composed
annotations</em></span> with attribute overrides.
</li><li class="listitem">
<code class="literal">ReflectionTestUtils</code> now automatically unwraps proxies when setting or getting a field.
</li><li class="listitem">
Server-side Spring MVC Test supports expectations on response headers with multiple values.
</li><li class="listitem">
Server-side Spring MVC Test parses form data request content and populates request parameters.
</li><li class="listitem">
Server-side Spring MVC Test supports mock-like assertions for invoked handler methods.
</li><li class="listitem">
Client-side REST test support allows indicating how many times a request is expected and
whether the order of declaration for expectations should be ignored (see <a class="xref" href="integration-testing.html#spring-mvc-test-client" title="15.6.3&nbsp;Client-Side REST Tests">Section&nbsp;15.6.3, &#8220;Client-Side REST Tests&#8221;</a>).
</li><li class="listitem">
Client-side REST Test supports expectations for form data in the request body.
</li></ul></div>
</div>
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="v4_3-Support-for-new-library-and-server-generations" href="#v4_3-Support-for-new-library-and-server-generations"></a>6.8&nbsp;Support for new library and server generations</h2></div></div></div>

<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Hibernate ORM 5.2 (still supporting 4.2/4.3 and 5.0/5.1 as well, with 3.6 deprecated now)
</li><li class="listitem">
Hibernate Validator 5.3 (minimum remains at 4.3)
</li><li class="listitem">
Jackson 2.8 (minimum raised to Jackson 2.6+ as of Spring 4.3)
</li><li class="listitem">
OkHttp 3.x (still supporting OkHttp 2.x side by side)
</li><li class="listitem">
Tomcat 8.5 as well as 9.0 milestones
</li><li class="listitem">
Netty 4.1
</li><li class="listitem">
Undertow 1.4
</li><li class="listitem">
WildFly 10.1
</li></ul></div>
<p>Furthermore, Spring Framework 4.3 embeds the updated ASM 5.1, CGLIB 3.2.4, and Objenesis 2.4
in <code class="literal">spring-core.jar</code>.</p>
</div>
</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="new-in-4.2.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="spring-whats-new.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="spring-core.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">5.&nbsp;New Features and Enhancements in Spring Framework 4.2&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Part&nbsp;III.&nbsp;Core Technologies</td></tr></table></div></body></html>