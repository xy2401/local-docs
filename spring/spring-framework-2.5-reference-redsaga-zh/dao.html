<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;10.&nbsp;DAO&#25903;&#25345;</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.60.1"><link rel="home" href="index.html" title="Spring Framework &#24320;&#21457;&#21442;&#32771;&#25163;&#20876;"><link rel="up" href="spring-middle-tier.html" title="Part&nbsp;II.&nbsp;&#20013;&#38388;&#23618;&#25968;&#25454;&#35775;&#38382;"><link rel="previous" href="transaction.html" title="Chapter&nbsp;9.&nbsp;&#20107;&#21153;&#31649;&#29702;"><link rel="next" href="jdbc.html" title="Chapter&nbsp;11.&nbsp;&#20351;&#29992;JDBC&#36827;&#34892;&#25968;&#25454;&#35775;&#38382;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color:white;border:none;height:73px;border:1px solid black;"><a style="border:none;" href="http://www.springframework.org/" title="The Spring Framework"><img style="border:none;" src="images/xdev-spring_logo.jpg"></a><a style="border:none;" href="http://www.springsource.com/" title="SpringSource"><img style="border:none;position:absolute;padding-top:5px;right:42px;" src="images/springsource-banner-rhs.png"></a></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="dao"></a>Chapter&nbsp;10.&nbsp;DAO&#25903;&#25345;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dao-introduction"></a>10.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>
			Spring&#25552;&#20379;&#30340;DAO(&#25968;&#25454;&#35775;&#38382;&#23545;&#35937;)&#25903;&#25345;&#30446;&#30340;&#26159;&#20415;&#20110;&#20197;&#19968;&#33268;&#30340;&#26041;&#24335;&#20351;&#29992;&#19981;&#21516;&#30340;&#25968;&#25454;&#35775;&#38382;&#25216;&#26415;&#65292;
			&#22914;JDBC&#65292;Hibernate&#25110;&#32773;JDO&#31561;&#12290;&#23427;&#19981;&#20165;&#21487;&#20197;&#35753;&#20320;&#26041;&#20415;&#22320;&#22312;&#36825;&#20123;&#25345;&#20037;&#21270;&#25216;&#26415;&#38388;&#20999;&#25442;&#65292;
			&#32780;&#19988;&#35753;&#20320;&#22312;&#32534;&#30721;&#30340;&#26102;&#20505;&#19981;&#29992;&#32771;&#34385;&#22788;&#29702;&#21508;&#31181;&#25216;&#26415;&#20013;&#29305;&#23450;&#30340;&#24322;&#24120;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dao-exceptions"></a>10.2.&nbsp;&#19968;&#33268;&#30340;&#24322;&#24120;&#23618;&#27425;</h2></div></div><div></div></div><p>
			Spring&#25552;&#20379;&#20102;&#19968;&#31181;&#26041;&#20415;&#30340;&#26041;&#27861;&#65292;&#25226;&#29305;&#23450;&#20110;&#26576;&#31181;&#25216;&#26415;&#30340;&#24322;&#24120;&#65292;&#22914;<tt class="classname">SQLException</tt>&#65292;
			&#36716;&#21270;&#20026;&#33258;&#24049;&#30340;&#24322;&#24120;&#65292;&#36825;&#31181;&#24322;&#24120;&#23646;&#20110;&#20197;<tt class="classname">DataAccessException</tt>
			&#20026;&#26681;&#30340;&#24322;&#24120;&#23618;&#27425;&#12290;&#36825;&#20123;&#24322;&#24120;&#23553;&#35013;&#20102;&#21407;&#22987;&#24322;&#24120;&#23545;&#35937;&#65292;&#36825;&#26679;&#23601;&#19981;&#20250;&#26377;&#20002;&#22833;&#20219;&#20309;&#38169;&#35823;&#20449;&#24687;&#30340;&#39118;&#38505;&#12290;
		</p><p>
			&#38500;&#20102;&#23545;JDBC&#24322;&#24120;&#30340;&#23553;&#35013;&#65292;Spring&#20063;&#23545;Hibernate&#24322;&#24120;&#36827;&#34892;&#20102;&#23553;&#35013;&#65292;&#25226;&#23427;&#20204;&#20174;&#19968;&#31181;&#19987;&#26377;&#30340;checked&#24322;&#24120;
			&#65288;Hibernate3.0&#20197;&#21069;&#30340;&#29256;&#26412;&#65289;&#65292;&#36716;&#21270;&#20026;&#19968;&#31995;&#21015;&#25277;&#35937;&#30340;&#36816;&#34892;&#26102;&#24322;&#24120;&#12290;&#23545;JDO&#20063;&#26159;&#36825;&#26679;&#12290;
			&#23427;&#21487;&#20197;&#35753;&#20320;&#36731;&#26494;&#22788;&#29702;&#22823;&#22810;&#25968;&#25345;&#20037;&#21270;&#24322;&#24120;&#65288;&#36825;&#20123;&#24322;&#24120;&#22823;&#22810;&#26159;&#19981;&#21487;&#24674;&#22797;&#30340;&#65292;&#32780;&#19988;&#21482;&#20986;&#29616;&#22312;&#29305;&#23450;
			&#30340;&#23618;&#27425;&#65289;&#65292;&#32780;&#19981;&#20877;&#38656;&#35201;&#22312;DAO&#20013;&#32534;&#20889;&#35752;&#21388;&#30340;&#26679;&#26495;&#24335;&#30340;catch/throw&#20195;&#30721;&#22359;&#21644;&#24322;&#24120;&#22768;&#26126;&#12290;&#20320;&#20173;&#28982;&#21487;&#20197;&#22312;&#38656;&#35201;
			&#30340;&#22320;&#26041;&#25429;&#33719;&#24182;&#22788;&#29702;&#36825;&#20123;&#24322;&#24120;&#12290;&#23601;&#20687;&#25105;&#20204;&#19978;&#38754;&#25552;&#21040;&#30340;&#65292;JDBC&#24322;&#24120;&#65288;&#21253;&#25324;&#29305;&#23450;&#20110;&#26576;&#31181;&#25968;&#25454;&#24211;
			&#26041;&#35328;&#30340;&#24322;&#24120;&#65289;&#20063;&#21487;&#20197;&#34987;&#36716;&#21270;&#20026;&#21516;&#26679;&#30340;&#24322;&#24120;&#23618;&#27425;&#65292;&#36825;&#24847;&#21619;&#30528;&#20320;&#21487;&#20197;&#22312;&#19968;&#33268;&#30340;&#32534;&#31243;&#27169;&#22411;&#19979;&#65292;&#36890;
			&#36807;JDBC&#26469;&#25191;&#34892;&#26576;&#20123;&#25805;&#20316;&#12290;
		</p><p>
			&#19978;&#36848;&#24773;&#20917;&#36866;&#29992;&#20110;Spring&#25903;&#25345;&#30340;&#21508;&#31181;ORM&#26694;&#26550;&#30340;&#27169;&#26495;&#31867;&#12290;&#22914;&#26524;&#20351;&#29992;&#22522;&#20110;&#25318;&#25130;&#22120;&#30340;&#31867;&#65292;&#20320;&#22312;&#24212;&#29992;&#20013;
			&#23601;&#24471;&#33258;&#24049;&#23567;&#24515;&#22788;&#29702;<tt class="classname">HibernateException</tt>&#12289;
			<tt class="classname">JDOException</tt>&#31561;&#65292;&#26368;&#22909;&#26159;&#22996;&#25176;&#32473;
			<tt class="classname">SessionFactoryUtils</tt>&#30340;
			<tt class="methodname">convertHibernateAccessException</tt>&#12289;
			<tt class="methodname">convertJdoAccessException</tt>&#31561;&#26041;&#27861;&#12290;&#36825;&#20123;&#26041;&#27861;&#21487;&#20197;&#25226;&#30456;&#24212;&#30340;&#24322;&#24120;&#36716;
			&#21270;&#20026;&#19982;<tt class="literal">org.springframework.dao</tt>&#20013;&#23450;&#20041;&#30340;&#24322;&#24120;&#23618;&#27425;&#30456;&#20860;&#23481;&#30340;&#24322;&#24120;&#12290;
			&#20854;&#20013;<tt class="classname">JDOException</tt>&#23646;unchecked&#24322;&#24120;&#65292;&#23427;&#20204;&#20063;&#21487;&#20197;&#34987;&#31616;&#21333;&#22320;&#25243;&#20986;&#65292;
			&#20294;&#36825;&#26679;&#20570;&#22312;&#24322;&#24120;&#22788;&#29702;&#26041;&#38754;&#29306;&#29298;&#20102;&#36890;&#29992;&#30340;DAO&#25277;&#35937;&#12290;
		</p><p>
			&#19979;&#22270;&#23637;&#31034;&#20102;Spring&#25552;&#20379;&#30340;&#24322;&#24120;&#23618;&#27425;&#12290;
			&#65288;&#27880;&#24847;&#22270;&#19978;&#25152;&#21253;&#21547;&#30340;&#24322;&#24120;&#31867;&#21482;&#26159;&#25972;&#20010;&#24222;&#22823;&#30340;<tt class="classname">DataAccessException</tt>
			&#24322;&#24120;&#23618;&#27425;&#20013;&#30340;&#19968;&#37096;&#20998;&#12290;&#65289;
		</p><div class="mediaobject" align="center"><img src="images/DataAccessException.gif" align="middle"></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dao-abstract-superclasses"></a>10.3.&nbsp;&#19968;&#33268;&#30340;DAO&#25903;&#25345;&#25277;&#35937;&#31867;</h2></div></div><div></div></div><p>
			&#20026;&#20102;&#20415;&#20110;&#20197;&#19968;&#31181;&#19968;&#33268;&#30340;&#26041;&#24335;&#20351;&#29992;&#21508;&#31181;&#25968;&#25454;&#35775;&#38382;&#25216;&#26415;&#65292;&#22914;JDBC&#12289;JDO&#21644;Hibernate&#65292;
			Spring&#25552;&#20379;&#20102;&#19968;&#22871;<tt class="literal">&#25277;&#35937;</tt>DAO&#31867;&#20379;&#20320;&#25193;&#23637;&#12290;&#36825;&#20123;&#25277;&#35937;&#31867;&#25552;&#20379;&#20102;&#19968;&#20123;&#26041;&#27861;&#65292;&#36890;&#36807;&#23427;&#20204;&#20320;&#21487;&#20197;
			&#33719;&#24471;&#19982;&#25968;&#25454;&#35775;&#38382;&#25216;&#26415;&#30456;&#20851;&#30340;&#25968;&#25454;&#28304;&#21644;&#20854;&#20182;&#37197;&#32622;&#20449;&#24687;&#12290;
		</p><div class="itemizedlist"><ul type="disc"><li><p>
					<tt class="classname">JdbcDaoSupport</tt> - JDBC&#25968;&#25454;&#35775;&#38382;&#23545;&#35937;&#30340;&#22522;&#31867;&#12290;
					&#38656;&#35201;&#19968;&#20010;<tt class="interfacename">DataSource</tt>&#65292;&#21516;&#26102;&#20026;&#23376;&#31867;&#25552;&#20379;
					<tt class="classname">JdbcTemplate</tt>&#12290;
				</p></li><li><p>
					<tt class="classname">HibernateDaoSupport</tt> - Hibernate&#25968;&#25454;&#35775;&#38382;&#23545;&#35937;&#30340;&#22522;&#31867;&#12290;
					&#38656;&#35201;&#19968;&#20010;<tt class="interfacename">SessionFactory</tt>&#65292;&#21516;&#26102;&#20026;&#23376;&#31867;&#25552;&#20379;
					<tt class="classname">HibernateTemplate</tt>&#12290;&#20063;&#21487;&#20197;&#36873;&#25321;&#30452;&#25509;&#36890;&#36807;
					&#25552;&#20379;&#19968;&#20010;<tt class="classname">HibernateTemplate</tt>&#26469;&#21021;&#22987;&#21270;&#65292;
					&#36825;&#26679;&#23601;&#21487;&#20197;&#37325;&#29992;&#21518;&#32773;&#30340;&#35774;&#32622;&#65292;&#20363;&#22914;<tt class="interfacename">SessionFactory</tt>&#65292;
					flush&#27169;&#24335;&#65292;&#24322;&#24120;&#32763;&#35793;&#22120;&#65288;exception translator&#65289;&#31561;&#31561;&#12290;
				</p></li><li><p>
					<tt class="classname">JdoDaoSupport</tt> - JDO&#25968;&#25454;&#35775;&#38382;&#23545;&#35937;&#30340;&#22522;&#31867;&#12290;
					&#38656;&#35201;&#35774;&#32622;&#19968;&#20010;<tt class="interfacename">PersistenceManagerFactory</tt>&#65292;
					&#21516;&#26102;&#20026;&#23376;&#31867;&#25552;&#20379;<tt class="classname">JdoTemplate</tt>&#12290;
				</p></li><li><p>
					<tt class="classname">JpaDaoSupport</tt> - JPA&#25968;&#25454;&#35775;&#38382;&#23545;&#35937;&#30340;&#22522;&#31867;&#12290;
					&#38656;&#35201;&#19968;&#20010;<tt class="interfacename">EntityManagerFactory</tt>&#65292;&#21516;&#26102;
					&#20026;&#23376;&#31867;&#25552;&#20379;<tt class="classname">JpaTemplate</tt>&#12290;
				</p></li></ul></div></div></div><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="transaction.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="jdbc.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;9.&nbsp;&#20107;&#21153;&#31649;&#29702;&nbsp;</td><td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="http://www.springsource.com/" title="SpringSource">Sponsored by SpringSource</a></span></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;11.&nbsp;&#20351;&#29992;JDBC&#36827;&#34892;&#25968;&#25454;&#35775;&#38382;</td></tr></table></div></body></html>