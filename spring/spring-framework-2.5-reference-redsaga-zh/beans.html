<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;3.&nbsp;IoC(&#25511;&#21046;&#21453;&#36716;)&#23481;&#22120;</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.60.1"><link rel="home" href="index.html" title="Spring Framework &#24320;&#21457;&#21442;&#32771;&#25163;&#20876;"><link rel="up" href="spring-core.html" title="Part&nbsp;I.&nbsp;&#26680;&#24515;&#25216;&#26415;"><link rel="previous" href="spring-core.html" title="Part&nbsp;I.&nbsp;&#26680;&#24515;&#25216;&#26415;"><link rel="next" href="resources.html" title="Chapter&nbsp;4.&nbsp;&#36164;&#28304;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color:white;border:none;height:73px;border:1px solid black;"><a style="border:none;" href="http://www.springframework.org/" title="The Spring Framework"><img style="border:none;" src="images/xdev-spring_logo.jpg"></a><a style="border:none;" href="http://www.springsource.com/" title="SpringSource"><img style="border:none;position:absolute;padding-top:5px;right:42px;" src="images/springsource-banner-rhs.png"></a></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="beans"></a>Chapter&nbsp;3.&nbsp;IoC(&#25511;&#21046;&#21453;&#36716;)&#23481;&#22120;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="beans-introduction"></a>3.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>&#26412;&#31456;&#35206;&#30422;&#20102;Spring&#26694;&#26550;&#23545;&#25511;&#21046;&#21453;&#36716;(Inversion of Control&#65292;IoC)<sup>[<a name="d0e1159" href="beans.html#ftn.d0e1159">1</a>]</sup>&#29702;&#35770;&#30340;&#23454;&#29616;&#12290;</p><div class="sidebar"><p class="title"><b><tt class="interfacename">BeanFactory</tt> &#36824;&#26159;
      <tt class="interfacename">ApplicationContext</tt>?</b></p><p>&#22312;&#23454;&#38469;&#24212;&#29992;&#20013;&#65292;&#29992;&#25143;&#26377;&#26102;&#20505;&#19981;&#30693;&#36947;&#21040;&#24213;&#26159;&#36873;&#25321;<tt class="interfacename">BeanFactory</tt>&#25509;&#21475;
      &#36824;&#26159;<tt class="interfacename">ApplicationContext</tt>&#25509;&#21475;&#12290; 
      <tt class="interfacename">BeanFactory</tt>&#25509;&#21475;&#25797;&#38271;&#20110;&#22788;&#29702;bean&#30340;&#21021;&#22987;&#21270;&#21644;&#37197;&#32622;&#65292;&#32780;<tt class="interfacename">
      ApplicationContext</tt>&#25509;&#21475;&#38500;&#20102;&#22788;&#29702;&#19978;&#36848;&#24037;&#20316;&#22806;&#65292;&#23427;<span class="emphasis"><em>&#36824;</em></span>&#38024;&#23545;&#20225;&#19994;&#24341;&#29992;
      &#25552;&#20379;&#20102;<span class="emphasis"><em>&#35768;&#22810;</em></span>&#22522;&#30784;&#25903;&#25345;&#65292;&#27604;&#22914;&#20107;&#21153;&#22788;&#29702;&#21644;AOP&#12290;</p><p><span class="bold"><b>&#31616;&#32780;&#35328;&#20043;&#65292;&#19968;&#33324;&#25226;<tt class="interfacename">ApplicationContext</tt>&#25509;
      &#21475;&#20316;&#20026;&#39318;&#36873;&#12290;</b></span></p><p>&#65288;&#33267;&#20110;&#36825;&#26679;&#20570;&#30340;&#21407;&#30001;&#65292;&#22823;&#23478;&#21487;&#21442;&#35265;<a href="beans.html#context-introduction-ctx-vs-beanfactory" title="3.8.1.&nbsp;BeanFactory &#36824;&#26159;&#xA;      ApplicationContext?">&#31456;&#33410;&#20869;&#23481;</a>&#12290;&#65289;</p></div><p><tt class="literal">org.springframework.beans</tt>&#21450;<tt class="literal">org.springframework.context</tt>&#21253;
	&#26159;Spring IoC&#23481;&#22120;&#30340;&#22522;&#30784;&#12290;<tt class="interfacename"><a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/BeanFactory.html" target="_top">BeanFactory</a>
	</tt>&#25552;&#20379;&#30340;&#39640;&#32423;&#37197;&#32622;&#26426;&#21046;&#65292;&#20351;&#24471;&#31649;&#29702;&#21508;&#31181;&#23545;&#35937;&#25104;&#20026;&#21487;&#33021;&#12290;<tt class="literal">
	<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/context/ApplicationContext.html" target="_top">ApplicationContext</a></tt>
	&#26159;<tt class="interfacename">BeanFactory</tt>&#30340;&#25193;&#23637;&#65292;&#21151;&#33021;&#24471;&#21040;&#20102;&#36827;&#19968;&#27493;&#22686;&#24378;&#65292;&#27604;&#22914;&#26356;&#26131;
	&#19982;Spring AOP&#38598;&#25104;&#12289;&#36164;&#28304;&#22788;&#29702;(&#22269;&#38469;&#21270;&#22788;&#29702;)&#12289;&#20107;&#20214;&#20256;&#36882;&#21450;&#21508;&#31181;&#19981;&#21516;&#24212;&#29992;&#23618;&#30340;context&#23454;&#29616;
	(&#22914;&#38024;&#23545;web&#24212;&#29992;&#30340;<tt class="interfacename">WebApplicationContext</tt>)&#12290;</p><p>&#31616;&#32780;&#35328;&#20043;&#65292;<tt class="interfacename">BeanFactory</tt>&#25552;&#20379;&#20102;&#37197;&#21046;&#26694;&#26550;&#21450;&#22522;&#26412;&#21151;&#33021;&#65292;&#32780;
  <tt class="interfacename">ApplicationContext</tt>  &#21017;&#22686;&#21152;&#20102;&#26356;&#22810;&#25903;&#25345;&#20225;&#19994;&#26680;&#24515;&#20869;&#23481;&#30340;&#21151;&#33021;&#12290;
  <tt class="interfacename">ApplicationContext</tt>&#23436;&#20840;&#30001;<tt class="interfacename">BeanFactory</tt>&#25193;&#23637;&#32780;&#26469;&#65292;
  &#22240;&#32780;<tt class="interfacename">BeanFactory</tt>&#25152;&#20855;&#22791;&#30340;&#33021;&#21147;&#21644;&#34892;&#20026;&#20063;&#36866;&#29992;&#20110;<tt class="interfacename">ApplicationContext</tt>&#12290;</p><p>&#26412;&#31456;&#20998;&#20026;&#20004;&#37096;&#20221;&#65292;<a href="beans.html#beans-basics" title="3.2.&nbsp;&#22522;&#26412;&#21407;&#29702; - &#23481;&#22120;&#21644;bean">&#31532;&#19968;&#37096;&#20221;</a>&#35762;&#35299;<tt class="interfacename">
   BeanFactory</tt>&#21450;<tt class="interfacename">ApplicationContext</tt>&#30340;&#22522;&#26412;&#21407;&#29702;&#65292;
   &#32780;<a href="beans.html#context-introduction" title="3.8.&nbsp;The ApplicationContext">&#31532;&#20108;&#37096;&#20221;</a>&#21017;&#38024;&#23545;<tt class="interfacename">ApplicationContext</tt>&#30340;&#21151;&#33021;&#36827;&#34892;&#35762;&#35299;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="beans-basics"></a>3.2.&nbsp;&#22522;&#26412;&#21407;&#29702; - &#23481;&#22120;&#21644;bean</h2></div></div><div></div></div><p>&#22312;Spring&#20013;&#65292;&#37027;&#20123;&#32452;&#25104;&#20320;&#24212;&#29992;&#31243;&#24207;&#30340;&#20027;&#20307;(backbone)&#21450;&#30001;Spring IoC<i class="firstterm">&#23481;&#22120;</i>&#25152;&#31649;&#29702;&#30340;&#23545;&#35937;&#65292;&#34987;&#31216;&#20043;&#20026;<i class="firstterm">bean</i>&#12290;
  &#31616;&#21333;&#22320;&#35762;&#65292;bean&#23601;&#26159;&#30001;Spring<i class="firstterm">&#23481;&#22120;</i>&#21021;&#22987;&#21270;&#12289;&#35013;&#37197;&#21450;&#31649;&#29702;&#30340;&#23545;&#35937;&#65292;&#38500;&#27492;&#20043;&#22806;&#65292;bean&#23601;&#19982;&#24212;&#29992;&#31243;&#24207;&#20013;&#30340;&#20854;&#20182;&#23545;&#35937;&#27809;&#26377;&#20160;&#20040;&#21306;&#21035;&#20102;&#12290;
  &#32780;bean&#23450;&#20041;&#20197;&#21450;bean&#30456;&#20114;&#38388;&#30340;<i class="firstterm">&#20381;&#36182;</i>&#20851;&#31995;&#23558;&#36890;&#36807;<i class="firstterm">&#37197;&#32622;&#20803;&#25968;&#25454;</i>&#26469;&#25551;&#36848;&#12290;</p><div class="sidebar"><p class="title"><b>&#20026;&#20160;&#20040;&#20351;&#29992;<span class="emphasis"><em>bean</em></span>?</b></p><p>&#20351;&#29992;<span class="emphasis"><em>'bean'</em></span>&#36825;&#20010;&#21517;&#23383;&#32780;&#19981;&#26159;<span class="emphasis"><em>'&#32452;&#20214;'(component)</em></span> &#25110;<span class="emphasis"><em>'&#23545;&#35937;'(object)</em></span>&#30340;&#21160;&#26426;
   &#28304;&#20110;Spring&#26694;&#26550;&#26412;&#36523;(&#23427;&#20135;&#29983;&#30340;&#37096;&#20998;&#21407;&#22240;&#23601;&#26159;&#23545;Enterprise Java <span class="emphasis"><em>Beans</em></span>&#22797;&#26434;&#24615;&#30340;&#19968;&#27425;&#35299;&#26500;)&#12290; </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory"></a>3.2.1.&nbsp;&#23481;&#22120;</h3></div></div><div></div></div><p><tt class="interfacename">org.springframework.beans.factory.BeanFactory</tt>
	 &#26159;Spring IoC<span class="emphasis"><em>&#23481;&#22120;</em></span>&#30340;&#23454;&#38469;&#20195;&#34920;&#32773;&#65292;IoC&#23481;&#22120;&#36127;&#36131;&#23481;&#32435;&#27492;&#21069;&#25152;&#25551;&#36848;&#30340;bean&#65292;&#24182;&#23545;bean&#36827;&#34892;&#31649;&#29702;&#12290;</p><p>&#22312;Spring&#20013;&#65292;<tt class="interfacename">BeanFactory</tt>&#26159;IoC&#23481;&#22120;&#30340;&#26680;&#24515;&#25509;&#21475;&#12290;
      &#23427;&#30340;&#32844;&#36131;&#21253;&#25324;&#65306;&#23454;&#20363;&#21270;&#12289;&#23450;&#20301;&#12289;&#37197;&#32622;&#24212;&#29992;&#31243;&#24207;&#20013;&#30340;&#23545;&#35937;&#21450;&#24314;&#31435;&#36825;&#20123;&#23545;&#35937;&#38388;&#30340;&#20381;&#36182;&#12290;</p><p>Spring&#20026;&#25105;&#20204;&#25552;&#20379;&#20102;&#35768;&#22810;&#26131;&#29992;&#30340;<tt class="interfacename">BeanFactory</tt>&#23454;&#29616;&#65292;
	<tt class="classname">XmlBeanFactory</tt>&#23601;&#26159;&#26368;&#24120;&#29992;&#30340;&#19968;&#20010;&#12290;&#35813;&#23454;&#29616;&#23558;&#20197;XML&#26041;&#24335;&#25551;&#36848;&#32452;&#25104;&#24212;&#29992;&#30340;&#23545;&#35937;
	&#20197;&#21450;&#23545;&#35937;&#38388;&#30340;&#20381;&#36182;&#20851;&#31995;&#12290;<tt class="classname">XmlBeanFactory</tt>&#31867;&#23558;&#33719;&#21462;&#27492;XML<i class="firstterm">&#37197;
	&#32622;&#20803;&#25968;&#25454;</i>&#65292;&#24182;&#29992;&#23427;&#26469;&#26500;&#24314;&#19968;&#20010;&#23436;&#20840;&#21487;&#37197;&#32622;&#30340;&#31995;&#32479;&#25110;&#24212;&#29992;&#12290;</p><p>
        </p><div class="mediaobject" align="center"><img src="images/container-magic.png" align="middle"><div class="caption"><p>Spring IoC &#23481;&#22120;</p></div></div><p>
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-metadata"></a>3.2.1.1.&nbsp;&#37197;&#32622;&#20803;&#25968;&#25454;</h4></div></div><div></div></div><p>&#20174;&#19978;&#22270;&#21487;&#20197;&#30475;&#21040;&#65292;Spring IoC&#23481;&#22120;&#23558;&#35835;&#21462;<span class="emphasis"><em>&#37197;&#32622;&#20803;&#25968;&#25454;</em></span>&#65307;
 		 &#24182;&#36890;&#36807;&#23427;&#23545;&#24212;&#29992;&#20013;&#21508;&#20010;&#23545;&#35937;&#36827;&#34892;&#23454;&#20363;&#21270;&#12289;&#37197;&#32622;&#20197;&#21450;&#32452;&#35013;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#25105;&#20204;&#20351;&#29992;&#31616;&#21333;&#30452;&#35266;
 		 &#30340;XML&#26469;&#20316;&#20026;&#37197;&#32622;&#20803;&#25968;&#25454;&#30340;&#25551;&#36848;&#26684;&#24335;&#12290;&#22312;XML&#37197;&#32622;&#20803;&#25968;&#25454;&#20013;&#25105;&#20204;&#21487;&#20197;&#23545;&#37027;&#20123;&#25105;&#20204;&#24076;&#26395;&#36890;&#36807;
 		 Spring IoC&#23481;&#22120;&#31649;&#29702;&#30340;bean&#36827;&#34892;<span class="emphasis"><em>&#23450;&#20041;</em></span>&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#21040;&#30446;&#21069;&#20026;&#27490;&#65292;&#22522;&#20110;XML&#30340;&#20803;&#25968;&#25454;&#26159;&#26368;&#24120;&#29992;&#21040;&#30340;&#37197;&#32622;&#20803;&#25968;&#25454;&#26684;&#24335;&#12290;&#28982;&#32780;&#65292;&#23427;&#24182;
    	<span class="emphasis"><em>&#19981;&#26159;</em></span>&#21807;&#19968;&#30340;&#25551;&#36848;&#26684;&#24335;&#12290;Spring IoC&#23481;&#22120;&#22312;&#36825;&#19968;&#28857;&#19978;&#26159;<span class="emphasis"><em>
    	&#23436;&#20840;</em></span>&#24320;&#25918;&#30340;&#12290;&#30001;&#20110;&#37319;&#29992;&#22522;&#20110;XML&#30340;&#37197;&#32622;&#20803;&#25968;&#25454;&#26684;&#24335;&#38750;&#24120;&#31616;&#21333;&#65292; &#22240;&#27492;
    	&#26412;&#31456;&#33410;&#30340;&#22823;&#37096;&#20998;&#20869;&#23481;&#23558;&#37319;&#29992;&#35813;&#26684;&#24335;&#26469;&#35828;&#26126;Spring IoC&#23481;&#22120;&#30340;&#20851;&#38190;&#27010;&#24565;&#21644;&#21151;&#33021;</p><p>&#21516;&#26102;&#20320;&#20063;&#21487;&#20197;&#22312;<a href="beans.html#beans-annotation-config" title="3.11.&nbsp;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;">Section&nbsp;3.11, &#8220;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;&#8221;</a>&#36825;&#19968;&#33410;&#20013;
          &#30475;&#21040;Spring&#23481;&#22120;&#25903;&#25345;&#30340;&#21478;&#19968;&#31181;&#20803;&#25968;&#25454;&#26684;&#24335;&#30340;&#35814;&#32454;&#20869;&#23481;&#12290;</p></td></tr></table></div></div><div class="sidebar"><p class="title"><b>&#22810;&#31181;&#36164;&#28304;</b></p><p>Spring IoC&#23481;&#22120;&#21487;&#20197;&#36890;&#36807;&#22810;&#31181;&#36884;&#24452;&#26469;&#21152;&#36733;&#37197;&#32622;&#20803;&#25968;&#25454;&#65292;&#27604;&#22914;&#26412;&#22320;&#25991;&#20214;
		&#31995;&#32479;&#12289;Java <tt class="literal">CLASSPATH</tt>&#31561;&#12290;</p><p>&#23545;IoC&#23481;&#22120;&#22522;&#26412;&#21407;&#29702;&#30340;&#25484;&#25569;&#23558;&#26377;&#21033;&#20110;&#25105;&#20204;&#23545;<a href="resources.html" title="Chapter&nbsp;4.&nbsp;&#36164;&#28304;">Chapter&nbsp;4, <i>&#36164;&#28304;</i></a>&#20013;
		<tt class="interfacename">Resource</tt>&#25277;&#35937;&#26426;&#21046;&#30340;&#29702;&#35299;&#12290;</p></div><p>&#22312;&#22823;&#22810;&#25968;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#65292;&#24182;&#19981;&#38656;&#35201;&#29992;&#26174;&#24335;&#30340;&#20195;&#30721;&#21435;&#23454;&#20363;&#21270;&#19968;&#20010;&#25110;&#22810;&#20010;&#30340;Spring IoC
	  &#23481;&#22120;&#23454;&#20363;&#12290;&#20363;&#22914;&#65292;&#22312;web&#24212;&#29992;&#31243;&#24207;&#20013;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#22312;<tt class="literal">web.xml</tt>&#20013;&#28155;&#21152;
	  (&#22823;&#32422;)8 &#34892;&#31616;&#21333;&#30340;XML&#25551;&#36848;&#31526;&#21363;&#21487;(&#21442;&#35265;<a href="beans.html#context-create" title="3.8.5.&nbsp;ApplicationContext&#22312;WEB&#24212;&#29992;&#20013;&#30340;&#23454;&#20363;&#21270;">Section&nbsp;3.8.5, &#8220;ApplicationContext&#22312;WEB&#24212;&#29992;&#20013;&#30340;&#23454;&#20363;&#21270;&#8221;</a>)&#12290;</p></div><p>Spring IoC&#23481;&#22120;&#33267;&#23569;&#21253;&#21547;&#19968;&#20010;bean&#23450;&#20041;&#65292;&#20294;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#20250;&#26377;&#22810;&#20010;bean&#23450;&#20041;&#12290;&#24403;&#20351;&#29992;
   &#22522;&#20110;XML&#30340;&#37197;&#32622;&#20803;&#25968;&#25454;&#26102;&#65292;&#23558;&#22312;&#39030;&#23618;&#30340;<tt class="literal">&lt;beans/&gt;</tt>&#20803;&#32032;&#20013;&#37197;&#32622;&#19968;&#20010;
   &#25110;&#22810;&#20010;<tt class="literal">&lt;bean/&gt;</tt>&#20803;&#32032;&#12290;</p><p>bean&#23450;&#20041;&#19982;&#24212;&#29992;&#31243;&#24207;&#20013;&#23454;&#38469;&#20351;&#29992;&#30340;&#23545;&#35937;&#19968;&#19968;&#23545;&#24212;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;bean&#30340;&#23450;&#20041;&#21253;&#25324;&#65306;&#26381;&#21153;
  &#23618;&#23545;&#35937;&#12289;&#25968;&#25454;&#35775;&#38382;&#23618;&#23545;&#35937;&#65288;DAO&#65289;&#12289;&#31867;&#20284;Struts <tt class="interfacename">Action</tt>&#30340;
  &#34920;&#31034;&#23618;&#23545;&#35937;&#12289;Hibernate <tt class="interfacename">SessionFactory</tt>&#23545;&#35937;&#12289;JMS
   <tt class="interfacename">Queue</tt>&#23545;&#35937;&#31561;&#31561;&#12290;&#36890;&#24120;bean&#30340;&#23450;&#20041;&#24182;&#19981;&#19982;&#23481;&#22120;&#20013;&#30340;&#39046;&#22495;
   &#23545;&#35937;&#30456;&#21516;&#65292;&#22240;&#20026;&#39046;&#22495;&#23545;&#35937;&#30340;&#21019;&#24314;&#21644;&#21152;&#36733;&#24517;&#39035;&#20381;&#36182;&#20855;&#20307;&#30340;DAO&#21644;&#19994;&#21153;&#36923;&#36753;&#12290;.</p><p>&#20197;&#19979;&#26159;&#19968;&#20010;&#22522;&#20110;XML&#30340;&#37197;&#32622;&#20803;&#25968;&#25454;&#30340;&#22522;&#26412;&#32467;&#26500;&#65306;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

  &lt;bean id="..." class="..."&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- collaborators and configuration for this bean go here --&gt;</span></i>
  &lt;/bean&gt;

  &lt;bean id="..." class="..."&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- collaborators and configuration for this bean go here --&gt;</span></i>
  &lt;/bean&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- more bean definitions go here --&gt;</span></i>

&lt;/beans&gt;</pre><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-instantiation"></a>3.2.2.&nbsp;&#23454;&#20363;&#21270;&#23481;&#22120;</h3></div></div><div></div></div><p>Spring IoC&#23481;&#22120;&#30340;&#23454;&#20363;&#21270;&#38750;&#24120;&#31616;&#21333;&#65292;&#22914;&#19979;&#38754;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">ApplicationContext context = new ClassPathXmlApplicationContext(
        new String[] {"services.xml", "daos.xml"});

<i class="lineannotation"><span class="lineannotation">// an <tt class="interfacename">ApplicationContext</tt> is also a <tt class="interfacename">BeanFactory</tt> (via inheritance)</span></i>
BeanFactory factory = context;</pre><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-xml-import"></a>3.2.2.1.&nbsp;XML&#37197;&#32622;&#20803;&#25968;&#25454;&#30340;&#32467;&#26500;</h4></div></div><div></div></div><p>&#23558;XML&#37197;&#32622;&#25991;&#20214;&#20998;&#25286;&#25104;&#22810;&#20010;&#37096;&#20998;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#12290;&#20026;&#20102;&#21152;&#36733;&#22810;&#20010;XML&#25991;&#20214;&#29983;&#25104;&#19968;&#20010;
		ApplicationContext&#23454;&#20363;&#65292;&#21487;&#20197;&#23558;&#25991;&#20214;&#36335;&#24452;&#20316;&#20026;&#23383;&#31526;&#20018;&#25968;&#32452;&#20256;&#32473;ApplicationContext&#26500;&#36896;&#22120;
		&#12290;&#32780;bean factory&#23558;&#36890;&#36807;&#35843;&#29992;bean defintion reader&#20174;&#22810;&#20010;&#25991;&#20214;&#20013;&#35835;&#21462;bean&#23450;&#20041;&#12290;</p><p>&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;Spring&#22242;&#38431;&#20542;&#21521;&#20110;&#19978;&#36848;&#20570;&#27861;&#65292;&#22240;&#20026;&#36825;&#26679;&#21508;&#20010;&#37197;&#32622;&#24182;&#19981;&#20250;&#26597;&#35273;&#21040;&#23427;&#20204;
		&#19982;&#20854;&#20182;&#37197;&#32622;&#25991;&#20214;&#30340;&#32452;&#21512;&#12290;&#21478;&#22806;&#19968;&#31181;&#26041;&#27861;&#26159;&#20351;&#29992;&#19968;&#20010;&#25110;&#22810;&#20010;&#30340;<tt class="literal">&lt;import/&gt;</tt>&#20803;&#32032;
		&#26469;&#20174;&#21478;&#22806;&#19968;&#20010;&#25110;&#22810;&#20010;&#25991;&#20214;&#21152;&#36733;bean&#23450;&#20041;&#12290;&#25152;&#26377;&#30340;<tt class="literal">&lt;import/&gt;</tt>&#20803;&#32032;&#24517;
		&#39035;&#22312;<tt class="literal">&lt;bean/&gt;</tt>&#20803;&#32032;&#20043;&#21069;&#23436;&#25104;bean&#23450;&#20041;&#30340;&#23548;&#20837;&#12290; &#35753;&#25105;&#20204;&#30475;&#20010;&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;beans&gt;

    &lt;import resource="services.xml"/&gt;
    &lt;import resource="resources/messageSource.xml"/&gt;
    &lt;import resource="/resources/themeSource.xml"/&gt;

    &lt;bean id="bean1" class="..."/&gt;
    &lt;bean id="bean2" class="..."/&gt;

&lt;/beans&gt;</pre><p>&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#20174;3&#20010;&#22806;&#37096;&#25991;&#20214;&#65306;<tt class="literal">services.xml</tt>&#12289;
		<tt class="literal">messageSource.xml</tt>&#21450;<tt class="literal">themeSource.xml</tt>
		&#26469;&#21152;&#36733;bean&#23450;&#20041;&#12290;&#36825;&#37324;&#37319;&#29992;&#30340;&#37117;&#26159;&#30456;&#23545;&#36335;&#24452;&#65292;&#22240;&#27492;&#65292;&#27492;&#20363;&#20013;&#30340;<tt class="literal">services.xml
		</tt>&#19968;&#23450;&#35201;&#19982;&#23548;&#20837;&#25991;&#20214;&#25918;&#22312;&#21516;&#19968;&#30446;&#24405;&#25110;&#31867;&#36335;&#24452;&#65292;&#32780;<tt class="literal">messageSource.xm
		l</tt>&#21644;<tt class="literal">themeSource.xml</tt>&#30340;&#25991;&#20214;&#20301;&#32622;&#24517;&#39035;&#25918;&#22312;&#23548;&#20837;&#25991;&#20214;&#25152;
		&#22312;&#30446;&#24405;&#19979;&#30340;<tt class="literal">resources</tt>&#30446;&#24405;&#20013;&#12290;&#27491;&#22914;&#20320;&#25152;&#30475;&#21040;&#30340;&#37027;&#26679;&#65292;&#24320;&#22836;&#30340;&#26012;&#26464;
		&#8216;/&#8217;&#23454;&#38469;&#19978;&#21487;&#24573;&#30053;&#12290;&#22240;&#27492;&#19981;&#29992;&#26012;&#26464;&#8216;/&#8217;&#21487;&#33021;&#20250;&#26356;&#22909;&#19968;&#28857;&#12290;&#26681;&#25454;Spring XML&#37197;&#32622;&#25991;&#20214;&#30340;
		Schema(&#25110;DTD)&#65292;&#34987;&#23548;&#20837;&#25991;&#20214;&#24517;&#39035;&#26159;&#23436;&#20840;&#26377;&#25928;&#30340;XML bean&#23450;&#20041;&#25991;&#20214;&#65292;&#19988;&#26681;&#33410;&#28857;&#24517;&#39035;&#20026;
		<tt class="literal">&lt;beans/&gt;</tt> &#20803;&#32032;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-definition"></a>3.2.3.&nbsp;&#22810;&#31181;bean</h3></div></div><div></div></div><p>Spring IoC&#23481;&#22120;&#23558;&#31649;&#29702;&#19968;&#20010;&#25110;&#22810;&#20010;<span class="emphasis"><em>bean</em></span>&#65292;&#36825;&#20123;bean
       &#23558;&#36890;&#36807;&#37197;&#32622;&#25991;&#20214;&#20013;&#30340;bean&#23450;&#20041;&#34987;&#21019;&#24314;(&#22312;XML&#26684;&#24335;&#20013;&#20026;<tt class="literal">&lt;bean/&gt;
       </tt>&#20803;&#32032;)&#12290;</p><p>&#22312;&#23481;&#22120;&#20869;&#37096;&#65292;&#36825;&#20123;bean&#23450;&#20041;&#30001;<tt class="interfacename">BeanDefinition</tt>
       &#23545;&#35937;&#26469;&#34920;&#31034;&#65292;&#35813;&#23450;&#20041;&#23558;&#21253;&#21547;&#20197;&#19979;&#20449;&#24687;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><span class="emphasis"><em>&#20840;&#38480;&#23450;&#31867;&#21517;&#65306;</em></span>&#36825;&#36890;&#24120;&#23601;&#26159;&#24050;&#23450;&#20041;bean&#30340;&#23454;&#38469;&#23454;&#29616;&#31867;&#12290;</p></li><li><p>bean&#34892;&#20026;&#30340;&#23450;&#20041;&#65292;&#36825;&#20123;&#23450;&#20041;&#23558;&#20915;&#23450;bean&#22312;&#23481;&#22120;&#20013;&#30340;&#34892;&#20026;&#65288;&#20316;&#29992;&#22495;&#12289;&#29983;&#21629;&#21608;&#26399;&#22238;&#35843;&#31561;&#31561;&#65289;</p></li><li><p>&#23545;&#20854;&#20182;bean&#30340;&#24341;&#29992;&#65292;&#36825;&#20123;&#24341;&#29992;bean&#20063;&#21487;&#20197;&#31216;&#20043;&#20026;<span class="emphasis"><em>&#21327;&#20316;bean&#65288;collaborators&#65289;
          </em></span> &#25110;<span class="emphasis"><em>&#20381;&#36182;bean&#65288;dependencies&#65289;</em></span>.</p></li><li><p>&#21019;&#24314;bean&#23454;&#20363;&#26102;&#30340;&#20854;&#20182;&#37197;&#32622;&#35774;&#32622;&#12290;&#27604;&#22914;&#20351;&#29992;bean&#26469;&#23450;&#20041;&#36830;&#25509;&#27744;&#65292;&#21487;&#20197;&#36890;&#36807;&#23646;&#24615;&#25110;&#32773;&#26500;
          &#36896;&#21442;&#25968;&#25351;&#23450;&#36830;&#25509;&#25968;&#65292;&#20197;&#21450;&#36830;&#25509;&#27744;&#22823;&#23567;&#38480;&#21046;&#31561;&#12290;</p></li></ul></div><p>&#19978;&#36848;&#20869;&#23481;&#30452;&#25509;&#34987;&#32763;&#35793;&#20026;&#27599;&#20010;bean&#23450;&#20041;&#21253;&#21547;&#30340;&#19968;&#32452;properties&#12290;&#19979;&#38754;&#30340;&#34920;&#26684;&#21015;&#20986;&#20102;&#37096;&#20998;
     &#20869;&#23481;&#30340;&#35814;&#32454;&#38142;&#25509;&#65306;</p><div class="table"><a name="beans-factory-bean-definition-tbl"></a><p class="title"><b>Table&nbsp;3.1.&nbsp;bean&#23450;&#20041;</b></p><table summary="bean&#23450;&#20041;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#21517;&#31216;</th><th>&#38142;&#25509;</th></tr></thead><tbody><tr><td>class</td><td><p>
                  <a href="beans.html#beans-factory-class" title="3.2.3.2.&nbsp;&#23454;&#20363;&#21270;bean">Section&nbsp;3.2.3.2, &#8220;&#23454;&#20363;&#21270;bean&#8221;</a>
                </p></td></tr><tr><td>name</td><td><p>
                  <a href="beans.html#beans-beanname" title="3.2.3.1.&nbsp;bean&#30340;&#21629;&#21517;">Section&nbsp;3.2.3.1, &#8220;bean&#30340;&#21629;&#21517;&#8221;</a>
                </p></td></tr><tr><td>scope</td><td><p>
                  <a href="beans.html#beans-factory-scopes" title="3.4.&nbsp;Bean&#30340;&#20316;&#29992;&#22495;">Section&nbsp;3.4, &#8220;Bean&#30340;&#20316;&#29992;&#22495;&#8221;</a>
                </p></td></tr><tr><td>constructor arguments</td><td><p>
                  <a href="beans.html#beans-factory-collaborators" title="3.3.1.&nbsp;&#27880;&#20837;&#20381;&#36182;">Section&nbsp;3.3.1, &#8220;&#27880;&#20837;&#20381;&#36182;&#8221;</a>
                </p></td></tr><tr><td>properties</td><td><p>
                  <a href="beans.html#beans-factory-collaborators" title="3.3.1.&nbsp;&#27880;&#20837;&#20381;&#36182;">Section&nbsp;3.3.1, &#8220;&#27880;&#20837;&#20381;&#36182;&#8221;</a>
                </p></td></tr><tr><td>autowiring mode</td><td><p>
                  <a href="beans.html#beans-factory-autowire" title="3.3.5.&nbsp;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;">Section&nbsp;3.3.5, &#8220;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;&#8221;</a>
                </p></td></tr><tr><td>dependency checking mode</td><td><p>
                  <a href="beans.html#beans-factory-dependencies" title="3.3.6.&nbsp;&#20381;&#36182;&#26816;&#26597;">Section&nbsp;3.3.6, &#8220;&#20381;&#36182;&#26816;&#26597;&#8221;</a>
                </p></td></tr><tr><td>lazy-initialization mode</td><td><p>
                  <a href="beans.html#beans-factory-lazy-init" title="3.3.4.&nbsp;&#24310;&#36831;&#21021;&#22987;&#21270;bean">Section&nbsp;3.3.4, &#8220;&#24310;&#36831;&#21021;&#22987;&#21270;bean&#8221;</a>
                </p></td></tr><tr><td>initialization method</td><td><p>
                  <a href="beans.html#beans-factory-lifecycle-initializingbean" title="3.5.1.1.&nbsp;&#21021;&#22987;&#21270;&#22238;&#35843;">Section&nbsp;3.5.1.1, &#8220;&#21021;&#22987;&#21270;&#22238;&#35843;&#8221;</a>
                </p></td></tr><tr><td>destruction method</td><td><p>
                  <a href="beans.html#beans-factory-lifecycle-disposablebean" title="3.5.1.2.&nbsp;&#26512;&#26500;&#22238;&#35843;">Section&nbsp;3.5.1.2, &#8220;&#26512;&#26500;&#22238;&#35843;&#8221;</a>
                </p></td></tr></tbody></table></div><p>&#38500;&#20102;&#36890;&#36807;bean&#23450;&#20041;&#26469;&#25551;&#36848;&#35201;&#21019;&#24314;&#30340;&#25351;&#23450;bean&#30340;&#23646;&#24615;&#20043;&#22806;&#65292;&#26576;&#20123;<tt class="interfacename">
	  BeanFactory</tt>&#30340;&#23454;&#29616;&#20063;&#20801;&#35768;&#23558;&#37027;&#20123;&#38750;BeanFactory&#21019;&#24314;&#30340;&#12289;&#24050;&#26377;&#30340;&#29992;&#25143;
	  &#23545;&#35937;&#27880;&#20876;&#21040;&#23481;&#22120;&#20013;&#65292;&#27604;&#22914;&#20351;&#29992;<tt class="classname">DefaultListableBeanFactory</tt>
	  &#30340;<tt class="methodname">registerSingleton(..)</tt> &#26041;&#27861;&#12290;&#19981;&#36807;&#22823;&#22810;&#25968;&#24212;&#29992;&#36824;&#26159;&#37319;&#29992;
	  &#20803;&#25968;&#25454;&#23450;&#20041;&#20026;&#20027;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-beanname"></a>3.2.3.1.&nbsp;bean&#30340;&#21629;&#21517;</h4></div></div><div></div></div><div class="sidebar"><p class="title"><b>bean&#21629;&#21517;&#32422;&#23450;</b></p><p>bean&#30340;&#21629;&#21517;&#37319;&#29992;&#26631;&#20934;&#30340;Java&#21629;&#21517;&#32422;&#23450;&#65292;&#21363;&#23567;&#20889;&#23383;&#27597;&#24320;&#22836;&#65292;&#39318;&#23383;&#27597;&#22823;&#20889;&#38388;&#38548;
		  &#30340;&#21629;&#21517;&#26041;&#24335;&#12290;&#22914;<tt class="literal">accountManager</tt>&#12289; <tt class="literal">accountService
		  </tt>&#12289;<tt class="literal">userDao</tt>&#21450;<tt class="literal">loginController</tt>&#65292;&#31561;&#31561;&#12290;</p><p>&#23545;bean&#37319;&#29992;&#32479;&#19968;&#30340;&#21629;&#21517;&#32422;&#23450;&#23558;&#20250;&#20351;&#37197;&#32622;&#26356;&#21152;&#31616;&#21333;&#26131;&#25026;&#12290;&#32780;&#19988;&#22312;&#20351;&#29992;Spring AOP&#26102;
		   &#65292;&#22914;&#26524;&#35201;&#21457;&#36890;&#30693;(advice)&#32473;&#19982;&#19968;&#32452;&#21517;&#31216;&#30456;&#20851;&#30340;bean&#26102;&#65292;&#36825;&#31181;&#31616;&#21333;&#30340;&#21629;&#21517;&#26041;&#24335;&#23558;&#20250;&#20196;&#20320;&#21463;&#30410;&#21290;&#27973;&#12290;</p></div><p>&#27599;&#20010;bean&#37117;&#26377;&#19968;&#20010;&#25110;&#22810;&#20010;<tt class="literal">id</tt>(&#25110;&#31216;&#20043;&#20026;&#26631;&#35782;&#31526;&#25110;&#21517;&#31216;&#65292;&#22312;&#26415;&#35821;
		&#19978;&#21487;&#20197;&#29702;&#35299;&#25104;&#19968;&#22238;&#20107;)&#12290;&#36825;&#20123;<tt class="literal">id</tt>&#22312;&#24403;&#21069;IoC&#23481;&#22120;&#20013;&#24517;&#39035;&#21807;&#19968;&#12290;&#22914;&#26524;
		&#19968;&#20010;bean&#26377;&#22810;&#20010;id&#65292;&#37027;&#20040;&#20854;&#20182;&#30340;id&#22312;&#26412;&#36136;&#19978;&#23558;&#34987;&#35748;&#20026;&#26159;&#21035;&#21517;&#12290;</p><p>&#24403;&#20351;&#29992;&#22522;&#20110;XML&#30340;&#37197;&#32622;&#20803;&#25968;&#25454;&#26102;&#65292;&#23558;&#36890;&#36807;<tt class="literal">id</tt>&#25110;<tt class="literal">
		 name</tt>&#23646;&#24615;&#26469;&#25351;&#23450;bean&#26631;&#35782;&#31526;&#12290;<tt class="literal">id</tt>&#23646;&#24615;&#20855;&#26377;&#21807;&#19968;&#24615;&#65292;
		 &#32780;&#19988;&#26159;&#19968;&#20010;&#30495;&#27491;&#30340;XML ID&#23646;&#24615;&#65292;&#22240;&#27492;&#20854;&#20182;xml&#20803;&#32032;&#22312;&#24341;&#29992;&#35813;id&#26102;&#65292;&#21487;&#20197;&#21033;&#29992;XML&#35299;&#26512;&#22120;&#30340;
		 &#39564;&#35777;&#21151;&#33021;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#26368;&#22909;&#20026;bean&#25351;&#23450;&#19968;&#20010;id&#12290;&#23613;&#31649;XML&#35268;&#33539;&#35268;&#23450;&#20102;XML ID&#21629;&#21517;&#30340;&#26377;&#25928;
		 &#23383;&#31526;&#65292;&#20294;&#26159;bean&#26631;&#35782;&#31526;&#30340;&#23450;&#20041;&#19981;&#21463;&#35813;&#38480;&#21046;&#65292;&#22240;&#20026;&#38500;&#20102;&#20351;&#29992;&#25351;&#23450;&#30340;XML&#23383;&#31526;&#26469;&#20316;&#20026;id&#65292;&#36824;&#21487;
		 &#20197;&#20026;bean&#25351;&#23450;&#21035;&#21517;&#65292;&#35201;&#23454;&#29616;&#36825;&#19968;&#28857;&#21487;&#20197;&#22312;<tt class="literal">name</tt>&#23646;&#24615;&#20013;&#20351;&#29992;&#36887;&#21495;&#12289;
		 &#20882;&#21495;&#25110;&#32773;&#31354;&#26684;&#23558;&#22810;&#20010;id&#20998;&#38548;&#12290;</p><p>&#20540;&#24471;&#27880;&#24847;&#30340;&#26159;&#65292;&#20026;&#19968;&#20010;bean&#25552;&#20379;&#19968;&#20010;name&#24182;&#19981;&#26159;&#24517;&#39035;&#30340;&#65292;&#22914;&#26524;&#27809;&#26377;&#25351;&#23450;&#65292;&#37027;&#20040;&#23481;
		&#22120;&#23558;&#20026;&#20854;&#29983;&#25104;&#19968;&#20010;&#24799;&#19968;&#30340;name&#12290;&#23545;&#20110;&#19981;&#25351;&#23450;name&#23646;&#24615;&#30340;&#21407;&#22240;&#25105;&#20204;&#20250;&#22312;&#21518;&#38754;&#20171;&#32461;(&#27604;&#22914;
		<a href="beans.html#beans-inner-beans" title="3.3.2.3.&nbsp;&#20869;&#37096;bean">&#20869;&#37096;bean</a>&#23601;&#19981;&#38656;&#35201;)&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-beanname-alias"></a>3.2.3.1.1.&nbsp;bean&#30340;&#21035;&#21517;</h5></div></div><div></div></div><p>&#22312;&#23545;bean&#36827;&#34892;&#23450;&#20041;&#26102;&#65292;&#38500;&#20102;&#20351;&#29992;<tt class="literal">id</tt>&#23646;&#24615;&#26469;&#25351;&#23450;&#21517;&#31216;
		  &#20043;&#22806;&#65292;&#20026;&#20102;&#25552;&#20379;&#22810;&#20010;&#21517;&#31216;&#65292;&#38656;&#35201;&#36890;&#36807;<tt class="literal">name</tt>&#23646;&#24615;&#26469;&#21152;&#20197;&#25351;&#23450;
		  &#12290;&#32780;&#25152;&#26377;&#30340;&#36825;&#20123;&#21517;&#31216;&#37117;&#25351;&#21521;&#21516;&#19968;&#20010;bean&#65292;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#25552;&#20379;&#21035;&#21517;&#38750;&#24120;&#26377;&#29992;&#65292;&#27604;&#22914;
		  &#20026;&#20102;&#35753;&#24212;&#29992;&#30340;&#27599;&#19968;&#20010;&#32452;&#20214;&#33021;&#26356;&#23481;&#26131;&#30340;&#23545;&#20844;&#20849;&#32452;&#20214;&#36827;&#34892;&#24341;&#29992;&#12290;</p><p>&#28982;&#32780;&#65292;&#22312;&#23450;&#20041;bean&#26102;&#23601;&#25351;&#23450;&#25152;&#26377;&#30340;&#21035;&#21517;&#24182;&#19981;&#26159;&#24635;&#26159;&#24688;&#24403;&#30340;&#12290;&#26377;&#26102;&#25105;&#20204;&#26399;&#26395;
		  &#33021;&#22312;&#24403;&#21069;&#20301;&#32622;&#20026;&#37027;&#20123;&#22312;&#21035;&#22788;&#23450;&#20041;&#30340;bean&#24341;&#20837;&#21035;&#21517;&#12290;&#22312;XML&#37197;&#32622;&#25991;&#20214;&#20013;&#65292;&#21487;&#29992;<tt class="literal">
		  &lt;alias/&gt;</tt> &#20803;&#32032;&#26469;&#23436;&#25104;bean&#21035;&#21517;&#30340;&#23450;&#20041;&#12290;&#22914;&#65306;</p><pre class="programlisting">&lt;alias name="fromName" alias="toName"/&gt;</pre><p>&#36825;&#37324;&#22914;&#26524;&#22312;&#23481;&#22120;&#20013;&#23384;&#22312;&#21517;&#20026;<tt class="literal">fromName</tt>&#30340;bean&#23450;&#20041;&#65292;
		  &#22312;&#22686;&#21152;&#21035;&#21517;&#23450;&#20041;&#20043;&#21518;&#65292;&#20063;&#21487;&#20197;&#29992;<tt class="literal">toName</tt>&#26469;&#24341;&#29992;&#12290;</p><p>&#32771;&#34385;&#19968;&#20010;&#26356;&#20026;&#20855;&#20307;&#30340;&#20363;&#23376;&#65292;&#32452;&#20214;A&#22312;XML&#37197;&#32622;&#25991;&#20214;&#20013;&#23450;&#20041;&#20102;&#19968;&#20010;&#21517;&#20026;
		  componentA-dataSource&#30340;DataSource bean&#12290;&#20294;&#32452;&#20214;B&#21364;&#24819;&#22312;&#20854;XML&#25991;&#20214;&#20013;
		  &#20197;componentB-dataSource&#30340;&#21517;&#23383;&#26469;&#24341;&#29992;&#27492;bean&#12290;&#32780;&#19988;&#22312;&#20027;&#31243;&#24207;MyApp&#30340;XML&#37197;
		  &#32622;&#25991;&#20214;&#20013;&#65292;&#24076;&#26395;&#20197;myApp-dataSource&#30340;&#21517;&#23383;&#26469;&#24341;&#29992;&#27492;bean&#12290;&#26368;&#21518;&#23481;&#22120;&#21152;&#36733;&#19977;&#20010;
		  XML&#25991;&#20214;&#26469;&#29983;&#25104;&#26368;&#32456;&#30340;ApplicationContext&#65292;&#22312;&#27492;&#24773;&#24418;&#19979;&#65292;&#21487;&#36890;&#36807;&#22312;MyApp XML
		  &#25991;&#20214;&#20013;&#28155;&#21152;&#19979;&#21015;alias&#20803;&#32032;&#26469;&#23454;&#29616;&#65306;</p><pre class="programlisting">&lt;alias name="componentA-dataSource" alias="componentB-dataSource"/&gt;
&lt;alias name="componentA-dataSource" alias="myApp-dataSource" /&gt;</pre><p>&#36825;&#26679;&#19968;&#26469;&#65292;&#27599;&#20010;&#32452;&#20214;&#21450;&#20027;&#31243;&#24207;&#23601;&#21487;&#36890;&#36807;&#21807;&#19968;&#21517;&#23383;&#26469;&#24341;&#29992;&#21516;&#19968;&#20010;&#25968;&#25454;&#28304;&#32780;&#20114;&#19981;&#24178;&#25200;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-class"></a>3.2.3.2.&nbsp;&#23454;&#20363;&#21270;bean</h4></div></div><div></div></div><div class="sidebar"><p class="title"><b>&#20869;&#37096;&#31867;&#21517;</b></p><p>&#22914;&#26524;&#38656;&#35201;&#20320;&#24076;&#26395;&#23558;&#19968;&#20010;<tt class="literal">&#38745;&#24577;</tt>&#30340;&#20869;&#37096;&#31867;&#37197;&#32622;&#20026;
          &#19968;&#20010;bean&#30340;&#35805;&#65292;&#37027;&#20040;&#20869;&#37096;&#31867;&#30340;&#21517;&#23383;&#38656;&#35201;&#37319;&#29992;<span class="emphasis"><em>&#20108;&#36827;&#21046;</em></span>&#30340;&#20889;&#27861;&#12290;</p><p>&#27604;&#22914;&#35828;&#65292;&#22312;<tt class="literal">com.example</tt>&#21253;&#19979;&#26377;&#19968;&#20010;&#21483;<tt class="classname">
          Foo</tt>&#30340;&#31867;&#65292;&#32780;<tt class="classname">Foo</tt>&#31867;&#26377;&#19968;&#20010;<tt class="literal">&#38745;&#24577;
          </tt>&#30340;&#20869;&#37096;&#31867;&#21483;<tt class="classname">Bar</tt>&#65292;&#37027;&#20040;&#22312;bean&#23450;&#20041;&#30340;&#26102;&#20505;&#65292;
          <tt class="literal">class</tt>&#23646;&#24615;&#24517;&#39035;&#36825;&#26679;&#20889;&#65306;</p><p>
            <tt class="classname">com.example.Foo$Bar</tt>
          </p><p>&#27880;&#24847;&#36825;&#37324;&#25105;&#20204;&#20351;&#29992;&#20102;<tt class="literal">$</tt>&#23383;&#31526;&#23558;&#20869;&#37096;&#31867;&#21644;&#22806;&#37096;&#31867;&#36827;&#34892;&#20998;&#38548;</p></div><p>&#20174;&#26412;&#36136;&#19978;&#26469;&#35828;&#65292;bean&#23450;&#20041;&#25551;&#36848;&#20102;&#22914;&#20309;&#21019;&#24314;&#19968;&#20010;&#25110;&#22810;&#20010;&#23545;&#35937;&#23454;&#20363;&#12290;&#24403;&#38656;&#35201;&#30340;&#26102;&#20505;&#65292;
		&#23481;&#22120;&#20250;&#20174;bean&#23450;&#20041;&#21015;&#34920;&#20013;&#21462;&#24471;&#19968;&#20010;&#25351;&#23450;&#30340;bean&#23450;&#20041;&#65292;&#24182;&#26681;&#25454;bean&#23450;&#20041;&#37324;&#38754;&#30340;&#37197;&#32622;&#20803;&#25968;&#25454;
		&#20351;&#29992;&#21453;&#23556;&#26426;&#21046;&#26469;&#21019;&#24314;&#65288;&#25110;&#21462;&#24471;&#65289;&#19968;&#20010;&#23454;&#38469;&#30340;&#23545;&#35937;&#12290;</p><p>&#24403;&#37319;&#29992;XML&#25551;&#36848;&#37197;&#32622;&#20803;&#25968;&#25454;&#26102;&#65292;&#23558;&#36890;&#36807;<tt class="literal">&lt;bean/&gt;</tt>&#20803;&#32032;&#30340;
		<tt class="literal">class</tt>&#23646;&#24615;&#26469;&#25351;&#23450;&#23454;&#20363;&#21270;&#23545;&#35937;&#30340;&#31867;&#22411;&#12290;<tt class="literal">class</tt>
		 &#23646;&#24615; (&#23545;&#24212;<tt class="interfacename">BeanDefinition</tt>&#23454;&#20363;&#30340;<tt class="classname">
		 Class</tt>&#23646;&#24615;)&#36890;&#24120;&#26159;&#24517;&#39035;&#30340;(&#19981;&#36807;&#20063;&#26377;&#20004;&#31181;&#20363;&#22806;&#30340;&#24773;&#24418;&#65292;&#35265;
		 <a href="beans.html#beans-factory-class-instance-factory-method" title="3.2.3.2.3.&nbsp;&#20351;&#29992;&#23454;&#20363;&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;">Section&nbsp;3.2.3.2.3, &#8220;&#20351;&#29992;&#23454;&#20363;&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;&#8221;</a>&#21644;
		 <a href="beans.html#beans-child-bean-definitions" title="3.6.&nbsp;bean&#23450;&#20041;&#30340;&#32487;&#25215;">Section&nbsp;3.6, &#8220;bean&#23450;&#20041;&#30340;&#32487;&#25215;&#8221;</a>)&#12290;class&#23646;&#24615;&#20027;&#35201;&#26377;&#20004;&#31181;&#29992;&#36884;
		 &#65306;&#22312;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#65292;&#23481;&#22120;&#23558;&#30452;&#25509;&#36890;&#36807;&#21453;&#23556;&#35843;&#29992;&#25351;&#23450;&#31867;&#30340;&#26500;&#36896;&#22120;&#26469;&#21019;&#24314;bean(&#36825;&#26377;&#28857;&#31867;&#20284;&#20110;
		 &#22312;Java&#20195;&#30721;&#20013;&#20351;&#29992;<span class="emphasis"><em>new</em></span>&#25805;&#20316;&#31526;)&#65307;&#22312;&#26497;&#23569;&#25968;&#24773;&#20917;&#19979;&#65292;&#23481;&#22120;&#23558;&#35843;&#29992;
		 &#31867;&#30340;<tt class="literal">&#38745;&#24577;</tt><span class="emphasis"><em>&#24037;&#21378;</em></span>&#26041;&#27861;&#26469;&#21019;&#24314;bean&#23454;&#20363;&#65292;class
		 &#23646;&#24615;&#23558;&#29992;&#26469;&#25351;&#23450;&#23454;&#38469;&#20855;&#26377;<tt class="literal">&#38745;&#24577;</tt>&#24037;&#21378;&#26041;&#27861;&#30340;&#31867;(&#33267;&#20110;&#35843;&#29992;&#38745;&#24577;&#24037;&#21378;
		 &#26041;&#27861;&#21019;&#24314;&#30340;&#23545;&#35937;&#31867;&#22411;&#26159;&#24403;&#21069;class&#36824;&#26159;&#20854;&#20182;&#30340;class&#21017;&#26080;&#20851;&#32039;&#35201;)&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-factory-class-ctor"></a>3.2.3.2.1.&nbsp;&#29992;&#26500;&#36896;&#22120;&#26469;&#23454;&#20363;&#21270;</h5></div></div><div></div></div><p>&#24403;&#37319;&#29992;&#26500;&#36896;&#22120;&#26469;&#21019;&#24314;bean&#23454;&#20363;&#26102;&#65292;Spring&#23545;class&#24182;&#27809;&#26377;&#29305;&#27530;&#30340;&#35201;&#27714;&#65292;
			&#25105;&#20204;&#36890;&#24120;&#20351;&#29992;&#30340;class&#37117;&#36866;&#29992;&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;&#34987;&#21019;&#24314;&#30340;&#31867;&#24182;&#19981;&#38656;&#35201;&#23454;&#29616;&#20219;&#20309;&#29305;&#23450;&#30340;
			&#25509;&#21475;&#65292;&#25110;&#20197;&#29305;&#23450;&#30340;&#26041;&#24335;&#32534;&#30721;&#65292;&#21482;&#35201;&#25351;&#23450;bean&#30340;class&#23646;&#24615;&#21363;&#21487;&#12290;&#19981;&#36807;&#26681;&#25454;&#25152;&#37319;&#29992;
			&#30340;IoC&#31867;&#22411;&#65292;class&#21487;&#33021;&#38656;&#35201;&#19968;&#20010;&#40664;&#35748;&#30340;&#31354;&#26500;&#36896;&#22120;&#12290;</p><p>&#27492;&#22806;&#65292;IoC&#23481;&#22120;&#19981;&#20165;&#38480;&#20110;&#31649;&#29702;JavaBean&#65292;&#23427;&#21487;&#20197;&#31649;&#29702;<span class="emphasis"><em>&#20219;&#24847;</em></span>
		&#30340;&#31867;&#12290;&#19981;&#36807;&#22823;&#22810;&#25968;&#20351;&#29992;Spring&#30340;&#20154;&#21916;&#27426;&#20351;&#29992;&#23454;&#38469;&#30340;JavaBean(&#20855;&#26377;&#40664;&#35748;&#30340;(&#26080;&#21442;)&#26500;&#36896;&#22120;
		&#21450;setter&#21644;getter&#26041;&#27861;)&#65292;&#20294;&#22312;&#23481;&#22120;&#20013;&#20351;&#29992;&#38750;bean&#24418;&#24335;(non-bean style)&#30340;&#31867;&#20063;&#26159;&#21487;
		&#20197;&#30340;&#12290;&#27604;&#22914;&#36951;&#30041;&#31995;&#32479;&#20013;&#30340;&#36830;&#25509;&#27744;&#65292;&#24456;&#26174;&#28982;&#23427;&#19982;JavaBean&#35268;&#33539;&#19981;&#31526;&#65292;&#20294;Spring&#20063;&#33021;&#31649;&#29702;&#23427;&#12290;</p><p>&#24403;&#20351;&#29992;&#22522;&#20110;XML&#30340;&#20803;&#25968;&#25454;&#37197;&#32622;&#25991;&#20214;&#65292;&#21487;&#20197;&#36825;&#26679;&#26469;&#25351;&#23450;bean&#31867;&#65306;</p><pre class="programlisting">&lt;bean id="exampleBean" class="examples.ExampleBean"/&gt;

&lt;bean name="anotherExample" class="examples.ExampleBeanTwo"/&gt;</pre><p>&#32473;&#26500;&#36896;&#20989;&#25968;&#25351;&#23450;&#21442;&#25968;&#20197;&#21450;&#20026;bean&#23454;&#20363;&#35774;&#32622;&#23646;&#24615;&#23558;&#22312;&#38543;&#21518;&#30340;
		  <a href="beans.html#beans-factory-collaborators" title="3.3.1.&nbsp;&#27880;&#20837;&#20381;&#36182;">&#37096;&#20998;</a>&#20013;&#35848;&#21450;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-factory-class-static-factory-method"></a>3.2.3.2.2.&nbsp;&#20351;&#29992;&#38745;&#24577;&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;</h5></div></div><div></div></div><p>&#24403;&#37319;&#29992;&#38745;&#24577;&#24037;&#21378;&#26041;&#27861;&#21019;&#24314;bean&#26102;&#65292;&#38500;&#20102;&#38656;&#35201;&#25351;&#23450;<tt class="literal">class</tt>
		  &#23646;&#24615;&#22806;&#65292;&#36824;&#38656;&#35201;&#36890;&#36807;<tt class="literal">factory-method</tt>&#23646;&#24615;&#26469;&#25351;&#23450;&#21019;&#24314;bean&#23454;&#20363;
		  &#30340;&#24037;&#21378;&#26041;&#27861;&#12290;Spring&#23558;&#35843;&#29992;&#27492;&#26041;&#27861;(&#20854;&#21487;&#36873;&#21442;&#25968;&#25509;&#19979;&#26469;&#20171;&#32461;)&#36820;&#22238;&#23454;&#20363;&#23545;&#35937;&#65292;&#23601;&#27492;&#32780;&#35328;&#65292;
		  &#36319;&#36890;&#36807;&#26222;&#36890;&#26500;&#36896;&#22120;&#21019;&#24314;&#31867;&#23454;&#20363;&#27809;&#20160;&#20040;&#20004;&#26679;&#12290;</p><p>&#19979;&#38754;&#30340;bean&#23450;&#20041;&#23637;&#31034;&#20102;&#22914;&#20309;&#36890;&#36807;&#24037;&#21378;&#26041;&#27861;&#26469;&#21019;&#24314;bean&#23454;&#20363;&#12290;&#27880;&#24847;&#65292;&#27492;&#23450;&#20041;&#24182;
		  &#26410;&#25351;&#23450;&#36820;&#22238;&#23545;&#35937;&#30340;&#31867;&#22411;&#65292;&#20165;&#25351;&#23450;&#35813;&#31867;&#21253;&#21547;&#30340;&#24037;&#21378;&#26041;&#27861;&#12290;&#22312;&#27492;&#20363;&#20013;&#65292; <tt class="methodname">
		  createInstance()</tt>&#24517;&#39035;&#26159;&#19968;&#20010;<span class="emphasis"><em>static</em></span>&#26041;&#27861;&#12290;</p><pre class="programlisting">&lt;bean id="exampleBean"
      class="examples.ExampleBean2"
      factory-method="createInstance"/&gt;</pre><p>&#32473;&#24037;&#21378;&#26041;&#27861;&#25351;&#23450;&#21442;&#25968;&#20197;&#21450;&#20026;bean&#23454;&#20363;&#35774;&#32622;&#23646;&#24615;&#23558;&#22312;&#38543;&#21518;&#30340;&#37096;&#20221;&#20013;&#35848;&#21450;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-factory-class-instance-factory-method"></a>3.2.3.2.3.&nbsp;&#20351;&#29992;&#23454;&#20363;&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;</h5></div></div><div></div></div><p>&#19982;<a href="beans.html#beans-factory-class-static-factory-method" title="3.2.3.2.2.&nbsp;&#20351;&#29992;&#38745;&#24577;&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;">
		  &#20351;&#29992;&#38745;&#24577;&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;</a>&#31867;&#20284;&#65292;&#29992;&#26469;&#36827;&#34892;&#23454;&#20363;&#21270;&#30340;&#38750;&#38745;&#24577;&#23454;&#20363;&#24037;&#21378;&#26041;&#27861;&#20301;
		  &#20110;&#21478;&#22806;&#19968;&#20010;bean&#20013;&#65292;&#23481;&#22120;&#23558;&#35843;&#29992;&#35813;bean&#30340;&#24037;&#21378;&#26041;&#27861;&#26469;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;bean&#23454;&#20363;&#12290;&#20026;&#20351;
		  &#29992;&#27492;&#26426;&#21046;&#65292;<tt class="literal">class</tt>&#23646;&#24615;&#24517;&#39035;&#20026;&#31354;&#65292;&#32780;<tt class="literal">factory-bean
		  </tt>&#23646;&#24615;&#24517;&#39035;&#25351;&#23450;&#20026;&#24403;&#21069;(&#25110;&#20854;&#31062;&#20808;)&#23481;&#22120;&#20013;&#21253;&#21547;&#24037;&#21378;&#26041;&#27861;&#30340;bean&#30340;&#21517;&#31216;&#65292;&#32780;&#35813;
		  &#24037;&#21378;bean&#30340;&#24037;&#21378;&#26041;&#27861;&#26412;&#36523;&#24517;&#39035;&#36890;&#36807;<tt class="literal">factory-method</tt>&#23646;&#24615;&#26469;&#35774;&#23450;&#12290;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- the factory bean, which contains a method called <tt class="methodname">createInstance()</tt> --&gt;</span></i>
&lt;bean id="serviceLocator" class="com.foo.DefaultServiceLocator"&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- inject any dependencies required by this locator bean --&gt;</span></i>
&lt;/bean&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- the bean to be created via the factory bean --&gt;</span></i>
&lt;bean id="exampleBean"
      factory-bean="serviceLocator"
      factory-method="createInstance"/&gt;</pre><p>&#34429;&#28982;<a href="beans.html#beans-factory-properties-detailed" title="3.3.2.&nbsp;&#20381;&#36182;&#37197;&#32622;&#35814;&#35299;">&#35774;&#32622;bean&#23646;&#24615;
		  </a>&#30340;&#26426;&#21046;&#20173;&#28982;&#22312;&#36825;&#37324;&#34987;&#25552;&#21450;&#65292;&#20294;&#38544;&#24335;&#30340;&#20570;&#27861;&#26159;&#30001;&#24037;&#21378;bean&#33258;&#24049;&#26469;&#31649;&#29702;&#20197;&#21450;&#36890;&#36807;&#20381;
		  &#36182;&#27880;&#20837;(DI)&#26469;&#36827;&#34892;&#37197;&#32622;&#12290;</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>Spring&#25991;&#26723;&#20013;&#30340;factory bean&#25351;&#30340;&#26159;&#37197;&#32622;&#22312;Spring&#23481;&#22120;&#20013;&#36890;&#36807;&#20351;&#29992;
          <a href="beans.html#beans-factory-class-instance-factory-method" title="3.2.3.2.3.&nbsp;&#20351;&#29992;&#23454;&#20363;&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;">&#23454;&#20363;
          </a>&#25110; <a href="beans.html#beans-factory-class-static-factory-method" title="3.2.3.2.2.&nbsp;&#20351;&#29992;&#38745;&#24577;&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;">
          &#38745;&#24577;</a>&#24037;&#21378;&#26041;&#27861;&#21019;&#24314;&#23545;&#35937;&#30340;&#19968;&#31181;bean&#12290;&#32780;&#25991;&#26723;&#20013;&#30340;<tt class="interfacename">FactoryBean</tt>
           &#65288;&#27880;&#24847;&#39318;&#23383;&#27597;&#22823;&#20889;&#65289;&#25351;&#30340;&#26159;Spring&#29305;&#26377;&#30340;<a href="beans.html#beans-factory-extension-factorybean" title="3.7.3.&nbsp;&#20351;&#29992;FactoryBean&#23450;&#21046;&#23454;&#20363;&#21270;&#36923;&#36753;">
           <tt class="interfacename">FactoryBean</tt></a>&#12290;</p></td></tr></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-client"></a>3.2.4.&nbsp;&#20351;&#29992;&#23481;&#22120;</h3></div></div><div></div></div><p>&#20174;&#26412;&#36136;&#19978;&#35762;&#65292;<tt class="interfacename">BeanFactory</tt>&#20165;&#20165;&#21482;&#26159;&#19968;&#20010;
	  &#32500;&#25252;bean&#23450;&#20041;&#20197;&#21450;&#30456;&#20114;&#20381;&#36182;&#20851;&#31995;&#30340;&#39640;&#32423;&#24037;&#21378;&#25509;&#21475;&#12290;&#36890;&#36807;<tt class="interfacename">BeanFactory
	  </tt>&#25105;&#20204;&#21487;&#20197;&#35775;&#38382;bean&#23450;&#20041;&#12290;&#19979;&#38754;&#30340;&#20363;&#23376;&#21019;&#24314;&#20102;&#19968;&#20010;bean&#24037;&#21378;&#65292;&#27492;&#24037;&#21378;
	  &#23558;&#20174;xml&#25991;&#20214;&#20013;&#35835;&#21462;bean&#23450;&#20041;&#65306;</p><pre class="programlisting">Resource res = new FileSystemResource("beans.xml");
BeanFactory factory = new XmlBeanFactory(res);</pre><p>&#22522;&#26412;&#19978;&#23601;&#36825;&#20123;&#20102;&#65292;&#25509;&#30528;&#20351;&#29992;<tt class="methodname">getBean(String)</tt>
	  &#26041;&#27861;&#23601;&#21487;&#20197;&#21462;&#24471;bean&#30340;&#23454;&#20363;&#65307;<tt class="interfacename">BeanFactory</tt>
	  &#25552;&#20379;&#30340;&#26041;&#27861;&#26497;&#20854;&#31616;&#21333;&#12290; <tt class="interfacename">BeanFactory</tt>&#25509;&#21475;&#25552;&#20379;
	  &#20102;&#38750;&#24120;&#22810;&#30340;&#26041;&#27861;&#65292;&#20294;&#26159;&#23545;&#20110;&#25105;&#20204;&#30340;&#24212;&#29992;&#26469;&#35828;&#65292;&#26368;&#22909;&#27704;&#36828;&#19981;&#35201;&#35843;&#29992;&#23427;&#20204;&#65292;&#24403;&#28982;&#20063;&#21253;&#25324;
	  &#20351;&#29992;<tt class="methodname">getBean(String)</tt>&#26041;&#27861;&#65292;&#36825;&#26679;&#21487;&#20197;&#36991;&#20813;&#25105;&#20204;&#23545;
	  Spring API&#30340;&#20381;&#36182;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="beans-dependencies"></a>3.3.&nbsp;&#20381;&#36182;</h2></div></div><div></div></div><p>&#20856;&#22411;&#30340;&#20225;&#19994;&#24212;&#29992;&#19981;&#20250;&#21482;&#30001;&#21333;&#19968;&#30340;&#23545;&#35937;&#65288;&#25110;Spring&#30340;&#26415;&#35821;bean)&#32452;&#25104;&#12290;&#27627;&#26080;&#30097;&#38382;&#65292;&#21363;&#20351;&#26368;&#31616;&#21333;&#30340;&#31995;&#32479;&#20063;&#38656;&#35201;&#22810;&#20010;&#23545;&#35937;&#20849;&#21516;&#26469;&#23637;&#31034;&#32473;&#29992;&#25143;&#19968;&#20010;&#25972;&#20307;&#30340;&#24212;&#29992;&#12290;&#25509;&#19979;&#26469;&#30340;&#30340;&#20869;&#23481;&#38500;&#20102;&#38416;&#36848;&#22914;&#20309;&#21333;&#29420;&#23450;&#20041;&#19968;&#31995;&#21015;bean&#22806;&#65292;&#36824;&#23558;&#25551;&#36848;&#22914;&#20309;&#35753;&#36825;&#20123;bean&#23545;&#35937;&#19968;&#36215;&#21327;&#21516;&#24037;&#20316;&#26469;&#23454;&#29616;&#19968;&#20010;&#23436;&#25972;&#30340;&#30495;&#23454;&#24212;&#29992;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-collaborators"></a>3.3.1.&nbsp;&#27880;&#20837;&#20381;&#36182;</h3></div></div><div></div></div><p><span class="emphasis"><em>&#20381;&#36182;&#27880;&#20837;</em></span>&#65288;DI&#65289;&#32972;&#21518;&#30340;&#22522;&#26412;&#21407;&#29702;&#26159;&#23545;&#35937;&#20043;&#38388;&#30340;&#20381;&#36182;&#20851;&#31995;&#65288;&#21363;&#19968;&#36215;&#24037;&#20316;&#30340;&#20854;&#23427;&#23545;&#35937;&#65289;&#21482;&#20250;&#36890;&#36807;&#20197;&#19979;&#20960;&#31181;&#26041;&#24335;&#26469;&#23454;&#29616;&#65306;&#26500;&#36896;&#22120;&#30340;&#21442;&#25968;&#12289;&#24037;&#21378;&#26041;&#27861;&#30340;&#21442;&#25968;&#65292;&#25110;&#32473;&#30001;&#26500;&#36896;&#20989;&#25968;&#25110;&#32773;&#24037;&#21378;&#26041;&#27861;&#21019;&#24314;&#30340;&#23545;&#35937;&#35774;&#32622;&#23646;&#24615;&#12290;&#22240;&#27492;&#65292;&#23481;&#22120;&#30340;&#24037;&#20316;&#23601;&#26159;&#21019;&#24314;bean&#26102;<span class="emphasis"><em>&#27880;&#20837;</em></span>&#37027;&#20123;&#20381;&#36182;&#20851;&#31995;&#12290;&#30456;&#23545;&#20110;&#30001;bean&#33258;&#24049;&#26469;&#25511;&#21046;&#20854;&#23454;&#20363;&#21270;&#12289;&#30452;&#25509;&#22312;&#26500;&#36896;&#22120;&#20013;&#25351;&#23450;&#20381;&#36182;&#20851;&#31995;&#25110;&#32773;&#31867;&#20284;<span class="emphasis"><em>&#26381;&#21153;&#23450;&#20301;&#22120;&#65288;Service Locator&#65289;</em></span>&#27169;&#24335;&#36825;3&#31181;&#33258;&#20027;&#25511;&#21046;&#20381;&#36182;&#20851;&#31995;&#27880;&#20837;&#30340;&#26041;&#27861;&#26469;&#35828;&#65292;&#25511;&#21046;&#20174;&#26681;&#26412;&#19978;&#21457;&#29983;&#20102;&#20498;&#36716;&#65292;&#36825;&#20063;&#27491;&#26159;<span class="emphasis"><em>&#25511;&#21046;&#21453;&#36716;&#65288;Inversion of Control&#65292; IoC&#65289;</em></span> &#21517;&#23383;&#30340;&#30001;&#26469;&#12290; </p><p>&#24212;&#29992;DI&#21407;&#21017;&#21518;&#65292;&#20195;&#30721;&#23558;&#26356;&#21152;&#28165;&#26224;&#12290;&#32780;&#19988;&#24403;bean&#33258;&#24049;&#19981;&#20877;&#25285;&#24515;&#23545;&#35937;&#20043;&#38388;&#30340;&#20381;&#36182;&#20851;&#31995;&#65288;&#29978;&#33267;&#19981;&#30693;&#36947;&#20381;&#36182;&#30340;&#23450;&#20041;&#25351;&#23450;&#22320;&#26041;&#21644;&#20381;&#36182;&#30340;&#23454;&#38469;&#31867;&#65289;&#20043;&#21518;&#65292;&#23454;&#29616;&#26356;&#39640;&#23618;&#27425;&#30340;&#26494;&#32806;&#21512;&#23558;&#26131;&#22914;&#21453;&#25484;&#12290;DI&#20027;&#35201;&#26377;&#20004;&#31181;&#27880;&#20837;&#26041;&#24335;&#65292;&#21363;<a href="beans.html#beans-setter-injection" title="3.3.1.2.&nbsp;Setter&#27880;&#20837;">Setter&#27880;&#20837;</a>&#21644;<a href="beans.html#beans-constructor-injection" title="3.3.1.1.&nbsp;&#26500;&#36896;&#22120;&#27880;&#20837;">&#26500;&#36896;&#22120;&#27880;&#20837;</a></p>&#12290;

      <div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-constructor-injection"></a>3.3.1.1.&nbsp;&#26500;&#36896;&#22120;&#27880;&#20837;</h4></div></div><div></div></div><p><span class="emphasis"><em>&#22522;&#20110;&#26500;&#36896;&#22120;</em></span>&#30340;DI&#36890;&#36807;&#35843;&#29992;&#24102;&#21442;&#25968;&#30340;&#26500;&#36896;&#22120;&#26469;&#23454;&#29616;&#65292;&#27599;&#20010;&#21442;&#25968;&#20195;&#34920;&#30528;&#19968;&#20010;&#20381;&#36182;&#12290;&#27492;&#22806;&#65292;&#36824;&#21487;&#36890;&#36807;&#32473;<tt class="literal">stattic</tt>&#24037;&#21378;&#26041;&#27861;&#20256;&#21442;&#25968;&#26469;&#26500;&#36896;bean&#12290;&#25509;&#19979;&#26469;&#30340;&#20171;&#32461;&#23558;&#35748;&#20026;&#32473;&#26500;&#36896;&#22120;&#20256;&#21442;&#19982;&#32473;<tt class="literal">&#38745;&#24577;</tt>&#24037;&#21378;&#26041;&#27861;&#20256;&#21442;&#26159;&#31867;&#20284;&#30340;&#12290;&#19979;&#38754;&#23637;&#31034;&#20102;&#21482;&#33021;&#20351;&#29992;&#26500;&#36896;&#22120;&#21442;&#25968;&#26469;&#27880;&#20837;&#20381;&#36182;&#20851;&#31995;&#30340;&#20363;&#23376;&#12290;&#35831;&#27880;&#24847;&#65292;&#36825;&#20010;&#31867;&#24182;&#27809;&#26377;&#20160;&#20040;<span class="emphasis"><em>&#29305;&#21035;&#20043;&#22788;</em></span>&#12290;</p><pre class="programlisting">public class SimpleMovieLister {

    <i class="lineannotation"><span class="lineannotation">// the <tt class="classname">SimpleMovieLister</tt> has a dependency on a <tt class="interfacename">MovieFinder</tt></span></i>
    private MovieFinder movieFinder;

    <i class="lineannotation"><span class="lineannotation">// a constructor so that the Spring container can 'inject' a <tt class="interfacename">MovieFinder</tt></span></i>
    public SimpleMovieLister(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }
    
    <i class="lineannotation"><span class="lineannotation">// business logic that actually 'uses' the injected <tt class="interfacename">MovieFinder</tt> is omitted...</span></i>
}</pre><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-factory-ctor-arguments-resolution"></a>3.3.1.1.1.&nbsp;&#26500;&#36896;&#22120;&#21442;&#25968;&#35299;&#26512;</h5></div></div><div></div></div><p>&#26500;&#36896;&#22120;&#21442;&#25968;&#35299;&#26512;&#26681;&#25454;&#21442;&#25968;&#31867;&#22411;&#36827;&#34892;&#21305;&#37197;&#65292;&#22914;&#26524;bean&#30340;&#26500;&#36896;&#22120;&#21442;&#25968;&#31867;&#22411;&#23450;&#20041;&#38750;&#24120;&#26126;&#30830;&#65292;&#37027;&#20040;&#22312;bean&#34987;&#23454;&#20363;&#21270;&#30340;&#26102;&#20505;&#65292;bean&#23450;&#20041;&#20013;&#26500;&#36896;&#22120;&#21442;&#25968;&#30340;&#23450;&#20041;&#39034;&#24207;&#23601;&#26159;&#36825;&#20123;&#21442;&#25968;&#30340;&#39034;&#24207;&#65292;&#20381;&#27425;&#36827;&#34892;&#21305;&#37197;&#65292;&#27604;&#22914;&#19979;&#38754;&#30340;&#20195;&#30721;</p><pre class="programlisting">package x.y;

public class Foo {

    public Foo(Bar bar, Baz baz) {
        <i class="lineannotation"><span class="lineannotation">// ...</span></i>
    }
}</pre><p>&#19978;&#36848;&#20363;&#23376;&#20013;&#30001;&#20110;&#26500;&#36896;&#21442;&#25968;&#38750;&#24120;&#26126;&#30830;&#65288;&#36825;&#37324;&#25105;&#20204;&#20551;&#23450; <tt class="classname">Bar</tt>&#21644; <tt class="classname">Baz</tt>&#20043;&#38388;&#19981;&#23384;&#22312;&#32487;&#25215;&#20851;&#31995;&#65289;&#12290;&#22240;&#27492;&#19979;&#38754;&#30340;&#37197;&#32622;&#21363;&#20351;&#27809;&#26377;&#26126;&#30830;&#25351;&#23450;&#26500;&#36896;&#21442;&#25968;&#39034;&#24207;&#65288;&#21644;&#31867;&#22411;&#65289;&#65292;&#20063;&#20250;&#24037;&#20316;&#30340;&#24456;&#22909;&#12290;</p><pre class="programlisting">&lt;beans&gt;
    &lt;bean name="foo" class="x.y.Foo"&gt;
        &lt;constructor-arg&gt;
            &lt;bean class="x.y.Bar"/&gt;
        &lt;/constructor-arg&gt;
        &lt;constructor-arg&gt;
            &lt;bean class="x.y.Baz"/&gt;
        &lt;/constructor-arg&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</pre><p>&#25105;&#20204;&#20877;&#26469;&#30475;&#21478;&#19968;&#20010;bean&#65292;&#35813;bean&#30340;&#26500;&#36896;&#21442;&#25968;&#31867;&#22411;&#24050;&#30693;&#65292;&#21305;&#37197;&#20063;&#27809;&#26377;&#38382;&#39064;(&#36319;&#21069;&#38754;&#30340;&#20363;&#23376;&#19968;&#26679;)&#12290;&#20294;&#26159;&#24403;&#20351;&#29992;&#31616;&#21333;&#31867;&#22411;&#26102;&#65292;&#27604;&#22914;<tt class="literal">&lt;value&gt;true&lt;value&gt;</tt>&#65292;Spring&#23558;&#26080;&#27861;&#30693;&#36947;&#35813;&#20540;&#30340;&#31867;&#22411;&#12290;&#19981;&#20511;&#21161;&#20854;&#20182;&#24110;&#21161;&#65292;&#20182;&#23558;&#26080;&#27861;&#20165;&#20165;&#26681;&#25454;&#21442;&#25968;&#31867;&#22411;&#36827;&#34892;&#21305;&#37197;&#65292;&#27604;&#22914;&#19979;&#38754;&#30340;&#36825;&#20010;&#20363;&#23376;&#65306;</p><pre class="programlisting">package examples;

public class ExampleBean {

    <i class="lineannotation"><span class="lineannotation">// No. of years to the calculate the Ultimate Answer</span></i>
    private int years;

    <i class="lineannotation"><span class="lineannotation">// The Answer to Life, the Universe, and Everything</span></i>
    private String ultimateAnswer;

    public ExampleBean(int years, String ultimateAnswer) {
        this.years = years;
        this.ultimateAnswer = ultimateAnswer;
    }
}</pre><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="beans-factory-ctor-arguments-type"></a>3.3.1.1.1.1.&nbsp;&#26500;&#36896;&#22120;&#21442;&#25968;&#31867;&#22411;&#21305;&#37197;</h6></div></div><div></div></div><p>&#38024;&#23545;&#19978;&#38754;&#30340;&#22330;&#26223;<span class="emphasis"><em>&#21487;&#20197;</em></span>&#36890;&#36807;&#20351;&#29992;<tt class="literal">'type'</tt>&#23646;&#24615;&#26469;&#26174;&#24335;&#25351;&#23450;&#37027;&#20123;&#31616;&#21333;&#31867;&#22411;&#30340;&#26500;&#36896;&#21442;&#25968;&#30340;&#31867;&#22411;&#65292;&#27604;&#22914;&#65306;</p><pre class="programlisting">&lt;bean id="exampleBean" class="examples.ExampleBean"&gt;
  &lt;constructor-arg type="int" value="7500000"/&gt;
  &lt;constructor-arg type="java.lang.String" value="42"/&gt;
&lt;/bean&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="beans-factory-ctor-arguments-index"></a>3.3.1.1.1.2.&nbsp;&#26500;&#36896;&#21442;&#25968;&#32034;&#24341;</h6></div></div><div></div></div><p>&#25105;&#20204;&#36824;&#21487;&#20197;&#36890;&#36807;<tt class="literal">index</tt>&#23646;&#24615;&#26469;&#26174;&#24335;&#25351;&#23450;&#26500;&#36896;&#21442;&#25968;&#30340;&#32034;&#24341;&#65292;&#27604;&#22914;&#19979;&#38754;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;bean id="exampleBean" class="examples.ExampleBean"&gt;
  &lt;constructor-arg index="0" value="7500000"/&gt;
  &lt;constructor-arg index="1" value="42"/&gt;
&lt;/bean&gt;</pre><p>&#36890;&#36807;&#20351;&#29992;&#32034;&#24341;&#23646;&#24615;&#19981;&#20294;&#21487;&#20197;&#35299;&#20915;&#22810;&#20010;&#31616;&#21333;&#23646;&#24615;&#30340;&#28151;&#28102;&#38382;&#39064;&#65292;&#36824;&#21487;&#20197;&#35299;&#20915;&#26377;&#21487;&#33021;&#26377;&#30456;&#21516;&#31867;&#22411;&#30340;2&#20010;&#26500;&#36896;&#21442;&#25968;&#30340;&#28151;&#28102;&#38382;&#39064;&#20102;&#65292;&#27880;&#24847;<span class="emphasis"><em>index&#26159;&#20174;0&#24320;&#22987;</em></span>&#12290;</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-setter-injection"></a>3.3.1.2.&nbsp;Setter&#27880;&#20837;</h4></div></div><div></div></div><p>&#36890;&#36807;&#35843;&#29992;&#26080;&#21442;&#26500;&#36896;&#22120;&#25110;&#26080;&#21442;<tt class="literal">static</tt>&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;bean&#20043;&#21518;&#65292;&#35843;&#29992;&#35813;bean&#30340;setter&#26041;&#27861;&#65292;&#21363;&#21487;&#23454;&#29616;<span class="emphasis"><em>&#22522;&#20110;setter</em></span>&#30340;DI&#12290;</p><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#23558;&#23637;&#31034;&#21482;&#20351;&#29992;setter&#27880;&#20837;&#20381;&#36182;&#12290;&#27880;&#24847;&#65292;&#36825;&#20010;&#31867;&#24182;&#27809;&#26377;&#20160;&#20040;<span class="emphasis"><em>&#29305;&#21035;</em></span>&#20043;&#22788;&#65292;&#23427;&#23601;&#26159;&#26222;&#36890;&#30340;Java&#31867;&#12290;</p><pre class="programlisting">public class SimpleMovieLister {

    <i class="lineannotation"><span class="lineannotation">// the <tt class="classname">SimpleMovieLister</tt> has a dependency on the <tt class="interfacename">MovieFinder</tt></span></i>
    private MovieFinder movieFinder;

    <i class="lineannotation"><span class="lineannotation">// a setter method so that the Spring container can 'inject' a <tt class="interfacename">MovieFinder</tt></span></i>
    public void setMovieFinder(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }

    <i class="lineannotation"><span class="lineannotation">// business logic that actually 'uses' the injected <tt class="interfacename">MovieFinder</tt> is omitted...</span></i>
}</pre></div><div class="sidebar"><p class="title"><b>&#26500;&#36896;&#22120;&#27880;&#20837;&#36824;&#26159;Setter&#27880;&#20837;?</b></p><p>&#30001;&#20110;&#22823;&#37327;&#30340;&#26500;&#36896;&#22120;&#21442;&#25968;&#21487;&#33021;&#20351;&#31243;&#24207;&#21464;&#24471;&#31528;&#25305;&#65292;&#29305;&#21035;&#26159;&#24403;&#26576;&#20123;&#23646;&#24615;&#26159;&#21487;&#36873;&#30340;&#26102;&#20505;&#12290;&#22240;&#27492;&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;Spring&#24320;&#21457;&#22242;&#38431;&#25552;&#20513;&#20351;&#29992;setter&#27880;&#20837;&#12290;&#32780;&#19988;setter DI&#22312;&#20197;&#21518;&#30340;&#26576;&#20010;&#26102;&#20505;&#36824;&#21487;&#23558;&#23454;&#20363;&#37325;&#26032;&#37197;&#32622;&#65288;&#25110;&#37325;&#26032;&#27880;&#20837;&#65289;&#65288;<a href="jmx.html" title="Chapter&nbsp;20.&nbsp;JMX">JMX MBean</a>&#23601;&#26159;&#19968;&#20010;&#24456;&#22909;&#30340;&#20363;&#23376;&#65289;&#12290;</p><p>&#23613;&#31649;&#22914;&#27492;&#65292;&#26500;&#36896;&#22120;&#27880;&#20837;&#36824;&#26159;&#24471;&#21040;&#24456;&#22810;&#32431;&#21270;&#35770;&#32773;&#65288;&#20063;&#26377;&#24456;&#22909;&#30340;&#29702;&#30001;&#65289;&#30340;&#38738;&#30544;&#12290;&#19968;&#27425;&#24615;&#23558;&#25152;&#26377;&#20381;&#36182;&#27880;&#20837;&#30340;&#20570;&#27861;&#24847;&#21619;&#30528;&#65292;&#22312;&#26410;&#23436;&#20840;&#21021;&#22987;&#21270;&#30340;&#29366;&#24577;&#19979;&#65292;&#27492;&#23545;&#35937;&#19981;&#20250;&#36820;&#22238;&#32473;&#23458;&#25143;&#20195;&#30721;&#65288;&#25110;&#34987;&#35843;&#29992;&#65289;&#65292;&#27492;&#22806;&#23545;&#35937;&#20063;&#19981;&#38656;&#35201;&#20877;&#27425;&#34987;&#37325;&#26032;&#37197;&#32622;&#65288;&#25110;&#37325;&#26032;&#27880;&#20837;&#65289;&#12290;</p><p>&#23545;&#20110;&#27880;&#20837;&#31867;&#22411;&#30340;&#36873;&#25321;&#24182;&#27809;&#30828;&#24615;&#30340;&#35268;&#23450;&#12290;&#21482;&#35201;&#33021;&#36866;&#21512;&#20320;&#30340;&#24212;&#29992;&#65292;&#26080;&#35770;&#20351;&#29992;&#20309;&#31181;&#31867;&#22411;&#30340;DI&#37117;&#21487;&#20197;&#12290;&#23545;&#20110;&#37027;&#20123;&#27809;&#26377;&#28304;&#20195;&#30721;&#30340;&#31532;&#19977;&#26041;&#31867;&#65292;&#25110;&#32773;&#27809;&#26377;&#25552;&#20379;setter&#26041;&#27861;&#30340;&#36951;&#30041;&#20195;&#30721;&#65292;&#25105;&#20204;&#21017;&#21035;&#26080;&#36873;&#25321;&#65293;&#65293;&#26500;&#36896;&#22120;&#27880;&#20837;&#23558;&#26159;&#20320;&#21807;&#19968;&#30340;&#36873;&#25321;&#12290;</p></div><p><tt class="interfacename">BeanFactory</tt>&#23545;&#20110;&#23427;&#25152;&#31649;&#29702;&#30340;bean&#25552;&#20379;&#20004;&#31181;&#27880;&#20837;&#20381;&#36182;&#26041;&#24335;&#65288;&#23454;&#38469;&#19978;&#23427;&#20063;&#25903;&#25345;&#21516;&#26102;&#20351;&#29992;&#26500;&#36896;&#22120;&#27880;&#20837;&#21644;Setter&#26041;&#24335;&#27880;&#20837;&#20381;&#36182;&#65289;&#12290;&#38656;&#35201;&#27880;&#20837;&#30340;&#20381;&#36182;&#23558;&#20445;&#23384;&#22312;<tt class="interfacename">BeanDefinition</tt>&#20013;&#65292;&#23427;&#33021;&#26681;&#25454;&#25351;&#23450;&#30340;<tt class="interfacename">PropertyEditor</tt>&#23454;&#29616;&#23558;&#23646;&#24615;&#20174;&#19968;&#31181;&#26684;&#24335;&#36716;&#25442;&#25104;&#21478;&#22806;&#19968;&#31181;&#26684;&#24335;&#12290;&#28982;&#32780;&#65292;&#22823;&#37096;&#20221;&#30340;Spring&#29992;&#25143;&#24182;&#19981;&#38656;&#35201;&#30452;&#25509;&#20197;&#32534;&#31243;&#30340;&#26041;&#24335;&#22788;&#29702;&#36825;&#20123;&#31867;&#65292;&#32780;&#26159;&#37319;&#29992;XML&#30340;&#26041;&#24335;&#26469;&#36827;&#34892;&#23450;&#20041;&#65292;&#22312;&#20869;&#37096;&#36825;&#20123;&#23450;&#20041;&#23558;&#34987;&#36716;&#25442;&#25104;&#30456;&#24212;&#31867;&#30340;&#23454;&#20363;&#65292;&#24182;&#26368;&#32456;&#24471;&#21040;&#19968;&#20010;Spring IoC&#23481;&#22120;&#23454;&#20363;&#12290;</p><p>&#22788;&#29702;bean&#20381;&#36182;&#20851;&#31995;&#36890;&#24120;&#25353;&#20197;&#19979;&#27493;&#39588;&#36827;&#34892;&#65306;</p><div class="orderedlist"><ol type="1"><li><p>&#26681;&#25454;&#23450;&#20041;bean&#30340;&#37197;&#32622;&#65288;&#25991;&#20214;&#65289;&#21019;&#24314;&#24182;&#21021;&#22987;&#21270;<tt class="interfacename">BeanFactory</tt>&#23454;&#20363;&#65288;&#22823;&#37096;&#20221;&#30340;Spring&#29992;&#25143;&#20351;&#29992;&#25903;&#25345;XML&#26684;&#24335;&#37197;&#32622;&#25991;&#20214;&#30340;<tt class="interfacename">BeanFactory</tt>&#25110;<tt class="interfacename">ApplicationContext</tt>&#23454;&#29616;&#65289;&#12290;</p></li><li><p>&#27599;&#20010;bean&#30340;&#20381;&#36182;&#23558;&#20197;&#23646;&#24615;&#12289;&#26500;&#36896;&#22120;&#21442;&#25968;&#12289;&#25110;&#38745;&#24577;&#24037;&#21378;&#26041;&#27861;&#21442;&#25968;&#30340;&#24418;&#24335;&#20986;&#29616;&#12290;<span class="emphasis"><em>&#24403;&#36825;&#20123;bean&#34987;&#23454;&#38469;&#21019;&#24314;&#26102;</em></span>&#65292;&#36825;&#20123;&#20381;&#36182;&#20063;&#23558;&#20250;&#25552;&#20379;&#32473;&#35813;bean&#12290;</p></li><li><p>&#27599;&#20010;&#23646;&#24615;&#25110;&#26500;&#36896;&#22120;&#21442;&#25968;&#26082;&#21487;&#20197;&#26159;&#19968;&#20010;&#23454;&#38469;&#30340;&#20540;&#65292;&#20063;&#21487;&#20197;&#26159;&#23545;&#35813;&#23481;&#22120;&#20013;&#21478;&#19968;&#20010;bean&#30340;&#24341;&#29992;&#12290;</p></li><li><p><a name="beans-factory-collaborators-propertyeditor"></a>&#27599;&#20010;&#25351;&#23450;&#30340;&#23646;&#24615;&#25110;&#26500;&#36896;&#22120;&#21442;&#25968;&#20540;&#24517;&#39035;&#33021;&#22815;&#34987;&#36716;&#25442;&#25104;&#29305;&#23450;&#30340;&#26684;&#24335;&#25110;&#26500;&#36896;&#21442;&#25968;&#25152;&#38656;&#30340;&#31867;&#22411;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;Spring&#20250;&#20197;String&#31867;&#22411;&#25552;&#20379;&#20540;&#36716;&#25442;&#25104;&#21508;&#31181;&#20869;&#32622;&#31867;&#22411;&#65292;&#27604;&#22914;<tt class="literal">int</tt>&#12289;<tt class="literal">long</tt>&#12289;<tt class="literal">String</tt>&#12289;<tt class="literal">boolean</tt>&#31561;&#12290;</p></li></ol></div><p>Spring&#20250;&#22312;&#23481;&#22120;&#34987;&#21019;&#24314;&#26102;&#39564;&#35777;&#23481;&#22120;&#20013;&#27599;&#20010;bean&#30340;&#37197;&#32622;&#65292;&#21253;&#25324;&#39564;&#35777;&#37027;&#20123;bean&#25152;&#24341;&#29992;&#30340;&#23646;&#24615;&#26159;&#21542;&#25351;&#21521;&#19968;&#20010;&#26377;&#25928;&#30340;bean&#65288;&#21363;&#34987;&#24341;&#29992;&#30340;bean&#20063;&#22312;&#23481;&#22120;&#20013;&#34987;&#23450;&#20041;&#65289;&#12290;&#28982;&#32780;&#65292;&#22312;bean<span class="emphasis"><em>&#34987;&#23454;&#38469;&#21019;&#24314;</em></span>&#20043;&#21069;&#65292;bean&#30340;&#23646;&#24615;&#24182;&#19981;&#20250;&#34987;&#35774;&#32622;&#12290;&#23545;&#20110;&#37027;&#20123;singleton&#31867;&#22411;&#21644;&#34987;&#35774;&#32622;&#20026;&#25552;&#21069;&#23454;&#20363;&#21270;&#30340;bean&#65288;&#27604;&#22914;<tt class="interfacename">ApplicationContext</tt>&#20013;&#30340;singleton bean&#65289;&#32780;&#35328;&#65292;bean&#23454;&#20363;&#23558;&#19982;&#23481;&#22120;&#21516;&#26102;&#34987;&#21019;&#24314;&#12290;&#32780;&#21478;&#22806;&#19968;&#20123;bean&#21017;&#20250;&#22312;&#38656;&#35201;&#30340;&#26102;&#20505;&#34987;&#21019;&#24314;&#65292;&#20276;&#38543;&#30528;bean&#34987;&#23454;&#38469;&#21019;&#24314;&#65292;&#20316;&#20026;&#35813;bean&#30340;&#20381;&#36182;bean&#20197;&#21450;&#20381;&#36182;bean&#30340;&#20381;&#36182;bean&#65288;&#20381;&#27492;&#31867;&#25512;&#65289;&#20063;&#23558;&#34987;&#21019;&#24314;&#21644;&#20998;&#37197;&#12290;</p><div class="sidebar"><p class="title"><b>&#24490;&#29615;&#20381;&#36182;</b></p><p>&#22312;&#37319;&#29992;&#26500;&#36896;&#22120;&#27880;&#20837;&#30340;&#26041;&#24335;&#37197;&#32622;bean&#26102;&#65292;&#24456;&#26377;&#21487;&#33021;&#20250;&#20135;&#29983;&#24490;&#29615;&#20381;&#36182;&#30340;&#24773;&#20917;&#12290;</p><p>&#27604;&#22914;&#35828;&#65292;&#19968;&#20010;&#31867;A&#65292;&#38656;&#35201;&#36890;&#36807;&#26500;&#36896;&#22120;&#27880;&#20837;&#31867;B&#65292;&#32780;&#31867;B&#21448;&#38656;&#35201;&#36890;&#36807;&#26500;&#36896;&#22120;&#27880;&#20837;&#31867;A&#12290;&#22914;&#26524;&#20026;&#31867;A&#21644;B&#37197;&#32622;&#30340;bean&#34987;&#20114;&#30456;&#27880;&#20837;&#30340;&#35805;&#65292;&#37027;&#20040;Spring IoC&#23481;&#22120;&#23558;&#26816;&#27979;&#20986;&#24490;&#29615;&#24341;&#29992;&#65292;&#24182;&#25243;&#20986; <tt class="classname">BeanCurrentlyInCreationException</tt>&#24322;&#24120;&#12290;</p><p>&#23545;&#20110;&#27492;&#38382;&#39064;&#65292;&#19968;&#20010;&#21487;&#33021;&#30340;&#35299;&#20915;&#26041;&#27861;&#23601;&#26159;&#20462;&#25913;&#28304;&#20195;&#30721;&#65292;&#23558;&#26576;&#20123;&#26500;&#36896;&#22120;&#27880;&#20837;&#25913;&#20026;setter&#27880;&#20837;&#12290;&#21478;&#19968;&#20010;&#35299;&#20915;&#26041;&#27861;&#23601;&#26159;&#23436;&#20840;&#25918;&#24323;&#26500;&#36896;&#22120;&#27880;&#20837;&#65292;&#21482;&#20351;&#29992;setter&#27880;&#20837;&#12290;&#25442;&#21477;&#35805;&#35828;&#65292;&#38500;&#20102;&#26497;&#23569;&#25968;&#20363;&#22806;&#65292;&#22823;&#37096;&#20998;&#30340;&#24490;&#29615;&#20381;&#36182;&#37117;&#26159;&#21487;&#20197;&#36991;&#20813;&#30340;&#65292;&#19981;&#36807;&#37319;&#29992;setter&#27880;&#20837;&#20135;&#29983;&#24490;&#29615;&#20381;&#36182;&#30340;&#21487;&#33021;&#24615;&#20063;&#26159;&#23384;&#22312;&#30340;&#12290;</p><p>&#19982;<span class="emphasis"><em>&#36890;&#24120;</em></span>&#25105;&#20204;&#35265;&#21040;&#30340;&#38750;&#24490;&#29615;&#20381;&#36182;&#30340;&#24773;&#20917;&#26377;&#25152;&#19981;&#21516;&#65292;&#22312;&#20004;&#20010;bean&#20043;&#38388;&#30340;&#24490;&#29615;&#20381;&#36182;&#23558;&#23548;&#33268;&#19968;&#20010;bean&#22312;&#34987;&#23436;&#20840;&#21021;&#22987;&#21270;&#30340;&#26102;&#20505;&#34987;&#27880;&#20837;&#21040;&#21478;&#19968;&#20010;bean&#20013;&#65288;&#22914;&#21516;&#25105;&#20204;&#24120;&#35828;&#30340;&#20808;&#26377;&#34507;&#36824;&#26159;&#20808;&#26377;&#40481;&#30340;&#24773;&#20917;&#65289;&#12290;</p></div><p>&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;&#20320;&#21487;&#20197;&#20449;&#36182;Spring&#65292;&#23427;&#20250;&#22312;&#23481;&#22120;&#21152;&#36733;&#26102;&#21457;&#29616;&#37197;&#32622;&#38169;&#35823;&#65288;&#27604;&#22914;&#23545;&#26080;&#25928;bean&#30340;&#24341;&#29992;&#20197;&#21450;&#24490;&#29615;&#20381;&#36182;&#65289;&#12290;Spring&#20250;&#22312;bean&#21019;&#24314;&#26102;&#25165;&#21435;&#35774;&#32622;&#23646;&#24615;&#21644;&#20381;&#36182;&#20851;&#31995;&#65288;&#21482;&#22312;&#38656;&#35201;&#26102;&#21019;&#24314;&#25152;&#20381;&#36182;&#30340;&#20854;&#20182;&#23545;&#35937;&#65289;&#12290;&#36825;&#24847;&#21619;&#30528;&#21363;&#20351;Spring&#23481;&#22120;&#34987;&#27491;&#30830;&#21152;&#36733;&#65292;&#24403;&#33719;&#21462;&#19968;&#20010;bean&#23454;&#20363;&#26102;&#65292;&#22914;&#26524;&#22312;&#21019;&#24314;bean&#25110;&#32773;&#35774;&#32622;&#20381;&#36182;&#26102;&#20986;&#29616;&#38382;&#39064;&#65292;&#20173;&#28982;&#20250;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#12290;&#22240;&#32570;&#23569;&#25110;&#35774;&#32622;&#20102;&#19968;&#20010;&#26080;&#25928;&#23646;&#24615;&#32780;&#23548;&#33268;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#30340;&#24773;&#20917;&#30340;&#30830;&#26159;&#23384;&#22312;&#30340;&#12290;&#22240;&#20026;&#19968;&#20123;&#37197;&#32622;&#38382;&#39064;&#32780;&#23548;&#33268;&#28508;&#22312;&#30340;&#21487;&#35265;&#24615;&#34987;&#24310;&#36831;&#65292;&#25152;&#20197;&#22312;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;<tt class="interfacename">ApplicationContext</tt>&#23454;&#29616;&#20013;&#30340;bean&#37319;&#29992;&#25552;&#21069;&#23454;&#20363;&#21270;&#30340;singleton&#27169;&#24335;&#12290;&#22312;&#23454;&#38469;&#38656;&#35201;&#20043;&#21069;&#21019;&#24314;&#36825;&#20123;bean&#23558;&#24102;&#26469;&#26102;&#38388;&#19982;&#20869;&#23384;&#30340;&#24320;&#38144;&#12290;&#32780;&#36825;&#26679;&#20570;&#30340;&#22909;&#22788;&#23601;&#26159;<tt class="interfacename">ApplicationContext</tt>&#34987;&#21152;&#36733;&#30340;&#26102;&#20505;&#21487;&#20197;&#23613;&#26089;&#30340;&#21457;&#29616;&#19968;&#20123;&#37197;&#32622;&#30340;&#38382;&#39064;&#12290;&#19981;&#36807;&#29992;&#25143;&#20063;&#21487;&#20197;&#26681;&#25454;&#38656;&#35201;&#37319;&#29992;&#24310;&#36831;&#23454;&#20363;&#21270;&#26469;&#26367;&#20195;&#40664;&#35748;&#30340;singleton&#27169;&#24335;&#12290;</p><p>&#22914;&#26524;&#25735;&#24320;&#24490;&#29615;&#20381;&#36182;&#19981;&#35848;&#65292;&#24403;&#21327;&#20316;bean&#34987;&#27880;&#20837;&#21040;&#20381;&#36182;bean&#26102;&#65292;&#21327;&#20316;bean&#24517;&#39035;&#22312;&#20381;&#36182;bean&#20043;&#21069;<span class="emphasis"><em>&#23436;&#20840;</em></span>&#37197;&#32622;&#22909;&#12290;&#20363;&#22914;bean A&#23545;bean B&#23384;&#22312;&#20381;&#36182;&#20851;&#31995;&#65292;&#37027;&#20040;Spring IoC&#23481;&#22120;&#22312;&#35843;&#29992;bean A&#30340;setter&#26041;&#27861;&#20043;&#21069;&#65292;bean B&#24517;&#39035;&#34987;&#23436;&#20840;&#37197;&#32622;&#65292;&#36825;&#37324;&#25152;&#35859;<span class="emphasis"><em>&#23436;&#20840;&#37197;&#32622;</em></span>&#30340;&#24847;&#24605;&#23601;&#26159;bean&#23558;&#34987;&#23454;&#20363;&#21270;&#65288;&#22914;&#26524;&#19981;&#26159;&#37319;&#29992;&#25552;&#21069;&#23454;&#20363;&#21270;&#30340;singleton&#27169;&#24335;&#65289;&#65292;&#30456;&#20851;&#30340;&#20381;&#36182;&#20063;&#23558;&#34987;&#35774;&#32622;&#22909;&#65292;&#32780;&#19988;&#25152;&#26377;&#30456;&#20851;&#30340;lifecycle&#26041;&#27861;&#65288;&#22914;<a href="beans.html#beans-factory-lifecycle-initializingbean" title="3.5.1.1.&nbsp;&#21021;&#22987;&#21270;&#22238;&#35843;">IntializingBean</a>&#30340;init&#26041;&#27861;&#20197;&#21450;callback&#26041;&#27861;&#65289;&#20063;&#23558;&#34987;&#35843;&#29992;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-some-examples"></a>3.3.1.3.&nbsp;&#19968;&#20123;&#20363;&#23376;</h4></div></div><div></div></div><p>&#39318;&#20808;&#26159;&#19968;&#20010;&#29992;XML&#26684;&#24335;&#23450;&#20041;&#30340;Setter DI&#20363;&#23376;&#12290;&#30456;&#20851;&#30340;XML&#37197;&#32622;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;bean id="exampleBean" class="examples.ExampleBean"&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- setter injection using the nested <tt class="literal">&lt;ref/&gt;</tt> element --&gt;</span></i>
  &lt;property name="beanOne"&gt;&lt;ref bean="anotherExampleBean"/&gt;&lt;/property&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- setter injection using the neater 'ref' attribute --&gt;</span></i>
  &lt;property name="beanTwo" ref="yetAnotherBean"/&gt;
  &lt;property name="integerProperty" value="1"/&gt;
&lt;/bean&gt;

&lt;bean id="anotherExampleBean" class="examples.AnotherBean"/&gt;
&lt;bean id="yetAnotherBean" class="examples.YetAnotherBean"/&gt;</pre><pre class="programlisting">public class ExampleBean {

    private AnotherBean beanOne;
    private YetAnotherBean beanTwo;
    private int i;

    public void setBeanOne(AnotherBean beanOne) {
        this.beanOne = beanOne;
    }

    public void setBeanTwo(YetAnotherBean beanTwo) {
        this.beanTwo = beanTwo;
    }

    public void setIntegerProperty(int i) {
        this.i = i;
    }    
}</pre><p>&#27491;&#22914;&#20320;&#25152;&#30475;&#21040;&#30340;&#65292;bean&#31867;&#20013;&#30340;setter&#26041;&#27861;&#19982;xml&#25991;&#20214;&#20013;&#37197;&#32622;&#30340;&#23646;&#24615;&#26159;&#19968;&#19968;&#23545;&#24212;&#30340;&#12290;&#25509;&#30528;&#26159;&#26500;&#36896;&#22120;&#27880;&#20837;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;bean id="exampleBean" class="examples.ExampleBean"&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- constructor injection using the nested <tt class="literal">&lt;ref/&gt;</tt> element --&gt;</span></i>
  &lt;constructor-arg&gt;
    &lt;ref bean="anotherExampleBean"/&gt;
  &lt;/constructor-arg&gt;
  
  <i class="lineannotation"><span class="lineannotation">&lt;!-- constructor injection using the neater 'ref' attribute --&gt;</span></i>
  &lt;constructor-arg ref="yetAnotherBean"/&gt;
  
  &lt;constructor-arg type="int" value="1"/&gt;
&lt;/bean&gt;

&lt;bean id="anotherExampleBean" class="examples.AnotherBean"/&gt;
&lt;bean id="yetAnotherBean" class="examples.YetAnotherBean"/&gt;</pre><pre class="programlisting">public class ExampleBean {

    private AnotherBean beanOne;
    private YetAnotherBean beanTwo;
    private int i;
    
    public ExampleBean(
        AnotherBean anotherBean, YetAnotherBean yetAnotherBean, int i) {
        this.beanOne = anotherBean;
        this.beanTwo = yetAnotherBean;
        this.i = i;
    }
}</pre><p>&#22914;&#20320;&#25152;&#35265;&#65292;&#22312;xml bean&#23450;&#20041;&#20013;&#25351;&#23450;&#30340;&#26500;&#36896;&#22120;&#21442;&#25968;&#23558;&#34987;&#29992;&#26469;&#20316;&#20026;&#20256;&#36882;&#32473;&#31867;<tt class="classname">ExampleBean</tt>&#26500;&#36896;&#22120;&#30340;&#21442;&#25968;&#12290;</p><p>&#29616;&#22312;&#26469;&#30740;&#31350;&#19968;&#20010;&#26367;&#20195;&#26500;&#36896;&#22120;&#30340;&#26041;&#27861;&#65292;&#37319;&#29992;<tt class="literal">static</tt>&#24037;&#21378;&#26041;&#27861;&#36820;&#22238;&#23545;&#35937;&#23454;&#20363;&#65306;</p><pre class="programlisting">&lt;bean id="exampleBean" class="examples.ExampleBean"
      factory-method="createInstance"&gt;
  &lt;constructor-arg ref="anotherExampleBean"/&gt;
  &lt;constructor-arg ref="yetAnotherBean"/&gt;
  &lt;constructor-arg value="1"/&gt; 
&lt;/bean&gt;

&lt;bean id="anotherExampleBean" class="examples.AnotherBean"/&gt;
&lt;bean id="yetAnotherBean" class="examples.YetAnotherBean"/&gt;</pre><pre class="programlisting">public class ExampleBean {

    <i class="lineannotation"><span class="lineannotation">// a private constructor</span></i>
    private ExampleBean(...) {
      ...
    }
    <i class="lineannotation"><span class="lineannotation">
    // a static factory method; the arguments to this method can be
    // considered the dependencies of the bean that is returned,
    // regardless of how those arguments are actually used.</span></i>
    public static ExampleBean createInstance (
            AnotherBean anotherBean, YetAnotherBean yetAnotherBean, int i) {

        ExampleBean eb = new ExampleBean (...);
        <i class="lineannotation"><span class="lineannotation">// some other operations...</span></i>
        return eb;
    }
}</pre><p>&#35831;&#27880;&#24847;&#65292;&#20256;&#32473;<tt class="literal">static</tt>&#24037;&#21378;&#26041;&#27861;&#30340;&#21442;&#25968;&#30001;<tt class="literal">constructor-arg</tt>&#20803;&#32032;&#25552;&#20379;&#65292;&#36825;&#19982;&#20351;&#29992;&#26500;&#36896;&#22120;&#27880;&#20837;&#26102;&#23436;&#20840;&#19968;&#26679;&#12290;&#32780;&#19988;&#65292;&#37325;&#35201;&#30340;&#26159;&#65292;&#24037;&#21378;&#26041;&#27861;&#25152;&#36820;&#22238;&#30340;&#23454;&#20363;&#30340;&#31867;&#22411;&#24182;&#19981;&#19968;&#23450;&#35201;&#19982;&#21253;&#21547;<tt class="literal">static</tt>&#24037;&#21378;&#26041;&#27861;&#30340;&#31867;&#31867;&#22411;&#19968;&#33268;&#12290;&#23613;&#31649;&#22312;&#27492;&#20363;&#23376;&#20013;&#23427;&#30340;&#30830;&#26159;&#36825;&#26679;&#12290;&#38750;&#38745;&#24577;&#30340;&#23454;&#20363;&#24037;&#21378;&#26041;&#27861;&#19982;&#27492;&#30456;&#21516;&#65288;&#38500;&#20102;&#20351;&#29992;<tt class="literal">factory-bean</tt>&#23646;&#24615;&#26367;&#20195;<tt class="literal">class</tt>&#23646;&#24615;&#22806;&#65289;&#65292;&#22240;&#32780;&#19981;&#22312;&#27492;&#32454;&#36848;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-properties-detailed"></a>3.3.2.&nbsp;&#20381;&#36182;&#37197;&#32622;&#35814;&#35299;</h3></div></div><div></div></div><p>&#27491;&#22914;&#21069;&#38754;&#31456;&#33410;&#25152;&#25552;&#21040;&#30340;&#65292;bean&#30340;&#23646;&#24615;&#21450;&#26500;&#36896;&#22120;&#21442;&#25968;&#26082;&#21487;&#20197;&#24341;&#29992;&#23481;&#22120;&#20013;&#30340;&#20854;&#20182;bean&#65292;&#20063;&#21487;&#20197;&#26159;&#20869;&#32852;&#65288;inline&#65289;bean&#12290;&#22312;spring&#30340;XML&#37197;&#32622;&#20013;&#20351;&#29992;<tt class="literal">&lt;property/&gt;</tt>&#21644;<tt class="literal">&lt;constructor-arg/&gt;</tt>&#20803;&#32032;&#23450;&#20041;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-value-element"></a>3.3.2.1.&nbsp;&#30452;&#25509;&#21464;&#37327;(&#22522;&#26412;&#31867;&#22411;&#12289;<tt class="literal">Strings</tt>&#31867;&#22411;&#31561;&#12290;)</h4></div></div><div></div></div><p><tt class="literal">&lt;value/&gt;</tt>&#20803;&#32032;&#36890;&#36807;&#20154;&#21487;&#20197;&#29702;&#35299;&#30340;&#23383;&#31526;&#20018;&#26469;&#25351;&#23450;&#23646;&#24615;&#25110;&#26500;&#36896;&#22120;&#21442;&#25968;&#30340;&#20540;&#12290;&#27491;&#22914;<a href="beans.html#beans-factory-collaborators-propertyeditor">&#21069;&#38754;</a>&#25152;&#25552;&#21040;&#30340;&#65292;JavaBean <tt class="literal">PropertyEditor</tt>&#23558;&#29992;&#20110;&#25226;&#23383;&#31526;&#20018;&#20174;<tt class="classname">java.lang.String</tt>&#31867;&#22411;&#36716;&#21270;&#20026;&#23454;&#38469;&#30340;&#23646;&#24615;&#25110;&#21442;&#25968;&#31867;&#22411;&#12290;</p><pre class="programlisting">&lt;bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"&gt;
  
  <i class="lineannotation"><span class="lineannotation">&lt;!-- results in a <tt class="methodname">setDriverClassName(String)</tt> call --&gt;</span></i>
  &lt;property name="driverClassName"&gt;
    &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;
  &lt;/property&gt;
  &lt;property name="url"&gt;
    &lt;value&gt;jdbc:mysql://localhost:3306/mydb&lt;/value&gt;
  &lt;/property&gt;
  &lt;property name="username"&gt;
    &lt;value&gt;root&lt;/value&gt;
  &lt;/property&gt;
  &lt;property name="password"&gt;
    &lt;value&gt;masterkaoli&lt;/value&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><p> <tt class="literal">&lt;property/&gt;</tt> &#21644;<tt class="literal">&lt;constructor-arg/&gt;</tt> &#20803;&#32032;&#20013;&#20063;&#21487;&#20197;&#20351;&#29992;<tt class="literal">'value'</tt> &#23646;&#24615;&#65292;&#36825;&#26679;&#20250;&#20351;&#25105;&#20204;&#30340;&#37197;&#32622;&#26356;&#31616;&#27905;&#65292;&#27604;&#22914;&#19979;&#38754;&#30340;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"&gt;
  
  <i class="lineannotation"><span class="lineannotation">&lt;!-- results in a <tt class="methodname">setDriverClassName(String)</tt> call --&gt;</span></i>
  &lt;property name="driverClassName" value="com.mysql.jdbc.Driver"/&gt;
  &lt;property name="url" value="jdbc:mysql://localhost:3306/mydb"/&gt;
  &lt;property name="username" value="root"/&gt;
  &lt;property name="password" value="masterkaoli"/&gt;
&lt;/bean&gt;</pre><p>Spring&#22242;&#38431;&#26356;&#20542;&#21521;&#37319;&#29992;&#23646;&#24615;&#26041;&#24335;&#65288;&#20351;&#29992;<tt class="literal">&lt;value/&gt;</tt>&#20803;&#32032;&#65289;&#26469;&#23450;&#20041;value&#20540;&#12290;&#24403;&#28982;&#25105;&#20204;&#20063;&#21487;&#20197;&#25353;&#29031;&#19979;&#38754;&#36825;&#31181;&#26041;&#24335;&#37197;&#32622;&#19968;&#20010;<tt class="classname">java.util.Properties</tt>&#23454;&#20363;&#65306;</p><pre class="programlisting">&lt;bean id="mappings" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"&gt;
            
   <i class="lineannotation"><span class="lineannotation">&lt;!-- typed as a <tt class="classname">java.util.Properties</tt> --&gt;</span></i>
   &lt;property name="properties"&gt;
      &lt;value&gt;
         jdbc.driver.className=com.mysql.jdbc.Driver
         jdbc.url=jdbc:mysql://localhost:3306/mydb
      &lt;/value&gt;
   &lt;/property&gt;
&lt;/bean&gt;</pre><p>&#30475;&#21040;&#20160;&#20040;&#20102;&#21527;&#65311;&#22914;&#26524;&#37319;&#29992;&#19978;&#38754;&#30340;&#37197;&#32622;&#65292;Spring&#23481;&#22120;&#23558;&#20351;&#29992;JavaBean <tt class="interfacename">PropertyEditor</tt>&#25226;<tt class="literal">&lt;value/&gt;</tt>&#20803;&#32032;&#20013;&#30340;&#25991;&#26412;&#36716;&#25442;&#20026;&#19968;&#20010;<tt class="classname">java.util.Properties</tt>&#23454;&#20363;&#12290;&#30001;&#20110;&#36825;&#31181;&#20570;&#27861;&#30340;&#31616;&#21333;&#65292;&#22240;&#27492;Spring&#22242;&#38431;&#22312;&#24456;&#22810;&#22320;&#26041;&#20063;&#20250;&#37319;&#29992;&#20869;&#23884;&#30340;<tt class="literal">&lt;value/&gt;</tt>&#20803;&#32032;&#26469;&#20195;&#26367;<tt class="literal">value</tt>&#23646;&#24615;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-idref-element"></a>3.3.2.1.1.&nbsp;<tt class="literal">idref</tt>&#20803;&#32032;</h5></div></div><div></div></div><p><tt class="literal">idref</tt>&#20803;&#32032;&#29992;&#26469;&#23558;&#23481;&#22120;&#20869;&#20854;&#23427;bean&#30340;<span class="emphasis"><em>id</em></span>&#20256;&#32473;<tt class="literal">&lt;constructor-arg/&gt;</tt> &#25110; <tt class="literal">&lt;property/&gt;</tt>&#20803;&#32032;&#65292;&#21516;&#26102;&#25552;&#20379;&#38169;&#35823;&#39564;&#35777;&#21151;&#33021;&#12290;</p><pre class="programlisting">&lt;bean id="theTargetBean" class="..."/&gt;

&lt;bean id="theClientBean" class="..."&gt;
    &lt;property name="targetName"&gt;
        &lt;idref bean="theTargetBean" /&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p>&#19978;&#36848;bean&#23450;&#20041;&#29255;&#27573;<span class="emphasis"><em>&#23436;&#20840;&#22320;</em></span>&#31561;&#21516;&#20110;&#65288;&#22312;&#36816;&#34892;&#26102;&#65289;&#20197;&#19979;&#30340;&#29255;&#27573;&#65306;</p><pre class="programlisting">&lt;bean id="theTargetBean" class="..." /&gt;

&lt;bean id="client" class="..."&gt;
    &lt;property name="targetName" value="theTargetBean" /&gt;
&lt;/bean&gt;</pre><p>&#31532;&#19968;&#31181;&#24418;&#24335;&#27604;&#31532;&#20108;&#31181;&#26356;&#21487;&#21462;&#30340;&#20027;&#35201;&#21407;&#22240;&#26159;&#65292;&#20351;&#29992;<tt class="literal">idref</tt>&#26631;&#35760;&#20801;&#35768;&#23481;&#22120;<span class="emphasis"><em>&#22312;&#37096;&#32626;&#26102;</em></span> &#39564;&#35777;&#25152;&#34987;&#24341;&#29992;&#30340;bean&#26159;&#21542;&#23384;&#22312;&#12290;&#32780;&#31532;&#20108;&#31181;&#26041;&#24335;&#20013;&#65292;&#20256;&#32473;<tt class="literal">client</tt> bean&#30340;<tt class="literal">targetName</tt>&#23646;&#24615;&#20540;&#24182;&#27809;&#26377;&#34987;&#39564;&#35777;&#12290;&#20219;&#20309;&#30340;&#36755;&#20837;&#38169;&#35823;&#20165;&#22312;<tt class="literal">client</tt>  bean&#23454;&#38469;&#23454;&#20363;&#21270;&#26102;&#25165;&#20250;&#34987;&#21457;&#29616;&#65288;&#21487;&#33021;&#20276;&#38543;&#30528;&#33268;&#21629;&#30340;&#38169;&#35823;&#65289;&#12290;&#22914;&#26524;<tt class="literal">client</tt> bean &#26159;<a href="beans.html#beans-factory-scopes" title="3.4.&nbsp;Bean&#30340;&#20316;&#29992;&#22495;">prototype</a>&#31867;&#22411;&#30340;bean&#65292;&#21017;&#27492;&#36755;&#20837;&#38169;&#35823;&#65288;&#21450;&#30001;&#27492;&#23548;&#33268;&#30340;&#24322;&#24120;&#65289;&#21487;&#33021;&#22312;&#23481;&#22120;&#37096;&#32626;&#24456;&#20037;&#20197;&#21518;&#25165;&#20250;&#34987;&#21457;&#29616;&#12290;</p><p>&#27492;&#22806;&#65292;&#22914;&#26524;&#34987;&#24341;&#29992;&#30340;bean&#22312;&#21516;&#19968;XML&#25991;&#20214;&#20869;&#65292;&#19988;bean&#21517;&#23383;&#23601;&#26159;bean <span class="emphasis"><em>id</em></span>&#65292;&#37027;&#20040;&#21487;&#20197;&#20351;&#29992;<tt class="literal">local</tt>&#23646;&#24615;&#65292;&#27492;&#23646;&#24615;&#20801;&#35768;XML&#35299;&#26512;&#22120;&#22312;&#35299;&#26512;XML&#25991;&#20214;&#26102;&#23545;&#24341;&#29992;&#30340;bean&#36827;&#34892;&#39564;&#35777;&#12290;</p><pre class="programlisting">&lt;property name="targetName"&gt;
   <i class="lineannotation"><span class="lineannotation">&lt;!-- a bean with an id of '<tt class="literal">theTargetBean</tt>' must exist; otherwise an XML exception will be thrown --&gt;</span></i>
   &lt;idref local="theTargetBean"/&gt;
&lt;/property&gt;</pre><p>&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#19982;&#22312;<tt class="classname">ProxyFactoryBean</tt> bean&#23450;&#20041;&#20013;&#20351;&#29992;&lt;idref/&gt;&#20803;&#32032;&#25351;&#23450;<a href="aop-api.html#aop-pfb-1" title="7.5.1.&nbsp;&#22522;&#30784;">AOP interceptor</a>&#30340;&#30456;&#21516;&#20043;&#22788;&#22312;&#20110;&#65306;&#22914;&#26524;&#20351;&#29992;&lt;idref/&gt;&#20803;&#32032;&#25351;&#23450;&#25318;&#25130;&#22120;&#21517;&#23383;&#65292;&#21487;&#20197;&#36991;&#20813;&#22240;&#19968;&#26102;&#30095;&#24573;&#23548;&#33268;&#30340;&#25318;&#25130;&#22120;ID&#25340;&#20889;&#38169;&#35823;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-ref-element"></a>3.3.2.2.&nbsp;&#24341;&#29992;&#20854;&#23427;&#30340;bean&#65288;&#21327;&#20316;&#32773;&#65289;</h4></div></div><div></div></div><p>&#22312;<tt class="literal">&lt;constructor-arg/&gt;</tt>&#25110;<tt class="literal">&lt;property/&gt;</tt>&#20803;&#32032;&#20869;&#37096;&#36824;&#21487;&#20197;&#20351;&#29992;<tt class="literal">ref</tt>&#20803;&#32032;&#12290;&#35813;&#20803;&#32032;&#29992;&#26469;&#23558;bean&#20013;&#25351;&#23450;&#23646;&#24615;&#30340;&#20540;&#35774;&#32622;&#20026;&#23545;&#23481;&#22120;&#20013;&#30340;&#21478;&#22806;&#19968;&#20010;bean&#30340;&#24341;&#29992;&#12290;&#22914;&#21069;&#25152;&#36848;&#65292;&#35813;&#24341;&#29992;bean&#23558;&#34987;&#20316;&#20026;&#20381;&#36182;&#27880;&#20837;&#65292;&#32780;&#19988;&#22312;&#27880;&#20837;&#20043;&#21069;&#20250;&#34987;&#21021;&#22987;&#21270;&#65288;&#22914;&#26524;&#26159;singleton  bean&#21017;&#24050;&#34987;&#23481;&#22120;&#21021;&#22987;&#21270;&#65289;&#12290;&#23613;&#31649;&#37117;&#26159;&#23545;&#21478;&#22806;&#19968;&#20010;&#23545;&#35937;&#30340;&#24341;&#29992;&#65292;&#20294;&#26159;&#36890;&#36807;id/name&#25351;&#21521;&#21478;&#22806;&#19968;&#20010;&#23545;&#35937;&#21364;&#26377;&#19977;&#31181;&#19981;&#21516;&#30340;&#24418;&#24335;&#65292;&#19981;&#21516;&#30340;&#24418;&#24335;&#23558;&#20915;&#23450;&#22914;&#20309;&#22788;&#29702;&#20316;&#29992;&#22495;&#21450;&#39564;&#35777;&#12290;</p><p>&#31532;&#19968;&#31181;&#24418;&#24335;&#20063;&#26159;&#26368;&#24120;&#35265;&#30340;&#24418;&#24335;&#26159;&#36890;&#36807;&#20351;&#29992;<tt class="literal">&lt;ref/&gt;</tt>&#26631;&#35760;&#25351;&#23450;<tt class="literal">bean</tt>&#23646;&#24615;&#30340;&#30446;&#26631;bean&#65292;&#36890;&#36807;&#35813;&#26631;&#31614;&#21487;&#20197;&#24341;&#29992;&#21516;&#19968;&#23481;&#22120;&#25110;&#29238;&#23481;&#22120;&#20869;&#30340;&#20219;&#20309;bean&#65288;&#26080;&#35770;&#26159;&#21542;&#22312;&#21516;&#19968;XML&#25991;&#20214;&#20013;&#65289;&#12290;XML '<tt class="literal">bean</tt>'&#20803;&#32032;&#30340;&#20540;&#26082;&#21487;&#20197;&#26159;&#25351;&#23450;bean&#30340;<tt class="literal">id</tt>&#20540;&#20063;&#21487;&#20197;&#26159;&#20854;<tt class="literal">name</tt>&#20540;&#12290;</p><pre class="programlisting">&lt;ref bean="someBean"/&gt;</pre><p>&#31532;&#20108;&#31181;&#24418;&#24335;&#26159;&#20351;&#29992;ref&#30340;<tt class="literal">local</tt>&#23646;&#24615;&#25351;&#23450;&#30446;&#26631;bean&#65292;&#23427;&#21487;&#20197;&#21033;&#29992;XML&#35299;&#26512;&#22120;&#26469;&#39564;&#35777;&#25152;&#24341;&#29992;&#30340;bean&#26159;&#21542;&#23384;&#22312;&#21516;&#19968;&#25991;&#20214;&#20013;&#12290;<tt class="literal">local</tt>&#23646;&#24615;&#20540;&#24517;&#39035;&#26159;&#30446;&#26631;bean&#30340;id&#23646;&#24615;&#20540;&#12290;&#22914;&#26524;&#22312;&#21516;&#19968;&#37197;&#32622;&#25991;&#20214;&#20013;&#27809;&#26377;&#25214;&#21040;&#24341;&#29992;&#30340;bean&#65292;XML&#35299;&#26512;&#22120;&#23558;&#25243;&#20986;&#19968;&#20010;&#20363;&#22806;&#12290;&#22914;&#26524;&#30446;&#26631;bean&#26159;&#22312;&#21516;&#19968;&#25991;&#20214;&#20869;&#65292;&#20351;&#29992;local&#26041;&#24335;&#23601;&#26159;&#26368;&#22909;&#30340;&#36873;&#25321;&#65288;&#20026;&#20102;&#23613;&#26089;&#22320;&#21457;&#29616;&#38169;&#35823;&#65289;&#12290;</p><pre class="programlisting">&lt;ref local="someBean"/&gt;</pre><p>&#31532;&#19977;&#31181;&#26041;&#24335;&#26159;&#36890;&#36807;&#20351;&#29992;ref&#30340;<tt class="literal">parent</tt>&#23646;&#24615;&#26469;&#24341;&#29992;&#24403;&#21069;&#23481;&#22120;&#30340;&#29238;&#23481;&#22120;&#20013;&#30340;bean&#12290;<tt class="literal">parent</tt>&#23646;&#24615;&#20540;&#26082;&#21487;&#20197;&#26159;&#30446;&#26631;bean&#30340;<tt class="literal">id</tt>&#20540;&#65292;&#20063;&#21487;&#20197;&#26159;<tt class="literal">name</tt>&#23646;&#24615;&#20540;&#12290;&#32780;&#19988;&#30446;&#26631;bean&#24517;&#39035;&#22312;&#24403;&#21069;&#23481;&#22120;&#30340;&#29238;&#23481;&#22120;&#20013;&#12290;&#20351;&#29992;parent&#23646;&#24615;&#30340;&#20027;&#35201;&#29992;&#36884;&#26159;&#20026;&#20102;&#29992;&#26576;&#20010;&#19982;&#29238;&#23481;&#22120;&#20013;&#30340;bean&#21516;&#21517;&#30340;&#20195;&#29702;&#26469;&#21253;&#35013;&#29238;&#23481;&#22120;&#20013;&#30340;&#19968;&#20010;bean(&#20363;&#22914;&#65292;&#23376;&#19978;&#19979;&#25991;&#20013;&#30340;&#19968;&#20010;bean&#23450;&#20041;&#35206;&#30422;&#20102;&#20182;&#30340;&#29238;bean)&#12290;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- in the parent context --&gt;</span></i>
&lt;bean id="accountService" class="com.foo.SimpleAccountService"&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- insert dependencies as required as here --&gt;</span></i>
&lt;/bean&gt;</pre><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- in the child (descendant) context --&gt;</span></i>
&lt;bean id="accountService"  <i class="lineannotation"><span class="lineannotation">&lt;-- notice that the name of this bean is the <span class="bold"><b>same</b></span> as the name of the <tt class="literal">'parent'</tt> bean</span></i>
      class="org.springframework.aop.framework.ProxyFactoryBean"&gt;
      &lt;property name="target"&gt;
          &lt;ref parent="accountService"/&gt;  <i class="lineannotation"><span class="lineannotation">&lt;-- notice how we refer to the <span class="bold"><b>parent</b></span> bean</span></i>
      &lt;/property&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- insert other configuration and dependencies as required as here --&gt;</span></i>
&lt;/bean&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-inner-beans"></a>3.3.2.3.&nbsp;&#20869;&#37096;bean</h4></div></div><div></div></div><p>&#25152;&#35859;&#30340;&#20869;&#37096;bean&#65288;inner bean&#65289;&#26159;&#25351;&#22312;&#19968;&#20010;bean&#30340;<tt class="literal">&lt;property/&gt;</tt>&#25110; <tt class="literal">&lt;constructor-arg/&gt;</tt>&#20803;&#32032;&#20013;&#20351;&#29992;<tt class="literal">&lt;bean/&gt;</tt>&#20803;&#32032;&#23450;&#20041;&#30340;bean&#12290;&#20869;&#37096;bean&#23450;&#20041;&#19981;&#38656;&#35201;&#26377;id&#25110;name&#23646;&#24615;&#65292;&#21363;&#20351;&#25351;&#23450;id &#25110; name&#23646;&#24615;&#20540;&#20063;&#23558;&#20250;&#34987;&#23481;&#22120;&#24573;&#30053;&#12290;</p><pre class="programlisting">&lt;bean id="outer" class="..."&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- instead of using a reference to a target bean, simply define the target bean inline --&gt;</span></i>
  &lt;property name="target"&gt;
    &lt;bean class="com.example.Person"&gt; <i class="lineannotation"><span class="lineannotation">&lt;!-- this is the inner bean --&gt;</span></i>
      &lt;property name="name" value="Fiona Apple"/&gt;
      &lt;property name="age" value="25"/&gt;
    &lt;/bean&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><p>&#27880;&#24847;&#65306;&#20869;&#37096;bean&#20013;&#30340;<tt class="literal">scope</tt>&#26631;&#35760;&#21450;<tt class="literal">id</tt>&#25110;<tt class="literal">name</tt>&#23646;&#24615;&#23558;&#34987;&#24573;&#30053;&#12290;&#20869;&#37096;bean<span class="emphasis"><em>&#24635;&#26159;</em></span>&#21311;&#21517;&#30340;&#19988;&#23427;&#20204;<span class="emphasis"><em>&#24635;&#26159;</em></span><a href="beans.html#beans-factory-scopes-prototype" title="3.4.2.&nbsp;Prototype&#20316;&#29992;&#22495;">prototype</a>&#27169;&#24335;&#30340;&#12290;&#21516;&#26102;&#23558;&#20869;&#37096;bean&#27880;&#20837;&#21040;&#21253;&#21547;&#35813;&#20869;&#37096;bean&#20043;&#22806;&#30340;bean&#26159;<span class="emphasis"><em>&#19981;</em></span>&#21487;&#33021;&#30340;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-collection-elements"></a>3.3.2.4.&nbsp;&#38598;&#21512;</h4></div></div><div></div></div><p>&#36890;&#36807;<tt class="literal">&lt;list/&gt;</tt>&#12289;<tt class="literal">&lt;set/&gt;</tt>&#12289;<tt class="literal">&lt;map/&gt;</tt>&#21450;<tt class="literal">&lt;props/&gt;</tt>&#20803;&#32032;&#21487;&#20197;&#23450;&#20041;&#21644;&#35774;&#32622;&#19982;Java <tt class="interfacename">Collection</tt>&#31867;&#22411;&#23545;&#24212;<tt class="interfacename">List</tt>&#12289;<tt class="interfacename">Set</tt>&#12289;<tt class="interfacename">Map</tt>&#21450;<tt class="interfacename">Properties</tt>&#30340;&#20540;&#12290;</p><pre class="programlisting">&lt;bean id="moreComplexObject" class="example.ComplexObject"&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- results in a setAdminEmails(<tt class="classname">java.util.Properties</tt>) call --&gt;</span></i>
  &lt;property name="adminEmails"&gt;
    &lt;props&gt;
        &lt;prop key="administrator"&gt;administrator@example.org&lt;/prop&gt;
        &lt;prop key="support"&gt;support@example.org&lt;/prop&gt;
        &lt;prop key="development"&gt;development@example.org&lt;/prop&gt;
    &lt;/props&gt;
  &lt;/property&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- results in a setSomeList(<tt class="interfacename">java.util.List</tt>) call --&gt;</span></i>
  &lt;property name="someList"&gt;
    &lt;list&gt;
        &lt;value&gt;a list element followed by a reference&lt;/value&gt;
        &lt;ref bean="myDataSource" /&gt;
    &lt;/list&gt;
  &lt;/property&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- results in a setSomeMap(<tt class="interfacename">java.util.Map</tt>) call --&gt;</span></i>
  &lt;property name="someMap"&gt;
    &lt;map&gt;
        &lt;entry&gt;
            &lt;key&gt;
                &lt;value&gt;an entry&lt;/value&gt;
            &lt;/key&gt;
            &lt;value&gt;just some string&lt;/value&gt;
        &lt;/entry&gt;
        &lt;entry&gt;
            &lt;key&gt;
                &lt;value&gt;a ref&lt;/value&gt;
            &lt;/key&gt;
            &lt;ref bean="myDataSource" /&gt;
        &lt;/entry&gt;
    &lt;/map&gt;
  &lt;/property&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- results in a setSomeSet(java.util.Set) call --&gt;</span></i>
  &lt;property name="someSet"&gt;
    &lt;set&gt;
        &lt;value&gt;just some string&lt;/value&gt;
        &lt;ref bean="myDataSource" /&gt;
    &lt;/set&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><p><span class="emphasis"><em>&#27880;&#24847;&#65306;map&#30340;key&#25110;value&#20540;&#65292;&#25110;set&#30340;value&#20540;&#36824;&#21487;&#20197;&#26159;&#20197;&#19979;&#20803;&#32032;&#65306;</em></span></p><pre class="programlisting">bean | ref | idref | list | set | map | props | value | null</pre><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-collection-elements-merging"></a>3.3.2.4.1.&nbsp;&#38598;&#21512;&#30340;&#21512;&#24182;</h5></div></div><div></div></div><p>&#20174;2.0&#24320;&#22987;&#65292;Spring IoC&#23481;&#22120;&#23558;&#25903;&#25345;&#38598;&#21512;&#30340;<span class="emphasis"><em>&#21512;&#24182;</em></span>&#12290;&#36825;&#26679;&#25105;&#20204;&#21487;&#20197;&#23450;&#20041;parent-style&#21644;child-style&#30340;<tt class="literal">&lt;list/&gt;</tt>&#12289;<tt class="literal">&lt;map/&gt;</tt>&#12289;<tt class="literal">&lt;set/&gt;</tt>&#25110;<tt class="literal">&lt;props/&gt;</tt>&#20803;&#32032;&#65292;&#23376;&#38598;&#21512;&#30340;&#20540;&#20174;&#20854;&#29238;&#38598;&#21512;&#32487;&#25215;&#21644;&#35206;&#30422;&#32780;&#26469;&#65307;&#20063;&#23601;&#26159;&#35828;&#65292;&#29238;&#23376;&#38598;&#21512;&#20803;&#32032;&#21512;&#24182;&#21518;&#30340;&#20540;&#23601;&#26159;&#23376;&#38598;&#21512;&#20013;&#30340;&#26368;&#32456;&#32467;&#26524;&#65292;&#32780;&#19988;&#23376;&#38598;&#21512;&#20013;&#30340;&#20803;&#32032;&#20540;&#23558;&#35206;&#30422;&#29238;&#38598;&#20840;&#20013;&#23545;&#24212;&#30340;&#20540;&#12290;</p><p><span class="emphasis"><em>&#35831;&#27880;&#24847;&#65292;&#20851;&#20110;&#21512;&#24182;&#30340;&#36825;&#37096;&#20998;&#21033;&#29992;&#20102;parent-child bean&#26426;&#21046;&#12290;&#27492;&#20869;&#23481;&#23558;&#22312;&#21518;&#38754;&#20171;&#32461;&#65292;&#19981;&#29087;&#24713;&#29238;&#23376;bean&#30340;&#35835;&#32773;&#21487;&#21442;&#35265;<a href="beans.html#beans-child-bean-definitions" title="3.6.&nbsp;bean&#23450;&#20041;&#30340;&#32487;&#25215;">Section&nbsp;3.6, &#8220;bean&#23450;&#20041;&#30340;&#32487;&#25215;&#8221;</a>&#12290;</em></span></p><p>Find below an example of the collection merging
          feature:</p><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#23637;&#31034;&#20102;&#38598;&#21512;&#21512;&#24182;&#29305;&#24615;&#65306;</p><pre class="programlisting">&lt;beans&gt;
&lt;bean id="parent" abstract="true" class="example.ComplexObject"&gt;
    &lt;property name="adminEmails"&gt;
        &lt;props&gt;
            &lt;prop key="administrator"&gt;administrator@example.com&lt;/prop&gt;
            &lt;prop key="support"&gt;support@example.com&lt;/prop&gt;
        &lt;/props&gt;
    &lt;/property&gt;
&lt;/bean&gt;
&lt;bean id="child" parent="parent"&gt;
    &lt;property name="adminEmails"&gt;
        <i class="lineannotation"><span class="lineannotation">&lt;!-- the merge is specified on the *child* collection definition --&gt;</span></i>
        &lt;props merge="true"&gt;
            &lt;prop key="sales"&gt;sales@example.com&lt;/prop&gt;
            &lt;prop key="support"&gt;support@example.co.uk&lt;/prop&gt;
        &lt;/props&gt;
    &lt;/property&gt;
&lt;/bean&gt;
&lt;beans&gt;</pre><p>&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;<tt class="literal">child</tt>bean&#30340;<tt class="literal">adminEmails</tt>&#23646;&#24615;&#30340;<tt class="literal">&lt;props/&gt;</tt>&#20803;&#32032;&#19978;&#20351;&#29992;&#20102;<tt class="literal">merge=true</tt>&#23646;&#24615;&#12290;&#24403;<tt class="literal">child </tt>bean&#34987;&#23481;&#22120;&#23454;&#38469;&#35299;&#26512;&#21450;&#23454;&#20363;&#21270;&#26102;&#65292;&#20854; <tt class="literal">adminEmails</tt>&#23558;&#19982;&#29238;&#38598;&#21512;&#30340;<tt class="literal">adminEmails</tt>&#23646;&#24615;&#36827;&#34892;&#21512;&#24182;&#12290;</p><pre class="programlisting">administrator=administrator@example.com
sales=sales@example.com
support=support@example.co.uk</pre><p>&#27880;&#24847;&#21040;&#36825;&#37324;&#23376;bean&#30340;<tt class="classname">Properties</tt>&#38598;&#21512;&#23558;&#20174;&#29238;<tt class="literal">&lt;props/&gt;</tt>&#32487;&#25215;&#25152;&#26377;&#23646;&#24615;&#20803;&#32032;&#12290;&#21516;&#26102;&#23376;bean&#30340;<tt class="literal">support</tt>&#20540;&#23558;&#35206;&#30422;&#29238;&#38598;&#21512;&#30340;&#30456;&#24212;&#20540;&#12290;</p><p>&#23545;&#20110;<tt class="literal">&lt;list/&gt;</tt>&#12289;<tt class="literal">&lt;map/&gt;</tt>&#21450;<tt class="literal">&lt;set/&gt;</tt>&#38598;&#21512;&#31867;&#22411;&#30340;&#21512;&#24182;&#22788;&#29702;&#37117;&#22522;&#26412;&#31867;&#20284;&#65292;&#22312;&#26576;&#20010;&#26041;&#38754;<tt class="literal">&lt;list/&gt;</tt>&#20803;&#32032;&#27604;&#36739;&#29305;&#27530;&#65292;&#36825;&#28041;&#21450;&#21040;<tt class="classname">List</tt>&#38598;&#21512;&#26412;&#36523;&#30340;&#35821;&#20041;&#23398;&#65292;&#23601;&#25343;&#32500;&#25252;&#19968;&#20010;<tt class="literal">&#26377;&#24207;</tt>&#38598;&#21512;&#20013;&#30340;&#20540;&#26469;&#35828;&#65292;&#29238;bean&#30340;&#21015;&#34920;&#20869;&#23481;&#23558;&#25490;&#22312;&#23376;bean&#21015;&#34920;&#20869;&#23481;&#30340;&#21069;&#38754;&#12290;&#23545;&#20110;<tt class="interfacename">Map</tt>&#12289;<tt class="interfacename">Set</tt>&#21450;<tt class="interfacename">Properties</tt>&#38598;&#21512;&#31867;&#22411;&#27809;&#26377;&#39034;&#24207;&#30340;&#27010;&#24565;&#65292;&#22240;&#27492;&#20316;&#20026;&#30456;&#20851;&#30340;<tt class="interfacename">Map</tt>&#12289;<tt class="interfacename">Set</tt>&#21450;<tt class="interfacename">Properties</tt>&#23454;&#29616;&#22522;&#30784;&#30340;&#38598;&#21512;&#31867;&#22411;&#22312;&#23481;&#22120;&#20869;&#37096;&#27809;&#26377;&#25490;&#24207;&#30340;&#35821;&#20041;&#12290;</p><p>&#26368;&#21518;&#38656;&#35201;&#25351;&#20986;&#30340;&#19968;&#28857;&#23601;&#26159;&#65292;&#21512;&#24182;&#21151;&#33021;&#20165;&#22312;Spring 2.0&#65288;&#21450;&#38543;&#21518;&#30340;&#29256;&#26412;&#20013;&#65289;&#21487;&#29992;&#12290;&#19981;&#21516;&#30340;&#38598;&#21512;&#31867;&#22411;&#26159;&#19981;&#33021;&#21512;&#24182;&#65288;&#22914;<tt class="literal">map</tt>&#21644; <tt class="literal">list</tt>&#26159;&#19981;&#33021;&#21512;&#24182;&#30340;&#65289;&#65292;&#21542;&#21017;&#23558;&#20250;&#25243;&#20986;&#30456;&#24212;&#30340;<tt class="classname">Exception</tt>&#12290;<tt class="literal">merge</tt>&#23646;&#24615;&#24517;&#39035;&#22312;&#32487;&#25215;&#30340;&#23376;bean&#20013;&#23450;&#20041;&#65292;&#32780;&#22312;&#29238;bean&#30340;&#38598;&#21512;&#23646;&#24615;&#19978;&#25351;&#23450;&#30340;<tt class="literal">merge</tt>&#23646;&#24615;&#23558;&#34987;&#24573;&#30053;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-collection-elements-strongly-typed"></a>3.3.2.4.2.&nbsp;&#24378;&#31867;&#22411;&#38598;&#21512;(&#20165;&#36866;&#29992;&#20110;Java5+)</h5></div></div><div></div></div><p>&#20320;&#33509;&#26377;&#24184;&#22312;&#20351;&#29992;Java5 &#25110;Java 6&#65292;&#37027;&#20040;&#20320;&#21487;&#20197;&#20351;&#29992;&#24378;&#31867;&#22411;&#38598;&#21512;(&#25903;&#25345;&#27867;&#22411;)&#12290;&#27604;&#22914;&#65292;&#22768;&#26126;&#19968;&#20010;&#21482;&#33021;&#21253;&#21547;<tt class="classname">String</tt>&#31867;&#22411;&#20803;&#32032;&#30340;<tt class="interfacename">Collection</tt>&#12290;&#20551;&#33509;&#20351;&#29992;Spring&#26469;&#32473;bean&#27880;&#20837;&#24378;&#31867;&#22411;&#30340;<tt class="interfacename">Collection</tt>&#65292;&#37027;&#23601;&#21487;&#20197;&#21033;&#29992;Spring&#30340;&#31867;&#22411;&#36716;&#25442;&#33021;&#65292;&#24403;&#21521;&#24378;&#31867;&#22411;<tt class="interfacename">Collection</tt>&#20013;&#28155;&#21152;&#20803;&#32032;&#21069;&#65292;&#36825;&#20123;&#20803;&#32032;&#23558;&#34987;&#36716;&#25442;&#12290;</p><pre class="programlisting">public class Foo {
                
    private Map&lt;String, Float&gt; accounts;
    
    public void setAccounts(Map&lt;String, Float&gt; accounts) {
        this.accounts = accounts;
    }
}</pre><pre class="programlisting">&lt;beans&gt;
    &lt;bean id="foo" class="x.y.Foo"&gt;
        &lt;property name="accounts"&gt;
            &lt;map&gt;
                &lt;entry key="one" value="9.99"/&gt;
                &lt;entry key="two" value="2.75"/&gt;
                &lt;entry key="six" value="3.99"/&gt;
            &lt;/map&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</pre><p>&#22312;<tt class="literal">foo</tt>bean&#30340;<tt class="literal">accounts</tt>&#23646;&#24615;&#34987;&#27880;&#20837;&#20043;&#21069;&#65292;&#36890;&#36807;&#21453;&#23556;&#65292;&#21033;&#29992;&#24378;&#31867;&#22411;<tt class="classname">Map&lt;String, Float&gt;</tt>&#30340;&#27867;&#22411;&#20449;&#24687;&#65292;Spring&#30340;&#24213;&#23618;&#31867;&#22411;&#36716;&#25442;&#26426;&#21046;&#23558;&#20250;&#25226;&#21508;&#31181;value&#20803;&#32032;&#20540;&#36716;&#25442;&#20026;<tt class="classname">Float</tt>&#31867;&#22411;&#65292;&#22240;&#27492;&#23383;&#31526;&#20018;<tt class="literal">9.99&#12289;2.75</tt>&#21450;<tt class="literal">3.99</tt>&#23601;&#20250;&#34987;&#36716;&#25442;&#20026;&#23454;&#38469;&#30340;<tt class="classname">Float</tt>&#31867;&#22411;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-null-element"></a>3.3.2.5.&nbsp;<tt class="literal">Nulls</tt></h4></div></div><div></div></div><p><tt class="literal">&lt;null/&gt;</tt>&#29992;&#20110;&#22788;&#29702;<tt class="literal">null</tt>&#20540;&#12290;Spring&#20250;&#25226;&#23646;&#24615;&#30340;&#31354;&#21442;&#25968;&#24403;&#20316;&#31354;<tt class="literal">&#23383;&#31526;&#20018;</tt>&#22788;&#29702;&#12290;&#20197;&#19979;&#30340;xml&#29255;&#26029;&#23558;email&#23646;&#24615;&#35774;&#20026;&#31354;<tt class="classname">&#23383;&#31526;&#20018;</tt>&#12290;</p><pre class="programlisting">&lt;bean class="ExampleBean"&gt;
  &lt;property name="email"&gt;&lt;value/&gt;&lt;/property&gt;
&lt;/bean&gt;</pre><p>&#36825;&#31561;&#21516;&#20110;Java&#20195;&#30721;&#65306;
<tt class="literal">exampleBean.setEmail("")</tt>&#12290;
&#32780;<tt class="literal">null</tt>&#20540;&#21017;&#21487;&#20197;&#20351;&#29992;<tt class="literal">&lt;null&gt;</tt>&#20803;&#32032;&#21487;&#29992;&#26469;&#34920;&#31034;&#12290;&#20363;&#22914;&#65306;</p><pre class="programlisting">&lt;bean class="ExampleBean"&gt;
  &lt;property name="email"&gt;&lt;null/&gt;&lt;/property&gt;
&lt;/bean&gt;</pre><p>&#19978;&#36848;&#30340;&#37197;&#32622;&#31561;&#21516;&#20110;Java&#20195;&#30721;&#65306;<tt class="literal">exampleBean.setEmail(null)</tt>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xml-config-shortcuts"></a>3.3.2.6.&nbsp;XML&#37197;&#32622;&#25991;&#20214;&#30340;&#31616;&#20889;&#21450;&#20854;&#20182;</h4></div></div><div></div></div><p>&#37197;&#32622;&#20803;&#25968;&#25454;&#20887;&#38271;&#19981;&#26159;&#20160;&#20040;&#22909;&#20107;&#24773;&#65292;&#22240;&#27492;&#25105;&#20204;&#23558;&#36890;&#36807;&#19979;&#38754;&#30340;&#26041;&#24335;&#26469;&#23545;&#37197;&#32622;&#36827;&#34892;&#8220;&#20943;&#32933;&#8221;&#65292;&#31532;&#19968;&#31181;&#20570;&#27861;&#23601;&#26159;&#36890;&#36807;&#20351;&#29992;<tt class="literal">&lt;property/&gt;</tt>&#26469;&#23450;&#20041;&#20540;&#21644;&#23545;&#20854;&#20182;bean&#30340;&#24341;&#29992;&#65292;&#21478;&#19968;&#20010;&#20570;&#27861;&#23601;&#26159;&#37319;&#29992;&#19981;&#21516;&#30340;&#23646;&#24615;&#23450;&#20041;&#26684;&#24335;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-value-ref-shortcuts"></a>3.3.2.6.1.&nbsp;XML-based configuration metadata shortcuts</h5></div></div><div></div></div><p><tt class="literal">&lt;property/&gt;</tt>&#12289;<tt class="literal">&lt;constructor-arg/&gt;</tt>&#21450;<tt class="literal">&lt;entry/&gt;</tt>&#20803;&#32032;&#37117;&#25903;&#25345;<tt class="literal">value</tt>&#23646;&#24615;&#65288;attribute&#65289;&#65292;&#23427;&#21487;&#20197;&#29992;&#26469;&#26367;&#20195;&#20869;&#23884;&#30340;<tt class="literal">&lt;value/&gt;</tt>&#20803;&#32032;&#12290;&#22240;&#32780;&#65292;&#20197;&#19979;&#30340;&#20195;&#30721;&#65306;</p><pre class="programlisting">&lt;property name="myProperty"&gt;
  &lt;value&gt;hello&lt;/value&gt;
&lt;/property&gt;</pre><pre class="programlisting">&lt;constructor-arg&gt;
  &lt;value&gt;hello&lt;/value&gt;
&lt;/constructor-arg&gt;</pre><pre class="programlisting">&lt;entry key="myKey"&gt;
  &lt;value&gt;hello&lt;/value&gt;
&lt;/entry&gt;</pre><p>&#31561;&#21516;&#20110;&#65306;</p><pre class="programlisting">&lt;property name="myProperty" value="hello"/&gt;</pre><pre class="programlisting">&lt;constructor-arg value="hello"/&gt;</pre><pre class="programlisting">&lt;entry key="myKey" value="hello"/&gt;</pre><p>The <tt class="literal">&lt;property/&gt;</tt> and
          <tt class="literal">&lt;constructor-arg/&gt;</tt> elements support a
          similar shortcut <tt class="literal">'ref'</tt> attribute which may be
          used instead of a full nested <tt class="literal">&lt;ref/&gt;</tt>
          element. Therefore, the following:</p><p><tt class="literal">&lt;property/&gt;</tt>&#21644;<tt class="literal">&lt;constructor-arg/&gt;</tt>&#25903;&#25345;&#31867;&#20284;<tt class="literal">ref</tt>&#30340;&#31616;&#20889;&#23646;&#24615;&#65292;&#23427;&#21487;&#29992;&#26469;&#26367;&#20195;&#25972;&#20010;&#20869;&#23884;&#30340;<tt class="literal">&lt;ref/&gt;</tt>&#20803;&#32032;&#12290;&#22240;&#32780;&#65292;&#20197;&#19979;&#30340;&#20195;&#30721;&#65306;</p><pre class="programlisting">&lt;property name="myProperty"&gt;
  &lt;ref bean="myBean"&gt;
&lt;/property&gt;</pre><pre class="programlisting">&lt;constructor-arg&gt;
  &lt;ref bean="myBean"&gt;
&lt;/constructor-arg&gt;</pre><p>&#31561;&#21516;&#20110;&#65306;</p><pre class="programlisting">&lt;property name="myProperty" ref="myBean"/&gt;</pre><pre class="programlisting">&lt;constructor-arg ref="myBean"/&gt;</pre><p>&#27880;&#24847;&#65292;&#23613;&#31649;&#23384;&#22312;&#31561;&#21516;&#20110;<tt class="literal">&lt;ref bean="xxx"&gt;</tt> &#20803;&#32032;&#30340;&#31616;&#20889;&#24418;&#24335;&#65292;&#20294;&#24182;&#27809;&#26377;<tt class="literal">&lt;ref local="xxx"</tt>&gt;&#30340;&#31616;&#20889;&#24418;&#24335;&#65292;&#20026;&#20102;&#23545;&#24403;&#21069;xml&#20013;bean&#30340;&#24341;&#29992;&#65292;&#20320;&#21482;&#33021;&#20351;&#29992;&#23436;&#25972;&#30340;&#24418;&#24335;&#12290;</p><p>&#26368;&#21518;&#65292;map&#20013;entry&#20803;&#32032;&#30340;&#31616;&#20889;&#24418;&#24335;&#20026;<tt class="literal">key</tt>/<tt class="literal">key-ref</tt> &#21644; <tt class="literal">value</tt> /<tt class="literal">value-ref</tt>&#23646;&#24615;&#65292;&#22240;&#32780;&#65292;&#20197;&#19979;&#30340;&#20195;&#30721;&#65306;</p><pre class="programlisting">&lt;entry&gt;
  &lt;key&gt;
    &lt;ref bean="myKeyBean" /&gt;
  &lt;/key&gt;
  &lt;ref bean="myValueBean" /&gt;
&lt;/entry&gt;</pre><p>&#31561;&#21516;&#20110;&#65306;</p><pre class="programlisting">&lt;entry key-ref="myKeyBean" value-ref="myValueBean"/&gt;</pre><p>&#20877;&#27425;&#24378;&#35843;&#65292;&#21482;&#26377;<tt class="literal">&lt;ref bean="xxx"&gt;</tt>&#20803;&#32032;&#30340;&#31616;&#20889;&#24418;&#24335;&#65292;&#27809;&#26377;<tt class="literal">&lt;ref local="xxx"</tt>&gt;&#30340;&#31616;&#20889;&#24418;&#24335;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-p-namespace"></a>3.3.2.6.2.&nbsp;&#20351;&#29992;p&#21517;&#31216;&#31354;&#38388;&#37197;&#32622;&#23646;&#24615;</h5></div></div><div></div></div><p>&#32473;XML&#37197;&#32622;&#25991;&#20214;"&#20943;&#32933;"&#30340;&#21478;&#19968;&#20010;&#36873;&#25321;&#23601;&#26159;&#20351;&#29992;p&#21517;&#31216;&#31354;&#38388;&#65292;&#20174; 2.0&#24320;&#22987;&#65292;Spring&#25903;&#25345;&#20351;&#29992;<a href="xsd-config.html" title="Appendix&nbsp;A.&nbsp;XML Schema-based configuration">&#21517;&#31216;&#31354;&#38388;</a>&#30340;&#21487;&#25193;&#23637;&#37197;&#32622;&#26684;&#24335;&#12290;&#36825;&#20123;&#21517;&#31216;&#31354;&#38388;&#37117;&#26159;&#22522;&#20110;&#19968;&#31181;XML Schema&#23450;&#20041;&#12290;&#20107;&#23454;&#19978;&#65292;&#25105;&#20204;&#25152;&#30475;&#21040;&#30340;&#25152;&#26377;<tt class="literal">bean</tt>&#30340;&#37197;&#32622;&#26684;&#24335;&#37117;&#26159;&#22522;&#20110;&#19968;&#20010; XML Schema&#25991;&#26723;&#12290;</p><p>&#29305;&#23450;&#30340;&#21517;&#31216;&#31354;&#38388;&#24182;&#19981;&#38656;&#35201;&#23450;&#20041;&#22312;&#19968;&#20010;XSD&#25991;&#20214;&#20013;&#65292;&#23427;&#21482;&#22312;Spring&#20869;&#26680;&#20013;&#23384;&#22312;&#12290;&#25105;&#20204;&#25152;&#35828;&#30340;p&#21517;&#31216;&#31354;&#38388;&#23601;&#26159;&#36825;&#26679;&#65292;&#23427;&#19981;&#38656;&#35201;&#19968;&#20010;schema&#23450;&#20041;&#65292;&#19982;&#25105;&#20204;&#21069;&#38754;&#37319;&#29992;<tt class="literal">&lt;property/&gt;</tt>&#20803;&#32032;&#23450;&#20041;bean&#30340;&#23646;&#24615;&#19981;&#21516;&#30340;&#26159;&#65292;&#24403;&#25105;&#20204;&#37319;&#29992;&#20102;p&#21517;&#31216;&#31354;&#38388;&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;&#22312;<tt class="literal">bean</tt>&#20803;&#32032;&#20013;&#20351;&#29992;&#23646;&#24615;&#65288;attribute&#65289;&#26469;&#25551;&#36848;bean&#30340;property&#20540;&#12290;</p><p>&#19979;&#38754;&#30340;&#20004;&#27573;XML&#37197;&#32622;&#25991;&#20214;&#20013;&#37117;&#26159;&#29992;&#26469;&#23450;&#20041;&#21516;&#19968;&#20010;bean&#65306;&#19968;&#20010;&#37319;&#29992;&#30340;&#26159;&#26631;&#20934;&#30340;XML&#26684;&#24335;&#65292;&#19968;&#20010;&#26159;&#37319;&#29992;p&#21517;&#31216;&#31354;&#38388;&#12290;</p><pre class="programlisting">&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;
    
    &lt;bean name="classic" class="com.example.ExampleBean"&gt;
        &lt;property name="email" value="foo@bar.com/&gt;
    &lt;/bean&gt;
    
    &lt;bean name="p-namespace" class="com.example.ExampleBean"
          p:email="foo@bar.com"/&gt;
&lt;/beans&gt;</pre><p>&#20174;&#19978;&#38754;&#30340;bean&#23450;&#20041;&#20013;&#65292;&#25105;&#20204;&#37319;&#29992;p&#21517;&#31216;&#31354;&#38388;&#30340;&#26041;&#24335;&#21253;&#21547;&#20102;&#19968;&#20010;&#21483;email&#30340;&#23646;&#24615;&#65292;&#32780;Spring&#20250;&#30693;&#36947;&#25105;&#20204;&#30340;bean&#21253;&#21547;&#20102;&#19968;&#20010;&#23646;&#24615;&#65288;property&#65289;&#23450;&#20041;&#12290;&#25105;&#20204;&#21069;&#38754;&#35828;&#20102;&#65292;p&#21517;&#31216;&#31354;&#38388;&#26159;&#19981;&#38656;&#35201;schema&#23450;&#20041;&#30340;&#65292;&#22240;&#27492;&#23646;&#24615;&#65288;attribute&#65289;&#30340;&#21517;&#23383;&#23601;&#26159;&#20320;bean&#30340;property&#30340;&#21517;&#23383;&#12290;</p><p>This next example includes two more bean definitions that both
          have a reference to another bean:</p><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#21253;&#21547;&#20102;&#20004;&#20010;bean&#23450;&#20041;&#65292;&#23427;&#20204;&#37117;&#24341;&#29992;&#20102;&#21478;&#19968;&#20010;bean</p><pre class="programlisting">&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;
    
    &lt;bean name="john-classic" class="com.example.Person"&gt;
        &lt;property name="name" value="John Doe"/&gt;
        &lt;property name="spouse" ref="jane"/&gt;
    &lt;/bean&gt;

    &lt;bean name="john-modern" 
        class="com.example.Person"
        p:name="John Doe"
        p:spouse-ref="jane"/&gt;

    &lt;bean name="jane" class="com.example.Person"&gt;
        &lt;property name="name" value="Jane Doe"/&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</pre><p>As you can see, this example doesn't only include a property
          value using the p-namespace, but also uses a special format to
          declare property references. Whereas the first bean definition uses
          <tt class="literal">&lt;property name="spouse" ref="jane"/&gt;</tt> to
          create a reference from bean <tt class="literal">john</tt> to bean
          <tt class="literal">jane</tt>, the second bean definition uses
          <tt class="literal">p:spouse-ref="jane"</tt> as an attribute to do the
          exact same thing. In this case '<tt class="literal">spouse</tt>' is the
          property name whereas the '<tt class="literal">-ref</tt>' part indicates
          that this is not a straight value but rather a reference to another
          bean.</p><p>&#19978;&#38754;&#30340;&#20363;&#23376;&#19981;&#20165;&#20351;&#29992;p&#21517;&#31216;&#31354;&#38388;&#21253;&#21547;&#20102;&#19968;&#20010;&#23646;&#24615;&#65288;property&#65289;&#20540;&#65292;&#32780;&#19988;&#20351;&#29992;&#20102;&#19968;&#20010;&#29305;&#27530;&#30340;&#26684;&#24335;&#22768;&#26126;&#20102;&#19968;&#20010;&#23646;&#24615;&#24341;&#29992;&#12290;&#22312;&#31532;&#19968;&#20010;bean&#23450;&#20041;&#20013;&#20351;&#29992;&#20102;<tt class="literal">&lt;property name="spouse" ref="jane"/&gt;</tt>&#26469;&#24314;&#31435;bean<tt class="literal">john</tt>&#21040;bean<tt class="literal">jane</tt>&#30340;&#24341;&#29992;&#65292;&#32780;&#31532;&#20108;&#20010;bean&#23450;&#20041;&#21017;&#37319;&#29992;<tt class="literal">p:spouse-ref="jane"</tt>&#23646;&#24615;&#65288;attribute&#65289;&#30340;&#26041;&#24335;&#36798;&#21040;&#20102;&#21516;&#26679;&#30340;&#30446;&#30340;&#12290;&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;"<tt class="literal">spouse</tt>"&#26159;&#23646;&#24615;&#65288;property&#65289;&#21517;&#65292;&#32780;"<tt class="literal">-ref</tt>&#8220;&#21017;&#29992;&#26469;&#35828;&#26126;&#35813;&#23646;&#24615;&#19981;&#26159;&#19968;&#20010;&#20855;&#20307;&#30340;&#20540;&#32780;&#26159;&#23545;&#21478;&#22806;&#19968;&#20010;bean&#30340;&#24341;&#29992;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;p&#21517;&#31216;&#31354;&#38388;&#27809;&#26377;&#26631;&#20934;&#30340;XML&#26684;&#24335;&#23450;&#20041;&#28789;&#27963;&#65292;&#27604;&#22914;&#35828;&#65292;bean&#30340;&#23646;&#24615;&#21517;&#26159;&#20197;<tt class="literal">Ref</tt>&#32467;&#23614;&#30340;&#65292;&#37027;&#20040;&#37319;&#29992;p&#21517;&#31216;&#31354;&#38388;&#23450;&#20041;&#23601;&#20250;&#23548;&#33268;&#20914;&#31361;&#65292;&#32780;&#37319;&#29992;&#26631;&#20934;&#30340;XML&#26684;&#24335;&#23450;&#20041;&#21017;&#19981;&#20250;&#20986;&#29616;&#36825;&#31181;&#38382;&#39064;&#12290;&#36825;&#37324;&#25105;&#20204;&#25552;&#37266;&#22823;&#23478;&#22312;&#39033;&#30446;&#20013;&#36824;&#26159;&#20180;&#32454;&#26435;&#34913;&#26469;&#20915;&#23450;&#21040;&#24213;&#37319;&#29992;&#37027;&#31181;&#26041;&#24335;&#65292;&#21516;&#26102;&#20063;&#21487;&#20197;&#22312;&#22242;&#38431;&#25104;&#21592;&#37117;&#29702;&#35299;&#19981;&#21516;&#30340;&#23450;&#20041;&#26041;&#24335;&#30340;&#22522;&#30784;&#19978;&#65292;&#22312;&#39033;&#30446;&#20013;&#26681;&#25454;&#38656;&#35201;&#21516;&#26102;&#36873;&#25321;&#19977;&#31181;&#23450;&#20041;&#26041;&#24335;&#12290;</p></td></tr></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-compound-property-names"></a>3.3.2.7.&nbsp;&#32452;&#21512;&#23646;&#24615;&#21517;&#31216;</h4></div></div><div></div></div><p>&#24403;&#35774;&#32622;bean&#30340;&#32452;&#21512;&#23646;&#24615;&#26102;&#65292;&#38500;&#20102;&#26368;&#21518;&#19968;&#20010;&#23646;&#24615;&#22806;&#65292;&#21482;&#35201;&#20854;&#20182;&#23646;&#24615;&#20540;&#19981;&#20026;<tt class="literal">null</tt>&#65292;&#32452;&#21512;&#25110;&#23884;&#22871;&#23646;&#24615;&#21517;&#26159;&#23436;&#20840;&#21512;&#27861;&#30340;&#12290;&#20363;&#22914;&#65292;&#19979;&#38754;bean&#30340;&#23450;&#20041;&#65306;</p><pre class="programlisting">&lt;bean id="foo" class="foo.Bar"&gt;
  &lt;property name="fred.bob.sammy" value="123" /&gt;
&lt;/bean&gt;</pre><p><tt class="literal">foo</tt> bean&#26377;&#20010;<tt class="literal">fred</tt>&#23646;&#24615;&#65292;&#27492;&#23646;&#24615;&#26377;&#20010;<tt class="literal">bob</tt>&#23646;&#24615;&#65292;&#32780;<tt class="literal">bob</tt>&#23646;&#24615;&#21448;&#26377;&#20010;<tt class="literal">sammy</tt>&#23646;&#24615;&#65292;&#26368;&#21518;&#25226;<tt class="literal">sammy</tt>&#23646;&#24615;&#35774;&#32622;&#20026;<tt class="literal">123</tt>&#12290;&#20026;&#20102;&#35753;&#27492;&#23450;&#20041;&#33021;&#24037;&#20316;&#65292; <tt class="literal">foo</tt>&#30340;<tt class="literal">fred</tt>&#23646;&#24615;&#21450;<tt class="literal">fred</tt>&#30340;<tt class="literal">bob</tt>&#23646;&#24615;&#22312;bean&#34987;&#26500;&#36896;&#21518;&#37117;&#24517;&#39035;&#38750;&#31354;&#65292;&#21542;&#21017;&#23558;&#25243;&#20986;<tt class="exceptionname">NullPointerException</tt>&#24322;&#24120;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-dependson"></a>3.3.3.&nbsp;&#20351;&#29992;<tt class="literal">depends-on</tt></h3></div></div><div></div></div><p>&#22810;&#25968;&#24773;&#20917;&#19979;&#65292;&#19968;&#20010;bean&#23545;&#21478;&#19968;&#20010;bean&#30340;&#20381;&#36182;&#26368;&#31616;&#21333;&#30340;&#20570;&#27861;&#23601;&#26159;&#23558;&#19968;&#20010;bean&#35774;&#32622;&#20026;&#21478;&#22806;&#19968;&#20010;bean&#30340;&#23646;&#24615;&#12290;&#22312;xml&#37197;&#32622;&#25991;&#20214;&#20013;&#26368;&#24120;&#35265;&#30340;&#23601;&#26159;&#20351;&#29992; <a href="beans.html#beans-ref-element" title="3.3.2.2.&nbsp;&#24341;&#29992;&#20854;&#23427;&#30340;bean&#65288;&#21327;&#20316;&#32773;&#65289;"><tt class="literal">&lt;ref/&gt;</tt>&#20803;&#32032;</a>&#12290;&#22312;&#23569;&#25968;&#24773;&#20917;&#19979;&#65292;&#26377;&#26102;&#20505;bean&#20043;&#38388;&#30340;&#20381;&#36182;&#20851;&#31995;&#24182;&#19981;&#26159;&#37027;&#20040;&#30340;&#30452;&#25509;&#65288;&#20363;&#22914;&#65292;&#24403;&#31867;&#20013;&#30340;&#38745;&#24577;&#22359;&#30340;&#21021;&#22987;&#21270;&#34987;&#26102;&#65292;&#22914;&#25968;&#25454;&#24211;&#39537;&#21160;&#30340;&#27880;&#20876;&#65289;&#12290;<tt class="literal">depends-on</tt>&#23646;&#24615;&#21487;&#20197;&#29992;&#20110;&#24403;&#21069;bean&#21021;&#22987;&#21270;&#20043;&#21069;&#26174;&#24335;&#22320;&#24378;&#21046;&#19968;&#20010;&#25110;&#22810;&#20010;bean&#34987;&#21021;&#22987;&#21270;&#12290;&#19979;&#38754;&#30340;&#20363;&#23376;&#20013;&#20351;&#29992;&#20102;<tt class="literal">depends-on</tt>&#23646;&#24615;&#26469;&#25351;&#23450;&#19968;&#20010;bean&#30340;&#20381;&#36182;&#12290;</p><pre class="programlisting">&lt;bean id="beanOne" class="ExampleBean" depends-on="<span class="bold"><b>manager</b></span>"/&gt;

&lt;bean id="<span class="bold"><b>manager</b></span>" class="ManagerBean" /&gt;</pre><p>&#33509;&#38656;&#35201;&#34920;&#36798;&#23545;&#22810;&#20010;bean&#30340;&#20381;&#36182;&#65292;&#21487;&#20197;&#22312;<tt class="literal">'depends-on'</tt>&#20013;&#23558;&#25351;&#23450;&#30340;&#22810;&#20010;bean&#21517;&#23383;&#29992;&#20998;&#38548;&#31526;&#36827;&#34892;&#20998;&#38548;&#65292;&#20998;&#38548;&#31526;&#21487;&#20197;&#26159;&#36887;&#21495;&#12289;&#31354;&#26684;&#21450;&#20998;&#21495;&#31561;&#12290;&#19979;&#38754;&#30340;&#20363;&#23376;&#20013;&#20351;&#29992;&#20102;<tt class="literal">'depends-on'</tt>&#26469;&#34920;&#36798;&#23545;&#22810;&#20010;bean&#30340;&#20381;&#36182;&#12290;</p><pre class="programlisting">&lt;bean id="beanOne" class="ExampleBean" depends-on="manager,accountDao"&gt;
  &lt;property name="manager" ref="manager" /&gt;
&lt;/bean&gt;

&lt;bean id="manager" class="ManagerBean" /&gt;
&lt;bean id="accountDao" class="x.y.jdbc.JdbcAccountDao" /&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#8220;<tt class="literal">depends-on</tt>&#8221;&#23646;&#24615;&#19981;&#20165;&#29992;&#26469;&#25351;&#23450;&#21021;&#22987;&#21270;&#26102;&#30340;&#20381;&#36182;&#65292;&#21516;&#26102;&#20063;&#29992;&#26469;&#25351;&#23450;&#30456;&#24212;&#30340;&#38144;&#27585;&#26102;&#30340;&#20381;&#36182;&#65288;&#35813;&#20381;&#36182;&#21482;&#38024;&#23545;<a href="beans.html#beans-factory-scopes-singleton" title="3.4.1.&nbsp;Singleton&#20316;&#29992;&#22495;">singleton</a>bean&#65289;&#12290;<tt class="literal">depends-on</tt>&#23646;&#24615;&#20013;&#25351;&#23450;&#30340;&#20381;&#36182;bean&#20250;&#22312;&#30456;&#20851;bean&#38144;&#27585;&#20043;&#21069;&#34987;&#38144;&#27585;&#65292;&#20174;&#32780;&#21487;&#20197;&#35753;&#29992;&#25143;&#25511;&#21046;&#38144;&#27585;&#39034;&#24207;&#12290;</p></td></tr></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-lazy-init"></a>3.3.4.&nbsp;&#24310;&#36831;&#21021;&#22987;&#21270;bean</h3></div></div><div></div></div><p><tt class="interfacename">ApplicationContext</tt>&#23454;&#29616;&#30340;&#40664;&#35748;&#34892;&#20026;&#23601;&#26159;&#22312;&#21551;&#21160;&#26102;&#23558;&#25152;&#26377;<tt class="literal">singleton</tt> bean&#25552;&#21069;&#36827;&#34892;&#23454;&#20363;&#21270;&#12290;&#25552;&#21069;&#23454;&#20363;&#21270;&#24847;&#21619;&#30528;&#20316;&#20026;&#21021;&#22987;&#21270;&#36807;&#31243;&#30340;&#19968;&#37096;&#20998;&#65292;<tt class="interfacename">ApplicationContext</tt>&#23454;&#20363;&#20250;&#21019;&#24314;&#24182;&#37197;&#32622;&#25152;&#26377;&#30340;<a href="beans.html#beans-factory-scopes-singleton" title="3.4.1.&nbsp;Singleton&#20316;&#29992;&#22495;">singleton</a>  bean&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#36825;&#26159;&#20214;<span class="emphasis"><em>&#22909;&#20107;</em></span>&#65292;&#22240;&#20026;&#36825;&#26679;&#22312;&#37197;&#32622;&#20013;&#30340;&#20219;&#20309;&#38169;&#35823;&#23601;&#20250;&#21363;&#21051;&#34987;&#21457;&#29616;&#65288;&#21542;&#21017;&#30340;&#35805;&#21487;&#33021;&#35201;&#33457;&#20960;&#20010;&#23567;&#26102;&#29978;&#33267;&#20960;&#22825;&#65289;&#12290;</p><p>&#26377;&#26102;&#20505;&#36825;&#31181;&#40664;&#35748;&#22788;&#29702;&#21487;&#33021;&#24182;<span class="emphasis"><em>&#19981;&#26159;</em></span>&#20320;&#24819;&#35201;&#30340;&#12290;&#22914;&#26524;&#20320;&#19981;&#24819;&#35753;&#19968;&#20010;singleton bean&#22312;<tt class="interfacename">ApplicationContext</tt>&#21021;&#22987;&#21270;&#26102;&#34987;&#25552;&#21069;&#23454;&#20363;&#21270;&#65292;&#37027;&#20040;&#21487;&#20197;&#23558;bean&#35774;&#32622;&#20026;&#24310;&#36831;&#23454;&#20363;&#21270;&#12290;&#19968;&#20010;&#24310;&#36831;&#21021;&#22987;&#21270;bean&#23558;&#21578;&#35785;IoC &#23481;&#22120;&#26159;&#22312;&#21551;&#21160;&#26102;&#36824;&#26159;&#22312;&#31532;&#19968;&#27425;&#34987;&#29992;&#21040;&#26102;&#23454;&#20363;&#21270;&#12290;</p><p>&#22312;XML&#37197;&#32622;&#25991;&#20214;&#20013;&#65292;&#24310;&#36831;&#21021;&#22987;&#21270;&#23558;&#36890;&#36807;<tt class="literal">&lt;bean/&gt;</tt>&#20803;&#32032;&#20013;&#30340;<tt class="literal">lazy-init</tt>&#23646;&#24615;&#26469;&#36827;&#34892;&#25511;&#21046;&#12290;&#20363;&#22914;&#65306;</p><pre class="programlisting">&lt;bean id="lazy" class="com.foo.ExpensiveToCreateBean" <span class="bold"><b>lazy-init="true"</b></span>/&gt;

&lt;bean name="not.lazy" class="com.foo.AnotherBean"/&gt;</pre><p>&#24403;<tt class="interfacename">ApplicationContext</tt>&#23454;&#29616;&#21152;&#36733;&#19978;&#36848;&#37197;&#32622;&#26102;&#65292;&#35774;&#32622;&#20026;<tt class="literal">lazy</tt>&#30340;bean&#23558;<span class="emphasis"><em>&#19981;&#20250;</em></span>&#22312;<tt class="interfacename">ApplicationContext</tt>&#21551;&#21160;&#26102;&#25552;&#21069;&#34987;&#23454;&#20363;&#21270;&#65292;&#32780;<tt class="literal">not.lazy</tt>&#21364;&#20250;&#34987;&#25552;&#21069;&#23454;&#20363;&#21270;&#12290;</p><p>&#38656;&#35201;&#35828;&#26126;&#30340;&#26159;&#65292;&#22914;&#26524;&#19968;&#20010;bean&#34987;&#35774;&#32622;&#20026;&#24310;&#36831;&#21021;&#22987;&#21270;&#65292;&#32780;&#21478;&#19968;&#20010;&#38750;&#24310;&#36831;&#21021;&#22987;&#21270;&#30340;singleton bean&#20381;&#36182;&#20110;&#23427;&#65292;&#37027;&#20040;&#24403;<tt class="interfacename">ApplicationContext</tt>&#25552;&#21069;&#23454;&#20363;&#21270;singleton bean&#26102;&#65292;&#23427;&#24517;&#39035;&#20063;&#30830;&#20445;&#25152;&#26377;&#19978;&#36848;singleton &#20381;&#36182;bean&#20063;&#34987;&#39044;&#20808;&#21021;&#22987;&#21270;&#65292;&#24403;&#28982;&#20063;&#21253;&#25324;&#35774;&#32622;&#20026;&#24310;&#36831;&#23454;&#20363;&#21270;&#30340;bean&#12290;&#22240;&#27492;&#65292;&#22914;&#26524;Ioc&#23481;&#22120;&#22312;&#21551;&#21160;&#30340;&#26102;&#20505;&#21019;&#24314;&#20102;&#37027;&#20123;&#35774;&#32622;&#20026;&#24310;&#36831;&#23454;&#20363;&#21270;&#30340;bean&#30340;&#23454;&#20363;&#65292;&#20320;&#20063;&#19981;&#35201;&#35273;&#24471;&#22855;&#24618;&#65292;&#22240;&#20026;&#37027;&#20123;&#24310;&#36831;&#21021;&#22987;&#21270;&#30340;bean&#21487;&#33021;&#22312;&#37197;&#32622;&#30340;&#26576;&#20010;&#22320;&#26041;&#34987;&#27880;&#20837;&#21040;&#20102;&#19968;&#20010;&#38750;&#24310;&#36831;&#21021;&#22987;&#21270;singleton bean&#37324;&#38754;&#12290;</p><p>&#22312;&#23481;&#22120;&#23618;&#27425;&#19978;&#36890;&#36807;&#22312;<tt class="literal">&lt;beans/&gt;</tt>&#20803;&#32032;&#19978;&#20351;&#29992;<tt class="literal">'default-lazy-init'</tt>&#23646;&#24615;&#26469;&#25511;&#21046;&#24310;&#36831;&#21021;&#22987;&#21270;&#20063;&#26159;&#21487;&#33021;&#30340;&#12290;&#22914;&#19979;&#38754;&#30340;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;beans default-lazy-init="true"&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- no beans will be pre-instantiated... --&gt;</span></i>
&lt;/beans&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-autowire"></a>3.3.5.&nbsp;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;</h3></div></div><div></div></div><p>Spring IoC&#23481;&#22120;&#21487;&#20197;<span class="emphasis"><em>&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;</em></span>&#30456;&#20114;&#21327;&#20316;bean&#20043;&#38388;&#30340;&#20851;&#32852;&#20851;&#31995;&#12290;&#22240;&#27492;&#65292;&#22914;&#26524;&#21487;&#33021;&#30340;&#35805;&#65292;&#21487;&#20197;&#33258;&#21160;&#35753;Spring&#36890;&#36807;&#26816;&#26597;<tt class="interfacename">BeanFactory</tt>&#20013;&#30340;&#20869;&#23481;&#65292;&#26469;&#26367;&#25105;&#20204;&#25351;&#23450;bean&#30340;&#21327;&#20316;&#32773;&#65288;&#20854;&#20182;&#34987;&#20381;&#36182;&#30340;bean&#65289;&#12290;autowire&#19968;&#20849;&#26377;&#20116;&#31181;&#31867;&#22411;&#12290;&#30001;&#20110;autowire&#21487;&#20197;&#38024;&#23545;&#21333;&#20010;bean&#36827;&#34892;&#35774;&#32622;&#65292;&#22240;&#27492;&#21487;&#20197;&#35753;&#26377;&#20123;bean&#20351;&#29992;autowire&#65292;&#26377;&#20123;bean&#19981;&#37319;&#29992;&#12290;autowire&#30340;&#26041;&#20415;&#20043;&#22788;&#22312;&#20943;&#23569;&#25110;&#32773;&#28040;&#38500;&#23646;&#24615;&#25110;&#26500;&#36896;&#22120;&#21442;&#25968;&#30340;&#35774;&#32622;&#65292;&#36825;&#26679;&#21487;&#20197;&#32473;&#25105;&#20204;&#30340;&#37197;&#32622;&#25991;&#20214;&#20943;&#20943;&#32933;&#65281;<sup>[<a name="d0e3180" href="beans.html#ftn.d0e3180">2</a>]</sup> &#22312;xml&#37197;&#32622;&#25991;&#20214;&#20013;&#65292;&#21487;&#20197;&#22312;<tt class="literal">&lt;bean/&gt;</tt>&#20803;&#32032;&#20013;&#20351;&#29992;autowire&#23646;&#24615;&#25351;&#23450;:</p><div class="table"><a name="beans-factory-autowiring-modes-tbl"></a><p class="title"><b>Table&nbsp;3.2.&nbsp;Autowiring modes</b></p><table summary="Autowiring modes" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#27169;&#24335;</th><th>&#35828;&#26126;</th></tr></thead><tbody><tr><td>no</td><td class="auto-generated">&nbsp;</td></tr><tr><td>byName</td><td><p>&#26681;&#25454;&#23646;&#24615;&#21517;&#33258;&#21160;&#35013;&#37197;&#12290;&#27492;&#36873;&#39033;&#23558;&#26816;&#26597;&#23481;&#22120;&#24182;&#26681;&#25454;&#21517;&#23383;&#26597;&#25214;&#19982;&#23646;&#24615;&#23436;&#20840;&#19968;&#33268;&#30340;bean&#65292;&#24182;&#23558;&#20854;&#19982;&#23646;&#24615;&#33258;&#21160;&#35013;&#37197;&#12290;&#20363;&#22914;&#65292;&#22312;bean&#23450;&#20041;&#20013;&#23558;autowire&#35774;&#32622;&#20026;by name&#65292;&#32780;&#35813;bean&#21253;&#21547;<span class="emphasis"><em>master</em></span>&#23646;&#24615;&#65288;&#21516;&#26102;&#25552;&#20379;<span class="emphasis"><em>setMaster(..)</em></span>&#26041;&#27861;&#65289;&#65292;Spring&#23601;&#20250;&#26597;&#25214;&#21517;&#20026;<tt class="literal">master</tt>&#30340;bean&#23450;&#20041;&#65292;&#24182;&#29992;&#23427;&#26469;&#35013;&#37197;&#32473;master&#23646;&#24615;&#12290;</p></td></tr><tr><td>byType</td><td><p>&#22914;&#26524;&#23481;&#22120;&#20013;&#23384;&#22312;&#19968;&#20010;&#19982;&#25351;&#23450;&#23646;&#24615;&#31867;&#22411;&#30456;&#21516;&#30340;bean&#65292;&#37027;&#20040;&#23558;&#19982;&#35813;&#23646;&#24615;&#33258;&#21160;&#35013;&#37197;&#12290;&#22914;&#26524;&#23384;&#22312;&#22810;&#20010;&#35813;&#31867;&#22411;&#30340;bean&#65292;&#37027;&#20040;&#23558;&#20250;&#25243;&#20986;&#24322;&#24120;&#65292;&#24182;&#25351;&#20986;&#19981;&#33021;&#20351;&#29992;<span class="emphasis"><em>byType</em></span>&#26041;&#24335;&#36827;&#34892;&#33258;&#21160;&#35013;&#37197;&#12290;&#33509;&#27809;&#26377;&#25214;&#21040;&#30456;&#21305;&#37197;&#30340;bean&#65292;&#21017;&#20160;&#20040;&#20107;&#37117;&#19981;&#21457;&#29983;&#65292;&#23646;&#24615;&#20063;&#19981;&#20250;&#34987;&#35774;&#32622;&#12290;&#22914;&#26524;&#20320;&#19981;&#24076;&#26395;&#36825;&#26679;&#65292;&#37027;&#20040;&#21487;&#20197;&#36890;&#36807;&#35774;&#32622;<tt class="literal">dependency-check="objects"</tt>&#35753;Spring&#25243;&#20986;&#24322;&#24120;&#12290;</p></td></tr><tr><td>constructor</td><td><p>&#19982;<span class="emphasis"><em>byType</em></span>&#30340;&#26041;&#24335;&#31867;&#20284;&#65292;&#19981;&#21516;&#20043;&#22788;&#22312;&#20110;&#23427;&#24212;&#29992;&#20110;&#26500;&#36896;&#22120;&#21442;&#25968;&#12290;&#22914;&#26524;&#22312;&#23481;&#22120;&#20013;&#27809;&#26377;&#25214;&#21040;&#19982;&#26500;&#36896;&#22120;&#21442;&#25968;&#31867;&#22411;&#19968;&#33268;&#30340;bean&#65292;&#37027;&#20040;&#23558;&#20250;&#25243;&#20986;&#24322;&#24120;&#12290;</p></td></tr><tr><td>autodetect</td><td><p>&#36890;&#36807;bean&#31867;&#30340;&#33258;&#30465;&#26426;&#21046;&#65288;introspection&#65289;&#26469;&#20915;&#23450;&#26159;&#20351;&#29992;<span class="emphasis"><em>constructor</em></span>&#36824;&#26159;<span class="emphasis"><em>byType</em></span>&#26041;&#24335;&#36827;&#34892;&#33258;&#21160;&#35013;&#37197;&#12290;&#22914;&#26524;&#21457;&#29616;&#40664;&#35748;&#30340;&#26500;&#36896;&#22120;&#65292;&#37027;&#20040;&#23558;&#20351;&#29992;<span class="emphasis"><em>byType</em></span>&#26041;&#24335;&#12290;</p></td></tr></tbody></table></div><p>&#22914;&#26524;&#30452;&#25509;&#20351;&#29992;<tt class="literal">property</tt>&#21644;<tt class="literal">constructor-arg</tt>&#27880;&#20837;&#20381;&#36182;&#30340;&#35805;&#65292;&#37027;&#20040;&#23558;<tt class="interfacename">&#24635;&#26159;</tt>&#35206;&#30422;&#33258;&#21160;&#35013;&#37197;&#12290;&#32780;&#19988;&#30446;&#21069;&#20063;&#19981;&#25903;&#25345;<span class="emphasis"><em>&#31616;&#21333;</em></span>&#31867;&#22411;&#30340;&#33258;&#21160;&#35013;&#37197;&#65292;&#36825;&#37324;&#25152;&#35828;&#30340;&#31616;&#21333;&#31867;&#22411;&#21253;&#25324;&#22522;&#26412;&#31867;&#22411;&#12289;<tt class="classname">String</tt>&#12289;<tt class="classname">Class</tt>&#20197;&#21450;&#31616;&#21333;&#31867;&#22411;&#30340;&#25968;&#32452;&#65288;&#36825;&#19968;&#28857;&#24050;&#32463;&#34987;&#35774;&#35745;&#65292;&#23558;&#32771;&#34385;&#20316;&#20026;&#19968;&#20010;<span class="emphasis"><em>&#21151;&#33021;</em></span>&#25552;&#20379;&#65289;&#12290;<span class="emphasis"><em>byType</em></span>&#21644;<span class="emphasis"><em>constructor</em></span>&#33258;&#21160;&#35013;&#37197;&#27169;&#24335;&#20063;&#21487;&#29992;&#20110;&#25968;&#32452;&#21644;&#25351;&#23450;&#31867;&#22411;&#30340;&#38598;&#21512;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#23481;&#22120;&#20013;&#30340;<span class="emphasis"><em>&#25152;&#26377;</em></span>&#21305;&#37197;&#30340;&#33258;&#21160;&#35013;&#37197;&#23545;&#35937;&#23558;&#34987;&#29992;&#20110;&#28385;&#36275;&#21508;&#31181;&#20381;&#36182;&#12290;&#23545;&#20110;key&#20540;&#31867;&#22411;&#20026; <tt class="classname">String</tt>&#30340;&#24378;&#31867;&#22411;Map&#20063;&#21487;&#20197;&#34987;&#33258;&#21160;&#35013;&#37197;&#12290;&#19968;&#20010;&#33258;&#21160;&#35013;&#37197;&#30340;Map&#30340;value&#20540;&#23558;&#30001;&#25152;&#21305;&#37197;&#31867;&#22411;&#30340;bean&#25152;&#22635;&#20805;&#12290;&#32780;Map&#30340;key&#20540;&#21017;&#26159;&#30456;&#24212;&#30340;bean&#30340;&#21517;&#23383;&#12290;</p><p>&#33258;&#21160;&#35013;&#37197;&#36824;&#21487;&#20197;&#19982;&#20381;&#36182;&#26816;&#26597;&#32467;&#21512;&#20351;&#29992;&#65292;&#36825;&#26679;&#20381;&#36182;&#26816;&#26597;&#23558;&#22312;&#33258;&#21160;&#35013;&#37197;&#23436;&#25104;&#20043;&#21518;&#34987;&#25191;&#34892;&#12290;</p><p>&#29702;&#35299;&#33258;&#21160;&#35013;&#37197;&#30340;&#20248;&#32570;&#28857;&#26159;&#24456;&#37325;&#35201;&#30340;&#12290;&#20854;&#20013;&#20248;&#28857;&#21253;&#25324;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#33258;&#21160;&#35013;&#37197;&#33021;&#26174;&#33879;&#20943;&#23569;&#37197;&#32622;&#30340;&#25968;&#37327;&#12290;&#19981;&#36807;&#65292;&#37319;&#29992;bean&#27169;&#26495;&#65288;&#35265;<a href="beans.html#beans-child-bean-definitions" title="3.6.&nbsp;bean&#23450;&#20041;&#30340;&#32487;&#25215;">&#36825;&#37324;</a>&#65289;&#20063;&#21487;&#20197;&#36798;&#21040;&#21516;&#26679;&#30340;&#30446;&#30340;&#12290;</p></li><li><p>&#33258;&#21160;&#35013;&#37197;&#21487;&#20197;&#20351;&#37197;&#32622;&#19982;java&#20195;&#30721;&#21516;&#27493;&#26356;&#26032;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#20320;&#38656;&#35201;&#32473;&#19968;&#20010;java&#31867;&#22686;&#21152;&#19968;&#20010;&#20381;&#36182;&#65292;&#37027;&#20040;&#35813;&#20381;&#36182;&#23558;&#34987;&#33258;&#21160;&#23454;&#29616;&#32780;&#19981;&#38656;&#35201;&#20462;&#25913;&#37197;&#32622;&#12290;&#22240;&#27492;&#24378;&#28872;&#25512;&#33616;&#22312;&#24320;&#21457;&#36807;&#31243;&#20013;&#37319;&#29992;&#33258;&#21160;&#35013;&#37197;&#65292;&#32780;&#22312;&#31995;&#32479;&#36235;&#20110;&#31283;&#23450;&#30340;&#26102;&#20505;&#25913;&#20026;&#26174;&#24335;&#35013;&#37197;&#30340;&#26041;&#24335;&#12290;</p></li></ul></div><p>&#33258;&#21160;&#35013;&#37197;&#30340;&#19968;&#20123;&#32570;&#28857;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#23613;&#31649;&#33258;&#21160;&#35013;&#37197;&#27604;&#26174;&#24335;&#35013;&#37197;&#26356;&#31070;&#22855;&#65292;&#20294;&#26159;&#65292;&#27491;&#22914;&#19978;&#38754;&#25152;&#25552;&#21040;&#30340;&#65292;Spring&#20250;&#23613;&#37327;&#36991;&#20813;&#22312;&#35013;&#37197;&#19981;&#26126;&#30830;&#30340;&#26102;&#20505;&#36827;&#34892;&#29468;&#27979;&#65292;&#22240;&#20026;&#35013;&#37197;&#19981;&#26126;&#30830;&#21487;&#33021;&#20986;&#29616;&#38590;&#20197;&#39044;&#26009;&#30340;&#32467;&#26524;&#65292;&#32780;&#19988;Spring&#25152;&#31649;&#29702;&#30340;&#23545;&#35937;&#20043;&#38388;&#30340;&#20851;&#32852;&#20851;&#31995;&#20063;&#19981;&#20877;&#33021;&#28165;&#26224;&#30340;&#36827;&#34892;&#25991;&#26723;&#21270;&#12290;</p></li><li><p>&#23545;&#20110;&#37027;&#20123;&#26681;&#25454;Spring&#37197;&#32622;&#25991;&#20214;&#29983;&#25104;&#25991;&#26723;&#30340;&#24037;&#20855;&#26469;&#35828;&#65292;&#33258;&#21160;&#35013;&#37197;&#23558;&#20250;&#20351;&#36825;&#20123;&#24037;&#20855;&#27809;&#27861;&#29983;&#25104;&#20381;&#36182;&#20449;&#24687;&#12290;</p></li></ul></div><p>&#21478;&#19968;&#20010;&#38382;&#39064;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#24403;&#26681;&#25454;&#31867;&#22411;&#36827;&#34892;&#33258;&#21160;&#35013;&#37197;&#30340;&#26102;&#20505;&#65292;&#23481;&#22120;&#20013;&#21487;&#33021;&#23384;&#22312;&#22810;&#20010;bean&#23450;&#20041;&#36319;&#33258;&#21160;&#35013;&#37197;&#30340;setter&#26041;&#27861;&#21644;&#26500;&#36896;&#22120;&#21442;&#25968;&#31867;&#22411;&#21305;&#37197;&#12290;&#34429;&#28982;&#23545;&#20110;&#25968;&#32452;&#12289;&#38598;&#21512;&#20197;&#21450;Map&#65292;&#19981;&#23384;&#22312;&#36825;&#20010;&#38382;&#39064;&#65292;&#20294;&#26159;&#23545;&#20110;&#21333;&#20540;&#20381;&#36182;&#26469;&#35828;&#65292;&#23601;&#20250;&#23384;&#22312;&#27169;&#26865;&#20004;&#21487;&#30340;&#38382;&#39064;&#12290;&#22914;&#26524;bean&#23450;&#20041;&#19981;&#21807;&#19968;&#65292;&#35013;&#37197;&#26102;&#23601;&#20250;&#25243;&#20986;&#24322;&#24120;&#65292;&#38754;&#23545;&#36825;&#31181;&#22330;&#26223;&#25105;&#20204;&#26377;&#20960;&#20010;&#26041;&#26696;&#36827;&#34892;&#36873;&#25321;&#65306;&#31532;&#19968;&#20010;&#26041;&#26696;&#23601;&#26159;&#24323;&#33258;&#21160;&#35013;&#37197;&#32780;&#25913;&#29992;&#26174;&#24335;&#35013;&#37197;&#65307;&#31532;&#20108;&#20010;&#26041;&#26696;&#23601;&#26159;&#22312;bean&#23450;&#20041;&#20013;&#36890;&#36807;&#35774;&#32622;<tt class="literal">'autowire-candidate'</tt>&#23646;&#24615;&#20026;<tt class="literal">'false'</tt>&#26469;&#23558;&#35813;bean&#25490;&#38500;&#22312;&#33258;&#21160;&#35013;&#37197;&#20505;&#36873;&#21517;&#21333;&#20043;&#22806;&#65288;&#35814;&#24773;&#35265;&#25509;&#19979;&#26469;&#30340;&#31456;&#33410;&#65289;&#65307;&#31532;&#19977;&#20010;&#26041;&#26696;&#26159;&#36890;&#36807;&#22312;bean&#23450;&#20041;&#20013;&#35774;&#32622;<tt class="literal">'primary'</tt>&#23646;&#24615;&#20026;<tt class="literal">'true'</tt>&#26469;&#23558;&#35813;bean&#35774;&#32622;&#20026;<span class="emphasis"><em>&#39318;&#36873;</em></span>&#33258;&#21160;&#35013;&#37197;bean&#12290;&#26368;&#21518;&#65292;&#23545;&#20110;&#20351;&#29992;Java 5&#30340;&#29992;&#25143;&#26469;&#35828;&#65292;&#21487;&#33021;&#20250;&#20351;&#29992;&#27880;&#35299;&#30340;&#24418;&#24335;&#26469;&#37197;&#32622;bean&#65292;&#20851;&#20110;&#36825;&#26041;&#38754;&#30340;&#20869;&#23481;&#21487;&#35265;<a href="beans.html#beans-annotation-config" title="3.11.&nbsp;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;">Section&nbsp;3.11, &#8220;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;&#8221;</a>&#12290;</p><p>&#20294;&#20915;&#23450;&#26159;&#21542;&#20351;&#29992;&#33258;&#21160;&#35013;&#37197;&#24335;&#26102;&#65292;&#27809;&#26377;&#32477;&#23545;&#30340;&#23545;&#38169;&#12290;&#32771;&#34385;&#39033;&#30446;&#30340;&#23454;&#38469;&#26159;&#26368;&#22909;&#30340;&#21150;&#27861;&#12290;&#27604;&#22914;&#39033;&#30446;&#36890;&#24120;&#19981;&#20351;&#29992;&#33258;&#21160;&#35013;&#37197;&#65292;&#37027;&#20040;&#20351;&#29992;&#23427;&#26469;&#20165;&#20165;&#35013;&#37197;2&#20010;bean&#23450;&#20041;&#26159;&#24456;&#35753;&#20154;&#22256;&#24785;&#30340;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-autowire-candidate"></a>3.3.5.1.&nbsp;&#23558;bean&#25490;&#38500;&#22312;&#33258;&#21160;&#35013;&#37197;&#20043;&#22806;</h4></div></div><div></div></div><p>&#20320;&#20063;&#21487;&#20197;&#38024;&#23545;&#21333;&#20010;bean&#35774;&#32622;&#20854;&#26159;&#21542;&#20026;&#34987;&#33258;&#21160;&#35013;&#37197;&#23545;&#35937;&#12290;&#24403;&#37319;&#29992;XML&#26684;&#24335;&#37197;&#32622;bean&#26102;&#65292;<tt class="literal">&lt;bean/&gt;</tt>&#20803;&#32032;&#30340; <tt class="literal">autowire-candidate</tt>&#23646;&#24615;&#21487;&#34987;&#35774;&#20026;<tt class="literal">false</tt>&#65292;&#36825;&#26679;&#23481;&#22120;&#22312;&#26597;&#25214;&#33258;&#21160;&#35013;&#37197;&#23545;&#35937;&#26102;&#23558;&#19981;&#32771;&#34385;&#35813;bean&#12290;</p><p>&#21478;&#19968;&#20010;&#20570;&#27861;&#23601;&#26159;&#20351;&#29992;&#23545;bean&#21517;&#23383;&#36827;&#34892;&#27169;&#24335;&#21305;&#37197;&#26469;&#23545;&#33258;&#21160;&#35013;&#37197;&#36827;&#34892;&#38480;&#21046;&#12290;&#20854;&#20570;&#27861;&#26159;&#22312;<tt class="literal">&lt;beans/&gt;</tt>&#20803;&#32032;&#30340;<tt class="literal">'default-autowire-candidates'</tt>&#23646;&#24615;&#20013;&#36827;&#34892;&#35774;&#32622;&#12290;&#27604;&#22914;&#65292;&#23558;&#33258;&#21160;&#35013;&#37197;&#38480;&#21046;&#22312;&#21517;&#23383;&#20197;<span class="emphasis"><em>'Repository'</em></span>&#32467;&#23614;&#30340;bean&#65292;&#37027;&#20040;&#21487;&#20197;&#35774;&#32622;&#20026;"*Repository&#8220;&#12290;&#23545;&#20110;&#22810;&#20010;&#21305;&#37197;&#27169;&#24335;&#21017;&#21487;&#20197;&#20351;&#29992;&#36887;&#21495;&#36827;&#34892;&#20998;&#38548;&#12290;&#27880;&#24847;&#65292;&#22914;&#26524;&#22312;bean&#23450;&#20041;&#20013;&#30340;<tt class="literal">'autowire-candidate'</tt>&#23646;&#24615;&#26174;&#24335;&#30340;&#35774;&#32622;&#20026;<tt class="literal">'true'</tt> &#25110; <tt class="literal">'false'</tt>&#65292;&#37027;&#20040;&#35813;&#23481;&#22120;&#22312;&#33258;&#21160;&#35013;&#37197;&#30340;&#26102;&#20505;&#20248;&#20808;&#37319;&#29992;&#35813;&#23646;&#24615;&#30340;&#35774;&#32622;&#65292;&#32780;&#27169;&#24335;&#21305;&#37197;&#23558;&#19981;&#36215;&#20316;&#29992;&#12290;</p><p>&#23545;&#20110;&#37027;&#20123;&#20174;&#26469;&#23601;&#19981;&#20250;&#34987;&#20854;&#23427;bean&#37319;&#29992;&#33258;&#21160;&#35013;&#37197;&#30340;&#26041;&#24335;&#26469;&#27880;&#20837;&#30340;bean&#32780;&#35328;&#65292;&#36825;&#26159;&#26377;&#29992;&#30340;&#12290;&#19981;&#36807;&#36825;&#24182;&#19981;&#24847;&#21619;&#30528;&#34987;&#25490;&#38500;&#30340;bean&#33258;&#24049;&#23601;&#19981;&#33021;&#20351;&#29992;&#33258;&#21160;&#35013;&#37197;&#26469;&#27880;&#20837;&#20854;&#20182;bean&#65292;&#23427;&#26159;&#21487;&#20197;&#30340;&#65292;&#25110;&#32773;&#26356;&#20934;&#30830;&#22320;&#35828;&#65292;&#24212;&#35813;&#26159;&#23427;&#19981;&#20250;&#34987;&#32771;&#34385;&#20316;&#20026;&#20854;&#20182;bean&#33258;&#21160;&#35013;&#37197;&#30340;&#20505;&#36873;&#32773;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-dependencies"></a>3.3.6.&nbsp;&#20381;&#36182;&#26816;&#26597;</h3></div></div><div></div></div><p>Spring&#38500;&#20102;&#33021;&#23545;&#23481;&#22120;&#20013;bean&#30340;&#20381;&#36182;&#35774;&#32622;&#36827;&#34892;&#26816;&#26597;&#22806;&#65292;&#36824;&#21487;&#20197;&#26816;&#26597;bean&#23450;&#20041;&#20013;&#23454;&#38469;&#23646;&#24615;&#20540;&#30340;&#35774;&#32622;&#65292;&#24403;&#28982;&#20063;&#21253;&#25324;&#37319;&#29992;&#33258;&#21160;&#35013;&#37197;&#26041;&#24335;&#35774;&#32622;&#23646;&#24615;&#20540;&#30340;&#26816;&#26597;&#12290;</p><p>&#24403;&#38656;&#35201;&#30830;&#20445;bean&#30340;&#25152;&#26377;&#23646;&#24615;&#20540;&#65288;&#25110;&#32773;&#23646;&#24615;&#31867;&#22411;&#65289;&#34987;&#27491;&#30830;&#35774;&#32622;&#30340;&#26102;&#20505;&#65292;&#37027;&#20040;&#36825;&#20010;&#21151;&#33021;&#20250;&#38750;&#24120;&#26377;&#29992;&#12290;&#24403;&#28982;&#65292;&#22312;&#24456;&#22810;&#24773;&#20917;&#19979;&#65292;bean&#31867;&#30340;&#26576;&#20123;&#23646;&#24615;&#20250;&#20855;&#26377;&#40664;&#35748;&#20540;&#65292;&#25110;&#32773;&#26377;&#20123;&#23646;&#24615;&#24182;&#19981;&#20250;&#22312;&#25152;&#26377;&#22330;&#26223;&#19979;&#20351;&#29992;&#65292;&#22240;&#27492;&#36825;&#39033;&#21151;&#33021;&#20250;&#23384;&#22312;&#19968;&#23450;&#30340;&#23616;&#38480;&#24615;&#12290;&#23601;&#20687;&#33258;&#21160;&#35013;&#37197;&#19968;&#26679;&#65292;&#20381;&#36182;&#26816;&#26597;&#20063;&#21487;&#20197;&#38024;&#23545;&#27599;&#19968;&#20010;bean&#36827;&#34892;&#35774;&#32622;&#12290;&#20381;&#36182;&#26816;&#26597;&#40664;&#35748;&#20026;<span class="emphasis"><em>not</em></span>&#65292;&#23427;&#26377;&#20960;&#31181;&#19981;&#21516;&#30340;&#20351;&#29992;&#27169;&#24335;&#65292;&#22312;xml&#37197;&#32622;&#25991;&#20214;&#20013;&#65292;&#21487;&#20197;&#22312;bean&#23450;&#20041;&#20013;&#20026;<tt class="literal">dependency-check</tt>&#23646;&#24615;&#20351;&#29992;&#20197;&#19979;&#20960;&#31181;&#20540;&#65306;</p><div class="table"><a name="beans-factory-dependency-check-modes-tbl"></a><p class="title"><b>Table&nbsp;3.3.&nbsp;&#20381;&#36182;&#26816;&#26597;&#26041;&#24335;</b></p><table summary="&#20381;&#36182;&#26816;&#26597;&#26041;&#24335;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#27169;&#24335;</th><th>&#35828;&#26126;</th></tr></thead><tbody><tr><td>none</td><td><p>&#27809;&#26377;&#20381;&#36182;&#26816;&#26597;&#65292;&#22914;&#26524;bean&#30340;&#23646;&#24615;&#27809;&#26377;&#20540;&#30340;&#35805;&#21487;&#20197;&#19981;&#29992;&#35774;&#32622;&#12290;</p></td></tr><tr><td>simple</td><td><p>&#23545;&#20110;&#21407;&#22987;&#31867;&#22411;&#21450;&#38598;&#21512;&#65288;&#38500;&#21327;&#20316;&#32773;&#22806;&#30340;&#19968;&#20999;&#19996;&#35199;&#65289;&#25191;&#34892;&#20381;&#36182;&#26816;&#26597;</p></td></tr><tr><td>object</td><td><p>&#20165;&#23545;&#21327;&#20316;&#32773;&#25191;&#34892;&#20381;&#36182;&#26816;&#26597;</p></td></tr><tr><td>all</td><td><p>&#23545;&#21327;&#20316;&#32773;&#65292;&#21407;&#22987;&#31867;&#22411;&#21450;&#38598;&#21512;&#25191;&#34892;&#20381;&#36182;&#26816;&#26597;</p></td></tr></tbody></table></div><p>&#20551;&#33509;&#20320;&#22312;&#20351;&#29992;Java 5&#65292;&#21487;&#20197;&#37319;&#29992;&#28304;&#20195;&#30721;&#32423;&#30340;&#27880;&#35299;&#65288;annotations&#65289;&#26469;&#36827;&#34892;&#37197;&#32622;&#65292;&#20851;&#20110;&#36825;&#26041;&#38754;&#30340;&#20869;&#23481;&#21487;&#20197;&#22312;<a href="metadata.html#metadata-annotations-required" title="25.3.1.&nbsp;@Required">Section&nbsp;25.3.1, &#8220;@Required&#8221;</a>&#36825;&#19968;&#33410;&#25214;&#21040;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-method-injection"></a>3.3.7.&nbsp;&#26041;&#27861;&#27880;&#20837;</h3></div></div><div></div></div><p>&#22312;&#22823;&#37096;&#20998;&#24773;&#20917;&#19979;&#65292;&#23481;&#22120;&#20013;&#30340;bean&#37117;&#26159;<a href="beans.html#beans-factory-scopes-singleton" title="3.4.1.&nbsp;Singleton&#20316;&#29992;&#22495;">singleton</a>&#31867;&#22411;&#30340;&#12290;&#22914;&#26524;&#19968;&#20010;singleton bean&#35201;&#24341;&#29992;&#21478;&#22806;&#19968;&#20010;singleton bean&#65292;&#25110;&#32773;&#19968;&#20010;&#38750;singleton bean&#35201;&#24341;&#29992;&#21478;&#22806;&#19968;&#20010;&#38750;singleton bean&#26102;&#65292;&#36890;&#24120;&#24773;&#20917;&#19979;&#23558;&#19968;&#20010;bean&#23450;&#20041;&#20026;&#21478;&#19968;&#20010;bean&#30340;property&#20540;&#23601;&#21487;&#20197;&#20102;&#12290;&#19981;&#36807;&#23545;&#20110;&#20855;&#26377;&#19981;&#21516;&#29983;&#21629;&#21608;&#26399;&#30340;bean&#26469;&#35828;&#36825;&#26679;&#20570;&#23601;&#20250;&#26377;&#38382;&#39064;&#20102;&#65292;&#27604;&#22914;&#22312;&#35843;&#29992;&#19968;&#20010;singleton&#31867;&#22411;bean A&#30340;&#26576;&#20010;&#26041;&#27861;&#26102;&#65292;&#38656;&#35201;&#24341;&#29992;&#21478;&#19968;&#20010;&#38750;singleton&#65288;prototype&#65289;&#31867;&#22411;&#30340;bean B&#65292;&#23545;&#20110;bean A&#26469;&#35828;&#65292;&#23481;&#22120;&#21482;&#20250;&#21019;&#24314;&#19968;&#27425;&#65292;&#36825;&#26679;&#23601;&#27809;&#27861;&#22312;&#38656;&#35201;&#30340;&#26102;&#20505;&#27599;&#27425;&#35753;&#23481;&#22120;&#20026;bean A&#25552;&#20379;&#19968;&#20010;&#26032;&#30340;&#30340;bean B&#23454;&#20363;&#12290;</p><p>&#19978;&#36848;&#38382;&#39064;&#30340;&#19968;&#20010;&#35299;&#20915;&#21150;&#27861;&#23601;&#26159;&#25918;&#24323;&#25511;&#21046;&#21453;&#36716;&#12290;&#36890;&#36807;&#23454;&#29616;<tt class="literal">BeanFactoryAware</tt>&#25509;&#21475;&#65288;&#35265;<a href="beans.html#beans-factory-aware-beanfactoryaware" title="3.5.2.1.&nbsp;&#xA;					BeanFactoryAware&#xA;				">&#36825;&#37324;</a>&#65289;&#35753;bean A&#33021;&#22815;&#24863;&#30693;bean &#23481;&#22120;&#65292;&#24182;&#19988;&#22312;&#38656;&#35201;&#30340;&#26102;&#20505;&#36890;&#36807;&#20351;&#29992;<tt class="literal">getBean("B")</tt>&#26041;&#24335;&#65288;&#35265;<a href="beans.html#beans-factory-client" title="3.2.4.&nbsp;&#20351;&#29992;&#23481;&#22120;">&#36825;&#37324;</a>&#65289;&#21521;&#23481;&#22120;&#35831;&#27714;&#19968;&#20010;&#26032;&#30340;bean B&#23454;&#20363;&#12290;&#30475;&#19979;&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#65292;&#20854;&#20013;&#25925;&#24847;&#20351;&#29992;&#20102;&#36825;&#31181;&#26041;&#27861;&#65306;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// a class that uses a stateful Command-style class to perform some processing</span></i>
package fiona.apple;

<i class="lineannotation"><span class="lineannotation">// lots of Spring-API imports</span></i>
import org.springframework.beans.BeansException;
import org.springframework.beans.factory.BeanFactory;
import org.springframework.beans.factory.BeanFactoryAware;

public class CommandManager implements BeanFactoryAware {

   private BeanFactory beanFactory;

   public Object process(Map commandState) {
      <i class="lineannotation"><span class="lineannotation">// grab a new instance of the appropriate <tt class="interfacename">Command</tt></span></i>
      Command command = createCommand();
      <i class="lineannotation"><span class="lineannotation">// set the state on the (hopefully brand new) <tt class="interfacename">Command</tt> instance</span></i>
      command.setState(commandState);
      return command.execute();
   }

   <i class="lineannotation"><span class="lineannotation">// the <tt class="interfacename">Command</tt> returned here could be an implementation that executes asynchronously, or whatever</span></i>
   protected Command createCommand() {
      return (Command) this.beanFactory.getBean("command"); <i class="lineannotation"><span class="lineannotation">// notice the Spring API dependency</span></i>
   }

   public void setBeanFactory(BeanFactory beanFactory) throws BeansException {
      this.beanFactory = beanFactory;
   }
}</pre><p>&#19978;&#38754;&#30340;&#20363;&#23376;&#26174;&#28982;&#19981;&#26159;&#26368;&#22909;&#30340;&#65292;&#22240;&#20026;&#19994;&#21153;&#20195;&#30721;&#21644;Spring Framework&#20135;&#29983;&#20102;&#32806;&#21512;&#12290;&#26041;&#27861;&#27880;&#20837;&#65292;&#20316;&#20026;Spring IoC&#23481;&#22120;&#30340;&#19968;&#31181;&#39640;&#32423;&#29305;&#24615;&#65292;&#21487;&#20197;&#20197;&#19968;&#31181;&#24178;&#20928;&#30340;&#26041;&#27861;&#26469;&#22788;&#29702;&#36825;&#31181;&#24773;&#20917;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-lookup-method-injection"></a>3.3.7.1.&nbsp;Lookup&#26041;&#27861;&#27880;&#20837;</h4></div></div><div></div></div><div class="sidebar"><p class="title"><b>&#36825;&#31350;&#31455;&#26159;&#19981;&#26159;&#26041;&#27861;&#27880;&#20837;&#8230;&#8230;</b></p><p>&#26377;&#28857;&#20687;Tapestry 4.0&#30340;&#39029;&#38754;&#65292;&#20889;&#19978;<tt class="literal">abstract</tt>&#23646;&#24615;&#65292;Tapestry&#20250;&#22312;&#36816;&#34892;&#26102;&#29992;&#20855;&#20307;&#23454;&#29616;&#23558;&#20854;&#35206;&#30422;&#12290;</p><p>&#22312;<a href="http://blog.springframework.com/rod/?p=1" target="_top">&#36825;&#31687;Blog&#25991;&#31456;&#20013;</a>&#20320;&#21487;&#20197;&#20102;&#35299;&#26356;&#36807;&#20851;&#20110;&#26041;&#27861;&#27880;&#20837;&#21160;&#26426;&#30340;&#20869;&#23481;&#12290;</p></div><p>Lookup&#26041;&#27861;&#27880;&#20837;&#21033;&#29992;&#20102;&#23481;&#22120;&#30340;&#35206;&#30422;<span class="emphasis"><em>&#21463;&#23481;&#22120;&#31649;&#29702;&#30340;bean</em></span>&#26041;&#27861;&#30340;&#33021;&#21147;&#65292;&#20174;&#32780;&#36820;&#22238;&#25351;&#23450;&#21517;&#23383;&#30340;bean&#23454;&#20363;&#12290;&#22312;&#19978;&#36848;&#22330;&#26223;&#20013;&#65292;Lookup&#26041;&#27861;&#27880;&#20837;&#36866;&#29992;&#20110;&#21407;&#22411;bean&#12290;Lookup&#26041;&#27861;&#27880;&#20837;&#30340;&#20869;&#37096;&#26426;&#21046;&#26159;Spring&#21033;&#29992;&#20102;CGLIB&#24211;&#22312;&#36816;&#34892;&#26102;&#29983;&#25104;&#20108;&#36827;&#21046;&#20195;&#30721;&#21151;&#33021;&#65292;&#36890;&#36807;&#21160;&#24577;&#21019;&#24314;Lookup&#26041;&#27861;bean&#30340;&#23376;&#31867;&#32780;&#36798;&#21040;&#22797;&#20889;Lookup&#26041;&#27861;&#30340;&#30446;&#30340;&#12290;</p><p>&#22914;&#26524;&#20320;&#30475;&#19979;&#19978;&#20010;&#20195;&#30721;&#27573;&#20013;&#30340;&#20195;&#30721;(<tt class="classname">CommandManager</tt>&#31867;)&#65292;Spring&#23481;&#22120;&#21160;&#24577;&#35206;&#30422;&#20102;<tt class="methodname">createCommand()</tt>&#26041;&#27861;&#30340;&#23454;&#29616;&#12290;&#20320;&#30340;<tt class="classname">CommandManager</tt>&#31867;&#19981;&#20250;&#26377;&#19968;&#28857;&#23545;Spring&#30340;&#20381;&#36182;&#65292;&#22312;&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;&#20063;&#26159;&#19968;&#26679;&#30340;&#65306;</p><pre class="programlisting">package fiona.apple;

<i class="lineannotation"><span class="lineannotation">// no more Spring imports! </span></i>

public abstract class CommandManager {

   public Object process(Object commandState) {
      <i class="lineannotation"><span class="lineannotation">// grab a new instance of the appropriate <tt class="interfacename">Command</tt> interface</span></i>
      Command command = createCommand();
      <i class="lineannotation"><span class="lineannotation">// set the state on the (hopefully brand new) <tt class="interfacename">Command</tt> instance</span></i>
      command.setState(commandState);
      return command.execute();
   }

    <i class="lineannotation"><span class="lineannotation">// okay... but where is the implementation of this method?</span></i>
   protected abstract Command createCommand();
}</pre><p>&#22312;&#21253;&#21547;&#34987;&#27880;&#20837;&#26041;&#27861;&#30340;&#23458;&#25143;&#31867;&#20013;(&#27492;&#22788;&#26159;<tt class="classname">CommandManager</tt>)&#65292;&#27492;&#26041;&#27861;&#30340;&#23450;&#20041;&#24517;&#39035;&#25353;&#20197;&#19979;&#24418;&#24335;&#36827;&#34892;&#65306;</p><pre class="programlisting">&lt;public|protected&gt; [abstract] &lt;return-type&gt; theMethodName(<i class="lineannotation"><span class="lineannotation">no-arguments</span></i>);</pre><p>&#22914;&#26524;&#26041;&#27861;&#26159;<tt class="literal">&#25277;&#35937;</tt>&#30340;&#65292;&#21160;&#24577;&#29983;&#25104;&#30340;&#23376;&#31867;&#20250;&#23454;&#29616;&#35813;&#26041;&#27861;&#12290;&#21542;&#21017;&#65292;&#21160;&#24577;&#29983;&#25104;&#30340;&#23376;&#31867;&#20250;&#35206;&#30422;&#31867;&#37324;&#30340;&#20855;&#20307;&#26041;&#27861;&#12290;&#35753;&#25105;&#20204;&#26469;&#30475;&#20010;&#20363;&#23376;&#65306;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- a stateful bean deployed as a prototype (non-singleton) --&gt;</span></i>
&lt;bean id="command" class="fiona.apple.AsyncCommand" scope="prototype"&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- inject dependencies here as required --&gt;</span></i>
&lt;/bean&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- <tt class="literal">commandProcessor</tt> uses <tt class="literal">statefulCommandHelper</tt> --&gt;</span></i>
&lt;bean id="commandManager" class="fiona.apple.CommandManager"&gt;
  &lt;lookup-method name="createCommand" bean="command"/&gt;
&lt;/bean&gt;</pre><p>&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#26631;&#35782;&#20026;<span class="emphasis"><em>commandManager</em></span>&#30340;bean&#22312;&#38656;&#35201;&#19968;&#20010;&#26032;&#30340;<span class="emphasis"><em>command</em></span> bean&#23454;&#20363;&#26102;&#65292;&#20250;&#35843;&#29992;<tt class="literal">createCommand</tt>&#26041;&#27861;&#12290;&#37325;&#35201;&#30340;&#19968;&#28857;&#26159;&#65292;&#24517;&#39035;&#23558;<tt class="literal">command</tt>&#37096;&#32626;&#20026;prototype&#12290;&#24403;&#28982;&#20063;&#21487;&#20197;&#25351;&#23450;&#20026;<a href="beans.html#beans-factory-scopes-singleton" title="3.4.1.&nbsp;Singleton&#20316;&#29992;&#22495;">singleton</a>&#65292;&#22914;&#26524;&#26159;&#36825;&#26679;&#30340;&#35805;&#65292;&#37027;&#20040;&#27599;&#27425;&#23558;&#36820;&#22238;&#30456;&#21516;&#30340;<tt class="literal">command</tt> bean&#23454;&#20363;&#65281;</p><p>&#35831;&#27880;&#24847;&#65292;&#20026;&#20102;&#35753;&#36825;&#20010;&#21160;&#24577;&#23376;&#31867;&#24471;&#20197;&#27491;&#24120;&#24037;&#20316;&#65292;&#38656;&#35201;&#25226;CGLIB&#30340;jar&#25991;&#20214;&#25918;&#22312;classpath&#37324;&#12290;&#21478;&#22806;&#65292;Spring&#23481;&#22120;&#35201;&#23376;&#31867;&#21270;&#30340;&#31867;&#19981;&#33021;&#26159;<tt class="literal">final</tt>&#30340;&#65292;&#35201;&#35206;&#30422;&#30340;&#26041;&#27861;&#20063;&#19981;&#33021;&#26159;<tt class="literal">final</tt>&#30340;&#12290;&#21516;&#26679;&#30340;&#65292;&#35201;&#27979;&#35797;&#19968;&#20010;&#21253;&#21547;<tt class="literal">&#25277;&#35937;</tt>&#26041;&#27861;&#30340;&#31867;&#20063;&#31245;&#24494;&#26377;&#20123;&#19981;&#21516;&#65292;&#20320;&#38656;&#35201;&#33258;&#24049;&#32534;&#20889;&#23427;&#30340;&#23376;&#31867;&#25552;&#20379;&#35813;<tt class="literal">&#25277;&#35937;</tt>&#26041;&#27861;&#30340;&#26729;&#23454;&#29616;&#12290;&#26368;&#21518;&#65292;&#20316;&#20026;&#26041;&#27861;&#27880;&#20837;&#30446;&#26631;&#30340;bean&#19981;&#33021;&#26159;&#24207;&#21015;&#21270;&#30340;(serialized)&#12290;</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="http://shouce.jb51.net/images/admons/tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#26377;&#20852;&#36259;&#30340;&#35835;&#32773;&#20063;&#35768;&#24050;&#32463;&#21457;&#29616;<tt class="classname">ServiceLocatorFactoryBean</tt>(&#22312;<tt class="literal">org.springframework.beans.factory.config</tt>&#21253;&#37324;)&#30340;&#29992;&#27861;&#21644;<tt class="classname">ObjectFactoryCreatingFactoryBean</tt>&#30340;&#26377;&#20123;&#30456;&#20284;&#65292;&#19981;&#21516;&#30340;&#26159;&#23427;&#20801;&#35768;&#20320;&#25351;&#23450;&#33258;&#24049;&#30340;lookup&#25509;&#21475;&#65292;&#19981;&#19968;&#23450;&#38750;&#35201;&#29992;Spring&#30340;lookup&#25509;&#21475;&#65292;&#27604;&#22914;<tt class="interfacename">ObjectFactory</tt>&#12290;&#35201;&#35814;&#32454;&#20102;&#35299;&#36825;&#31181;&#26041;&#27861;&#35831;&#21442;&#32771;<tt class="classname">ServiceLocatorFactoryBean</tt>&#30340;Javadocs(&#23427;<span class="emphasis"><em>&#30340;&#30830;</em></span>&#20943;&#23569;&#20102;&#23545;Spring&#30340;&#32806;&#21512;)&#12290;</p></td></tr></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-arbitrary-method-replacement"></a>3.3.7.2.&nbsp;&#33258;&#23450;&#20041;&#26041;&#27861;&#30340;&#26367;&#20195;&#26041;&#26696;</h4></div></div><div></div></div><p>&#27604;&#36215;Lookup &#26041;&#27861;&#27880;&#20837;&#26469;&#65292;&#36824;&#26377;&#19968;&#31181;&#24456;&#23569;&#29992;&#21040;&#30340;&#26041;&#27861;&#27880;&#20837;&#24418;&#24335;&#65292;&#35813;&#27880;&#20837;&#33021;&#20351;&#29992;bean&#30340;&#21478;&#19968;&#20010;&#26041;&#27861;&#23454;&#29616;&#21435;&#26367;&#25442;&#33258;&#23450;&#20041;&#30340;&#26041;&#27861;&#12290;&#38500;&#38750;&#20320;&#30495;&#30340;&#38656;&#35201;&#35813;&#21151;&#33021;&#65292;&#21542;&#21017;&#21487;&#20197;&#30053;&#36807;&#26412;&#33410;&#12290;</p><p>&#24403;&#20351;&#29992;&#22522;&#20110;XML&#37197;&#32622;&#20803;&#25968;&#25454;&#25991;&#20214;&#26102;&#65292;&#21487;&#20197;&#22312;bean&#23450;&#20041;&#20013;&#20351;&#29992;<tt class="literal">replaced-method</tt>&#20803;&#32032;&#26469;&#36798;&#21040;&#29992;&#21478;&#19968;&#20010;&#26041;&#27861;&#26469;&#21462;&#20195;&#24050;&#26377;&#26041;&#27861;&#30340;&#30446;&#30340;&#12290;&#32771;&#34385;&#19979;&#38754;&#30340;&#31867;&#65292;&#25105;&#20204;&#23558;&#35206;&#30422;computeValue&#26041;&#27861;&#65306;</p><pre class="programlisting">public class MyValueCalculator {

  public String computeValue(String input) {
    <i class="lineannotation"><span class="lineannotation">// some real code...</span></i>
  }

  <i class="lineannotation"><span class="lineannotation">// some other methods...</span></i>

}</pre><p>&#23454;&#29616;<tt class="interfacename">org.springframework.beans.factory.support.MethodReplacer</tt>&#25509;&#21475;&#30340;&#31867;&#25552;&#20379;&#20102;&#26032;&#30340;&#26041;&#27861;&#23450;&#20041;&#12290;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">/** meant to be used to override the existing <tt class="methodname">computeValue(String)</tt>
    implementation in <tt class="classname">MyValueCalculator</tt>
  */</span></i>
public class ReplacementComputeValue implements MethodReplacer {

    public Object reimplement(Object o, Method m, Object[] args) throws Throwable {
        <i class="lineannotation"><span class="lineannotation">// get the input value, work with it, and return a computed result</span></i>
        String input = (String) args[0];
        ... 
        return ...;
    }
}</pre><p>&#19979;&#38754;&#30340;bean&#23450;&#20041;&#20013;&#25351;&#23450;&#20102;&#35201;&#37197;&#32622;&#30340;&#21407;&#22987;&#31867;&#21644;&#23558;&#35201;&#35206;&#20889;&#30340;&#26041;&#27861;&#65306;</p><pre class="programlisting">&lt;bean id="myValueCalculator class="x.y.z.MyValueCalculator"&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- arbitrary method replacement --&gt;</span></i>
  &lt;replaced-method name="computeValue" replacer="replacementComputeValue"&gt;
    &lt;arg-type&gt;String&lt;/arg-type&gt;
  &lt;/replaced-method&gt;
&lt;/bean&gt;

&lt;bean id="replacementComputeValue" class="a.b.c.ReplacementComputeValue"/&gt;</pre><p>&#22312;<tt class="literal">&lt;replaced-method/&gt;</tt>&#20803;&#32032;&#20869;&#21487;&#21253;&#21547;&#19968;&#20010;&#25110;&#22810;&#20010;<tt class="literal">&lt;arg-type/&gt;</tt>&#20803;&#32032;&#65292;&#36825;&#20123;&#20803;&#32032;&#29992;&#26469;&#26631;&#26126;&#34987;&#35206;&#20889;&#30340;&#26041;&#27861;&#31614;&#21517;&#12290;&#21482;&#26377;&#34987;&#35206;&#20889;&#65288;override&#65289;&#30340;&#26041;&#27861;&#23384;&#22312;&#37325;&#36733;&#65288;overload&#65289;&#30340;&#24773;&#20917;&#65288;&#21516;&#21517;&#30340;&#22810;&#20010;&#26041;&#27861;&#21464;&#20307;&#65289;&#25165;&#20250;&#20351;&#29992;&#26041;&#27861;&#31614;&#21517;&#12290;&#20026;&#20102;&#26041;&#20415;&#65292;&#21442;&#25968;&#30340;&#31867;&#22411;&#23383;&#31526;&#20018;&#21487;&#20197;&#37319;&#29992;&#20840;&#38480;&#23450;&#31867;&#21517;&#30340;&#31616;&#20889;&#12290;&#20363;&#22914;&#65292;&#19979;&#38754;&#30340;&#23383;&#31526;&#20018;&#37117;&#34920;&#31034;&#21442;&#25968;&#31867;&#22411;&#20026;<tt class="classname">java.lang.String</tt>&#12290;</p><pre class="programlisting">    java.lang.String
    String
    Str</pre><p>&#21442;&#25968;&#30340;&#20010;&#25968;&#36890;&#24120;&#36275;&#22815;&#29992;&#26469;&#21306;&#21035;&#27599;&#20010;&#21487;&#33021;&#30340;&#36873;&#25321;&#65292;&#36825;&#20010;&#25463;&#24452;&#33021;&#20943;&#23569;&#24456;&#22810;&#38190;&#30424;&#36755;&#20837;&#30340;&#24037;&#20316;&#65292;&#23427;&#20801;&#35768;&#20320;&#21482;&#36755;&#20837;&#26368;&#30701;&#30340;&#21305;&#37197;&#21442;&#25968;&#31867;&#22411;&#30340;&#23383;&#31526;&#20018;&#12290;</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="beans-factory-scopes"></a>3.4.&nbsp;Bean&#30340;&#20316;&#29992;&#22495;</h2></div></div><div></div></div><p>&#21019;&#24314;&#19968;&#20010;bean&#23450;&#20041;&#65292;&#20854;&#23454;&#36136;&#26159;&#29992;&#35813;bean&#23450;&#20041;&#23545;&#24212;&#30340;&#31867;&#26469;&#21019;&#24314;&#30495;&#27491;&#23454;&#20363;&#30340;<span class="emphasis"><em>&#8220;&#37197;&#26041;(recipe)&#8221;</em></span>&#12290;&#25226;bean&#23450;&#20041;&#30475;&#25104;&#19968;&#20010;&#37197;&#26041;&#24456;&#26377;&#24847;&#20041;&#65292;&#23427;&#19982;class&#24456;&#31867;&#20284;&#65292;&#21482;&#26681;&#25454;&#19968;&#24352;&#8220;&#22788;&#26041;&#8221;&#23601;&#21487;&#20197;&#21019;&#24314;&#22810;&#20010;&#23454;&#20363;&#12290;</p><p>&#20320;&#19981;&#20165;&#21487;&#20197;&#25511;&#21046;&#27880;&#20837;&#21040;&#23545;&#35937;&#20013;&#30340;&#21508;&#31181;&#20381;&#36182;&#21644;&#37197;&#32622;&#20540;&#65292;&#36824;&#21487;&#20197;&#25511;&#21046;&#35813;&#23545;&#35937;&#30340;&#20316;&#29992;&#22495;&#12290;&#36825;&#26679;&#20320;&#21487;&#20197;&#28789;&#27963;&#36873;&#25321;&#25152;&#24314;&#23545;&#35937;&#30340;&#20316;&#29992;&#22495;&#65292;&#32780;&#19981;&#24517;&#22312;Java Class&#32423;&#23450;&#20041;&#20316;&#29992;&#22495;&#12290;Spring Framework&#25903;&#25345;&#20116;&#31181;&#20316;&#29992;&#22495;&#65288;&#20854;&#20013;&#26377;&#19977;&#31181;&#21482;&#33021;&#29992;&#22312;&#22522;&#20110;web&#30340;Spring <tt class="interfacename">ApplicationContext</tt>&#65289;&#12290;
    </p><p>&#20869;&#32622;&#25903;&#25345;&#30340;&#20316;&#29992;&#22495;&#20998;&#21015;&#22914;&#19979;&#65306;</p><div class="table"><a name="beans-factory-scopes-tbl"></a><p class="title"><b>Table&nbsp;3.4.&nbsp;Bean&#20316;&#29992;&#22495;</b></p><table summary="Bean&#20316;&#29992;&#22495;" border="1"><colgroup><col><col></colgroup><thead><tr><th align="center">&#20316;&#29992;&#22495;</th><th align="center">&#25551;&#36848;</th></tr></thead><tbody><tr><td><p>
								<a href="beans.html#beans-factory-scopes-singleton" title="3.4.1.&nbsp;Singleton&#20316;&#29992;&#22495;">singleton</a>
							</p></td><td><p>&#22312;&#27599;&#20010;Spring IoC&#23481;&#22120;&#20013;&#19968;&#20010;bean&#23450;&#20041;&#23545;&#24212;&#19968;&#20010;&#23545;&#35937;&#23454;&#20363;&#12290;</p></td></tr><tr><td><p>
								<a href="beans.html#beans-factory-scopes-prototype" title="3.4.2.&nbsp;Prototype&#20316;&#29992;&#22495;">prototype</a>
							</p></td><td><p>&#19968;&#20010;bean&#23450;&#20041;&#23545;&#24212;&#22810;&#20010;&#23545;&#35937;&#23454;&#20363;&#12290;</p></td></tr><tr><td><p>
								<a href="beans.html#beans-factory-scopes-request" title="3.4.4.2.&nbsp;Request&#20316;&#29992;&#22495;">request</a>
							</p></td><td><p>&#22312;&#19968;&#27425;HTTP&#35831;&#27714;&#20013;&#65292;&#19968;&#20010;bean&#23450;&#20041;&#23545;&#24212;&#19968;&#20010;&#23454;&#20363;&#65307;&#21363;&#27599;&#27425;HTTP&#35831;&#27714;&#23558;&#20250;&#26377;&#21508;&#33258;&#30340;bean&#23454;&#20363;&#65292;
              	&#23427;&#20204;&#20381;&#25454;&#26576;&#20010;bean&#23450;&#20041;&#21019;&#24314;&#32780;&#25104;&#12290;&#35813;&#20316;&#29992;&#22495;&#20165;&#22312;&#22522;&#20110;web&#30340;Spring 
                <tt class="interfacename">ApplicationContext</tt>&#24773;&#24418;&#19979;&#26377;&#25928;&#12290;</p></td></tr><tr><td><p>
								<a href="beans.html#beans-factory-scopes-global-session" title="3.4.4.4.&nbsp;global session&#20316;&#29992;&#22495;">session</a>
							</p></td><td><p>&#22312;&#19968;&#20010;HTTP <tt class="interfacename">Session</tt>&#20013;&#65292;&#19968;&#20010;bean&#23450;&#20041;&#23545;&#24212;&#19968;&#20010;&#23454;&#20363;&#12290;&#35813;&#20316;&#29992;&#22495;&#20165;&#22312;&#22522;&#20110;web&#30340;Spring <tt class="interfacename">ApplicationContext</tt>&#24773;&#24418;&#19979;&#26377;&#25928;&#12290;</p></td></tr><tr><td><p>
								<a href="beans.html#beans-factory-scopes-global-session" title="3.4.4.4.&nbsp;global session&#20316;&#29992;&#22495;">global
                session</a>
							</p></td><td><p>&#22312;&#19968;&#20010;&#20840;&#23616;&#30340;HTTP <tt class="interfacename">Session</tt>&#20013;&#65292;&#19968;&#20010;bean&#23450;&#20041;&#23545;&#24212;&#19968;&#20010;&#23454;&#20363;&#12290;&#20856;&#22411;&#24773;&#20917;&#19979;&#65292;&#20165;&#22312;&#20351;&#29992;portlet context&#30340;&#26102;&#20505;&#26377;&#25928;&#12290;&#35813;&#20316;&#29992;&#22495;&#20165;&#22312;&#22522;&#20110;web&#30340;Spring <tt class="interfacename">ApplicationContext</tt>&#24773;&#24418;&#19979;&#26377;&#25928;&#12290;</p></td></tr></tbody></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-scopes-singleton"></a>3.4.1.&nbsp;Singleton&#20316;&#29992;&#22495;</h3></div></div><div></div></div><p>&#24403;&#19968;&#20010;bean&#30340;&#20316;&#29992;&#22495;&#20026;singleton, &#37027;&#20040;Spring IoC&#23481;&#22120;&#20013;&#21482;&#20250;&#23384;&#22312;&#19968;&#20010;<span class="emphasis"><em>&#20849;&#20139;</em></span>&#30340;bean&#23454;&#20363;&#65292;&#24182;&#19988;&#25152;&#26377;&#23545;bean&#30340;&#35831;&#27714;&#65292;&#21482;&#35201;id&#19982;&#35813;bean&#23450;&#20041;&#30456;&#21305;&#37197;&#65292;&#21017;&#21482;&#20250;&#36820;&#22238;bean&#30340;&#21516;&#19968;&#23454;&#20363;&#12290;</p><p>&#25442;&#35328;&#20043;&#65292;&#24403;&#25226;&#19968;&#20010;bean&#23450;&#20041;&#35774;&#32622;&#20026;singlton&#20316;&#29992;&#22495;&#26102;&#65292;Spring IoC&#23481;&#22120;&#21482;&#20250;&#21019;&#24314;&#35813;bean&#23450;&#20041;&#30340;<span class="emphasis"><em>&#21807;&#19968;</em></span>&#23454;&#20363;&#12290;&#36825;&#20010;&#21333;&#19968;&#23454;&#20363;&#20250;&#34987;&#23384;&#20648;&#21040;&#21333;&#20363;&#32531;&#23384;&#65288;singleton cache&#65289;&#20013;&#65292;&#24182;&#19988;<span class="emphasis"><em>&#25152;&#26377;&#38024;&#23545;&#35813;bean&#30340;&#21518;&#32493;&#35831;&#27714;&#21644;&#24341;&#29992;</em></span>&#37117;&#23558;&#36820;&#22238;&#34987;&#32531;&#23384;&#30340;&#23545;&#35937;&#23454;&#20363;&#12290;</p><p>
				</p><div class="mediaobject" align="center"><img src="images/singleton.png" align="middle"></div><p>
			</p><p>&#35831;&#27880;&#24847;Spring&#30340;singleton bean&#27010;&#24565;&#19982;&#8220;&#22235;&#20154;&#24110;&#8221;&#65288;GoF&#65289;&#27169;&#24335;&#19968;&#20070;&#20013;&#23450;&#20041;&#30340;Singleton&#27169;&#24335;&#26159;&#23436;&#20840;&#19981;&#21516;&#30340;&#12290;&#32463;&#20856;&#30340;GoF Singleton&#27169;&#24335;&#20013;&#25152;&#35859;&#30340;&#23545;&#35937;&#33539;&#22260;&#26159;&#25351;&#22312;<span class="emphasis"><em>&#27599;&#19968;&#20010;<tt class="classname">ClassLoader</tt>&#20013;</em></span>&#25351;&#23450;class&#21019;&#24314;&#30340;&#23454;&#20363;&#26377;<span class="emphasis"><em>&#19988;&#20165;&#26377;&#19968;&#20010;</em></span>&#12290;&#25226;Spring&#30340;singleton&#20316;&#29992;&#22495;&#25551;&#36848;&#25104;<span class="emphasis"><em>&#19968;&#20010;<tt class="interfacename">container</tt>&#23545;&#24212;&#19968;&#20010;bean</em></span>&#23454;&#20363;&#26368;&#20026;&#36148;&#20999;&#12290;&#20134;&#21363;&#65292;&#20551;&#22914;&#22312;&#21333;&#20010;Spring&#23481;&#22120;&#20869;&#23450;&#20041;&#20102;&#26576;&#20010;&#25351;&#23450;class&#30340;bean&#65292;&#37027;&#20040;Spring&#23481;&#22120;&#23558;&#20250;&#21019;&#24314;&#19968;&#20010;<span class="emphasis"><em>&#19988;&#20165;&#26377;&#19968;&#20010;</em></span>&#30001;&#35813;bean&#23450;&#20041;&#25351;&#23450;&#30340;&#31867;&#23454;&#20363;&#12290;<span class="emphasis"><em>Singleton&#20316;&#29992;&#22495;&#26159;Spring&#20013;&#30340;&#32570;&#30465;&#20316;&#29992;&#22495;</em></span>&#12290;&#35201;&#22312;XML&#20013;&#23558;bean&#23450;&#20041;&#25104;singleton&#65292;&#21487;&#20197;&#36825;&#26679;&#37197;&#32622;&#65306;
	  </p><pre class="programlisting">&lt;bean id="accountService" class="com.foo.DefaultAccountService"/&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- the following is equivalent, though redundant (singleton scope is the default); using <tt class="literal">spring-beans-2.0.dtd</tt> --&gt;</span></i>
&lt;bean id="accountService" class="com.foo.DefaultAccountService" scope="singleton"/&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- the following is equivalent and preserved for backward compatibility in <tt class="literal">spring-beans.dtd</tt> --&gt;</span></i>
&lt;bean id="accountService" class="com.foo.DefaultAccountService" singleton="true"/&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-scopes-prototype"></a>3.4.2.&nbsp;Prototype&#20316;&#29992;&#22495;</h3></div></div><div></div></div><p>Prototype&#20316;&#29992;&#22495;&#30340;bean&#20250;&#23548;&#33268;&#22312;&#27599;&#27425;&#23545;&#35813;bean&#35831;&#27714;&#65288;&#23558;&#20854;&#27880;&#20837;&#21040;&#21478;&#19968;&#20010;bean&#20013;&#65292;&#25110;&#32773;&#20197;&#31243;&#24207;&#30340;&#26041;&#24335;&#35843;&#29992;&#23481;&#22120;&#30340;<tt class="literal">getBean()</tt>&#26041;&#27861;&#65289;&#26102;&#37117;&#20250;<span class="emphasis"><em>&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;bean&#23454;&#20363;</em></span>&#12290;&#26681;&#25454;&#32463;&#39564;&#65292;&#23545;&#26377;&#29366;&#24577;&#30340;bean&#24212;&#35813;&#20351;&#29992;prototype&#20316;&#29992;&#22495;&#65292;&#32780;&#23545;&#26080;&#29366;&#24577;&#30340;bean&#21017;&#24212;&#35813;&#20351;&#29992;singleton&#20316;&#29992;&#22495;&#12290;</p><p>&#19979;&#22270;&#28436;&#31034;&#20102;Spring&#30340;prototype&#20316;&#29992;&#22495;&#12290;<span class="emphasis"><em>&#35831;&#27880;&#24847;&#65292;&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;DAO&#19981;&#20250;&#34987;&#37197;&#32622;&#25104;prototype&#65292;&#22240;&#20026;DAO&#36890;&#24120;&#19981;&#20250;&#25345;&#26377;&#20219;&#20309;&#20250;&#35805;&#29366;&#24577;&#65292;&#22240;&#27492;&#24212;&#35813;&#20351;&#29992;singleton&#20316;&#29992;&#22495;&#12290;</em></span>
			</p><p>
				</p><div class="mediaobject" align="center"><img src="images/prototype.png" align="middle"></div><p>
			</p><p>&#35201;&#22312;XML&#20013;&#23558;bean&#23450;&#20041;&#25104;prototype&#65292;&#21487;&#20197;&#36825;&#26679;&#37197;&#32622;&#65306;</p><pre class="programlisting">
				<i class="lineannotation"><span class="lineannotation">&lt;!-- using <tt class="literal">spring-beans-2.0.dtd</tt> --&gt;</span></i>
&lt;bean id="accountService" class="com.foo.DefaultAccountService" scope="prototype"/&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- the following is equivalent and preserved for backward compatibility in <tt class="literal">spring-beans.dtd</tt> --&gt;</span></i>
&lt;bean id="accountService" class="com.foo.DefaultAccountService" singleton="false"/&gt;</pre><p>
       &#23545;&#20110;prototype&#20316;&#29992;&#22495;&#30340;bean&#65292;&#26377;&#19968;&#28857;&#38750;&#24120;&#37325;&#35201;&#65292;&#37027;&#23601;&#26159;Spring&#19981;&#33021;&#23545;&#19968;&#20010;prototype bean&#30340;&#25972;&#20010;&#29983;&#21629;&#21608;&#26399;&#36127;&#36131;&#65306;&#23481;&#22120;&#22312;&#21021;&#22987;&#21270;&#12289;&#37197;&#32622;&#12289;&#35013;&#39280;&#25110;&#32773;&#26159;&#35013;&#37197;&#23436;&#19968;&#20010;prototype&#23454;&#20363;&#21518;&#65292;&#23558;&#23427;&#20132;&#32473;&#23458;&#25143;&#31471;&#65292;&#38543;&#21518;&#23601;&#23545;&#35813;prototype&#23454;&#20363;&#19981;&#38395;&#19981;&#38382;&#20102;&#12290;&#19981;&#31649;&#20309;&#31181;&#20316;&#29992;&#22495;&#65292;&#23481;&#22120;&#37117;&#20250;&#35843;&#29992;&#25152;&#26377;&#23545;&#35937;&#30340;&#21021;&#22987;&#21270;&#29983;&#21629;&#21608;&#26399;&#22238;&#35843;&#26041;&#27861;&#12290;&#20294;&#23545;prototype&#32780;&#35328;&#65292;&#20219;&#20309;&#37197;&#32622;&#22909;&#30340;&#26512;&#26500;&#29983;&#21629;&#21608;&#26399;&#22238;&#35843;&#26041;&#27861;&#37117;&#23558;<span class="emphasis"><em>&#19981;&#20250;</em></span>&#34987;&#35843;&#29992;&#12290;&#28165;&#38500;prototype&#20316;&#29992;&#22495;&#30340;&#23545;&#35937;&#24182;&#37322;&#25918;&#20219;&#20309;prototype bean&#25152;&#25345;&#26377;&#30340;&#26114;&#36149;&#36164;&#28304;&#65292;&#37117;&#26159;&#23458;&#25143;&#31471;&#20195;&#30721;&#30340;&#32844;&#36131;&#12290;&#65288;&#35753;Spring&#23481;&#22120;&#37322;&#25918;&#34987;prototype&#20316;&#29992;&#22495;bean&#21344;&#29992;&#36164;&#28304;&#30340;&#19968;&#31181;&#21487;&#34892;&#26041;&#24335;&#26159;&#65292;&#36890;&#36807;&#20351;&#29992;<a href="beans.html#beans-factory-extension-bpp" title="3.7.1.&nbsp;&#29992;BeanPostProcessor&#23450;&#21046;bean">bean&#30340;&#21518;&#32622;&#22788;&#29702;&#22120;</a>&#65292;&#35813;&#22788;&#29702;&#22120;&#25345;&#26377;&#35201;&#34987;&#28165;&#38500;&#30340;bean&#30340;&#24341;&#29992;&#12290;&#65289;
      </p><p>&#35848;&#21450;prototype&#20316;&#29992;&#22495;&#30340;bean&#26102;&#65292;&#22312;&#26576;&#20123;&#26041;&#38754;&#20320;&#21487;&#20197;&#23558;Spring&#23481;&#22120;&#30340;&#35282;&#33394;&#30475;&#20316;&#26159;Java <tt class="literal">new</tt>&#25805;&#20316;&#30340;&#26367;&#20195;&#32773;&#12290;&#20219;&#20309;&#36831;&#20110;&#35813;&#26102;&#38388;&#28857;&#30340;&#29983;&#21629;&#21608;&#26399;&#20107;&#23452;&#37117;&#24471;&#20132;&#30001;&#23458;&#25143;&#31471;&#26469;&#22788;&#29702;&#12290;&#65288;&#22312;<a href="beans.html#beans-factory-lifecycle" title="3.5.1.&nbsp;&#29983;&#21629;&#21608;&#26399;&#22238;&#35843;">Section&nbsp;3.5.1, &#8220;&#29983;&#21629;&#21608;&#26399;&#22238;&#35843;&#8221;</a>&#19968;&#33410;&#20013;&#20250;&#36827;&#19968;&#27493;&#35762;&#36848;Spring&#23481;&#22120;&#20013;&#30340;bean&#29983;&#21629;&#21608;&#26399;&#12290;&#65289;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-scopes-sing-prot-interaction"></a>3.4.3.&nbsp;Singleton beans&#21644;prototype-bean&#30340;&#20381;&#36182;</h3></div></div><div></div></div><p>&#24403;&#20351;&#29992;&#20381;&#36182;&#20110;prototype bean&#30340;singleton-scoped bean&#26102;&#65292;&#35831;&#27880;&#24847;<span class="emphasis"><em>&#20381;&#36182;&#26159;&#22312;&#23454;&#20363;&#21270;&#26102;&#22788;&#29702;&#30340;</em></span>&#12290;&#36825;&#20063;&#23601;&#26159;&#35828;&#65292;&#22914;&#26524;&#35201;&#25226;&#19968;&#20010;prototype-scoped bean&#27880;&#20837;&#21040;singleton-scoped bean&#65292;&#23454;&#38469;&#19978;&#21482;&#26159;&#23454;&#20363;&#21270;&#19968;&#20010;&#26032;&#30340;prototype bean&#27880;&#20837;&#21040; singleton bean...<span class="emphasis"><em>&#20294;&#36825;&#26159;&#20840;&#37096;</em></span>&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;singleton-scoped bean&#33719;&#24471;&#30340;prototype&#23454;&#20363;&#26159;&#21807;&#19968;&#30340;&#12290;</p><p>&#28982;&#32780;&#65292;&#20320;&#21487;&#33021;&#38656;&#35201;&#22312;&#36816;&#34892;&#26399;&#35753;singleton-scoped bean&#27599;&#27425;&#37117;&#33719;&#24471;prototype-scoped bean&#30340;&#26032;&#23454;&#20363;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#21482;&#23558;prototype-scoped bean&#27880;&#20837;&#21040;&#20320;&#30340;singleton bean&#20013;&#26159;&#27809;&#26377;&#29992;&#30340;&#65292;&#22240;&#20026;&#27491;&#22914;&#19978;&#25991;&#25152;&#35828;&#30340;&#65292;&#20165;&#20165;&#22312;&#24403;Spring&#23481;&#22120;&#23454;&#20363;&#21270;singleton bean&#24182;&#19988;&#22788;&#29702;&#27880;&#20837;&#30340;&#20381;&#36182;&#26102;&#65292;&#29983;&#25104;&#21807;&#19968;&#23454;&#20363;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#22312;&#36816;&#34892;&#26399;&#19968;&#27425;&#21448;&#19968;&#27425;&#30340;&#29983;&#25104;(prototype) bean&#30340;&#26032;&#23454;&#20363;&#65292;&#20320;&#21487;&#20197;&#21442;&#32771;<a href="beans.html#beans-factory-method-injection" title="3.3.7.&nbsp;&#26041;&#27861;&#27880;&#20837;">Section&nbsp;3.3.7, &#8220;&#26041;&#27861;&#27880;&#20837;&#8221;</a>
			</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: &#21521;&#21518;&#20860;&#23481;&#24615;&#65306;&#22312;XML&#20013;&#25351;&#23450;&#29983;&#21629;&#21608;&#26399;&#20316;&#29992;&#22495;"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">&#21521;&#21518;&#20860;&#23481;&#24615;&#65306;&#22312;XML&#20013;&#25351;&#23450;&#29983;&#21629;&#21608;&#26399;&#20316;&#29992;&#22495;</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#22914;&#26524;&#20320;&#22312;bean&#23450;&#20041;&#25991;&#20214;&#20013;&#24341;&#29992;<tt class="filename">'spring-beans.dtd'</tt> DTD&#65292;
      &#35201;&#26174;&#24335;&#35828;&#26126;bean&#30340;&#29983;&#21629;&#21608;&#26399;&#20316;&#29992;&#22495;&#20320;&#24517;&#39035;&#20351;&#29992;"<tt class="literal">singleton</tt>"&#23646;&#24615;(&#35760;&#20303;<a href="beans.html#beans-factory-scopes-singleton" title="3.4.1.&nbsp;Singleton&#20316;&#29992;&#22495;">singleton&#29983;&#21629;&#21608;&#26399;&#20316;&#29992;&#22495;</a>&#26159;&#40664;&#35748;&#30340;)&#12290;
      &#22914;&#26524;&#24341;&#29992;&#30340;&#26159;<tt class="filename">'spring-beans-2.0.dtd'</tt> DTD&#25110;&#32773;&#26159;Spring 2.0 XSD schema&#65292;
      &#37027;&#20040;&#38656;&#35201;&#20351;&#29992;"<tt class="literal">scope</tt>"&#23646;&#24615;(&#22240;&#20026;"<tt class="literal">singleton</tt>"&#23646;&#24615;&#34987;&#21024;&#38500;&#20102;&#65292;
      &#26032;&#30340;DTD&#21644;XSD&#25991;&#20214;&#20351;&#29992;"<tt class="literal">scope</tt>"&#23646;&#24615;)</p><p>&#31616;&#21333;&#22320;&#35828;&#65292;&#22914;&#26524;&#20320;&#29992;"<tt class="literal">singleton</tt>"&#23646;&#24615;&#37027;&#20040;&#23601;<span class="emphasis"><em>&#24517;&#39035;<span class="emphasis"><em>&#22312;&#37027;&#20010;&#25991;&#20214;&#37324;</em></span>
				</em></span>&#24341;&#29992;<tt class="filename">'spring-beans.dtd'</tt> DTD&#12290;
       &#22914;&#26524;&#20320;&#29992;"<tt class="literal">scope</tt>"&#23646;&#24615;&#37027;&#20040;&#24517;&#39035; <span class="emphasis"><em>&#22312;&#37027;&#20010;&#25991;&#20214;&#37324;</em></span>&#24341;&#29992;<tt class="filename">'spring-beans-2.0.dtd'</tt> DTD &#25110;<tt class="filename">'spring-beans-2.0.xsd'</tt> XSD&#12290;</p></td></tr></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-scopes-other"></a>3.4.4.&nbsp;&#20854;&#20182;&#20316;&#29992;&#22495;</h3></div></div><div></div></div><p>&#20854;&#20182;&#20316;&#29992;&#22495;&#65292;&#21363;<tt class="literal">request</tt>&#12289;<tt class="literal">session</tt>&#20197;&#21450;<tt class="literal">global session</tt>
      &#20165;&#22312;&#22522;&#20110;web&#30340;&#24212;&#29992;&#20013;&#20351;&#29992;&#65288;&#19981;&#24517;&#20851;&#24515;&#20320;&#25152;&#37319;&#29992;&#30340;&#26159;&#20160;&#20040;web&#24212;&#29992;&#26694;&#26550;&#65289;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#19979;&#38754;&#20171;&#32461;&#30340;&#20316;&#29992;&#22495;<span class="emphasis"><em>&#20165;&#20165;</em></span>&#22312;&#20351;&#29992;&#22522;&#20110;web&#30340;Spring <tt class="interfacename">ApplicationContext</tt>&#23454;&#29616;&#65288;&#22914;<tt class="classname">XmlWebApplicationContext</tt>&#65289;&#26102;&#26377;&#29992;&#12290;
         &#22914;&#26524;&#22312;&#26222;&#36890;&#30340;Spring IoC&#23481;&#22120;&#20013;&#65292;&#27604;&#22914;&#20687;<tt class="classname">XmlBeanFactory</tt>&#25110;<tt class="classname">ClassPathXmlApplicationContext</tt>&#65292;
         &#23581;&#35797;&#20351;&#29992;&#36825;&#20123;&#20316;&#29992;&#22495;&#65292;&#20320;<span class="emphasis"><em>&#23558;&#20250;</em></span>&#24471;&#21040;&#19968;&#20010;<tt class="classname">IllegalStateException</tt>&#24322;&#24120;&#65288;&#26410;&#30693;&#30340;bean&#20316;&#29992;&#22495;&#65289;&#12290;
        </p></td></tr></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-scopes-other-web-configuration"></a>3.4.4.1.&nbsp;&#21021;&#22987;&#21270;web&#37197;&#32622;</h4></div></div><div></div></div><p>&#35201;&#20351;&#29992;<tt class="literal">request</tt>&#12289;<tt class="literal">session</tt>&#21644;
        <tt class="literal">global session</tt>&#20316;&#29992;&#22495;&#30340;bean&#65288;&#21363;&#20855;&#26377;web&#20316;&#29992;&#22495;&#30340;bean&#65289;&#65292;
         &#22312;&#24320;&#22987;&#35774;&#32622;bean&#23450;&#20041;&#20043;&#21069;&#65292;&#36824;&#35201;&#20570;&#23569;&#37327;&#30340;&#21021;&#22987;&#37197;&#32622;&#12290;&#35831;&#27880;&#24847;&#65292;&#20551;&#22914;&#20320;&#21482;&#24819;&#35201;&#8220;&#24120;&#35268;&#30340;&#8221;&#20316;&#29992;&#22495;&#65292;&#65288;singleton&#21644;prototype&#65289;&#65292;&#23601;<span class="emphasis"><em>&#19981;&#38656;&#35201;</em></span>&#36825;&#19968;&#39069;&#22806;&#30340;&#35774;&#32622;&#12290;
        </p><p>&#22312;&#30446;&#21069;&#30340;&#24773;&#20917;&#19979;&#65292;&#26681;&#25454;&#20320;&#30340;&#29305;&#23450;servlet&#29615;&#22659;&#65292;&#26377;&#22810;&#31181;&#26041;&#27861;&#26469;&#23436;&#25104;&#36825;&#19968;&#21021;&#22987;&#35774;&#32622;...</p><p>&#22914;&#26524;&#20320;&#29992;Spring Web MVC&#65292;&#21363;&#29992;Spring<tt class="classname">DispatcherServlet</tt>&#25110;<tt class="classname">DispatcherPortlet</tt>&#26469;&#22788;&#29702;&#35831;&#27714;&#65292;&#21017;&#19981;&#38656;&#35201;&#20570;&#29305;&#21035;&#30340;&#37197;&#32622;&#65306;<tt class="classname">DispatcherServlet</tt> &#21644;
        <tt class="classname">DispatcherPortlet</tt>&#24050;&#32463;&#22788;&#29702;&#20102;&#25152;&#26377;&#26377;&#20851;&#30340;&#29366;&#24577;</p><p>&#24403;&#20351;&#29992;&#20102;Spring's DispatcherServlet&#20197;&#22806;&#30340;Servlet 2.4&#21450;&#20197;&#19978;&#30340;Web&#23481;&#22120;&#26102;&#65288;&#22914;&#20351;&#29992;JSF&#25110;Struts&#65289;&#65292;&#20320;&#38656;&#35201;&#22312;Web&#24212;&#29992;&#30340;<tt class="literal">'web.xml'</tt>&#25991;&#20214;&#20013;&#22686;&#21152; <tt class="interfacename">javax.servlet.ServletRequestListener</tt> &#23450;&#20041;</p><pre class="programlisting">&lt;web-app&gt;
  ...
  &lt;listener&gt;
    &lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;
  &lt;/listener&gt;
  ...
&lt;/web-app&gt;</pre><p>&#22914;&#26524;&#20320;&#29992;&#30340;&#26159;&#26089;&#26399;&#29256;&#26412;&#30340;web&#23481;&#22120;&#65288;Servlet 2.4&#20197;&#21069;&#30340;&#29256;&#26412;&#65289;&#65292;&#37027;&#20040;&#20320;&#35201;&#20351;&#29992;&#19968;&#20010;<tt class="interfacename">javax.servlet.Filter</tt>&#30340;&#23454;&#29616;&#12290;&#35831;&#30475;&#19979;&#38754;&#30340;web.xml&#37197;&#32622;&#29255;&#27573;&#65306;</p><pre class="programlisting">&lt;web-app&gt;
  ..
  &lt;filter&gt; 
    &lt;filter-name&gt;requestContextFilter&lt;/filter-name&gt; 
    &lt;filter-class&gt;org.springframework.web.filter.RequestContextFilter&lt;/filter-class&gt;
  &lt;/filter&gt; 
  &lt;filter-mapping&gt; 
    &lt;filter-name&gt;requestContextFilter&lt;/filter-name&gt; 
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;
  ...
&lt;/web-app&gt;</pre><p>
					<tt class="classname">RequestContextListener</tt>&#21644;<tt class="classname">RequestContextFilter</tt>&#20004;&#20010;&#31867;&#20570;&#30340;&#37117;&#26159;&#21516;&#26679;&#30340;&#24037;&#20316;&#65306;
        &#23558;HTTP request&#23545;&#35937;&#32465;&#23450;&#21040;&#20026;&#35813;&#35831;&#27714;&#25552;&#20379;&#26381;&#21153;&#30340;<tt class="classname">Thread</tt>&#12290;
        &#36825;&#20351;&#24471;&#20855;&#26377;request&#21644;session&#20316;&#29992;&#22495;&#30340;bean&#33021;&#22815;&#22312;&#21518;&#38754;&#30340;&#35843;&#29992;&#38142;&#20013;&#34987;&#35775;&#38382;&#21040;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-scopes-request"></a>3.4.4.2.&nbsp;Request&#20316;&#29992;&#22495;</h4></div></div><div></div></div><p>&#32771;&#34385;&#19979;&#38754;bean&#23450;&#20041;&#65306;</p><pre class="programlisting">&lt;bean id="loginAction" class="com.foo.LoginAction" scope="request"/&gt;</pre><p>&#38024;&#23545;&#27599;&#27425;HTTP&#35831;&#27714;&#65292;Spring&#23481;&#22120;&#20250;&#26681;&#25454;<tt class="literal">loginAction</tt> bean&#23450;&#20041;&#21019;&#24314;&#19968;&#20010;&#20840;&#26032;&#30340;<tt class="classname">LoginAction</tt> bean&#23454;&#20363;&#65292;
         &#19988;&#35813;<tt class="literal">loginAction</tt> bean&#23454;&#20363;&#20165;&#22312;&#24403;&#21069;HTTP request&#20869;&#26377;&#25928;&#65292;&#22240;&#27492;&#21487;&#20197;&#26681;&#25454;&#38656;&#35201;&#25918;&#24515;&#30340;&#26356;&#25913;&#25152;&#24314;&#23454;&#20363;&#30340;&#20869;&#37096;&#29366;&#24577;&#65292;
         &#32780;&#20854;&#20182;&#35831;&#27714;&#20013;&#26681;&#25454;<tt class="literal">loginAction</tt> bean&#23450;&#20041;&#21019;&#24314;&#30340;&#23454;&#20363;&#65292;&#23558;&#19981;&#20250;&#30475;&#21040;&#36825;&#20123;&#29305;&#23450;&#20110;&#26576;&#20010;&#35831;&#27714;&#30340;&#29366;&#24577;&#21464;&#21270;&#12290;
         &#24403;&#22788;&#29702;&#35831;&#27714;&#32467;&#26463;&#65292;request&#20316;&#29992;&#22495;&#30340;bean&#23454;&#20363;&#23558;&#34987;&#38144;&#27585;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-scopes-session"></a>3.4.4.3.&nbsp;Session&#20316;&#29992;&#22495;</h4></div></div><div></div></div><p>&#32771;&#34385;&#19979;&#38754;bean&#23450;&#20041;&#65306;</p><pre class="programlisting">&lt;bean id="userPreferences" class="com.foo.UserPreferences" scope="session"/&gt;</pre><p>&#38024;&#23545;&#26576;&#20010;HTTP <tt class="interfacename">Session</tt>&#65292;Spring&#23481;&#22120;&#20250;&#26681;&#25454;<tt class="literal">userPreferences</tt> bean&#23450;&#20041;&#21019;&#24314;&#19968;&#20010;&#20840;&#26032;&#30340;<tt class="classname">userPreferences</tt> bean&#23454;&#20363;&#65292;
        &#19988;&#35813;<tt class="literal">userPreferences</tt> bean&#20165;&#22312;&#24403;&#21069;HTTP <tt class="interfacename">Session</tt>&#20869;&#26377;&#25928;&#12290;
        &#19982;<tt class="literal">request&#20316;&#29992;&#22495;</tt>&#19968;&#26679;&#65292;&#20320;&#21487;&#20197;&#26681;&#25454;&#38656;&#35201;&#25918;&#24515;&#30340;&#26356;&#25913;&#25152;&#21019;&#24314;&#23454;&#20363;&#30340;&#20869;&#37096;&#29366;&#24577;&#65292;&#32780;&#21035;&#30340;HTTP <tt class="interfacename">Session</tt>&#20013;&#26681;&#25454;<tt class="literal">userPreferences</tt>&#21019;&#24314;&#30340;&#23454;&#20363;&#65292;
        &#23558;&#19981;&#20250;&#30475;&#21040;&#36825;&#20123;&#29305;&#23450;&#20110;&#26576;&#20010;HTTP <tt class="interfacename">Session</tt>&#30340;&#29366;&#24577;&#21464;&#21270;&#12290;
        &#24403;HTTP <tt class="interfacename">Session</tt>&#26368;&#32456;&#34987;&#24223;&#24323;&#30340;&#26102;&#20505;&#65292;&#22312;&#35813;HTTP <tt class="interfacename">Session</tt>&#20316;&#29992;&#22495;&#20869;&#30340;bean&#20063;&#20250;&#34987;&#24223;&#24323;&#25481;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-scopes-global-session"></a>3.4.4.4.&nbsp;global session&#20316;&#29992;&#22495;</h4></div></div><div></div></div><p>&#32771;&#34385;&#19979;&#38754;bean&#23450;&#20041;&#65306;</p><pre class="programlisting">&lt;bean id="userPreferences" class="com.foo.UserPreferences" scope="globalSession"/&gt;</pre><p>
					<tt class="literal">global session</tt>&#20316;&#29992;&#22495;&#31867;&#20284;&#20110;&#26631;&#20934;&#30340;HTTP <tt class="interfacename">Session</tt>&#20316;&#29992;&#22495;&#65292;&#19981;&#36807;&#23427;&#20165;&#20165;&#22312;&#22522;&#20110;portlet&#30340;web&#24212;&#29992;&#20013;&#25165;&#26377;&#24847;&#20041;&#12290;Portlet&#35268;&#33539;&#23450;&#20041;&#20102;&#20840;&#23616;<tt class="interfacename">Session</tt>&#30340;&#27010;&#24565;&#65292;&#23427;&#34987;&#25152;&#26377;&#26500;&#25104;&#26576;&#20010;portlet web&#24212;&#29992;&#30340;&#21508;&#31181;&#19981;&#21516;&#30340;portlet&#25152;&#20849;&#20139;&#12290;&#22312;<tt class="literal">global session</tt>&#20316;&#29992;&#22495;&#20013;&#23450;&#20041;&#30340;bean&#34987;&#38480;&#23450;&#20110;&#20840;&#23616;portlet <tt class="interfacename">Session</tt>&#30340;&#29983;&#21629;&#21608;&#26399;&#33539;&#22260;&#20869;&#12290;</p><p>&#35831;&#27880;&#24847;&#65292;&#20551;&#22914;&#20320;&#22312;&#32534;&#20889;&#19968;&#20010;&#26631;&#20934;&#30340;&#22522;&#20110;Servlet&#30340;web&#24212;&#29992;&#65292;&#24182;&#19988;&#23450;&#20041;&#20102;&#19968;&#20010;&#25110;&#22810;&#20010;&#20855;&#26377;<tt class="literal">global session</tt>&#20316;&#29992;&#22495;&#30340;bean&#65292;&#31995;&#32479;&#20250;&#20351;&#29992;&#26631;&#20934;&#30340;HTTP <tt class="interfacename">Session</tt>&#20316;&#29992;&#22495;&#65292;&#24182;&#19988;&#19981;&#20250;&#24341;&#36215;&#20219;&#20309;&#38169;&#35823;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-scopes-other-injection"></a>3.4.4.5.&nbsp;&#20316;&#29992;&#22495;bean&#19982;&#20381;&#36182;</h4></div></div><div></div></div><p>&#33021;&#22815;&#22312;HTTP request&#25110;&#32773;<tt class="interfacename">Session</tt>&#65288;&#29978;&#33267;<a href="beans.html#beans-factory-scopes-custom" title="3.4.5.&nbsp;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;">&#33258;&#23450;&#20041;</a>&#65289;&#20316;&#29992;&#22495;&#20013;&#23450;&#20041;bean&#22266;&#28982;&#24456;&#22909;&#65292;&#20294;&#26159;Spring IoC&#23481;&#22120;&#38500;&#20102;&#31649;&#29702;&#23545;&#35937;&#65288;bean&#65289;&#30340;&#23454;&#20363;&#21270;&#65292;&#21516;&#26102;&#36824;&#36127;&#36131;&#21327;&#20316;&#32773;&#65288;&#25110;&#32773;&#21483;&#20381;&#36182;&#65289;&#30340;&#23454;&#20363;&#21270;&#12290;&#22914;&#26524;&#20320;&#25171;&#31639;&#23558;&#19968;&#20010;Http request&#33539;&#22260;&#30340;bean&#27880;&#20837;&#21040;&#21478;&#19968;&#20010;bean&#20013;&#65292;&#37027;&#20040;&#38656;&#35201;&#27880;&#20837;&#19968;&#20010;AOP&#20195;&#29702;&#26469;&#26367;&#20195;&#34987;&#27880;&#20837;&#30340;&#20316;&#29992;&#22495;bean&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;&#20320;&#38656;&#35201;&#27880;&#20837;&#19968;&#20010;&#20195;&#29702;&#23545;&#35937;&#65292;&#35813;&#23545;&#35937;&#20855;&#26377;&#19982;&#34987;&#20195;&#29702;&#23545;&#35937;&#19968;&#26679;&#30340;&#20844;&#20849;&#25509;&#21475;&#65292;&#32780;&#23481;&#22120;&#21017;&#21487;&#20197;&#36275;&#22815;&#26234;&#33021;&#30340;&#20174;&#30456;&#20851;&#20316;&#29992;&#22495;&#20013;&#65288;&#27604;&#22914;&#19968;&#20010;HTTP request&#65289;&#33719;&#21462;&#21040;&#30495;&#23454;&#30340;&#30446;&#26631;&#23545;&#35937;&#65292;&#24182;&#25226;&#26041;&#27861;&#35843;&#29992;&#22996;&#27966;&#32473;&#23454;&#38469;&#30340;&#23545;&#35937;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>
						<tt class="literal">&lt;aop:scoped-proxy/&gt;</tt>
						<span class="emphasis"><em>&#19981;&#33021;</em></span>&#21644;&#20316;&#29992;&#22495;&#20026;<tt class="literal">singleton</tt>&#25110;<tt class="literal">prototype</tt>&#30340;bean&#19968;&#36215;&#20351;&#29992;&#12290;&#20026;singleton bean&#21019;&#24314;&#19968;&#20010;scoped proxy&#23558;&#25243;&#20986;<tt class="classname">BeanCreationException</tt>&#24322;&#24120;&#12290;</p></td></tr></table></div><p>&#35753;&#25105;&#20204;&#30475;&#19968;&#19979;&#23558;&#30456;&#20851;&#20316;&#29992;&#22495;bean&#20316;&#20026;&#20381;&#36182;&#30340;&#37197;&#32622;&#65292;&#37197;&#32622;&#24182;&#19981;&#22797;&#26434;&#65288;&#21482;&#26377;&#19968;&#34892;&#65289;&#65292;&#20294;&#26159;&#23545;&#29702;&#35299;&#8220;<span class="quote">&#20026;&#20309;&#36825;&#20040;&#20570;</span>&#8221;&#20197;&#21450;&#8220;<span class="quote">&#22914;&#20309;&#20570;</span>&#8221;&#26159;&#24456;&#37325;&#35201;&#30340;&#12290;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"&gt;

    <i class="lineannotation"><span class="lineannotation">&lt;!-- a HTTP <tt class="interfacename">Session</tt>-scoped bean exposed as a proxy --&gt;</span></i>
    &lt;bean id="userPreferences" class="com.foo.UserPreferences" <span class="bold"><b>scope="session"</b></span>&gt;
          
          <i class="lineannotation"><span class="lineannotation">&lt;!-- this next element effects the proxying of the surrounding bean --&gt;</span></i>
					<span class="bold"><b>&lt;aop:scoped-proxy/&gt;</b></span>
    &lt;/bean&gt;
    
    <i class="lineannotation"><span class="lineannotation">&lt;!-- a singleton-scoped bean <span class="bold"><b>injected with a proxy to the above bean</b></span> --&gt;</span></i>
    &lt;bean id="userService" class="com.foo.SimpleUserService"&gt;
    
        <i class="lineannotation"><span class="lineannotation">&lt;!-- a reference to the <span class="bold"><b>proxied</b></span>
						<tt class="literal">'userPreferences'</tt> bean --&gt;</span></i>
        &lt;property name="userPreferences" ref="userPreferences"/&gt;

    &lt;/bean&gt;
&lt;/beans&gt;
</pre><p>&#35201;&#21019;&#24314;&#36825;&#26679;&#30340;&#20195;&#29702;&#65292;&#21482;&#38656;&#35201;&#22312;Bean&#20316;&#29992;&#22495;&#23450;&#20041;&#20013;&#22686;&#21152;&#19968;&#20010;<tt class="literal">&lt;aop:scoped-proxy/&gt;</tt>&#23376;&#20803;&#32032;(&#20026;&#20102;&#35753;&#23481;&#22120;&#21487;&#20197;&#26377;&#25928;&#30340;&#20351;&#29992;&#22522;&#20110;&#31867;&#65288;&#32780;&#19981;&#26159;&#25509;&#21475;&#65289;&#30340;&#20195;&#29702;&#65292;&#20320;&#38656;&#35201;&#22312;classpath&#20013;&#21152;&#20837;CGLIB&#21253;&#65292;
        &#24182;&#19988;&#35201;&#20351;&#29992;<a href="xsd-config.html" title="Appendix&nbsp;A.&nbsp;XML Schema-based configuration">Appendix&nbsp;A, <i>XML Schema-based configuration</i></a>&#37197;&#32622;&#26041;&#24335;)&#12290;&#20026;&#20160;&#20040;&#22312;<tt class="literal">request</tt>,<tt class="literal">session</tt>, <tt class="literal">globalSession</tt> &#21644; '<span class="emphasis"><em>&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;</em></span>' &#38656;&#35201;<tt class="literal">&lt;aop:scoped-proxy/&gt;</tt>&#20803;&#32032;&#65311;&#22312;&#19979;&#38754;&#37197;&#32622;&#29255;&#27573;&#20013;&#21487;&#20197;&#25214;&#21040;&#35299;&#37322;(&#27880;&#24847;&#19979;&#38754; <tt class="literal">'userPreferences'</tt> Bean&#23450;&#20041;&#26159;<span class="emphasis"><em>&#19981;&#23436;&#25972;</em></span>&#30340;):</p><pre class="programlisting">&lt;bean id="userPreferences" class="com.foo.UserPreferences" scope="session"/&gt;

&lt;bean id="userManager" class="com.foo.UserManager"&gt;
    &lt;property name="userPreferences" ref="userPreferences"/&gt;
&lt;/bean&gt;</pre><p>&#20174;&#19978;&#36848;&#37197;&#32622;&#20013;&#21487;&#20197;&#24456;&#26126;&#26174;&#30340;&#30475;&#21040;singleton bean <tt class="literal">userManager</tt>&#34987;&#27880;&#20837;&#20102;&#19968;&#20010;&#25351;&#21521;HTTP <tt class="interfacename">Session</tt>&#20316;&#29992;&#22495;bean <tt class="literal">userPreferences</tt>&#30340;&#24341;&#29992;&#12290;singleton <tt class="literal">userManager</tt> bean&#20250;&#34987;&#23481;&#22120;&#20165;&#23454;&#20363;&#21270;<span class="emphasis"><em>&#19968;&#27425;</em></span>&#65292;&#24182;&#19988;&#20854;&#20381;&#36182;&#65288;&#21363;<tt class="literal">userPreferences</tt> bean&#65289;&#20063;&#20165;&#34987;&#27880;&#20837;&#19968;&#27425;&#12290;&#36825;&#24847;&#21619;&#30528;&#65292;<tt class="literal">userManager</tt>&#22312;&#29702;&#35770;&#19978;&#21482;&#20250;&#25805;&#20316;&#21516;&#19968;&#20010;<tt class="literal">userPreferences</tt>&#23545;&#35937;&#65292;&#21363;&#21407;&#20808;&#34987;&#27880;&#20837;&#30340;&#37027;&#20010;bean&#12290;&#32780;&#27880;&#20837;&#19968;&#20010;HTTP <tt class="interfacename">Session</tt>&#20316;&#29992;&#22495;&#30340;bean&#20316;&#20026;&#20381;&#36182;&#65292;&#26377;&#36829;&#25105;&#20204;&#30340;&#21021;&#34935;&#12290;&#22240;&#20026;&#25105;&#20204;<span class="emphasis"><em>&#24819;&#35201;</em></span>&#30340;&#21482;&#26159;&#19968;&#20010;<tt class="literal">userManager</tt>&#23545;&#35937;&#65292;&#22312;&#23427;&#36827;&#20837;&#19968;&#20010;HTTP <tt class="interfacename">Session</tt>&#29983;&#21629;&#21608;&#26399;&#26102;&#65292;&#25105;&#20204;&#24076;&#26395;&#21435;&#20351;&#29992;&#19968;&#20010;HTTP <tt class="interfacename">Session</tt>&#30340;<tt class="literal">userPreferences</tt>&#23545;&#35937;&#12290;</p><p>&#24403;&#27880;&#20837;&#26576;&#31181;&#31867;&#22411;&#23545;&#35937;&#26102;&#65292;&#35813;&#23545;&#35937;&#23454;&#29616;&#20102;&#21644;<tt class="classname">UserPreferences</tt>&#31867;&#19968;&#26679;&#30340;&#20844;&#20849;&#25509;&#21475;&#65288;&#21363;<tt class="classname">UserPreferences</tt>&#23454;&#20363;&#65289;&#12290;&#24182;&#19988;&#19981;&#35770;&#25105;&#20204;&#24213;&#23618;&#36873;&#25321;&#20102;&#20309;&#31181;&#20316;&#29992;&#22495;&#26426;&#21046;&#65288;HTTP request&#12289;<tt class="interfacename">Session</tt>&#31561;&#31561;&#65289;&#65292;&#23481;&#22120;&#37117;&#20250;&#36275;&#22815;&#26234;&#33021;&#30340;&#33719;&#21462;&#21040;<tt class="interfacename">&#30495;&#27491;&#30340;</tt>
					<tt class="classname">UserPreferences</tt>&#23545;&#35937;&#65292;&#22240;&#27492;&#25105;&#20204;&#38656;&#35201;&#23558;&#35813;&#23545;&#35937;&#30340;&#20195;&#29702;&#27880;&#20837;&#21040;<tt class="literal">userManager</tt> bean&#20013;, &#32780;<tt class="literal">userManager</tt> bean&#24182;&#19981;&#20250;&#24847;&#35782;&#21040;&#23427;&#25152;&#25345;&#26377;&#30340;&#26159;&#19968;&#20010;&#25351;&#21521;<tt class="classname">UserPreferences</tt>&#24341;&#29992;&#30340;&#20195;&#29702;&#12290;&#22312;&#26412;&#20363;&#20013;&#65292;&#24403;<tt class="interfacename">UserManager</tt>&#23454;&#20363;&#35843;&#29992;&#20102;&#19968;&#20010;&#20351;&#29992;<tt class="classname">UserPreferences</tt>&#23545;&#35937;&#30340;&#26041;&#27861;&#26102;&#65292;&#23454;&#38469;&#35843;&#29992;&#30340;&#26159;&#20195;&#29702;&#23545;&#35937;&#30340;&#26041;&#27861;&#12290;&#38543;&#21518;&#20195;&#29702;&#23545;&#35937;&#20250;&#20174;HTTP <tt class="interfacename">Session</tt>&#33719;&#21462;&#30495;&#27491;&#30340;<tt class="classname">UserPreferences</tt>&#23545;&#35937;&#65292;&#24182;&#23558;&#26041;&#27861;&#35843;&#29992;&#22996;&#27966;&#32473;&#33719;&#21462;&#21040;&#30340;&#23454;&#38469;&#30340;<tt class="classname">UserPreferences</tt>&#23545;&#35937;&#12290;</p><p>&#36825;&#23601;&#26159;&#24403;&#25226;<tt class="literal">request-</tt>,
        <tt class="literal">session-</tt>, &#21644;
        <tt class="literal">globalSession-scoped</tt> beans &#27880;&#20837;&#21040;&#21327;&#20316;&#23545;&#35937;&#20013;&#26102;&#65292;&#38656;&#35201;&#20197;&#19979;&#30340;&#27491;&#30830;&#32780;&#23436;&#25972;&#30340;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;bean id="userPreferences" class="com.foo.UserPreferences" scope="session"&gt;
    <span class="bold"><b>
						<tt class="literal">&lt;aop:scoped-proxy/&gt;</tt>
					</b></span>
&lt;/bean&gt;

&lt;bean id="userManager" class="com.foo.UserManager"&gt;
    &lt;property name="userPreferences" ref="userPreferences"/&gt;
&lt;/bean&gt;</pre><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-factory-scopes-other-injection-proxies"></a>3.4.4.5.1.&nbsp;&#36873;&#25321;&#21019;&#24314;&#20195;&#29702;&#30340;&#31867;&#22411;</h5></div></div><div></div></div><p>&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#24403;&#19968;&#20010;bean&#26377;<tt class="literal">&lt;aop:scoped-proxy/&gt;</tt>&#26631;&#35760;&#26102;&#65292;Spring&#23481;&#22120;&#23558;&#20026;&#23427;&#21019;&#24314;&#19968;&#20010;&#22522;&#20110;CGLIB&#30340;&#31867;&#20195;&#29702;&#65292;&#36825;&#24847;&#21619;&#30528;&#20320;&#38656;&#35201;
		  &#23558;CGLIB&#24211;&#28155;&#21152;&#21040;&#24212;&#29992;&#30340;classpath&#20013;&#12290;</p><p>
						<span class="emphasis"><em>&#27880;&#24847;&#65306;CGLIB&#20195;&#29702;&#20165;&#20165;&#25318;&#25130;public&#26041;&#27861;&#30340;&#35843;&#29992;&#65281;</em></span>&#23545;&#20110;&#38750;public&#30340;&#26041;&#27861;&#35843;&#29992;&#65292;&#19981;&#20250;&#23545;&#30446;&#26631;&#23545;&#35937;&#20135;&#29983;&#22996;&#25176;&#12290;</p><p>&#20320;&#21487;&#20197;&#23558;<tt class="literal">&lt;aop:scoped-proxy/&gt;</tt>&#30340;&#23646;&#24615;'<tt class="literal">proxy-target-class</tt>'&#35774;&#32622;&#20026;'<tt class="literal">false</tt>'&#26469;&#36873;&#25321;&#26631;&#20934;JDK&#25512;&#33616;&#30340;&#22522;&#20110;&#25509;&#21475;&#30340;&#20195;&#29702;&#65292;&#36825;&#26679;&#23601;&#19981;&#38656;&#35201;&#22312;&#24212;&#29992;&#30340;classpath&#20013;&#22686;&#21152;&#39069;&#22806;&#30340;&#24211;&#12290;&#20294;&#26159;&#65292;&#36825;&#23601;&#24847;&#21619;&#30528;&#31867;&#24517;&#39035;&#23454;&#29616;&#33267;&#23569;&#19968;&#20010;&#25509;&#21475;&#12290;&#24182;&#19988;<span class="emphasis"><em>&#25152;&#26377;&#30340;</em></span>&#21327;&#20316;&#32773;&#24517;&#39035;&#36890;&#36807;&#26576;&#19968;&#20010;
		  &#25509;&#21475;&#26469;&#24341;&#29992;bean&#12290;</p><pre class="programlisting">
						<i class="lineannotation"><span class="lineannotation">&lt;!-- <tt class="classname">DefaultUserPreferences</tt> implements the <tt class="interfacename">UserPreferences</tt> interface --&gt;</span></i>
&lt;bean id="userPreferences" class="com.foo.DefaultUserPreferences" scope="session"&gt;
    &lt;aop:scoped-proxy <span class="bold"><b>proxy-target-class="false"<tt class="literal"></tt>
						</b></span>/&gt;
&lt;/bean&gt;

&lt;bean id="userManager" class="com.foo.UserManager"&gt;
    &lt;property name="userPreferences" ref="userPreferences"/&gt;
&lt;/bean&gt;</pre><p>&#39064;&#20026;<a href="aop.html#aop-proxying" title="6.6.&nbsp;&#20195;&#29702;&#26426;&#21046;">Section&nbsp;6.6, &#8220;&#20195;&#29702;&#26426;&#21046;&#8221;</a>&#30340;&#31456;&#33410;&#20063;&#21487;&#20197;&#26377;&#21161;&#20110;&#29702;&#35299;&#23545;&#36873;&#25321;&#22522;&#20110;&#31867;&#36824;&#26159;&#22522;&#20110;&#25509;&#21475;&#30340;&#20195;&#29702;&#30340;&#32454;&#24494;&#24046;&#21035;&#12290;</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-scopes-custom"></a>3.4.5.&nbsp;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;</h3></div></div><div></div></div><p>&#22312;Spring 2.0&#20013;&#65292;Spring&#30340;bean&#20316;&#29992;&#22495;&#26426;&#21046;&#26159;&#21487;&#20197;&#25193;&#23637;&#30340;&#12290;&#36825;&#24847;&#21619;&#30528;&#65292;&#20320;&#19981;&#20165;&#21487;&#20197;&#20351;&#29992;Spring&#25552;&#20379;&#30340;&#39044;&#23450;&#20041;bean&#20316;&#29992;&#22495;&#65307;&#36824;&#21487;&#20197;&#23450;&#20041;&#33258;&#24049;&#30340;&#20316;&#29992;&#22495;&#65292;&#29978;&#33267;&#37325;&#26032;&#23450;&#20041;&#29616;&#26377;&#30340;&#20316;&#29992;&#22495;&#65288;&#19981;&#25552;&#20513;&#36825;&#20040;&#20570;&#65292;&#32780;&#19988;&#20320;<span class="emphasis"><em>&#19981;&#33021;</em></span>&#35206;&#30422;&#20869;&#32622;&#30340;<tt class="literal">singleton</tt>&#21644;<tt class="literal">prototype</tt>&#20316;&#29992;&#22495;&#65289;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-scopes-custom-creating"></a>3.4.5.1.&nbsp;&#21019;&#24314;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;</h4></div></div><div></div></div><p>&#20316;&#29992;&#22495;&#26159;&#30001;<tt class="interfacename">org.springframework.beans.factory.config.Scope</tt>&#25509;&#21475;&#23450;&#20041;&#30340;&#12290;&#35201;&#23558;&#20320;&#33258;&#24049;&#30340;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;&#38598;&#25104;&#21040;Spring&#23481;&#22120;&#20013;&#65292;&#38656;&#35201;&#23454;&#29616;&#35813;&#25509;&#21475;&#12290;&#20320;&#21487;&#33021;&#24819;&#21442;&#32771;Spring&#26694;&#26550;&#26412;&#36523;&#25552;&#20379;&#30340;<tt class="interfacename">Scope</tt>&#23454;&#29616;&#26469;&#20102;&#35299;&#22914;&#20309;&#21019;&#24314;&#33258;&#24049;&#30340;&#23454;&#29616;&#65292;<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/config/Scope.html" target="_top">Scope Javadoc</a>&#23637;&#31034;&#20102;&#21019;&#24314;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;&#30340;&#23454;&#29616;&#30340;&#26356;&#22810;&#32454;&#33410;</p><p>
					<tt class="literal">Scope</tt>&#25509;&#21475;&#25552;&#20379;&#20102;&#22235;&#20010;&#26041;&#27861;&#26469;&#22788;&#29702;&#33719;&#21462;&#23545;&#35937;&#65292;&#31227;&#38500;&#23545;&#35937;&#21644;&#24517;&#35201;&#30340;&#26102;&#20505;'&#38144;&#27585;'&#23545;&#35937;&#12290;</p><p>&#31532;&#19968;&#20010;&#26041;&#27861;&#21487;&#20197;&#20174;&#20316;&#29992;&#22495;&#20013;&#33719;&#21462;&#23545;&#35937;&#12290;&#20363;&#22914;&#65292;Session&#20316;&#29992;&#22495;&#30340;&#23454;&#29616;&#20250;&#36820;&#22238;&#19968;&#20010;session-scoped bean(&#22914;&#26524;&#19981;&#23384;&#22312;&#65292;&#21017;&#36820;&#22238;&#19968;&#20010;&#32465;&#23450;&#20102;Session&#24341;&#29992;&#30340;&#26032;&#23454;&#20363;)&#12290;</p><pre class="programlisting">Object get(String name, ObjectFactory objectFactory)</pre><p>&#31532;&#20108;&#20010;&#26041;&#27861;&#21487;&#20197;&#20174;&#20316;&#29992;&#22495;&#20013;&#31227;&#38500;&#23545;&#35937;&#12290;&#20363;&#22914;&#65292;session&#20316;&#29992;&#22495;&#30340;&#23454;&#29616;&#21487;&#20197;&#20174;session&#20013;&#31227;&#38500;&#24182;&#36820;&#22238;session-scoped bean(&#22914;&#26524;&#27809;&#26377;&#25214;&#21040;&#30456;&#24212;&#21517;&#31216;&#30340;&#23545;&#35937;&#26114;&#65292;&#21017;&#21487;&#20197;&#36820;&#22238;null)&#12290;</p><pre class="programlisting">Object remove(String name)</pre><p>&#31532;&#19977;&#20010;&#26041;&#27861;&#26159;&#27880;&#20876;&#20316;&#29992;&#22495;&#26512;&#26500;&#30340;&#22238;&#35843;&#26041;&#27861;&#65292;&#24403;&#20316;&#29992;&#22495;&#38144;&#27585;&#25110;&#20316;&#29992;&#22495;&#20013;&#30340;&#26576;&#20010;&#23545;&#35937;&#38144;&#27585;&#26102;&#20505;&#20250;&#25191;&#34892;&#12290;&#35831;&#21442;&#32771;Javadoc&#25110;Spring Scope&#30340;&#23454;&#29616;&#33719;&#24471;&#26356;&#22810;&#26512;&#26500;&#22238;&#35843;&#30340;&#20449;&#24687;&#12290;</p><pre class="programlisting">void registerDestructionCallback(String name, Runnable destructionCallback)</pre><p>The last method deals with obtaining the conversation identifier
        for the underlying scope. This identifier is different for each scope.
        For a session for example, this can be the session identifier.</p><p>&#26368;&#21518;&#19968;&#20010;&#26041;&#27861;&#22788;&#29702;&#20316;&#29992;&#22495;&#30340;&#20250;&#35805;&#26631;&#35782;&#12290;&#23545;&#27599;&#19968;&#20010;&#20316;&#29992;&#22495;&#26469;&#35828;&#26631;&#35782;&#26159;&#19981;&#19968;&#26679;&#30340;&#12290;&#20363;&#22914;&#65292;&#23545;&#20110;session&#65292;&#23558;&#33719;&#24471;session&#26631;&#35782;</p><pre class="programlisting">String getConversationId()</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-scopes-custom-using"></a>3.4.5.2.&nbsp;&#20351;&#29992;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;</h4></div></div><div></div></div><p>&#22312;&#20320;&#32534;&#20889;&#21644;&#27979;&#35797;&#23436;&#19968;&#20010;&#25110;&#22810;&#20010;&#33258;&#23450;&#20041;<tt class="interfacename">Scope</tt>&#23454;&#29616;&#21518;&#65292;&#20320;&#38656;&#35201;&#35753;Spring&#23481;&#22120;&#35013;&#37197;&#20320;&#30340;&#20316;&#29992;&#22495;&#12290;&#25226;&#19968;&#20010;&#26032;&#30340;<tt class="interfacename">Scope</tt>
         &#27880;&#20876;&#21040;Spring &#23481;&#22120;&#20013;&#30340;&#26680;&#24515;&#26041;&#27861;&#23450;&#20041;&#22312;<tt class="interfacename">ConfigurableBeanFactory</tt>&#25509;&#21475;&#20013;&#65292;&#19979;&#38754;&#23601;&#26159;&#36825;&#20010;&#26041;&#27861;&#30340;&#31034;&#20363;&#65306;
        </p><pre class="programlisting">void registerScope(String scopeName, Scope scope);</pre><p>
					<tt class="methodname">registerScope(..)</tt> &#26041;&#27861;&#30340;&#31532;&#19968;&#20010;&#21442;&#25968;&#26159;&#19968;&#20010;&#20316;&#29992;&#22495;&#30340;&#21807;&#19968;&#21517;&#31216;&#65292;&#20363;&#22914;&#65292;Spring &#23481;&#22120;&#20013;&#30340;<tt class="literal">'singleton'</tt>&#21644;<tt class="literal">'prototype'</tt>&#12290;<tt class="methodname">registerScope(..)</tt> &#26041;&#27861;&#30340;&#31532;&#20108;&#20010;&#21442;&#25968;&#26159;&#20320;&#35201;&#27880;&#20876;&#21644;&#20351;&#29992;&#30340;&#33258;&#23450;&#20041;<tt class="interfacename">Scope</tt>&#30340;&#23454;&#20363;&#12290;</p><p>&#20551;&#22914;&#20320;&#23454;&#29616;&#20102;&#33258;&#23450;&#20041;&#30340;<tt class="interfacename">Scope</tt>&#65292;&#24182;&#20687;&#19979;&#38754;&#20363;&#23376;&#19968;&#26679;&#36827;&#34892;&#20102;&#27880;&#20876;&#65306;</p><pre class="programlisting">
					<i class="lineannotation"><span class="lineannotation">// note: the <tt class="classname">ThreadScope</tt> class does <span class="bold"><b>not</b></span> ship with the Spring Framework</span></i>
Scope customScope = new ThreadScope();
beanFactory.registerScope("<span class="bold"><b>thread</b></span>", scope);</pre><p>&#20320;&#21487;&#20197;&#35937;&#19979;&#38754;&#19968;&#26679;&#26469;&#21019;&#24314;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;&#30340;&#35268;&#21017;&#65306;</p><pre class="programlisting">&lt;bean id="..." class="..." <span class="bold"><b>scope="thread"</b></span>/&gt;</pre><p>&#26377;&#20102;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;&#30340;&#23454;&#29616;&#65292;&#20320;&#23558;&#19981;&#20165;&#20165;&#21487;&#20197;&#20351;&#29992;&#20197;&#19978;&#30340;&#27880;&#20876;&#26041;&#24335;&#65292;&#36824;&#21487;&#20197;&#20351;&#29992;<tt class="classname">CustomScopeConfigurer</tt>&#31867;&#26469;&#36827;&#34892;&#22768;&#26126;&#24335;&#27880;&#20876;&#65292;</p><p>&#20197;&#19979;&#26159;&#20351;&#29992;<tt class="classname">CustomScopeConfigurer</tt>&#26469;&#36827;&#34892;&#22768;&#26126;&#24335;&#27880;&#20876;&#30340;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"&gt;

    &lt;bean class="org.springframework.beans.factory.config.CustomScopeConfigurer"&gt;
        &lt;property name="scopes"&gt;
            &lt;map&gt;<span class="bold"><b>
                &lt;entry key="thread"&gt;
                    &lt;bean class="com.foo.ThreadScope"/&gt;
                &lt;/entry&gt;</b></span>
            &lt;/map&gt;
        &lt;/property&gt;
    &lt;/bean&gt;

    &lt;bean id="bar" class="x.y.Bar" <span class="bold"><b>scope="thread"</b></span>&gt;
        &lt;property name="name" value="Rick"/&gt;
        &lt;aop:scoped-proxy/&gt;
    &lt;/bean&gt;

    &lt;bean id="foo" class="x.y.Foo"&gt;
        &lt;property name="bar" ref="bar"/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="beans-factory-nature"></a>3.5.&nbsp;&#23450;&#21046;bean&#29305;&#24615;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-lifecycle"></a>3.5.1.&nbsp;&#29983;&#21629;&#21608;&#26399;&#22238;&#35843;</h3></div></div><div></div></div><p>Spring&#25552;&#20379;&#20102;&#20960;&#20010;&#26631;&#24535;&#25509;&#21475;&#65288;marker interface&#65289;&#65292;&#36825;&#20123;&#25509;&#21475;&#29992;&#26469;&#25913;&#21464;&#23481;&#22120;&#20013;bean&#30340;&#34892;&#20026;&#65307;&#23427;&#20204;&#21253;&#25324;<tt class="literal">InitializingBean</tt>&#21644;<tt class="literal">DisposableBean</tt>&#12290;&#23454;&#29616;&#36825;&#20004;&#20010;&#25509;&#21475;&#30340;bean&#22312;&#21021;&#22987;&#21270;&#21644;&#26512;&#26500;&#26102;&#23481;&#22120;&#20250;&#35843;&#29992;&#21069;&#32773;&#30340;<tt class="methodname">afterPropertiesSet()</tt>&#26041;&#27861;&#65292;&#20197;&#21450;&#21518;&#32773;&#30340;<tt class="methodname">destroy()</tt>&#26041;&#27861;&#12290; </p><p>Spring&#22312;&#20869;&#37096;&#20351;&#29992;<tt class="literal">BeanPostProcessor</tt>&#23454;&#29616;&#26469;&#22788;&#29702;&#23427;&#33021;&#25214;&#21040;&#30340;&#20219;&#20309;&#26631;&#24535;&#25509;&#21475;&#24182;&#35843;&#29992;&#30456;&#24212;&#30340;&#26041;&#27861;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#33258;&#23450;&#20041;&#29305;&#24615;&#25110;&#32773;&#29983;&#21629;&#21608;&#26399;&#34892;&#20026;&#65292;&#20320;&#21487;&#20197;&#23454;&#29616;&#33258;&#24049;&#30340; <tt class="literal">BeanPostProcessor</tt>&#12290;&#20851;&#20110;&#36825;&#26041;&#38754;&#26356;&#22810;&#30340;&#20869;&#23481;&#21487;&#20197;&#30475;<a href="beans.html#beans-factory-extension" title="3.7.&nbsp;&#23481;&#22120;&#25193;&#23637;&#28857;">Section&nbsp;3.7, &#8220;&#23481;&#22120;&#25193;&#23637;&#28857;&#8221;</a>&#12290;</p><p>&#19979;&#38754;&#35762;&#36848;&#20102;&#20960;&#20010;&#29983;&#21629;&#21608;&#26399;&#26631;&#24535;&#25509;&#21475;&#12290;&#22312;&#38468;&#24405;&#20013;&#20250;&#25552;&#20379;&#30456;&#20851;&#30340;&#31034;&#24847;&#22270;&#26469;&#23637;&#31034;Spring&#22914;&#20309;&#31649;&#29702;bean&#65292;&#20197;&#21450;&#29983;&#21629;&#21608;&#26399;&#29305;&#24615;&#22914;&#20309;&#25913;&#21464;bean&#30340;&#20869;&#22312;&#29305;&#24615;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-lifecycle-initializingbean"></a>3.5.1.1.&nbsp;&#21021;&#22987;&#21270;&#22238;&#35843;</h4></div></div><div></div></div><p>&#23454;&#29616;<tt class="literal">org.springframework.beans.factory.InitializingBean</tt>&#25509;&#21475;&#20801;&#35768;&#23481;&#22120;&#22312;&#35774;&#32622;&#22909;bean&#30340;&#25152;&#26377;&#24517;&#35201;&#23646;&#24615;&#21518;&#65292;&#25191;&#34892;&#21021;&#22987;&#21270;&#20107;&#23452;&#12290;<tt class="interfacename">InitializingBean</tt>&#25509;&#21475;&#20165;&#25351;&#23450;&#20102;&#19968;&#20010;&#26041;&#27861;&#65306;</p><pre class="programlisting">void afterPropertiesSet() throws Exception;</pre><p>&#36890;&#24120;&#65292;&#35201;&#36991;&#20813;&#20351;&#29992;<tt class="interfacename">InitializingBean</tt>&#25509;&#21475;&#24182;&#19988;&#19981;&#40723;&#21169;&#20351;&#29992;&#35813;&#25509;&#21475;&#65292;&#22240;&#20026;&#36825;&#26679;&#20250;&#23558;&#20195;&#30721;&#21644;Spring&#32806;&#21512;&#36215;&#26469;&#65292;&#26377;&#19968;&#20010;&#21487;&#36873;&#30340;&#26041;&#26696;&#26159;&#65292;&#21487;&#20197;&#22312;Bean&#23450;&#20041;&#20013;&#25351;&#23450;&#19968;&#20010;&#26222;&#36890;&#30340;&#21021;&#22987;&#21270;&#26041;&#27861;&#65292;&#28982;&#21518;&#22312;XML&#37197;&#32622;&#25991;&#20214;&#20013;&#36890;&#36807;&#25351;&#23450;<tt class="literal">init-method</tt>&#23646;&#24615;&#26469;&#23436;&#25104;&#12290;&#22914;&#19979;&#38754;&#30340;&#23450;&#20041;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;bean id="exampleInitBean" class="examples.ExampleBean" init-method="init"/&gt;</pre><pre class="programlisting">public class ExampleBean {
    
    public void init() {
        <i class="lineannotation"><span class="lineannotation">// do some initialization work</span></i>
    }
}</pre><p>...&#25928;&#26524;&#19982;&#19979;&#38754;&#23436;&#20840;&#19968;&#26679;...</p><pre class="programlisting">&lt;bean id="exampleInitBean" class="examples.AnotherExampleBean"/&gt;</pre><pre class="programlisting">public class AnotherExampleBean implements InitializingBean {
    
    public void afterPropertiesSet() {
        <i class="lineannotation"><span class="lineannotation">// do some initialization work</span></i>
    }
}</pre><p>... &#20294;&#26159;&#27809;&#26377;&#23558;&#20195;&#30721;&#19982;Spring&#32806;&#21512;&#22312;&#19968;&#36215;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-lifecycle-disposablebean"></a>3.5.1.2.&nbsp;&#26512;&#26500;&#22238;&#35843;</h4></div></div><div></div></div><p>&#23454;&#29616;<tt class="interfacename">org.springframework.beans.factory.DisposableBean</tt>&#25509;&#21475;&#30340;bean&#20801;&#35768;&#22312;&#23481;&#22120;&#38144;&#27585;&#35813;bean&#30340;&#26102;&#20505;&#33719;&#24471;&#19968;&#27425;&#22238;&#35843;&#12290;<tt class="interfacename">DisposableBean</tt>&#25509;&#21475;&#20063;&#21482;&#35268;&#23450;&#20102;&#19968;&#20010;&#26041;&#27861;&#65306;</p><pre class="programlisting">void destroy() throws Exception;</pre><p>&#36890;&#24120;&#65292;&#35201;&#36991;&#20813;&#20351;&#29992;<tt class="interfacename">DisposableBean</tt>&#26631;&#24535;&#25509;&#21475;&#32780;&#19988;&#19981;&#40723;&#21169;&#20351;&#29992;&#35813;&#25509;&#21475;&#65292;&#22240;&#20026;&#36825;&#26679;&#20250;&#23558;&#20195;&#30721;&#19982;Spring&#32806;&#21512;&#22312;&#19968;&#36215;&#65292;&#26377;&#19968;&#20010;&#21487;&#36873;&#30340;&#26041;&#26696;&#26159;&#65292;&#22312;bean&#23450;&#20041;&#20013;&#25351;&#23450;&#19968;&#20010;&#26222;&#36890;&#30340;&#26512;&#26500;&#26041;&#27861;&#65292;&#28982;&#21518;&#22312;XML&#37197;&#32622;&#25991;&#20214;&#20013;&#36890;&#36807;&#25351;&#23450;<tt class="literal">destroy-method</tt>&#23646;&#24615;&#26469;&#23436;&#25104;&#12290;&#22914;&#19979;&#38754;&#30340;&#23450;&#20041;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;bean id="exampleInitBean" class="examples.ExampleBean" destroy-method="cleanup"/&gt;</pre><pre class="programlisting">public class ExampleBean {

    public void cleanup() {
        <i class="lineannotation"><span class="lineannotation">// do some destruction work (like releasing pooled connections)</span></i>
    }
}</pre><p>...&#25928;&#26524;&#19982;&#19979;&#38754;&#23436;&#20840;&#19968;&#26679;...</p><pre class="programlisting">&lt;bean id="exampleInitBean" class="examples.AnotherExampleBean"/&gt;</pre><pre class="programlisting">public class AnotherExampleBean implements DisposableBean {

    public void destroy() {
        <i class="lineannotation"><span class="lineannotation">// do some destruction work (like releasing pooled connections)</span></i>
    }
}</pre><p>... &#20294;&#26159;&#27809;&#26377;&#23558;&#20195;&#30721;&#19982;Spring&#32806;&#21512;&#22312;&#19968;&#36215;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-lifecycle-default-init-destroy-methods"></a>3.5.1.3.&nbsp;&#32570;&#30465;&#30340;&#21021;&#22987;&#21270;&#21644;&#26512;&#26500;&#26041;&#27861;</h4></div></div><div></div></div><p>&#22914;&#26524;&#26377;&#20154;&#27809;&#26377;&#37319;&#29992;Spring&#25152;&#25351;&#23450;&#30340;<tt class="interfacename">InitializingBean</tt>&#21644;<tt class="interfacename">DisposableBean</tt>&#22238;&#35843;&#25509;&#21475;&#26469;&#32534;&#20889;&#21021;&#22987;&#21270;&#21644;&#26512;&#26500;&#26041;&#27861;&#22238;&#35843;&#65292;&#20250;&#21457;&#29616;&#33258;&#24049;&#27491;&#22312;&#32534;&#20889;&#30340;&#26041;&#27861;&#65292;&#20854;&#21517;&#31216;&#33707;&#36807;&#20110;<tt class="literal">init()</tt>&#65292; <tt class="literal">initialize()</tt>&#65292;<tt class="literal">dispose()</tt>&#31561;&#31561;&#12290;&#36825;&#31181;&#29983;&#21629;&#21608;&#26399;&#22238;&#35843;&#26041;&#27861;&#30340;&#21517;&#31216;&#26368;&#22909;&#22312;&#19968;&#20010;&#39033;&#30446;&#33539;&#22260;&#20869;&#26631;&#20934;&#21270;&#65292;&#36825;&#26679;&#22242;&#38431;&#20013;&#30340;&#24320;&#21457;&#20154;&#21592;&#23601;&#21487;&#20197;&#20351;&#29992;&#21516;&#26679;&#30340;&#26041;&#27861;&#21517;&#31216;&#65292;&#24182;&#19988;&#30830;&#20445;&#20102;&#26576;&#31181;&#31243;&#24230;&#30340;&#19968;&#33268;&#24615;&#12290;</p><p>Spring&#23481;&#22120;&#36890;&#36807;&#37197;&#32622;&#21487;&#20197;&#23454;&#29616;&#23545;<span class="emphasis"><em>&#27599;&#20010;</em></span> bean&#21021;&#22987;&#21270;&#26102;&#30340;&#26597;&#25214;&#21644;&#38144;&#27585;&#26102;&#30340;&#22238;&#35843;&#35843;&#29992;&#12290;&#36825;&#20063;&#23601;&#26159;&#35828;&#65292;&#19968;&#20010;&#24212;&#29992;&#30340;&#24320;&#21457;&#32773;&#21487;&#20197;&#20511;&#21161;&#20110;&#21021;&#22987;&#21270;&#30340;&#22238;&#35843;&#26041;&#27861;<tt class="literal">init()</tt> &#36731;&#26494;&#30340;&#20889;&#19968;&#20010;&#31867;&#65288;&#19981;&#24517;&#24819;XML&#37197;&#32622;&#25991;&#20214;&#37027;&#26679;&#20026;&#27599;&#20010;bean&#37117;&#37197;&#32622;&#19968;&#20010;<tt class="literal">'init-method="init"'</tt>&#23646;&#24615;&#65289;&#12290;Spring IoC&#23481;&#22120;&#22312;&#21019;&#24314;bean&#30340;&#26102;&#20505;<span class="emphasis"><em>&#23558;</em></span>&#35843;&#29992;&#36825;&#20010;&#26041;&#27861; &#65288;&#36825;&#21644;&#20043;&#21069;&#25551;&#36848;&#30340;&#26631;&#20934;&#29983;&#21629;&#21608;&#26399;&#22238;&#35843;&#19968;&#33268;&#65289;&#12290;</p><p>		&#20026;&#20102;&#23436;&#20840;&#24324;&#28165;&#22914;&#20309;&#20351;&#29992;&#35813;&#29305;&#24615;&#65292;&#35753;&#25105;&#20204;&#30475;&#19968;&#20010;&#20363;&#23376;&#12290;&#20986;&#20110;&#31034;&#33539;&#30340;&#30446;&#30340;&#65292;&#20551;&#35774;&#19968;&#20010;&#39033;&#30446;&#30340;&#32534;&#30721;&#35268;&#33539;&#20013;&#32422;&#23450;&#25152;&#26377;&#30340;&#21021;&#22987;&#21270;&#22238;&#35843;&#26041;&#27861;&#37117;&#34987;&#21629;&#21517;&#20026;<tt class="literal">init()</tt>&#32780;&#26512;&#26500;&#22238;&#35843;&#26041;&#27861;&#34987;&#21629;&#21517;&#20026;<tt class="literal">destroy()</tt>&#12290;&#36981;&#24490;&#27492;&#35268;&#21017;&#20889;&#25104;&#30340;&#31867;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">public class DefaultBlogService implements BlogService {

    private BlogDao blogDao;

    public void setBlogDao(BlogDao blogDao) {
        this.blogDao = blogDao;
    }

    <i class="lineannotation"><span class="lineannotation">// this is (unsurprisingly) the initialization callback method</span></i>
    public void init() {
        if (this.blogDao == null) {
            throw new IllegalStateException("The [blogDao] property must be set.");
        }
    }
}</pre><pre class="programlisting">&lt;beans <span class="bold"><b>default-init-method="init"</b></span>&gt;

    &lt;bean id="blogService" class="com.foo.DefaultBlogService"&gt;
        &lt;property name="blogDao" ref="blogDao" /&gt;
    &lt;/bean&gt;

&lt;/beans&gt;</pre><p>&#27880;&#24847;&#22312;&#39030;&#32423;&#30340;<tt class="literal">&lt;beans/&gt;</tt>&#20803;&#32032;&#20013;&#30340;<tt class="literal">'default-init-method'</tt>&#23646;&#24615;&#12290;&#36825;&#20010;&#23646;&#24615;&#30340;&#21547;&#20041;&#26159;Spring IoC&#23481;&#22120;&#22312;bean&#21019;&#24314;&#21644;&#35013;&#37197;&#30340;&#26102;&#20505;&#20250;&#23558;<tt class="literal">'init'</tt>&#26041;&#27861;&#20316;&#20026;&#23454;&#20363;&#21270;&#22238;&#35843;&#26041;&#27861;&#12290;&#22914;&#26524;&#31867;&#26377;&#36825;&#20010;&#26041;&#27861;&#65292;&#21017;&#20250;&#22312;&#36866;&#24403;&#30340;&#26102;&#20505;&#25191;&#34892;&#12290;</p><p>&#38144;&#27585;&#22238;&#35843;&#26041;&#27861;&#37197;&#32622;&#26159;&#30456;&#21516;&#30340; (XML&#37197;&#32622;)&#65292;&#22312;&#39030;&#32423;&#30340;<tt class="literal">&lt;beans/&gt;</tt>&#20803;&#32032;&#20013;&#20351;&#29992; <tt class="literal">'default-destroy-method'</tt> &#23646;&#24615;&#12290;</p><p>&#20351;&#29992;&#36825;&#20010;&#21151;&#33021;&#21487;&#20197;&#25226;&#20320;&#20174;&#20301;&#27599;&#20010;bean&#25351;&#23450;&#21021;&#22987;&#21270;&#21644;&#38144;&#27585;&#22238;&#35843;&#30340;&#32321;&#26434;&#24037;&#20316;&#20013;&#35299;&#25937;&#20986;&#26469;&#12290;&#20026;&#20102;&#19968;&#33268;&#24615;&#65292;&#24212;&#35813;&#24378;&#21046;&#24615;&#30340;&#20026;&#21021;&#22987;&#21270;&#21644;&#38144;&#27585;&#22238;&#35843;&#26041;&#27861;&#37319;&#29992;&#19968;&#33268;&#30340;&#21629;&#21517;&#35268;&#21017;&#12290;</p><p>&#24403;&#24050;&#32463;&#23384;&#22312;&#30340;&#31867;&#30340;&#21021;&#22987;&#21270;&#26041;&#27861;&#30340;&#21629;&#21517;&#35268;&#21017;&#19982;&#24815;&#20363;&#26377;&#24046;&#24322;&#30340;&#26102;&#20505;&#65292;&#20320;&#24212;&#35813;<span class="emphasis"><em>&#22987;&#32456;</em></span>&#20351;&#29992;<tt class="literal">&lt;bean/&gt;</tt>&#20803;&#32032;&#20013;&#30340;<tt class="literal">'init-method'</tt>&#21644;<tt class="literal">'destroy-method'</tt>&#23646;&#24615;(&#22312;XML&#37197;&#32622;&#20013;)&#26469;&#35206;&#30422;&#40664;&#35748;&#30340;&#26041;&#24335;&#12290;</p><p>&#26368;&#21518;&#65292;&#35831;&#27880;&#24847;Spring&#23481;&#22120;&#20445;&#35777;&#22312;bean&#30340;&#25152;&#26377;&#20381;&#36182;&#37117;&#28385;&#36275;&#21518;&#31435;&#21363;&#25191;&#34892;&#37197;&#32622;&#30340;&#21021;&#22987;&#21270;&#22238;&#35843;&#12290;&#36825;&#24847;&#21619;&#30528;&#21021;&#22987;&#21270;&#22238;&#35843;&#22312;&#21407;&#29983;bean&#19978;&#35843;&#29992;&#65292;&#36825;&#20063;&#24847;&#21619;&#30528;&#36825;&#20010;&#26102;&#20505;&#20219;&#20309;&#35832;&#22914;AOP&#25318;&#25130;&#22120;&#20043;&#31867;&#30340;&#23558;&#19981;&#33021;&#34987;&#24212;&#29992;&#12290;&#19968;&#20010;&#30446;&#26631;bean&#26159;<span class="emphasis"><em>&#39318;&#20808;</em></span>&#23436;&#20840;&#21019;&#24314;&#65292;<span class="emphasis"><em>&#28982;&#21518;</em></span>&#25165;&#24212;&#29992;&#35832;&#22914;AOP&#20195;&#29702;&#31561;&#25318;&#25130;&#22120;&#38142;&#12290;&#27880;&#24847;&#65292;&#22914;&#26524;&#30446;&#26631;bean&#21644;&#20195;&#29702;&#26159;&#20998;&#24320;&#23450;&#20041;&#20102;&#65292;&#20320;&#30340;&#20195;&#30721;&#29978;&#33267;&#21487;&#20197;&#32469;&#24320;&#20195;&#29702;&#30452;&#25509;&#21644;&#21407;&#29983;bean&#36890;&#20449;&#12290;&#22240;&#27492;&#65292;&#22312;&#21021;&#22987;&#21270;&#26041;&#27861;&#19978;&#20351;&#29992;&#25318;&#25130;&#22120;&#23558;&#20135;&#29983;&#26410;&#30693;&#30340;&#32467;&#26524;&#65292;&#22240;&#20026;&#36825;&#23558;&#30446;&#26631;bean&#21644;&#23427;&#30340;&#20195;&#29702;/&#25318;&#25130;&#22120;&#30340;&#29983;&#21629;&#21608;&#26399;&#32465;&#23450;&#24182;&#19988;&#30041;&#19979;&#20102;&#21644;&#21021;&#22987;bean&#30452;&#25509;&#36890;&#20449;&#36825;&#26679;&#22855;&#24618;&#30340;&#26041;&#24335;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-lifecycle-combined-effects"></a>3.5.1.4.&nbsp;&#32452;&#21512;&#29983;&#21629;&#21608;&#26399;&#26426;&#21046;</h4></div></div><div></div></div><p>As of Spring 2.5, there are three options for controlling bean
        lifecycle behavior: the <a href="beans.html#beans-factory-lifecycle-initializingbean" title="3.5.1.1.&nbsp;&#21021;&#22987;&#21270;&#22238;&#35843;">
						<tt class="interfacename">InitializingBean</tt>
					</a>
        and <a href="beans.html#beans-factory-lifecycle-disposablebean" title="3.5.1.2.&nbsp;&#26512;&#26500;&#22238;&#35843;">
						<tt class="interfacename">DisposableBean</tt>
					</a>
        callback interfaces; custom <tt class="literal">init()</tt> and
        <tt class="literal">destroy()</tt> methods; and the <a href="beans.html#beans-postconstruct-and-predestroy-annotations" title="3.11.5.&nbsp;@PostConstruct &#19982; @PreDestroy">
						<tt class="interfacename">@PostConstruct</tt>
        and <tt class="interfacename">@PreDestroy</tt>
        annotations</a>.</p><p>&#22312;Spring2.5&#20013;&#26377;&#19977;&#31181;&#26041;&#24335;&#21487;&#20197;&#25511;&#21046;bean&#30340;&#29983;&#21629;&#21608;&#26399;&#34892;&#20026;&#65306;<a href="beans.html#beans-factory-lifecycle-initializingbean" title="3.5.1.1.&nbsp;&#21021;&#22987;&#21270;&#22238;&#35843;">
						<tt class="interfacename">InitializingBean</tt>
					</a>
         &#21644;<a href="beans.html#beans-factory-lifecycle-disposablebean" title="3.5.1.2.&nbsp;&#26512;&#26500;&#22238;&#35843;">
						<tt class="interfacename">DisposableBean</tt>
					</a>
         &#22238;&#35843;&#25509;&#21475;;&#33258;&#23450;&#20041;<tt class="literal">init()</tt> &#21644;
        <tt class="literal">destroy()</tt> &#26041;&#27861;; <a href="beans.html#beans-postconstruct-and-predestroy-annotations" title="3.11.5.&nbsp;@PostConstruct &#19982; @PreDestroy">
						<tt class="interfacename">@PostConstruct</tt>
         &#21644;<tt class="interfacename">@PreDestroy</tt>
        annotations</a>.</p><p>&#24403;&#32452;&#21512;&#19981;&#21516;&#30340;&#29983;&#21629;&#21608;&#26399;&#26426;&#21046;&#26102; - &#20363;&#22914;&#65292;&#31867;&#23618;&#27425;&#20013;&#20351;&#29992;&#20102;&#19981;&#21516;&#30340;&#29983;&#21629;&#21608;&#26399;&#26426;&#21046; - &#24320;&#21457;&#32773;&#24517;&#39035;&#27880;&#24847;&#36825;&#20123;&#26426;&#21046;&#30340;&#24212;&#29992;&#39034;&#24207;&#65292;&#19979;&#38754;&#26159;&#21021;&#22987;&#21270;&#26041;&#27861;&#20013;&#30340;&#39034;&#24207;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>
							<tt class="interfacename">@PostConstruct</tt>&#20803;&#27880;&#37322;</p></li><li><p>
							<tt class="interfacename">InitializingBean</tt>&#30340;<tt class="literal">afterPropertiesSet()</tt>&#23450;&#20041;</p></li><li><p>&#33258;&#23450;&#20041;<tt class="literal">init()</tt>&#26041;&#27861;&#37197;&#32622;</p></li></ul></div><p>&#26512;&#26500;&#26041;&#27861;&#35843;&#29992;&#39034;&#24207;&#26159;&#30456;&#21516;&#30340;:</p><div class="itemizedlist"><ul type="disc"><li><p>
							<tt class="interfacename">@PreDestroy</tt>&#20803;&#27880;&#37322;</p></li><li><p>
							<tt class="interfacename">DisposableBean</tt>&#30340;<tt class="literal">destroy()</tt>&#23450;&#20041;</p></li><li><p>&#33258;&#23450;&#20041;<tt class="literal">destroy()</tt>&#26041;&#27861;</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#22914;&#26524;bean&#23384;&#22312;&#22810;&#31181;&#30340;&#29983;&#21629;&#21608;&#26399;&#26426;&#21046;&#37197;&#32622;&#24182;&#19988;&#27599;&#31181;&#26426;&#21046;&#37117;&#37197;&#32622;&#20026;&#19981;&#21516;&#30340;&#26041;&#27861;&#21517;&#65292;
          	&#37027;&#25152;&#26377;&#37197;&#32622;&#30340;&#26041;&#27861;&#23558;&#20250;&#25353;&#29031;&#19978;&#38754;&#30340;&#39034;&#21033;&#25191;&#34892;&#12290;&#28982;&#32780;&#22914;&#26524;&#37197;&#32622;&#20102;&#30456;&#21516;&#30340;&#26041;&#27861;&#21517; - &#20363;&#22914;&#65292;
          <tt class="literal">init()</tt>&#21021;&#22987;&#21270;&#26041;&#27861; - &#37319;&#29992;&#22810;&#31181;&#26426;&#21046;&#37197;&#32622;&#21518;&#65292;&#21482;&#20250;&#25191;&#34892;&#19968;&#27425;&#12290;</p></td></tr></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-shutdown"></a>3.5.1.5.&nbsp;&#22312;&#38750;web&#24212;&#29992;&#20013;&#20248;&#38597;&#22320;&#20851;&#38381;Spring IoC&#23481;&#22120;</h4></div></div><div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#22312;&#22522;&#20110;web&#30340;<tt class="interfacename">ApplicationContext</tt>&#23454;&#29616;&#20013;&#24050;&#26377;&#30456;&#24212;&#30340;&#20195;&#30721;&#26469;&#22788;&#29702;&#20851;&#38381;web&#24212;&#29992;&#26102;&#22914;&#20309;&#24688;&#24403;&#22320;&#20851;&#38381;Spring IoC&#23481;&#22120;&#12290;</p></td></tr></table></div><p>&#22914;&#26524;&#20320;&#27491;&#22312;&#19968;&#20010;&#38750;web&#24212;&#29992;&#30340;&#29615;&#22659;&#19979;&#20351;&#29992;Spring&#30340;IoC&#23481;&#22120;&#65292;&#20363;&#22914;&#22312;&#26700;&#38754;&#23500;&#23458;&#25143;&#31471;&#29615;&#22659;&#19979;&#65292;&#20320;&#24819;&#35753;&#23481;&#22120;&#20248;&#38597;&#30340;&#20851;&#38381;&#65292;&#24182;&#35843;&#29992;singleton bean&#19978;&#30340;&#30456;&#24212;&#26512;&#26500;&#22238;&#35843;&#26041;&#27861;&#65292;&#20320;&#38656;&#35201;&#22312;JVM&#37324;&#27880;&#20876;&#19968;&#20010;&#8220;&#20851;&#38381;&#38057;&#23376;&#8221;&#65288;shutdown hook&#65289;&#12290;&#36825;&#19968;&#28857;&#38750;&#24120;&#23481;&#26131;&#20570;&#21040;&#65292;&#24182;&#19988;&#23558;&#20250;&#30830;&#20445;&#20320;&#30340;Spring IoC&#23481;&#22120;&#34987;&#24688;&#24403;&#20851;&#38381;&#65292;&#20197;&#21450;&#25152;&#26377;&#30001;&#21333;&#20363;&#25345;&#26377;&#30340;&#36164;&#28304;&#37117;&#20250;&#34987;&#37322;&#25918;&#65288;&#24403;&#28982;&#65292;&#20026;&#20320;&#30340;&#21333;&#20363;&#37197;&#32622;&#38144;&#27585;&#22238;&#35843;&#65292;&#24182;&#27491;&#30830;&#23454;&#29616;&#38144;&#27585;&#22238;&#35843;&#26041;&#27861;&#65292;&#20381;&#28982;&#26159;&#20320;&#30340;&#24037;&#20316;&#65289;&#12290;</p><p>&#20026;&#20102;&#27880;&#20876;&#8220;&#20851;&#38381;&#38057;&#23376;&#8221;&#65292;&#20320;&#21482;&#38656;&#35201;&#31616;&#21333;&#22320;&#35843;&#29992;&#22312;<tt class="classname">AbstractApplicationContext</tt>&#23454;&#29616;&#20013;&#30340;<tt class="methodname">registerShutdownHook()</tt>&#26041;&#27861;&#21363;&#21487;&#12290;&#20063;&#23601;&#26159;&#65306;</p><pre class="programlisting">import org.springframework.context.support.AbstractApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public final class Boot {

    public static void main(final String[] args) throws Exception {
        AbstractApplicationContext ctx
            = new ClassPathXmlApplicationContext(new String []{"beans.xml"});

        <i class="lineannotation"><span class="lineannotation">// add a shutdown hook for the above context... </span></i>
        ctx.registerShutdownHook();

        <i class="lineannotation"><span class="lineannotation">// app runs here...</span></i>
					<i class="lineannotation"><span class="lineannotation">// main method exits, hook is called prior to the app shutting down...</span></i>
    }
}</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-aware"></a>3.5.2.&nbsp;&#20102;&#35299;&#33258;&#24049;</h3></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-aware-beanfactoryaware"></a>3.5.2.1.&nbsp;
					<tt class="interfacename">BeanFactoryAware</tt>
				</h4></div></div><div></div></div><p>&#23545;&#20110;&#23454;&#29616;&#20102;<tt class="literal">org.springframework.beans.factory.BeanFactoryAware</tt>&#25509;&#21475;&#30340;&#31867;&#65292;&#24403;&#23427;&#34987;BeanFactory&#21019;&#24314;&#21518;&#65292;&#23427;&#20250;&#25317;&#26377;&#19968;&#20010;&#25351;&#21521;&#21019;&#24314;&#23427;&#30340;BeanFactory&#30340;&#24341;&#29992;&#12290;</p><pre class="programlisting">public interface BeanFactoryAware {

    void setBeanFactory(BeanFactory beanFactory) throws BeansException;
}</pre><p>&#36825;&#26679;bean&#21487;&#20197;&#20197;&#32534;&#31243;&#30340;&#26041;&#24335;&#25805;&#25511;&#21019;&#24314;&#23427;&#20204;&#30340;<tt class="interfacename">BeanFactory</tt>&#65292;&#24403;&#28982;&#25105;&#20204;&#21487;&#20197;&#23558;&#24341;&#29992;&#30340;BeanFactory&#36896;&#22411;&#65288;cast&#65289;&#20026;&#24050;&#30693;&#30340;&#23376;&#31867;&#22411;&#26469;&#33719;&#24471;&#26356;&#22810;&#30340;&#21151;&#33021;&#12290;&#23427;&#20027;&#35201;&#29992;&#20110;&#36890;&#36807;&#32534;&#31243;&#26469;&#21462;&#24471;BeanFactory&#25152;&#31649;&#29702;&#30340;&#20854;&#20182;bean&#12290;&#34429;&#28982;&#22312;&#26377;&#20123;&#22330;&#26223;&#19979;&#36825;&#20010;&#21151;&#33021;&#24456;&#26377;&#29992;&#65292;&#20294;&#26159;&#19968;&#33324;&#26469;&#35828;&#24212;&#35813;&#23613;&#37327;&#36991;&#20813;&#20351;&#29992;&#65292;&#22240;&#20026;&#36825;&#26679;&#23558;&#20351;&#20195;&#30721;&#19982;Spring&#32806;&#21512;&#22312;&#19968;&#36215;&#65292;&#32780;&#19988;&#20063;&#26377;&#36829;&#21453;&#36716;&#25511;&#21046;&#30340;&#21407;&#21017;&#65288;&#21327;&#20316;&#32773;&#24212;&#35813;&#20316;&#20026;&#23646;&#24615;&#25552;&#20379;&#32473;bean&#65289;&#12290;</p><p>&#19982;<tt class="interfacename">BeanFactoryAware</tt>&#31561;&#25928;&#30340;&#21478;&#19968;&#31181;&#36873;&#25321;&#26159;&#20351;&#29992;<tt class="classname">org.springframework.beans.factory.config.ObjectFactoryCreatingFactoryBean</tt>&#12290;&#19981;&#36807;&#35813;&#26041;&#27861;&#20381;&#28982;&#27809;&#26377;&#38477;&#20302;&#19982;Spring&#30340;&#32806;&#21512;&#65292;&#20294;&#26159;&#23427;&#24182;&#27809;&#26377;&#20687;<tt class="interfacename">BeanFactoryAware</tt>&#37027;&#26679;&#65292;&#36829;&#21453;IoC&#21407;&#21017;&#12290;&#65289;</p><p>
					<tt class="classname">ObjectFactoryCreatingFactoryBean</tt>&#26159;<a href="beans.html#beans-factory-extension-factorybean" title="3.7.3.&nbsp;&#20351;&#29992;FactoryBean&#23450;&#21046;&#23454;&#20363;&#21270;&#36923;&#36753;">
						<tt class="interfacename">FactoryBean</tt>
					</a>&#30340;&#19968;&#20010;&#23454;&#29616;&#65292;&#23427;&#36820;&#22238;&#19968;&#20010;&#25351;&#21521;&#24037;&#21378;&#23545;&#35937;&#30340;&#24341;&#29992;&#65292;&#35813;&#23545;&#35937;&#23558;&#25191;&#34892;bean&#30340;&#26597;&#25214;&#12290;<tt class="classname">ObjectFactoryCreatingFactoryBean</tt>&#31867;&#23454;&#29616;&#20102;<tt class="interfacename">BeanFactoryAware</tt>&#25509;&#21475;&#65307;&#34987;&#23454;&#38469;&#27880;&#20837;&#21040;&#23458;&#25143;&#31471;bean&#30340;&#26159;<tt class="interfacename">ObjectFactory</tt>&#25509;&#21475;&#30340;&#19968;&#20010;&#23454;&#20363;&#12290;&#36825;&#26159;Spring&#25552;&#20379;&#30340;&#19968;&#20010;&#25509;&#21475;&#65288;&#22240;&#32780;&#20381;&#26087;&#27809;&#26377;&#23436;&#20840;&#19982;Spring&#35299;&#32806;&#65289;&#65292;&#23458;&#25143;&#31471;&#21487;&#20197;&#20351;&#29992;<tt class="interfacename">ObjectFactory</tt>&#30340;<tt class="methodname">getObject()</tt>&#26041;&#27861;&#26469;&#26597;&#25214;bean&#65288;&#22312;&#20854;&#32972;&#21518;&#65292;<tt class="interfacename">ObjectFactory</tt>&#23454;&#20363;&#21482;&#26159;&#31616;&#21333;&#30340;&#23558;&#35843;&#29992;&#22996;&#27966;&#32473;<tt class="interfacename">BeanFactory</tt>&#65292;&#35753;&#20854;&#26681;&#25454;bean&#30340;&#21517;&#31216;&#25191;&#34892;&#23454;&#38469;&#30340;&#26597;&#25214;&#65289;&#12290;&#20320;&#35201;&#20570;&#30340;&#20840;&#37096;&#20107;&#24773;&#23601;&#26159;&#32473;<tt class="classname">ObjectFactoryCreatingFactoryBean</tt>&#25552;&#20379;&#24453;&#26597;&#25214;bean&#30340;&#21517;&#23383;&#12290;&#35753;&#25105;&#20204;&#30475;&#19968;&#20010;&#20363;&#23376;&#65306;</p><pre class="programlisting">package x.y;

public class NewsFeed {
    
    private String news;

    public void setNews(String news) {
        this.news = news;
    }

    public String getNews() {
        return this.toString() + ": '" + news + "'";
    }
}</pre><pre class="programlisting">package x.y;

import org.springframework.beans.factory.ObjectFactory;

public class NewsFeedManager {

    private ObjectFactory factory;

    public void setFactory(ObjectFactory factory) {
        this.factory = factory;
    }

    public void printNews() {
        // here is where the lookup is performed; note that there is no
        // need to hard code the name of the bean that is being looked up...
        NewsFeed news = (NewsFeed) factory.getObject();
        System.out.println(news.getNews());
    }
}</pre><p>&#19979;&#36848;&#26159;XML&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;beans&gt;
    &lt;bean id="newsFeedManager" class="x.y.NewsFeedManager"&gt;
        &lt;property name="factory"&gt;
            &lt;bean
class="org.springframework.beans.factory.config.ObjectFactoryCreatingFactoryBean"&gt;
                &lt;property name="targetBeanName"&gt;
                    &lt;idref local="newsFeed" /&gt;
                &lt;/property&gt;
            &lt;/bean&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
    &lt;bean id="newsFeed" class="x.y.NewsFeed" scope="prototype"&gt;
        &lt;property name="news" value="... that's fit to print!" /&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</pre><p>&#36825;&#37324;&#26377;&#19968;&#20010;&#27979;&#35797;&#29992;&#30340;&#23567;&#31243;&#24207;&#65306;&#22312;<tt class="classname">NewsFeedManager</tt>&#30340;<tt class="methodname">printNews()</tt>&#26041;&#27861;&#37324;&#65292;&#27599;&#27425;&#38024;&#23545;&#34987;&#27880;&#20837;&#30340;<tt class="interfacename">ObjectFactory</tt>&#30340;&#35843;&#29992;&#65292;&#23454;&#38469;&#19978;&#36820;&#22238;&#30340;&#26159;&#19968;&#20010;&#26032;&#30340;&#65288;prototype&#65289;<tt class="literal">newsFeed</tt> bean&#23454;&#20363;&#12290;</p><pre class="programlisting">import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import x.y.NewsFeedManager;

public class Main {

    public static void main(String[] args) throws Exception {

        ApplicationContext ctx = new ClassPathXmlApplicationContext("beans.xml");
        NewsFeedManager manager = (NewsFeedManager) ctx.getBean("newsFeedManager");
        manager.printNews();
        manager.printNews();
    }
}</pre><p>&#19978;&#36848;&#31243;&#24207;&#30340;&#25191;&#34892;&#36755;&#20986;&#22914;&#19979;&#25152;&#31034;&#65288;&#24403;&#28982;&#65292;&#36820;&#22238;&#32467;&#26524;&#20250;&#26681;&#25454;&#20320;&#26426;&#22120;&#30340;&#19981;&#21516;&#32780;&#19981;&#21516;&#65289;</p><pre class="programlisting">x.y.NewsFeed@1292d26: '... that's fit to print!'
x.y.NewsFeed@5329c5: '... that's fit to print!'</pre><p>&#22312;Spring2.5&#20013;&#65292;&#21487;&#20197;&#21033;&#29992;<tt class="interfacename">BeanFactory</tt>&#30340;&#33258;&#21160;&#35013;&#37197;&#20316;&#20026;&#23454;&#29616; <tt class="interfacename">BeanFactoryAware</tt>&#25509;&#21475;&#30340;&#21487;&#36873;&#26041;&#24335;&#12290;
        "&#20256;&#32479;"&#30340;<tt class="literal">constructor</tt>&#21644;<tt class="literal">byType</tt> &#33258;&#21160;&#35013;&#37197;&#27169;&#24335;&#65288;&#22312;<a href="beans.html#beans-factory-autowire" title="3.3.5.&nbsp;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;">Section&nbsp;3.3.5, &#8220;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;&#8221;</a>&#20013;&#26377;&#25551;&#36848;&#65289;&#23545;&#26080;&#35770;&#26159;&#26500;&#36896;&#22120;&#21442;&#25968;&#25110;setter&#26041;&#27861;&#37117;&#33021;&#25552;&#20379; <tt class="interfacename">BeanFactory</tt>&#31867;&#22411;&#30340; &#20381;&#36182;&#12290;&#36825;&#26377;&#26356;&#22810;&#30340;&#28789;&#27963;&#24615;&#65288;&#21253;&#25324;&#33258;&#21160;&#35013;&#37197;&#23646;&#24615;&#21644;&#22810;&#21442;&#25968;&#26041;&#27861;&#65289;&#12290;&#22914;&#26524;&#20351;&#29992;&#26032;&#30340;&#22522;&#20110;&#20803;&#27880;&#37322;&#30340;&#33258;&#21160;&#35013;&#37197;&#29305;&#24615;&#65292;&#21482;&#35201;&#23646;&#24615;&#12289;
        &#26500;&#36896;&#22120;&#12289;&#26041;&#27861;&#21253;&#21547;&#26377;<tt class="interfacename">@Autowired</tt>&#20803;&#27880;&#37322;&#26102;&#65292;<tt class="interfacename">BeanFactory</tt>&#23558;&#20250;&#33258;&#21160;&#35013;&#37197;&#21040;&#23545;&#24212;&#30340;&#23646;&#24615;&#12289;&#26500;&#36896;&#22120;&#12289;&#26041;&#27861;&#20013;&#12290;&#35831;&#21442;&#38405;<a href="beans.html#beans-autowired-annotation" title="3.11.1.&nbsp;@Autowired">Section&nbsp;3.11.1, &#8220;@Autowired&#8221;</a>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-aware-beannameaware"></a>3.5.2.2.&nbsp;
					<tt class="interfacename">BeanNameAware</tt>
				</h4></div></div><div></div></div><p>&#22914;&#26524;&#19968;&#20010;bean&#23454;&#29616;&#20102;<tt class="interfacename">org.springframework.beans.factory.BeanNameAware</tt>&#25509;&#21475;&#65292;&#24182;&#19988;&#37096;&#32626;&#20837;<tt class="interfacename">BeanFactory</tt>&#65292;
        <tt class="interfacename">BeanFactory</tt>&#23558;&#36890;&#36807;&#65288;BeanNameAware&#65289;&#25509;&#21475;&#26469;&#36890;&#30693;&#36825;&#20010;bean&#37096;&#32626;&#22312;&#20854;&#19979;&#30340;bean&#26469;&#35843;&#29992;&#36825;&#20010;bean&#12290;&#36825;&#20010;&#22238;&#35843;&#26041;&#27861;&#24212;&#35813;&#22312;bean&#30340;&#25152;&#26377;&#19968;&#33324;&#23646;&#24615;&#34987;&#35774;&#32622;&#21518;&#35843;&#29992;&#65292;&#20294;&#24212;&#35813;&#22312;&#21021;&#22987;&#21270;&#22238;&#35843;&#20043;&#21069;&#65292;&#22914;<tt class="interfacename">InitializingBean</tt>&#30340;<span class="emphasis"><em>afterPropertiesSet</em></span>&#26041;&#27861;&#25110;&#32773;&#33258;&#23450;&#20041;&#30340;&#21021;&#22987;&#21270;&#26041;&#27861;&#12290;</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="beans-child-bean-definitions"></a>3.6.&nbsp;bean&#23450;&#20041;&#30340;&#32487;&#25215;</h2></div></div><div></div></div><p>&#22312;bean&#23450;&#20041;&#20013;&#21253;&#21547;&#20102;&#22823;&#37327;&#30340;&#37197;&#32622;&#20449;&#24687;&#65292;&#20854;&#20013;&#21253;&#25324;&#23481;&#22120;&#30456;&#20851;&#30340;&#20449;&#24687;&#65288;&#27604;&#22914;&#21021;&#22987;&#21270;&#26041;&#27861;&#12289;&#38745;&#24577;&#24037;&#21378;&#26041;&#27861;&#21517;&#31561;&#31561;&#65289;&#20197;&#21450;&#26500;&#36896;&#22120;&#21442;&#25968;&#21644;&#23646;&#24615;&#20540;&#12290;&#23376;bean&#23450;&#20041;&#23601;&#26159;&#20174;&#29238;bean&#23450;&#20041;&#32487;&#25215;&#37197;&#32622;&#25968;&#25454;&#30340;bean&#23450;&#20041;&#12290;&#23427;&#21487;&#20197;&#35206;&#30422;&#29238;bean&#30340;&#19968;&#20123;&#20540;&#65292;&#25110;&#32773;&#28155;&#21152;&#19968;&#20123;&#23427;&#38656;&#35201;&#30340;&#20540;&#12290;&#20351;&#29992;&#29238;/&#23376;bean&#23450;&#20041;&#30340;&#24418;&#24335;&#21487;&#20197;&#33410;&#30465;&#24456;&#22810;&#30340;&#36755;&#20837;&#24037;&#20316;&#12290;&#23454;&#38469;&#19978;&#65292;&#36825;&#23601;&#26159;&#19968;&#31181;&#27169;&#26495;&#24418;&#24335;&#12290;</p><p>&#24403;&#20197;&#32534;&#31243;&#30340;&#26041;&#24335;&#20351;&#29992;<tt class="interfacename">BeanFactory</tt>&#26102;&#65292;&#23376;bean&#23450;&#20041;&#29992;<tt class="classname">ChildBeanDefinition</tt>&#31867;&#34920;&#31034;&#12290;&#22823;&#22810;&#25968;&#29992;&#25143;&#20174;&#26469;&#19981;&#38656;&#35201;&#20197;&#36825;&#20010;&#26041;&#24335;&#20351;&#29992;&#23427;&#20204;&#65292;&#32780;&#26159;&#20197;&#31867;&#20284;<tt class="classname">XmlBeanFactory</tt>&#20013;&#30340;&#22768;&#26126;&#26041;&#24335;&#21435;&#37197;&#32622;bean&#23450;&#20041;&#12290;&#24403;&#20351;&#29992;&#22522;&#20110;XML&#30340;&#37197;&#32622;&#20803;&#25968;&#25454;&#26102;&#65292;&#32473;<tt class="literal">'parent'</tt>&#23646;&#24615;&#25351;&#23450;&#20540;&#65292;&#24847;&#21619;&#30528;&#23376;bean&#23450;&#20041;&#30340;&#22768;&#26126;&#12290;</p><pre class="programlisting">&lt;bean id="inheritedTestBean" abstract="true"
    class="org.springframework.beans.TestBean"&gt;
  &lt;property name="name" value="parent"/&gt;
  &lt;property name="age" value="1"/&gt;
&lt;/bean&gt;

&lt;bean id="inheritsWithDifferentClass"
      class="org.springframework.beans.DerivedTestBean"
      <span class="bold"><b>parent="inheritedTestBean"</b></span> init-method="initialize"&gt;
    
  &lt;property name="name" value="override"/&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- the age property value of 1 will be inherited from  parent --&gt;</span></i>

&lt;/bean&gt;</pre><p>&#22914;&#26524;&#23376;bean&#23450;&#20041;&#27809;&#26377;&#25351;&#23450;class&#23646;&#24615;&#65292;&#23427;&#23558;&#20351;&#29992;&#29238;bean&#23450;&#20041;&#30340;class&#23646;&#24615;&#65292;&#24403;&#28982;&#20063;&#21487;&#20197;&#35206;&#30422;&#23427;&#12290;&#22312;&#21518;&#38754;&#19968;&#31181;&#24773;&#20917;&#20013;&#65292;&#23376;bean&#30340;class&#23646;&#24615;&#20540;&#24517;&#39035;&#21516;&#29238;bean&#20860;&#23481;&#65292;&#20063;&#23601;&#26159;&#35828;&#23427;&#24517;&#39035;&#25509;&#21463;&#29238;bean&#30340;&#23646;&#24615;&#20540;&#12290;</p><p>&#19968;&#20010;&#23376;bean&#23450;&#20041;&#21487;&#20197;&#20174;&#29238;bean&#32487;&#25215;&#26500;&#36896;&#22120;&#21442;&#25968;&#20540;&#12289;&#23646;&#24615;&#20540;&#20197;&#21450;&#35206;&#30422;&#29238;bean&#30340;&#26041;&#27861;&#65292;&#24182;&#19988;&#21487;&#20197;&#26377;&#36873;&#25321;&#22320;&#22686;&#21152;&#26032;&#30340;&#20540;&#12290;&#22914;&#26524;&#25351;&#23450;&#20102;init-method&#65292;destroy-method&#21644;/&#25110;<tt class="literal">&#38745;&#24577;</tt>factory-method&#65292;&#23427;&#20204;&#23601;&#20250;&#35206;&#30422;&#29238;bean&#30456;&#24212;&#30340;&#35774;&#32622;&#12290;</p><p>&#21097;&#20313;&#30340;&#35774;&#32622;&#23558;&#24635;&#26159;&#20174;&#23376;bean&#23450;&#20041;&#22788;&#24471;&#21040;&#65306;<span class="emphasis"><em>&#20381;&#36182;</em></span>&#12289;<span class="emphasis"><em>&#33258;&#21160;&#35013;&#37197;&#27169;&#24335;</em></span>&#12289;<span class="emphasis"><em>&#20381;&#36182;&#26816;&#26597;</em></span>&#12289;<span class="emphasis"><em>singleton</em></span>&#12289;<span class="emphasis"><em>&#20316;&#29992;&#22495;</em></span>&#21644;<span class="emphasis"><em>&#24310;&#36831;&#21021;&#22987;&#21270;</em></span>&#12290;</p><p>&#27880;&#24847;&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#20351;&#29992;<span class="emphasis"><em>abstract</em></span>&#23646;&#24615;&#26174;&#24335;&#22320;&#23558;&#29238;bean&#23450;&#20041;&#26631;&#35760;&#20026;&#25277;&#35937;&#30340;&#12290;&#19979;&#38754;&#26159;&#20010;&#29238;bean&#23450;&#20041;&#24182;&#27809;&#26377;&#25351;&#23450;class&#23646;&#24615;&#30340;&#20363;&#23376;&#65292;&#20854;&#20013;&#29238;bean&#24517;&#39035;&#26174;&#24335;&#22320;&#26631;&#19978;<tt class="literal">abstract</tt>&#65306;</p><pre class="programlisting">&lt;bean id="inheritedTestBeanWithoutClass" abstract="true"&gt;
    &lt;property name="name" value="parent"/&gt;
    &lt;property name="age" value="1"/&gt;
&lt;/bean&gt;

&lt;bean id="inheritsWithClass" class="org.springframework.beans.DerivedTestBean"
    parent="inheritedTestBeanWithoutClass" init-method="initialize"&gt;
  &lt;property name="name" value="override"/&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- age will inherit the value of <tt class="literal">1</tt> from the parent bean definition--&gt;</span></i>
&lt;/bean&gt;</pre><p>&#30001;&#20110;&#36825;&#26679;&#30340;&#29238;bean&#26159;&#19981;&#23436;&#25972;&#30340;&#65292;&#32780;&#19988;&#36824;&#34987;&#26174;&#24335;&#26631;&#35760;&#20026;<tt class="literal">&#25277;&#35937;&#30340;</tt>&#65292;&#22240;&#32780;&#23427;&#26080;&#27861;&#24471;&#21040;&#33258;&#24049;&#30340;&#23454;&#20363;&#12290;<tt class="literal">&#25277;&#35937;</tt>bean&#23450;&#20041;&#21487;&#20316;&#20026;&#23376;bean&#23450;&#20041;&#30340;&#27169;&#26495;&#12290;&#33509;&#35201;&#23581;&#35797;&#21333;&#29420;&#20351;&#29992;&#36825;&#26679;&#30340;&#29238;bean&#65288;&#27604;&#22914;&#23558;&#23427;&#20316;&#20026;&#20854;&#20182;bean&#30340;ref&#23646;&#24615;&#32780;&#24341;&#29992;&#65292;&#25110;&#32773;&#30452;&#25509;&#20351;&#29992;&#36825;&#20010;&#29238;bean&#30340;id&#20316;&#20026;&#21442;&#25968;&#35843;&#29992;<tt class="methodname">getBean()</tt>&#26041;&#27861;&#65289;&#65292;&#23558;&#20250;&#23548;&#33268;&#38169;&#35823;&#12290;&#21516;&#26679;&#22320;&#65292;&#23481;&#22120;&#20869;&#37096;&#30340;<tt class="methodname">preInstantiateSingletons()</tt>&#26041;&#27861;&#20250;&#23436;&#20840;&#24573;&#30053;abstract&#30340;bean&#23450;&#20041;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;<tt class="literal">ApplicationContext</tt>&#65288;<span class="emphasis"><em>&#19981;&#26159;</em></span><tt class="literal">BeanFactory</tt>&#65289;&#20250;&#39044;&#23454;&#20363;&#21270;&#25152;&#26377;singleton&#30340;bean&#12290;&#22240;&#27492;&#24456;&#37325;&#35201;&#30340;&#19968;&#28857;&#26159;&#65306;&#22914;&#26524;&#20320;&#21482;&#24819;&#25226;&#19968;&#20010;&#65288;&#29238;&#65289;bean&#23450;&#20041;&#24403;&#20316;&#27169;&#26495;&#20351;&#29992;&#65292;&#32780;&#23427;&#21448;&#25351;&#23450;&#20102;class&#23646;&#24615;&#65292;&#37027;&#20040;&#20320;&#23601;&#24471;&#23558;<span class="emphasis"><em>'abstract'</em></span>&#23646;&#24615;&#35774;&#32622;&#20026;<span class="emphasis"><em>'true'</em></span>&#65292;&#21542;&#21017;&#24212;&#29992;&#19978;&#19979;&#25991;&#23558;&#20250;&#65288;&#35797;&#30528;&#65289;&#39044;&#23454;&#20363;&#21270;<tt class="literal">&#25277;&#35937;</tt>bean&#12290;</p></td></tr></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="beans-factory-extension"></a>3.7.&nbsp;&#23481;&#22120;&#25193;&#23637;&#28857;</h2></div></div><div></div></div><p>Spring&#26694;&#26550;&#30340;IoC&#23481;&#22120;&#34987;&#35774;&#35745;&#20026;&#21487;&#25193;&#23637;&#30340;&#12290;&#36890;&#24120;&#25105;&#20204;&#24182;&#19981;&#38656;&#35201;&#23376;&#31867;&#21270;&#21508;&#20010;<tt class="interfacename">BeanFactory</tt>&#25110;<tt class="interfacename">ApplicationContext</tt>&#23454;&#29616;&#31867;&#12290;&#32780;&#36890;&#36807;plugin&#21508;&#31181;&#38598;&#25104;&#25509;&#21475;&#23454;&#29616;&#26469;&#36827;&#34892;&#25193;&#23637;&#12290;&#19979;&#38754;&#20960;&#33410;&#19987;&#38376;&#25551;&#36848;&#36825;&#20123;&#19981;&#21516;&#30340;&#38598;&#25104;&#25509;&#21475;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-extension-bpp"></a>3.7.1.&nbsp;&#29992;<tt class="literal">BeanPostProcessor</tt>&#23450;&#21046;bean</h3></div></div><div></div></div><p>&#25105;&#20204;&#20851;&#27880;&#30340;&#31532;&#19968;&#20010;&#25193;&#23637;&#28857;&#26159;<tt class="interfacename">BeanPostProcessor</tt>&#25509;&#21475;&#12290;&#23427;&#23450;&#20041;&#20102;&#20960;&#20010;<i class="firstterm">&#22238;&#35843;&#26041;&#27861;</i>&#65292;&#23454;&#29616;&#35813;&#25509;&#21475;&#21487;&#25552;&#20379;&#33258;&#23450;&#20041;&#65288;&#25110;&#40664;&#35748;&#22320;&#26469;&#35206;&#30422;&#23481;&#22120;&#65289;&#30340;&#23454;&#20363;&#21270;&#36923;&#36753;&#12289;&#20381;&#36182;&#35299;&#26512;&#36923;&#36753;&#31561;&#12290;&#22914;&#26524;&#20320;&#24819;&#22312;Spring&#23481;&#22120;&#23436;&#25104;bean&#30340;&#23454;&#20363;&#21270;&#12289;&#37197;&#32622;&#21644;&#20854;&#23427;&#30340;&#21021;&#22987;&#21270;&#21518;&#25191;&#34892;&#19968;&#20123;&#33258;&#23450;&#20041;&#36923;&#36753;&#65292;&#20320;&#21487;&#20197;&#25554;&#20837;&#19968;&#20010;&#25110;&#22810;&#20010;&#30340;<tt class="interfacename">BeanPostProcessor</tt>&#23454;&#29616;&#12290;</p><p>&#22914;&#26524;&#37197;&#32622;&#20102;&#22810;&#20010;<tt class="literal">BeanPostProcessor</tt>&#65292;&#37027;&#20040;&#21487;&#20197;&#36890;&#36807;&#35774;&#32622;<tt class="literal">'order'</tt>&#23646;&#24615;&#26469;&#25511;&#21046;<tt class="literal">BeanPostProcessor</tt>&#30340;&#25191;&#34892;&#27425;&#24207;&#65288;&#20165;&#24403;<tt class="interfacename">BeanPostProcessor</tt>&#23454;&#29616;&#20102;<tt class="interfacename">Ordered</tt>&#25509;&#21475;&#26102;&#65292;&#20320;&#25165;&#21487;&#20197;&#35774;&#32622;&#27492;&#23646;&#24615;&#65292;&#22240;&#27492;&#22312;&#32534;&#20889;&#33258;&#24049;&#30340;<tt class="interfacename">BeanPostProcessor</tt>&#23454;&#29616;&#26102;&#65292;&#23601;&#24471;&#32771;&#34385;&#26159;&#21542;&#38656;&#35201;&#23454;&#29616;<tt class="interfacename">Ordered</tt>&#25509;&#21475;&#65289;&#65307;&#35831;&#21442;&#32771;<tt class="interfacename">BeanPostProcessor</tt>&#21644;<tt class="interfacename">Ordered</tt>&#25509;&#21475;&#30340;JavaDoc&#20197;&#33719;&#21462;&#26356;&#35814;&#32454;&#30340;&#20449;&#24687;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p><tt class="literal">BeanPostProcessor</tt>&#21487;&#20197;&#23545;bean&#65288;&#25110;&#23545;&#35937;&#65289;&#30340;<span class="emphasis"><em>&#22810;&#20010;&#23454;&#20363;</em></span>&#36827;&#34892;&#25805;&#20316;&#65307;&#20063;&#23601;&#26159;&#35828;&#65292;Spring IoC&#23481;&#22120;&#20250;&#20026;&#20320;&#23454;&#20363;&#21270;bean&#65292;&#28982;&#21518;<tt class="literal">BeanPostProcessor</tt>&#21435;&#22788;&#29702;&#23427;&#12290;</p><p>&#22914;&#26524;&#20320;&#24819;&#20462;&#25913;&#23454;&#38469;&#30340;bean&#23450;&#20041;&#65292;&#21017;&#20250;&#29992;&#21040;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#65288;&#35814;&#24773;&#35265;<a href="beans.html#beans-factory-extension-factory-postprocessors" title="3.7.2.&nbsp;&#29992;BeanFactoryPostProcessor&#23450;&#21046;&#37197;&#32622;&#20803;&#25968;&#25454;">Section&nbsp;3.7.2, &#8220;&#29992;BeanFactoryPostProcessor&#23450;&#21046;&#37197;&#32622;&#20803;&#25968;&#25454;&#8221;</a>&#65289;&#12290;</p><p><tt class="literal">BeanPostProcessor</tt>&#30340;&#20316;&#29992;&#22495;&#26159;&#23481;&#22120;&#32423;&#30340;&#65292;&#23427;&#21482;&#21644;&#25152;&#22312;&#23481;&#22120;&#26377;&#20851;&#12290;&#22914;&#26524;&#20320;&#22312;&#23481;&#22120;&#20013;&#23450;&#20041;&#20102;<tt class="interfacename">BeanPostProcessor</tt>&#65292;&#23427;<span class="emphasis"><em>&#20165;&#20165;</em></span>&#23545;&#27492;&#23481;&#22120;&#20013;&#30340;bean&#36827;&#34892;&#21518;&#32622;&#22788;&#29702;&#12290;<tt class="literal">BeanPostProcessor</tt>&#23558;&#19981;&#20250;&#23545;&#23450;&#20041;&#22312;&#21478;&#19968;&#20010;&#23481;&#22120;&#20013;&#30340;bean&#36827;&#34892;&#21518;&#32622;&#22788;&#29702;&#65292;&#21363;&#20351;&#36825;&#20004;&#20010;&#23481;&#22120;&#37117;&#22788;&#22312;&#21516;&#19968;&#23618;&#27425;&#19978;&#12290;</p></td></tr></table></div><p><tt class="interfacename">org.springframework.beans.factory.config.BeanPostProcessor</tt>&#25509;&#21475;&#26377;&#20004;&#20010;&#22238;&#35843;&#26041;&#27861;&#21487;&#20379;&#20351;&#29992;&#12290;&#24403;&#19968;&#20010;&#35813;&#25509;&#21475;&#30340;&#23454;&#29616;&#31867;&#34987;&#27880;&#20876;&#65288;&#22914;&#20309;&#20351;&#36825;&#20010;&#27880;&#20876;&#29983;&#25928;&#35831;&#35265;&#19979;&#25991;&#65289;&#20026;&#23481;&#22120;&#30340;&#21518;&#32622;&#22788;&#29702;&#22120;(post-processor)&#21518;&#65292;&#23545;&#20110;&#30001;&#27492;&#23481;&#22120;&#25152;&#21019;&#24314;&#30340;&#27599;&#20010;bean&#23454;&#20363;&#22312;&#21021;&#22987;&#21270;&#26041;&#27861;&#65288;&#22914;<span class="emphasis"><em>afterPropertiesSet</em></span>&#21644;&#20219;&#24847;&#24050;&#22768;&#26126;&#30340;init&#26041;&#27861;&#65289;&#35843;&#29992;&#21069;&#65292;&#21518;&#32622;&#22788;&#29702;&#22120;&#37117;&#20250;&#20174;&#23481;&#22120;&#20013;&#20998;&#21035;&#33719;&#21462;&#19968;&#20010;&#22238;&#35843;&#12290;&#21518;&#32622;&#22788;&#29702;&#22120;&#21487;&#20197;&#38543;&#24847;&#23545;&#36825;&#20010;bean&#23454;&#20363;&#25191;&#34892;&#23427;&#25152;&#26399;&#26395;&#30340;&#21160;&#20316;&#65292;&#21253;&#25324;&#23436;&#20840;&#24573;&#30053;&#27492;&#22238;&#35843;&#12290;&#19968;&#20010;bean&#21518;&#32622;&#22788;&#29702;&#22120;&#36890;&#24120;&#29992;&#26469;&#26816;&#26597;&#26631;&#24535;&#25509;&#21475;&#65292;&#25110;&#32773;&#20570;&#19968;&#20123;&#35832;&#22914;&#23558;&#19968;&#20010;bean&#21253;&#35013;&#25104;&#19968;&#20010;proxy&#30340;&#20107;&#24773;&#65307;&#19968;&#20123;Spring AOP&#30340;&#24213;&#23618;&#22788;&#29702;&#20063;&#26159;&#36890;&#36807;&#23454;&#29616;bean&#21518;&#32622;&#22788;&#29702;&#22120;&#26469;&#25191;&#34892;&#20195;&#29702;&#21253;&#35013;&#36923;&#36753;&#12290;</p><p>&#37325;&#35201;&#30340;&#19968;&#28857;&#26159;&#65292;<tt class="interfacename">BeanFactory</tt>&#21644;<tt class="interfacename">ApplicationContext</tt>&#23545;&#24453;bean&#21518;&#32622;&#22788;&#29702;&#22120;&#31245;&#26377;&#19981;&#21516;&#12290;<tt class="interfacename">ApplicationContext</tt>&#20250;&#33258;&#21160;&#26816;&#27979;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#23454;&#29616;&#20102;<tt class="interfacename">BeanPostProcessor</tt>&#25509;&#21475;&#30340;&#25152;&#26377;bean&#65292;&#24182;&#25226;&#23427;&#20204;&#27880;&#20876;&#20026;&#21518;&#32622;&#22788;&#29702;&#22120;&#65292;&#28982;&#21518;&#22312;&#23481;&#22120;&#21019;&#24314;bean&#30340;&#36866;&#24403;&#26102;&#20505;&#35843;&#29992;&#23427;&#12290;&#37096;&#32626;&#19968;&#20010;&#21518;&#32622;&#22788;&#29702;&#22120;&#21516;&#37096;&#32626;&#20854;&#20182;&#30340;bean&#24182;&#27809;&#26377;&#20160;&#20040;&#21306;&#21035;&#12290;&#32780;&#20351;&#29992;<tt class="interfacename">BeanFactory</tt>&#23454;&#29616;&#30340;&#26102;&#20505;&#65292;bean &#21518;&#32622;&#22788;&#29702;&#22120;&#24517;&#39035;&#36890;&#36807;&#19979;&#38754;&#31867;&#20284;&#30340;&#20195;&#30721;&#26174;&#24335;&#22320;&#21435;&#27880;&#20876;&#65306;</p><pre class="programlisting">ConfigurableBeanFactory factory = new XmlBeanFactory(...);
            
<i class="lineannotation"><span class="lineannotation">// now register any needed <tt class="interfacename">BeanPostProcessor</tt> instances</span></i>
MyBeanPostProcessor postProcessor = new MyBeanPostProcessor();
factory.addBeanPostProcessor(postProcessor);

<i class="lineannotation"><span class="lineannotation">// now start using the factory</span></i></pre><p>&#22240;&#20026;&#26174;&#24335;&#27880;&#20876;&#30340;&#27493;&#39588;&#19981;&#26159;&#24456;&#26041;&#20415;&#65292;&#36825;&#20063;&#26159;&#20026;&#20160;&#20040;&#22312;&#21508;&#31181;Spring&#24212;&#29992;&#20013;&#39318;&#36873;<tt class="interfacename">ApplicationContext</tt>&#30340;&#19968;&#20010;&#21407;&#22240;&#65292;&#29305;&#21035;&#26159;&#22312;&#20351;&#29992;<tt class="literal">BeanPostProcessor</tt>&#26102;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: BeanPostProcessors&#21644;AOP&#33258;&#21160;&#20195;&#29702;(auto-proxying)"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">BeanPostProcessors&#21644;AOP&#33258;&#21160;&#20195;&#29702;(auto-proxying)</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#23454;&#29616;&#20102;<tt class="interfacename">BeanPostProcessor</tt> &#25509;&#21475;&#30340;&#31867;&#26159;<span class="emphasis"><em>&#29305;&#27530;&#30340;</em></span>, &#20250;&#34987;&#23481;&#22120;&#29305;&#21035;&#23545;&#24453;. &#25152;&#26377; <tt class="interfacename">BeanPostProcessors</tt><span class="emphasis"><em>&#21644;&#30452;&#25509;&#24341;&#29992;&#30340;bean</em></span> &#20250;&#20316;&#20026;<tt class="interfacename">ApplicationContext</tt>&#19968;&#37096;&#20998;&#22312;&#21551;&#21160;&#26102;&#21021;&#22987;&#21270;, <span class="emphasis"><em>&#28982;&#21518;</em></span>&#25152;&#26377;&#30340;<tt class="interfacename">BeanPostProcessors</tt>&#20250;&#27880;&#20876;&#20837;&#19968;&#20010;&#21015;&#34920;&#24182;&#24212;&#29992;&#20110;&#20043;&#21518;&#30340;bean&#12290;AOP&#33258;&#21160;&#20195;&#29702;&#23454;&#29616;&#20102;<tt class="interfacename">BeanPostProcessor</tt>&#65292;&#25152;&#20197;<tt class="interfacename">BeanPostProcessors</tt>&#25110;bean&#30340;&#30452;&#25509;&#24341;&#29992;&#19981;&#20250;&#34987;&#33258;&#21160;&#20195;&#29702;(&#22240;&#27492;&#19981;&#20250;&#34987;aspects"&#32455;&#20837;")&#12290;</p><p>&#23545;&#36825;&#20123;bean&#26469;&#35828;&#65292;&#20320;&#21487;&#33021;&#30475;&#21040;&#19979;&#38754;&#30340;&#26085;&#24535;&#20449;&#24687;&#65306;<span class="emphasis"><em>&#8220;<span class="quote">Bean 'foo' is not eligible for getting processed by all BeanPostProcessors (&#22914;&#65306;&#19981;&#33021;&#34987;auto_proxying)</span>&#8221;</em></span></p></td></tr></table></div><p>&#20851;&#20110;&#22914;&#20309;&#22312;<tt class="interfacename">ApplicationContext</tt>&#20013;&#32534;&#20889;&#12289;&#27880;&#20876;&#24182;&#20351;&#29992;<tt class="literal">BeanPostProcessor</tt>&#65292;&#20250;&#22312;&#25509;&#19979;&#30340;&#20363;&#23376;&#20013;&#28436;&#31034;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-extension-bpp-examples-hw"></a>3.7.1.1.&nbsp;&#20351;&#29992;<tt class="interfacename">BeanPostProcessor</tt>&#30340;Hello World&#31034;&#20363;</h4></div></div><div></div></div><p>&#31532;&#19968;&#20010;&#23454;&#20363;&#20284;&#20046;&#19981;&#22826;&#21560;&#24341;&#20154;&#65292;&#20294;&#26159;&#23427;&#36866;&#21512;&#29992;&#26469;&#38416;&#36848;<tt class="interfacename">BeanPostProcessor</tt>&#30340;&#22522;&#26412;&#29992;&#27861;&#12290;&#25105;&#20204;&#25152;&#26377;&#30340;&#24037;&#20316;&#26159;&#32534;&#20889;&#19968;&#20010;<tt class="interfacename">BeanPostProcessor</tt>&#30340;&#23454;&#29616;&#65292;&#23427;&#20165;&#20165;&#22312;&#23481;&#22120;&#21019;&#24314;&#27599;&#20010;bean&#26102;&#35843;&#29992;bean&#30340;<tt class="methodname">toString()</tt>&#26041;&#27861;&#24182;&#19988;&#23558;&#32467;&#26524;&#25171;&#21360;&#21040;&#31995;&#32479;&#25511;&#21046;&#21488;&#12290;&#23427;&#26159;&#27809;&#26377;&#24456;&#22823;&#30340;&#29992;&#22788;&#65292;&#20294;&#26159;&#21487;&#20197;&#35753;&#25105;&#20204;&#23545;<tt class="interfacename">BeanPostProcessor</tt>&#26377;&#19968;&#20010;&#22522;&#26412;&#27010;&#24565;&#12290;</p><p>&#19979;&#38754;&#26159;<tt class="interfacename">BeanPostProcessor</tt>&#20855;&#20307;&#23454;&#29616;&#31867;&#30340;&#23450;&#20041;&#65306;</p><pre class="programlisting">package scripting;

import org.springframework.beans.factory.config.BeanPostProcessor;
import org.springframework.beans.BeansException;

public class InstantiationTracingBeanPostProcessor implements BeanPostProcessor {

    <i class="lineannotation"><span class="lineannotation">// simply return the instantiated bean as-is</span></i>
    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
        return bean; <i class="lineannotation"><span class="lineannotation">// we could potentially return <span class="emphasis"><em>any</em></span> object reference here...</span></i>
    }

    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
        System.out.println("Bean '" + beanName + "' created : " + bean.toString());
        return bean;
    }
}</pre><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:lang="http://www.springframework.org/schema/lang"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-2.5.xsd"&gt;

    &lt;lang:groovy id="messenger"
          script-source="classpath:org/springframework/scripting/groovy/Messenger.groovy"&gt;
        &lt;lang:property name="message" value="Fiona Apple Is Just So Dreamy."/&gt; 
    &lt;/lang:groovy&gt;
    
    <i class="lineannotation"><span class="lineannotation">&lt;!-- 
        when the above bean ('messenger') is instantiated, this custom
        <tt class="interfacename">BeanPostProcessor</tt> implementation will output the fact to the system console
     --&gt;</span></i>
    &lt;bean class="scripting.InstantiationTracingBeanPostProcessor"/&gt;

&lt;/beans&gt;</pre><p>&#27880;&#24847;<tt class="classname">InstantiationTracingBeanPostProcessor</tt>&#26159;&#22914;&#27492;&#31616;&#21333;&#65292;&#29978;&#33267;&#27809;&#26377;&#21517;&#23383;&#65292;&#30001;&#20110;&#34987;&#23450;&#20041;&#25104;&#19968;&#20010;bean&#65292;&#22240;&#32780;&#23427;&#36319;&#20854;&#23427;&#30340;bean&#27809;&#20160;&#20040;&#20004;&#26679;&#65288;&#19978;&#38754;&#30340;&#37197;&#32622;&#20013;&#20063;&#23450;&#20041;&#20102;&#30001;Groovy&#33050;&#26412;&#25903;&#25345;&#30340;bean&#65292;Spring2.0&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#30340;&#32454;&#33410;&#35831;&#35265;<a href="dynamic-language.html" title="Chapter&nbsp;24.&nbsp;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;">Chapter&nbsp;24, <i>&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;</i></a>&#65289;&#12290;</p><p>&#19979;&#38754;&#26159;&#27979;&#35797;&#20195;&#30721;&#65306;</p><pre class="programlisting">import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.springframework.scripting.Messenger;

public final class Boot {

    public static void main(final String[] args) throws Exception {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("scripting/beans.xml");
        Messenger messenger = (Messenger) ctx.getBean("messenger");
        System.out.println(messenger);
    }
}</pre><p>&#19978;&#38754;&#31243;&#24207;&#25191;&#34892;&#26102;&#30340;&#36755;&#20986;&#23558;&#26159;&#65288;&#25110;&#35937;&#65289;&#19979;&#38754;&#36825;&#26679;&#65306;</p><pre class="programlisting">Bean 'messenger' created : org.springframework.scripting.groovy.GroovyMessenger@272961
org.springframework.scripting.groovy.GroovyMessenger@272961</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-extension-bpp-examples-rabpp"></a>3.7.1.2.&nbsp;<tt class="classname">RequiredAnnotationBeanPostProcessor</tt>&#31034;&#20363;</h4></div></div><div></div></div><p>&#22312;Spring&#30340;<tt class="interfacename">BeanPostProcessor</tt>&#23454;&#29616;&#20013;&#35843;&#29992;&#26631;&#24535;&#25509;&#21475;&#25110;&#20351;&#29992;&#27880;&#35299;&#26159;&#25193;&#23637;Spring IoC&#23481;&#22120;&#30340;&#24120;&#29992;&#26041;&#27861;&#12290;&#23545;&#20110;&#27880;&#35299;&#30340;&#29992;&#27861;&#35814;&#35265;<a href="metadata.html#metadata-annotations-required" title="25.3.1.&nbsp;@Required">Section&nbsp;25.3.1, &#8220;@Required&#8221;</a>&#65292;&#36825;&#37324;&#27809;&#26377;&#20570;&#28145;&#20837;&#30340;&#35828;&#26126;&#12290;&#36890;&#36807;&#23450;&#21046;<tt class="interfacename">BeanPostProcessor</tt>&#23454;&#29616;&#65292;&#21487;&#20197;&#20351;&#29992;&#27880;&#35299;&#26469;&#25351;&#23450;&#21508;&#31181;JavaBean&#23646;&#24615;&#20540;&#24182;&#22312;&#21457;&#24067;&#30340;&#26102;&#20505;&#34987;&#27880;&#20837;&#30456;&#24212;&#30340;bean&#20013;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-extension-factory-postprocessors"></a>3.7.2.&nbsp;&#29992;<tt class="literal">BeanFactoryPostProcessor</tt>&#23450;&#21046;&#37197;&#32622;&#20803;&#25968;&#25454;</h3></div></div><div></div></div><p>&#25105;&#20204;&#23558;&#30475;&#21040;&#30340;&#19979;&#19968;&#20010;&#25193;&#23637;&#28857;&#26159;<tt class="interfacename">org.springframework.beans.factory.config.BeanFactoryPostProcessor</tt>&#12290;&#36825;&#20010;&#25509;&#21475;&#36319;<tt class="interfacename">BeanPostProcessor</tt>&#31867;&#20284;&#65292;<tt class="literal">BeanFactoryPostProcessor</tt>&#21487;&#20197;&#23545;bean&#30340;&#23450;&#20041;&#65288;&#37197;&#32622;&#20803;&#25968;&#25454;&#65289;&#36827;&#34892;&#22788;&#29702;&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;Spring IoC&#23481;&#22120;&#20801;&#35768;<tt class="literal">BeanFactoryPostProcessor</tt>&#22312;&#23481;&#22120;&#23454;&#38469;&#23454;&#20363;&#21270;&#20219;&#20309;&#20854;&#23427;&#30340;bean&#20043;&#21069;&#35835;&#21462;&#37197;&#32622;&#20803;&#25968;&#25454;&#65292;&#24182;&#26377;&#21487;&#33021;&#20462;&#25913;&#23427;&#12290;</p><p>&#22914;&#26524;&#20320;&#24895;&#24847;&#65292;&#20320;&#21487;&#20197;&#37197;&#32622;&#22810;&#20010;<tt class="literal">BeanFactoryPostProcessor</tt>&#12290;&#20320;&#36824;&#33021;&#36890;&#36807;&#35774;&#32622;<tt class="literal">'order'</tt>&#23646;&#24615;&#26469;&#25511;&#21046;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#30340;&#25191;&#34892;&#27425;&#24207;&#65288;&#20165;&#24403;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#23454;&#29616;&#20102;<tt class="interfacename">Ordered</tt>&#25509;&#21475;&#26102;&#20320;&#25165;&#21487;&#20197;&#35774;&#32622;&#27492;&#23646;&#24615;&#65292;&#22240;&#27492;&#22312;&#23454;&#29616;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#26102;&#65292;&#23601;&#24212;&#24403;&#32771;&#34385;&#23454;&#29616;<tt class="interfacename">Ordered</tt>&#25509;&#21475;&#65289;&#65307;&#35831;&#21442;&#32771;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#21644;<tt class="interfacename">Ordered</tt>&#25509;&#21475;&#30340;JavaDoc&#20197;&#33719;&#21462;&#26356;&#35814;&#32454;&#30340;&#20449;&#24687;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#22914;&#26524;&#20320;&#24819;&#25913;&#21464;&#23454;&#38469;&#30340;bean&#23454;&#20363;&#65288;&#20363;&#22914;&#20174;&#37197;&#32622;&#20803;&#25968;&#25454;&#21019;&#24314;&#30340;&#23545;&#35937;&#65289;&#65292;&#37027;&#20040;&#20320;&#26368;&#22909;&#20351;&#29992;<tt class="interfacename">BeanPostProcessor</tt>&#65288;&#35265;&#19978;&#38754;<a href="beans.html#beans-factory-extension-bpp" title="3.7.1.&nbsp;&#29992;BeanPostProcessor&#23450;&#21046;bean">Section&nbsp;3.7.1, &#8220;&#29992;BeanPostProcessor&#23450;&#21046;bean&#8221;</a>&#20013;&#30340;&#25551;&#36848;&#65289;</p><p>&#21516;&#26679;&#22320;&#65292;<tt class="literal">BeanFactoryPostProcessor</tt>&#30340;&#20316;&#29992;&#22495;&#33539;&#22260;&#26159;&#23481;&#22120;&#32423;&#30340;&#12290;&#23427;&#21482;&#21644;&#20320;&#25152;&#20351;&#29992;&#30340;&#23481;&#22120;&#26377;&#20851;&#12290;&#22914;&#26524;&#20320;&#22312;&#23481;&#22120;&#20013;&#23450;&#20041;&#19968;&#20010;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#65292;&#23427;<span class="emphasis"><em>&#20165;&#20165;</em></span>&#23545;&#27492;&#23481;&#22120;&#20013;&#30340;bean&#36827;&#34892;&#21518;&#32622;&#22788;&#29702;&#12290;<tt class="literal">BeanFactoryPostProcessor</tt>&#19981;&#20250;&#23545;&#23450;&#20041;&#22312;&#21478;&#19968;&#20010;&#23481;&#22120;&#20013;&#30340;bean&#36827;&#34892;&#21518;&#32622;&#22788;&#29702;&#65292;&#21363;&#20351;&#36825;&#20004;&#20010;&#23481;&#22120;&#37117;&#26159;&#22312;&#21516;&#19968;&#23618;&#27425;&#19978;&#12290;</p></td></tr></table></div><p>bean&#24037;&#21378;&#21518;&#32622;&#22788;&#29702;&#22120;&#21487;&#20197;&#25163;&#24037;&#65288;&#22914;&#26524;&#26159;<tt class="interfacename">BeanFactory</tt>&#65289;&#25110;&#33258;&#21160;&#65288;&#22914;&#26524;&#26159;<tt class="interfacename">ApplicationContext</tt>&#65289;&#22320;&#26045;&#21152;&#26576;&#20123;&#21464;&#21270;&#32473;&#23450;&#20041;&#22312;&#23481;&#22120;&#20013;&#30340;&#37197;&#32622;&#20803;&#25968;&#25454;&#12290;Spring&#33258;&#24102;&#20102;&#35768;&#22810;bean&#24037;&#21378;&#21518;&#32622;&#22788;&#29702;&#22120;&#65292;&#27604;&#22914;&#19979;&#38754;&#23558;&#25552;&#21040;&#30340;<tt class="classname">PropertyResourceConfigurer</tt>&#21644;<tt class="classname">PropertyPlaceholderConfigurer</tt>&#20197;&#21450;<tt class="classname">BeanNameAutoProxyCreator</tt>&#65292;&#23427;&#20204;&#29992;&#20110;&#23545;bean&#36827;&#34892;&#20107;&#21153;&#24615;&#21253;&#35013;&#25110;&#32773;&#20351;&#29992;&#20854;&#20182;&#30340;proxy&#36827;&#34892;&#21253;&#35013;&#12290;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#20063;&#33021;&#34987;&#29992;&#26469;&#28155;&#21152;&#33258;&#23450;&#20041;&#23646;&#24615;&#32534;&#36753;&#22120;&#12290;</p><p>&#22312;&#19968;&#20010;<tt class="interfacename">BeanFactory</tt>&#20013;&#65292;&#24212;&#29992;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#30340;&#36807;&#31243;&#26159;&#25163;&#24037;&#30340;&#65292;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">XmlBeanFactory factory = new XmlBeanFactory(new FileSystemResource("beans.xml"));

<i class="lineannotation"><span class="lineannotation">// bring in some property values from a <tt class="classname">Properties</tt> file</span></i>
PropertyPlaceholderConfigurer cfg = new PropertyPlaceholderConfigurer();
cfg.setLocation(new FileSystemResource("jdbc.properties"));

<i class="lineannotation"><span class="lineannotation">// now actually do the replacement</span></i>
cfg.postProcessBeanFactory(factory);</pre><p>&#22240;&#20026;&#26174;&#24335;&#27880;&#20876;&#30340;&#27493;&#39588;&#19981;&#26159;&#24456;&#26041;&#20415;&#65292;&#36825;&#20063;&#26159;&#20026;&#20160;&#20040;&#22312;&#19981;&#21516;&#30340;Spring&#24212;&#29992;&#20013;&#39318;&#36873;<tt class="interfacename">ApplicationContext</tt>&#30340;&#21407;&#22240;&#65292;&#29305;&#21035;&#26159;&#22312;&#20351;&#29992;<tt class="literal">BeanFactoryPostProcessor</tt>&#26102;&#12290;</p><a name="beans-factory-autodetect-beanfactorypostprocessors"></a><p><tt class="interfacename">ApplicationContext</tt>&#20250;&#26816;&#27979;&#37096;&#32626;&#22312;&#23427;&#20043;&#19978;&#23454;&#29616;&#20102;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#25509;&#21475;&#30340;bean&#65292;&#24182;&#22312;&#36866;&#24403;&#30340;&#26102;&#20505;&#20250;&#33258;&#21160;&#35843;&#29992;bean&#24037;&#21378;&#21518;&#32622;&#22788;&#29702;&#22120;&#12290;&#37096;&#32626;&#19968;&#20010;&#21518;&#32622;&#22788;&#29702;&#22120;&#21516;&#37096;&#23646;&#20854;&#20182;&#30340;bean&#24182;&#27809;&#26377;&#20160;&#20040;&#21306;&#21035;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#27491;&#22914;<tt class="literal">BeanPostProcessor</tt>&#30340;&#24773;&#20917;&#19968;&#26679;&#65292;&#35831;&#19981;&#35201;&#23558;<tt class="literal">BeanFactoryPostProcessors</tt>&#26631;&#35760;&#20026;&#24310;&#36831;&#21152;&#36733;&#12290;&#22914;&#26524;&#20320;&#36825;&#26679;&#20570;&#65292;Spring&#23481;&#22120;&#23558;&#19981;&#20250;&#27880;&#20876;&#23427;&#20204;&#65292;&#33258;&#23450;&#20041;&#36923;&#36753;&#23601;&#26080;&#27861;&#23454;&#29616;&#12290;&#22914;&#26524;&#20320;&#22312;<tt class="literal">&lt;beans/&gt;</tt>&#20803;&#32032;&#30340;&#23450;&#20041;&#20013;&#20351;&#29992;&#20102;<tt class="literal">'default-lazy-init'</tt>&#23646;&#24615;&#65292;&#35831;&#30830;&#20449;&#20320;&#30340;&#21508;&#20010;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#26631;&#35760;&#20026;<tt class="literal">'lazy-init="false"'</tt>&#12290;</p></td></tr></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-placeholderconfigurer"></a>3.7.2.1.&nbsp;<tt class="interfacename">PropertyPlaceholderConfigurer</tt>&#31034;&#20363;</h4></div></div><div></div></div><p><tt class="interfacename">PropertyPlaceholderConfigurer</tt>&#26159;&#20010;bean&#24037;&#21378;&#21518;&#32622;&#22788;&#29702;&#22120;&#30340;&#23454;&#29616;&#65292;&#21487;&#20197;&#23558;<tt class="interfacename">BeanFactory</tt>&#23450;&#20041;&#20013;&#30340;&#19968;&#20123;&#23646;&#24615;&#20540;&#25918;&#21040;&#21478;&#19968;&#20010;&#21333;&#29420;&#30340;&#26631;&#20934;Java <tt class="classname">Properties</tt>&#25991;&#20214;&#20013;&#12290;&#36825;&#23601;&#20801;&#35768;&#29992;&#25143;&#22312;&#37096;&#32626;&#24212;&#29992;&#26102;&#21482;&#38656;&#35201;&#22312;&#23646;&#24615;&#25991;&#20214;&#20013;&#23545;&#19968;&#20123;&#20851;&#38190;&#23646;&#24615;&#65288;&#20363;&#22914;&#25968;&#25454;&#24211;URL&#65292;&#29992;&#25143;&#21517;&#21644;&#23494;&#30721;&#65289;&#36827;&#34892;&#20462;&#25913;&#65292;&#32780;&#19981;&#29992;&#23545;&#20027;XML&#23450;&#20041;&#25991;&#20214;&#25110;&#23481;&#22120;&#25152;&#29992;&#25991;&#20214;&#36827;&#34892;&#22797;&#26434;&#21644;&#21361;&#38505;&#30340;&#20462;&#25913;&#12290;</p><p>&#32771;&#34385;&#19979;&#38754;&#30340;XML&#37197;&#32622;&#20803;&#25968;&#25454;&#23450;&#20041;&#65292;&#23427;&#29992;&#21344;&#20301;&#31526;&#23450;&#20041;&#20102;<tt class="interfacename">DataSource</tt>&#12290;&#25105;&#20204;&#22312;&#22806;&#37096;&#30340;<tt class="classname">Properties</tt>&#25991;&#20214;&#20013;&#37197;&#32622;&#19968;&#20123;&#30456;&#20851;&#30340;&#23646;&#24615;&#12290;&#22312;&#36816;&#34892;&#26102;&#65292;&#25105;&#20204;&#20026;&#20803;&#25968;&#25454;&#25552;&#20379;&#19968;&#20010;<tt class="classname">PropertyPlaceholderConfigurer</tt>&#65292;&#23427;&#23558;&#20250;&#26367;&#25442;dataSource&#30340;&#23646;&#24615;&#20540;&#12290;</p><pre class="programlisting">&lt;bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"&gt;
    &lt;property name="locations"&gt;
        &lt;value&gt;classpath:com/foo/jdbc.properties&lt;/value&gt;
    &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="dataSource" destroy-method="close"
      class="org.apache.commons.dbcp.BasicDataSource"&gt;
    &lt;property name="driverClassName" value="<span class="bold"><b>${jdbc.driverClassName}</b></span>"/&gt;
    &lt;property name="url" value="<span class="bold"><b>${jdbc.url}</b></span>"/&gt;
    &lt;property name="username" value="<span class="bold"><b>${jdbc.username}</b></span>"/&gt;
    &lt;property name="password" value="<span class="bold"><b>${jdbc.password}</b></span>"/&gt;
&lt;/bean&gt;</pre><p>&#23454;&#38469;&#30340;&#20540;&#26469;&#33258;&#20110;&#21478;&#19968;&#20010;&#26631;&#20934;Java <tt class="classname">Properties</tt>&#26684;&#24335;&#30340;&#25991;&#20214;&#65306;</p><pre class="programlisting">jdbc.driverClassName=org.hsqldb.jdbcDriver
jdbc.url=jdbc:hsqldb:hsql://production:9002
jdbc.username=sa
jdbc.password=root</pre><p>&#22312;Spring 2.5&#20013;&#65292;<tt class="literal">context</tt>&#21517;&#23383;&#31354;&#38388;&#21487;&#33021;&#37319;&#29992;&#21333;&#19968;&#20803;&#32032;&#23646;&#24615;&#21344;&#20301;&#31526;&#30340;&#26041;&#24335;(&#22810;&#20010;&#36335;&#24452;&#25552;&#20379;&#19968;&#20010;&#36887;&#21495;&#20998;&#38548;&#30340;&#21015;&#34920;)</p><pre class="programlisting">&lt;context:property-placeholder location="classpath:com/foo/jdbc.properties"/&gt;</pre><p><tt class="classname">PropertyPlaceholderConfigurer</tt>&#22914;&#26524;&#22312;&#25351;&#23450;&#30340;<tt class="classname">Properties</tt>&#25991;&#20214;&#20013;&#25214;&#19981;&#21040;&#20320;&#24819;&#20351;&#29992;&#30340;&#23646;&#24615;&#65292;&#23427;&#36824;&#20250;&#22312;Java&#30340;<tt class="classname">System</tt>&#31867;&#23646;&#24615;&#20013;&#26597;&#25214;&#12290;&#36825;&#20010;&#34892;&#20026;&#21487;&#20197;&#36890;&#36807;&#35774;&#32622;<tt class="literal">systemPropertiesMode</tt>&#23646;&#24615;&#26469;&#23450;&#21046;&#65292;&#23427;&#26377;&#19977;&#20010;&#20540;&#65306;&#35753;&#37197;&#32622;&#19968;&#30452;&#35206;&#30422;&#12289;&#35753;&#23427;&#27704;&#19981;&#35206;&#30422;&#21450;&#35753;&#23427;&#20165;&#20165;&#22312;&#23646;&#24615;&#25991;&#20214;&#20013;&#25214;&#19981;&#21040;&#35813;&#23646;&#24615;&#26102;&#25165;&#35206;&#30422;&#12290;&#35831;&#21442;&#32771;<tt class="classname">PropertiesPlaceholderConfigurer</tt>&#30340;JavaDoc&#20197;&#33719;&#24471;&#26356;&#22810;&#30340;&#20449;&#24687;&#12290;</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip: &#31867;&#21517;&#26367;&#20195;"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="http://shouce.jb51.net/images/admons/tip.png"></td><th align="left">&#31867;&#21517;&#26367;&#20195;</th></tr><tr><td colspan="2" align="left" valign="top"><p><tt class="classname">PropertyPlaceholderConfigurer</tt>&#21487;&#20197;&#22312;&#24517;&#39035;&#22312;&#36816;&#34892;&#26102;&#36873;&#25321;&#19968;&#20010;&#29305;&#24615;&#23454;&#29616;&#31867;&#26102;&#21487;&#20197;&#29992;&#26469;&#26367;&#20195;&#31867;&#21517;&#12290;&#20363;&#22914;&#65306;</p><pre class="programlisting">&lt;bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"&gt;
    &lt;property name="locations"&gt;
        &lt;value&gt;classpath:com/foo/strategy.properties&lt;/value&gt;
    &lt;/property&gt;
    &lt;property name="properties"&gt;
        &lt;value&gt;custom.strategy.class=com.foo.DefaultStrategy&lt;/value&gt;
    &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="serviceStrategy" class="${custom.strategy.class}"/&gt;</pre><p>&#22914;&#26524;&#31867;&#22312;&#36816;&#34892;&#26102;&#26080;&#27861;&#21464;&#20026;&#26377;&#25928;&#12290;&#21017;&#36825;&#20010;bean&#20250;&#21019;&#24314;&#22833;&#36133;&#65288;&#24403;&#23545;&#38750;&#24310;&#36831;&#23454;&#20363;&#21270;bean&#25191;&#34892;<tt class="interfacename">ApplicationContext</tt>&#30340;<tt class="methodname">preInstantiateSingletons()</tt>&#26041;&#27861;&#30340;&#24773;&#20917;&#19979;&#65289;&#12290;</p></td></tr></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-overrideconfigurer"></a>3.7.2.2.&nbsp;<tt class="classname">PropertyOverrideConfigurer</tt>&#31034;&#20363;</h4></div></div><div></div></div><p>&#21478;&#19968;&#20010;bean&#24037;&#21378;&#21518;&#32622;&#22788;&#29702;&#22120;<tt class="classname">PropertyOverrideConfigurer</tt>&#31867;&#20284;&#20110;<tt class="classname">PropertyPlaceholderConfigurer</tt>&#12290;&#20294;&#26159;&#19982;&#21518;&#32773;&#30456;&#27604;&#65292;&#21069;&#32773;&#23545;&#20110;bean&#23646;&#24615;&#21487;&#20197;&#26377;&#32570;&#30465;&#20540;&#25110;&#32773;&#26681;&#26412;&#27809;&#26377;&#20540;&#12290;&#22914;&#26524;&#36215;&#35206;&#30422;&#20316;&#29992;&#30340;<tt class="classname">Properties</tt>&#25991;&#20214;&#27809;&#26377;&#26576;&#20010;bean&#23646;&#24615;&#30340;&#20869;&#23481;&#65292;&#37027;&#20040;&#23558;&#20351;&#29992;&#32570;&#30465;&#30340;&#19978;&#19979;&#25991;&#23450;&#20041;&#12290;</p><p>bean&#24037;&#21378;&#24182;&#19981;&#20250;&#24847;&#35782;&#21040;&#34987;&#35206;&#30422;&#65292;&#25152;&#20197;&#20165;&#20165;&#23519;&#30475;XML&#23450;&#20041;&#25991;&#20214;&#24182;&#19981;&#33021;&#31435;&#21051;&#30693;&#36947;&#35206;&#30422;&#37197;&#32622;&#26159;&#21542;&#34987;&#20351;&#29992;&#20102;&#12290;&#22312;&#22810;&#20010;<tt class="classname">PropertyOverrideConfigurer</tt>&#23454;&#20363;&#20013;&#23545;&#19968;&#20010;bean&#23646;&#24615;&#23450;&#20041;&#20102;&#19981;&#21516;&#30340;&#20540;&#26102;&#65292;&#26368;&#21518;&#23450;&#20041;&#30340;&#20540;&#23558;&#34987;&#20351;&#29992;&#65288;&#30001;&#20110;&#35206;&#30422;&#26426;&#21046;&#65289;&#12290;</p><p>Properties&#25991;&#20214;&#30340;&#37197;&#32622;&#24212;&#35813;&#26159;&#22914;&#19979;&#30340;&#26684;&#24335;&#65306;</p><pre class="programlisting">beanName.property=value</pre><p>An example properties file might look like this:</p><p>&#19968;&#20010;properties&#25991;&#20214;&#21487;&#33021;&#26159;&#19979;&#38754;&#36825;&#26679;&#30340;&#65306;</p><pre class="programlisting">dataSource.driverClassName=com.mysql.jdbc.Driver
dataSource.url=jdbc:mysql:mydb</pre><p>&#36825;&#20010;&#31034;&#20363;&#25991;&#20214;&#21487;&#29992;&#22312;&#36825;&#26679;&#19968;&#20010;bean&#23481;&#22120;&#65306;&#21253;&#21547;&#19968;&#20010;&#21517;&#20026;<span class="emphasis"><em>dataSource</em></span>&#30340;bean&#65292;&#24182;&#19988;&#36825;&#20010;bean&#26377;<span class="emphasis"><em>driver</em></span>&#21644;<span class="emphasis"><em>url</em></span>&#23646;&#24615;&#12290;</p><p>&#27880;&#24847;&#23427;&#20063;&#25903;&#25345;&#32452;&#21512;&#30340;&#23646;&#24615;&#21517;&#31216;&#65292;&#21482;&#35201;&#36335;&#24452;&#20013;&#27599;&#20010;&#32452;&#20214;&#38500;&#20102;&#26368;&#21518;&#35201;&#34987;&#35206;&#30422;&#30340;&#23646;&#24615;&#22806;&#20840;&#37117;&#26159;&#38750;&#31354;&#30340;&#65288;&#27604;&#22914;&#36890;&#36807;&#26500;&#36896;&#22120;&#26469;&#21021;&#22987;&#21270;&#65289;&#65292;&#22312;&#19979;&#20363;&#20013;&#65306;</p><pre class="programlisting">foo.fred.bob.sammy=123</pre><p>... the <tt class="literal">sammy</tt> property of the
        <tt class="literal">bob</tt> property of the <tt class="literal">fred</tt>
        property of the <tt class="literal">foo</tt> bean is being set to the scalar
        value <tt class="literal">123</tt>.</p><p><tt class="literal">foo</tt> bean&#30340;<tt class="literal">fred</tt>&#23646;&#24615;&#30340;<tt class="literal">bob</tt>&#23646;&#24615;&#30340;<tt class="literal">sammy</tt>&#23646;&#24615;&#34987;&#35774;&#32622;&#20026;&#25968;&#20540;123&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-extension-factorybean"></a>3.7.3.&nbsp;&#20351;&#29992;<tt class="literal">FactoryBean</tt>&#23450;&#21046;&#23454;&#20363;&#21270;&#36923;&#36753;</h3></div></div><div></div></div><p>&#24037;&#21378;bean&#38656;&#35201;&#23454;&#29616;<tt class="interfacename">org.springframework.beans.factory.FactoryBean</tt>&#25509;&#21475;&#12290;</p><p><tt class="interfacename">FactoryBean</tt>&#25509;&#21475;&#26159;&#25554;&#20837;&#21040;Spring IoC&#23481;&#22120;&#29992;&#26469;&#23450;&#21046;&#23454;&#20363;&#21270;&#36923;&#36753;&#30340;&#19968;&#20010;&#25509;&#21475;&#28857;&#12290;&#22914;&#26524;&#20320;&#26377;&#19968;&#20123;&#22797;&#26434;&#30340;&#21021;&#22987;&#21270;&#20195;&#30721;&#29992;Java&#21487;&#20197;&#26356;&#22909;&#26469;&#34920;&#31034;&#65292;&#32780;&#19981;&#26159;&#29992;(&#21487;&#33021;)&#20887;&#38271;&#30340;XML&#65292;&#37027;&#20040;&#20320;&#23601;&#21487;&#20197;&#21019;&#24314;&#20320;&#33258;&#24049;&#30340;<tt class="interfacename">FactoryBean</tt>&#65292;&#24182;&#22312;&#37027;&#20010;&#31867;&#20013;&#20889;&#20837;&#22797;&#26434;&#30340;&#21021;&#22987;&#21270;&#21160;&#20316;&#65292;&#28982;&#21518;&#25226;&#20320;&#23450;&#21046;&#30340;<tt class="interfacename">FactoryBean</tt>&#25554;&#20837;&#23481;&#22120;&#20013;&#12290;</p><p><tt class="interfacename">FactoryBean</tt>&#25509;&#21475;&#25552;&#20379;&#19977;&#20010;&#26041;&#27861;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="methodname">Object getObject()</tt>&#65306;&#36820;&#22238;&#19968;&#20010;&#30001;&#36825;&#20010;&#24037;&#21378;&#21019;&#24314;&#30340;&#23545;&#35937;&#23454;&#20363;&#12290;&#36825;&#20010;&#23454;&#20363;&#21487;&#33021;&#34987;&#20849;&#20139;&#65288;&#21462;&#20915;&#20110;isSingleton()&#30340;&#36820;&#22238;&#20540;&#26159;singleton&#25110;prototype&#65289;&#12290;</p></li><li><p><tt class="methodname">boolean isSingleton()</tt>&#65306;&#22914;&#26524;&#35201;&#35753;&#36825;&#20010;FactoryBean&#21019;&#24314;&#30340;&#23545;&#35937;&#23454;&#20363;&#20026;singleton&#21017;&#36820;&#22238;true&#65292;&#21542;&#21017;&#36820;&#22238;false&#12290;</p></li><li><p><tt class="methodname">Class getObjectType()</tt>&#65306;&#36820;&#22238;&#36890;&#36807;getObject()&#26041;&#27861;&#36820;&#22238;&#30340;&#23545;&#35937;&#31867;&#22411;&#65292;&#22914;&#26524;&#35813;&#31867;&#22411;&#26080;&#27861;&#39044;&#26009;&#21017;&#36820;&#22238;null&#12290;</p></li></ul></div><p>&#22312;Spring&#26694;&#26550;&#20013;<tt class="interfacename">FactoryBean</tt>&#30340;&#27010;&#24565;&#21644;&#25509;&#21475;&#34987;&#29992;&#20110;&#22810;&#20010;&#22320;&#26041;&#65307;&#22312;&#26412;&#25991;&#20889;&#20316;&#26102;&#65292;Spring&#26412;&#36523;&#25552;&#20379;&#30340;<tt class="interfacename">FactoryBean</tt>&#25509;&#21475;&#23454;&#29616;&#36229;&#36807;&#20102;50&#20010;&#12290;</p><p>&#26368;&#21518;&#65292;&#26377;&#26102;&#38656;&#35201;&#21521;&#23481;&#22120;&#35831;&#27714;&#19968;&#20010;&#30495;&#23454;&#30340;<tt class="interfacename">FactoryBean</tt>&#23454;&#20363;&#26412;&#36523;&#65292;&#32780;&#19981;&#26159;&#23427;&#21019;&#24314;&#30340;bean&#12290;&#36825;&#21487;&#20197;&#36890;&#36807;&#22312;<tt class="interfacename">FactoryBean</tt>&#65288;&#21253;&#25324;<tt class="interfacename">ApplicationContext</tt>&#65289;&#35843;&#29992;<tt class="methodname">getBean</tt>&#26041;&#27861;&#26102;&#22312;bean id&#21069;&#21152;<tt class="literal">'&amp;'</tt>(&#27809;&#26377;&#21333;&#24341;&#21495;)&#26469;&#23436;&#25104;&#12290;&#22240;&#27492;&#23545;&#20110;&#19968;&#20010;&#20551;&#23450;id&#20026;<tt class="literal">myBean</tt>&#30340;<tt class="interfacename">FactoryBean</tt>&#65292;&#22312;&#23481;&#22120;&#19978;&#35843;&#29992;<tt class="literal">getBean("myBean")</tt>&#23558;&#36820;&#22238;<tt class="interfacename">FactoryBean</tt>&#21019;&#24314;&#30340;bean&#23454;&#20363;&#65292;&#20294;&#26159;&#35843;&#29992;<tt class="literal">getBean("&amp;myBean")</tt>&#23558;&#36820;&#22238;<tt class="interfacename">FactoryBean</tt>&#26412;&#36523;&#30340;&#23454;&#20363;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="context-introduction"></a>3.8.&nbsp;The <tt class="interfacename">ApplicationContext</tt></h2></div></div><div></div></div><p><tt class="literal">beans</tt>&#21253;&#25552;&#20379;&#20102;&#20197;&#32534;&#31243;&#30340;&#26041;&#24335;&#31649;&#29702;&#21644;&#25805;&#25511;bean&#30340;&#22522;&#26412;&#21151;&#33021;&#65292;&#32780;<tt class="literal">context</tt>&#21253;&#19979;&#30340;<tt class="literal"><a href="http://www.springframework.org/docs/api/org/springframework/context/ApplicationContext.html" target="_top">ApplicationContext</a></tt>&#20197;&#19968;&#31181;&#26356;&#21152;&#38754;&#21521;&#26694;&#26550;&#30340;&#26041;&#24335;&#22686;&#24378;&#20102;<tt class="interfacename">BeanFactory</tt>&#30340;&#21151;&#33021;&#12290;&#22810;&#25968;&#29992;&#25143;&#21487;&#20197;&#37319;&#29992;&#22768;&#26126;&#30340;&#26041;&#24335;&#26469;&#20351;&#29992;<tt class="interfacename">ApplicationContext</tt>&#65292;&#29978;&#33267;&#19981;&#29992;&#25163;&#21160;&#21019;&#24314;&#23427;&#65292;&#32780;&#36890;&#36807;<tt class="classname">ContextLoader</tt>&#36825;&#26679;&#30340;&#25903;&#25345;&#31867;&#65292;&#25226;&#23427;&#20316;&#20026;J2EE web&#24212;&#29992;&#30340;&#19968;&#37096;&#20998;&#33258;&#21160;&#21551;&#21160;&#12290;&#24403;&#28982;&#65292;&#25105;&#20204;&#20173;&#28982;&#21487;&#20197;&#37319;&#29992;&#32534;&#31243;&#30340;&#26041;&#24335;&#21019;&#24314;&#19968;&#20010;ApplicationContext&#12290;</p><p>context&#21253;&#30340;&#26680;&#24515;&#26159;<tt class="interfacename">ApplicationContext</tt>&#25509;&#21475;&#12290;&#23427;&#30001;<tt class="interfacename">BeanFactory</tt>&#25509;&#21475;&#27966;&#29983;&#32780;&#26469;&#65292;&#22240;&#32780;&#25552;&#20379;&#20102;<tt class="interfacename">BeanFactory</tt>&#25152;&#26377;&#30340;&#21151;&#33021;&#12290;&#20026;&#20102;&#20197;&#19968;&#31181;&#26356;&#21521;&#38754;&#21521;&#26694;&#26550;&#30340;&#26041;&#24335;&#24037;&#20316;&#20197;&#21450;&#23545;&#19978;&#19979;&#25991;&#36827;&#34892;&#20998;&#23618;&#21644;&#23454;&#29616;&#32487;&#25215;&#65292;context&#21253;&#36824;&#25552;&#20379;&#20102;&#20197;&#19979;&#30340;&#21151;&#33021;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="interfacename">MessageSource</tt>, &#25552;&#20379;&#22269;&#38469;&#21270;&#30340;&#28040;&#24687;&#35775;&#38382;</p></li><li><p><span class="emphasis"><em>&#36164;&#28304;&#35775;&#38382;</em></span>&#65292;&#22914;URL&#21644;&#25991;&#20214;</p></li><li><p><span class="emphasis"><em>&#20107;&#20214;&#20256;&#25773;</em></span>&#65292;&#23454;&#29616;&#20102;<tt class="interfacename">ApplicationListener</tt>&#25509;&#21475;&#30340;bean</p></li><li><p><span class="emphasis"><em>&#36733;&#20837;&#22810;&#20010;&#65288;&#26377;&#32487;&#25215;&#20851;&#31995;&#65289;&#19978;&#19979;&#25991;</em></span> &#65292;&#20351;&#24471;&#27599;&#19968;&#20010;&#19978;&#19979;&#25991;&#37117;&#19987;&#27880;&#20110;&#19968;&#20010;&#29305;&#23450;&#30340;&#23618;&#27425;&#65292;&#27604;&#22914;&#24212;&#29992;&#30340;web&#23618;</p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="context-introduction-ctx-vs-beanfactory"></a>3.8.1.&nbsp;<tt class="interfacename">BeanFactory</tt> &#36824;&#26159;
      <tt class="interfacename">ApplicationContext</tt>?</h3></div></div><div></div></div><p>&#31616;&#21333;&#30340;&#35828;&#65306;<span class="emphasis"><em>&#38500;&#38750;&#20320;&#26377;&#26356;&#22909;&#30340;&#29702;&#30001;&#65292;&#21542;&#21017;&#23613;&#37327;&#20351;&#29992;<tt class="interfacename">ApplicationContext</tt>&#65292;&#19979;&#38754;&#26159;&#23545;&#20110;&#21738;&#20123;"&#20026;&#20160;&#20040;"&#31561;&#31561;&#26356;&#28145;&#20837;&#30340;&#24314;&#35758;</em></span></p><p><tt class="interfacename">ApplicationContext</tt>&#21253;&#21547;<tt class="interfacename">BeanFactory</tt>&#30340;&#25152;&#26377;&#21151;&#33021;&#12290;&#36890;&#24120;&#24314;&#35758;&#27604;<tt class="interfacename">BeanFactory</tt>&#20248;&#20808;&#65292;&#38500;&#38750;&#26377;&#19968;&#20123;&#38480;&#21046;&#30340;&#22330;&#21512;&#22914;&#23383;&#33410;&#38271;&#24230;&#23545;&#20869;&#23384;&#26377;&#24456;&#22823;&#30340;&#24433;&#21709;&#26102;&#65288;<tt class="classname">Applet</tt>&#65289;&#12290;&#28982;&#21518;&#65292;&#32477;&#22823;&#22810;&#25968;"&#20856;&#22411;&#30340;"&#20225;&#19994;&#24212;&#29992;&#21644;&#31995;&#32479;&#65292;<tt class="interfacename">ApplicationContext</tt>&#23601;&#26159;&#20320;&#38656;&#35201;&#20351;&#29992;&#30340;&#12290;Spring2.0&#21450;&#20197;&#19978;&#29256;&#26412;&#65292;<span class="emphasis"><em>&#22823;&#37327;</em></span>&#20351;&#29992;&#20102;link linkend="beans-factory-extension-bpp"&gt;<tt class="interfacename">BeanPostProcessor</tt>&#25193;&#23637;&#65288;&#20197;&#20415;&#24212;&#29992;&#20195;&#29702;&#31561;&#21151;&#33021;&#65289;&#65292;&#22914;&#26524;&#20320;&#36873;&#25321;<tt class="interfacename">BeanFactory</tt>&#21017;&#26080;&#27861;&#20351;&#29992;&#30456;&#24403;&#22810;&#30340;&#25903;&#25345;&#21151;&#33021;&#65292;&#22914;&#20107;&#21153;&#21644;AOP&#65292;&#36825;&#21487;&#33021;&#20250;&#23548;&#33268;&#28151;&#20081;&#65292;&#22240;&#20026;&#37197;&#32622;&#24182;&#27809;&#26377;&#38169;&#35823;&#12290;</p><p>&#19979;&#38754;&#30340;&#21151;&#33021;&#30697;&#38453;&#21015;&#20986;&#20102;<tt class="interfacename">BeanFactory</tt>&#25552;&#20379;&#30340;&#21151;&#33021;&#21644;<tt class="interfacename">ApplicationContext</tt>&#25552;&#20379;&#30340;&#21151;&#33021;&#65288;&#21253;&#25324;&#20854;&#23454;&#29616;&#65289;&#12290;&#65288;&#19979;&#19968;&#33410;&#26356;&#28145;&#24230;&#30340;&#25551;&#36848;&#20102;<tt class="interfacename">ApplicationContext</tt>&#27604;<tt class="interfacename">BeanFactory</tt>&#26356;&#24378;&#30340;&#21151;&#33021;&#12290;&#65289;
      </p><div class="table"><a name="context-introduction-ctx-vs-beanfactory-feature-matrix"></a><p class="title"><b>Table&nbsp;3.5.&nbsp;Feature Matrix&#29305;&#24615;&#34920;</b></p><table summary="Feature Matrix" width="100%" border="1"><colgroup><col align="left"><col><col></colgroup><thead><tr><th align="center">&#29305;&#24615;</th><th align="center"><tt class="interfacename">BeanFactory</tt></th><th align="center"><tt class="interfacename">ApplicationContext</tt></th></tr></thead><tbody><tr><td align="left"><p>Bean &#23454;&#20363;&#21270;/&#35013;&#37197;</p></td><td align="center"><p>Yes</p></td><td align="center"><p>Yes</p></td></tr><tr><td align="left"><p>&#33258;&#21160;
              <tt class="interfacename">BeanPostProcessor</tt>
                &#27880;&#20876;</p></td><td align="center"><p>No</p></td><td align="center"><p>Yes</p></td></tr><tr><td align="left"><p>&#33258;&#21160;
              <tt class="interfacename">BeanFactoryPostProcessor</tt>
                &#27880;&#20876;</p></td><td align="center"><p>No</p></td><td align="center"><p>Yes</p></td></tr><tr><td align="left"><p>&#20415;&#25463;&#30340;
              <tt class="interfacename">MessageSource</tt> &#35775;&#38382;(
              i18n)</p></td><td align="center"><p>No</p></td><td align="center"><p>Yes</p></td></tr><tr><td align="left"><p><tt class="interfacename">ApplicationEvent</tt>
                &#21457;&#36865;</p></td><td align="center"><p>No</p></td><td align="center"><p>Yes</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="context-functionality-messagesource"></a>3.8.2.&nbsp;&#21033;&#29992;<tt class="literal">MessageSource</tt>&#23454;&#29616;&#22269;&#38469;&#21270;</h3></div></div><div></div></div><p><tt class="interfacename">ApplicationContext</tt>&#25509;&#21475;&#25193;&#23637;&#20102;<tt class="interfacename">MessageSource</tt>&#25509;&#21475;&#65292;&#22240;&#32780;&#25552;&#20379;&#20102;&#28040;&#24687;&#22788;&#29702;&#30340;&#21151;&#33021;&#65288;i18n&#25110;&#32773;&#22269;&#38469;&#21270;&#65289;&#12290;&#19982;<tt class="classname">HierarchicalMessageSource</tt>&#19968;&#36215;&#20351;&#29992;&#65292;&#23427;&#36824;&#33021;&#22815;&#22788;&#29702;&#23884;&#22871;&#30340;&#28040;&#24687;&#65292;&#36825;&#20123;&#26159;Spring&#25552;&#20379;&#30340;&#22788;&#29702;&#28040;&#24687;&#30340;&#22522;&#26412;&#25509;&#21475;&#12290;&#35753;&#25105;&#20204;&#24555;&#36895;&#27983;&#35272;&#19968;&#19979;&#23427;&#25152;&#23450;&#20041;&#30340;&#26041;&#27861;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">String getMessage(String code, Object[] args, String default, Locale loc)&#65306;&#29992;&#26469;&#20174;<tt class="interfacename">MessageSource</tt>&#33719;&#21462;&#28040;&#24687;&#30340;&#22522;&#26412;&#26041;&#27861;&#12290;&#22914;&#26524;&#22312;&#25351;&#23450;&#30340;locale&#20013;&#27809;&#26377;&#25214;&#21040;&#28040;&#24687;&#65292;&#21017;&#20351;&#29992;&#40664;&#35748;&#30340;&#28040;&#24687;&#12290;args&#20013;&#30340;&#21442;&#25968;&#23558;&#20351;&#29992;&#26631;&#20934;&#31867;&#24211;&#20013;&#30340;<tt class="literal">MessageFormat</tt>&#26469;&#20316;&#28040;&#24687;&#20013;&#26367;&#25442;&#20540;&#12290;</tt></p></li><li><p><tt class="literal">String getMessage(String code, Object[] args, Locale loc)&#65306;&#26412;&#36136;&#19978;&#21644;&#19978;&#19968;&#20010;&#26041;&#27861;&#30456;&#21516;&#65292;&#20854;&#21306;&#21035;&#22312;&#65306;&#27809;&#26377;&#25351;&#23450;&#40664;&#35748;&#20540;&#65292;&#22914;&#26524;&#27809;&#25214;&#21040;&#28040;&#24687;&#65292;&#20250;&#25243;&#20986;&#19968;&#20010;<tt class="classname">NoSuchMessageException</tt>&#24322;&#24120;&#12290;</tt></p></li><li><p><tt class="literal">String getMessage(MessageSourceResolvable resolvable, Locale locale)</tt>&#65306;&#19978;&#38754;&#26041;&#27861;&#20013;&#25152;&#20351;&#29992;&#30340;&#23646;&#24615;&#37117;&#23553;&#35013;&#21040;&#19968;&#20010;<tt class="interfacename">MessageSourceResolvable</tt>&#23454;&#29616;&#20013;&#65292;&#32780;&#26412;&#26041;&#27861;&#21487;&#20197;&#25351;&#23450;<tt class="interfacename">MessageSourceResolvable</tt>&#23454;&#29616;&#12290;</p></li></ul></div><p>&#24403;&#19968;&#20010;<tt class="interfacename">ApplicationContext</tt>&#34987;&#21152;&#36733;&#26102;&#65292;&#23427;&#20250;&#33258;&#21160;&#22312;context&#20013;&#26597;&#25214;&#24050;&#23450;&#20041;&#20026;<tt class="interfacename">MessageSource</tt>&#31867;&#22411;&#30340;bean&#12290;&#27492;bean&#30340;&#21517;&#31216;&#39035;&#20026;<tt class="literal">messageSource</tt>&#12290;&#22914;&#26524;&#25214;&#21040;&#65292;&#37027;&#20040;&#25152;&#26377;&#23545;&#19978;&#36848;&#26041;&#27861;&#30340;&#35843;&#29992;&#23558;&#34987;&#22996;&#25176;&#32473;&#35813;bean&#12290;&#21542;&#21017;<tt class="interfacename">ApplicationContext</tt>&#20250;&#22312;&#20854;&#29238;&#31867;&#20013;&#26597;&#25214;&#26159;&#21542;&#21547;&#26377;&#21516;&#21517;&#30340;bean&#12290;&#22914;&#26524;&#26377;&#65292;&#23601;&#25226;&#23427;&#20316;&#20026;<tt class="interfacename">MessageSource</tt>&#12290;&#22914;&#26524;&#23427;&#26368;&#32456;&#27809;&#26377;&#25214;&#21040;&#20219;&#20309;&#30340;&#28040;&#24687;&#28304;&#65292;&#19968;&#20010;&#31354;&#30340;<tt class="classname">StaticMessageSource</tt>&#23558;&#20250;&#34987;&#23454;&#20363;&#21270;&#65292;&#20351;&#23427;&#33021;&#22815;&#25509;&#21463;&#19978;&#36848;&#26041;&#27861;&#30340;&#35843;&#29992;&#12290;</p><p>Spring&#30446;&#21069;&#25552;&#20379;&#20102;&#20004;&#20010;<tt class="interfacename">MessageSource</tt>&#30340;&#23454;&#29616;:<tt class="classname">ResourceBundleMessageSource</tt>&#21644;<tt class="classname">StaticMessageSource</tt>&#12290;&#23427;&#20204;&#37117;&#32487;&#25215;<tt class="classname">NestingMessageSource</tt>&#20197;&#20415;&#33021;&#22815;&#22788;&#29702;&#23884;&#22871;&#30340;&#28040;&#24687;&#12290;<tt class="classname">StaticMessageSource</tt>&#24456;&#23569;&#34987;&#20351;&#29992;&#65292;&#20294;&#33021;&#20197;&#32534;&#31243;&#30340;&#26041;&#24335;&#21521;&#28040;&#24687;&#28304;&#28155;&#21152;&#28040;&#24687;&#12290;<tt class="classname">ResourceBundleMessageSource</tt>&#20250;&#29992;&#24471;&#26356;&#22810;&#19968;&#20123;&#65292;&#20026;&#27492;&#25552;&#20379;&#20102;&#19968;&#19979;&#31034;&#20363;&#65306;</p><pre class="programlisting">&lt;beans&gt;
  &lt;bean id="messageSource"
        class="org.springframework.context.support.ResourceBundleMessageSource"&gt;
    &lt;property name="basenames"&gt;
      &lt;list&gt;
        &lt;value&gt;format&lt;/value&gt;
        &lt;value&gt;exceptions&lt;/value&gt;
        &lt;value&gt;windows&lt;/value&gt;
      &lt;/list&gt;
    &lt;/property&gt;
  &lt;/bean&gt;
&lt;/beans&gt;</pre><p>&#36825;&#27573;&#37197;&#32622;&#20551;&#23450;&#22312;&#20320;&#30340;classpath&#20013;&#26377;&#19977;&#20010;&#36164;&#28304;&#25991;&#20214;&#65288;resource bundle&#65289;&#65292;&#23427;&#20204;&#26159;<tt class="literal">format</tt>&#65292;      <tt class="literal">exceptions</tt>&#21644;<tt class="literal">windows</tt>&#12290;&#36890;&#36807;ResourceBundle&#65292;&#20351;&#29992;JDK&#20013;&#35299;&#26512;&#28040;&#24687;&#30340;&#26631;&#20934;&#26041;&#24335;&#65292;&#26469;&#22788;&#29702;&#20219;&#20309;&#35299;&#26512;&#28040;&#24687;&#30340;&#35831;&#27714;&#12290;&#20986;&#20110;&#31034;&#20363;&#30340;&#30446;&#30340;&#65292;&#20551;&#23450;&#19978;&#38754;&#30340;&#20004;&#20010;&#36164;&#28304;&#25991;&#20214;&#30340;&#20869;&#23481;&#20026;&#8230;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation"># in 'format.properties'</span></i>
message=Alligators rock!</pre><pre class="programlisting"><i class="lineannotation"><span class="lineannotation"># in 'exceptions.properties'</span></i>
argument.required=The '{0}' argument is required.</pre><p>&#19979;&#38754;&#26159;&#27979;&#35797;&#20195;&#30721;&#12290;&#22240;&#20026;<tt class="classname">ApplicationContext</tt>&#23454;&#29616;&#20063;&#37117;&#23454;&#29616;&#20102;<tt class="classname">MessageSource</tt>&#25509;&#21475;&#65292;&#25152;&#20197;&#33021;&#34987;&#36716;&#22411;&#20026;<tt class="classname">MessageSource</tt>&#25509;&#21475;</p><pre class="programlisting">public static void main(String[] args) {
    MessageSource resources = new ClassPathXmlApplicationContext("beans.xml");
    String message = resources.getMessage("message", null, "Default", null);
    System.out.println(message);
}</pre><p>&#19978;&#36848;&#31243;&#24207;&#30340;&#36755;&#20986;&#32467;&#26524;&#23558;&#20250;&#26159;...</p><pre class="programlisting">Alligators rock!</pre><p>&#24635;&#32780;&#35328;&#20043;&#65292;&#25105;&#20204;&#22312;<tt class="literal">'beans.xml'</tt>&#30340;&#25991;&#20214;&#20013;&#65288;&#22312;classpath&#26681;&#30446;&#24405;&#19979;&#65289;&#23450;&#20041;&#20102;&#19968;&#20010;<tt class="literal">messageSource</tt> bean&#65292;&#36890;&#36807;&#23427;&#30340;<tt class="literal">basenames</tt>&#23646;&#24615;&#24341;&#29992;&#22810;&#20010;&#36164;&#28304;&#25991;&#20214;&#65307;&#32780;<tt class="literal">basenames</tt>&#23646;&#24615;&#20540;&#30001;list&#20803;&#32032;&#25152;&#25351;&#23450;&#30340;&#19977;&#20010;&#20540;&#20256;&#20837;&#65292;&#23427;&#20204;&#20197;&#25991;&#20214;&#30340;&#24418;&#24335;&#23384;&#22312;&#24182;&#34987;&#25918;&#32622;&#22312;classpath&#30340;&#26681;&#30446;&#24405;&#19979;&#65288;&#20998;&#21035;&#20026;<tt class="literal">format.properties</tt>&#65292;<tt class="literal">exceptions.properties</tt>&#21644;<tt class="literal">windows.properties</tt>&#65289;&#12290;</p><p>&#20877;&#20998;&#26512;&#20010;&#20363;&#23376;&#65292;&#36825;&#27425;&#25105;&#20204;&#23558;&#30528;&#30524;&#20110;&#20256;&#36882;&#21442;&#25968;&#32473;&#26597;&#25214;&#30340;&#28040;&#24687;&#65292;&#36825;&#20123;&#21442;&#25968;&#23558;&#34987;&#36716;&#25442;&#20026;&#23383;&#31526;&#20018;&#24182;&#25554;&#20837;&#21040;&#24050;&#26597;&#25214;&#21040;&#30340;&#28040;&#24687;&#20013;&#30340;&#21344;&#20301;&#31526;&#65288;&#35793;&#27880;&#65306;&#36164;&#28304;&#25991;&#20214;&#20013;&#33457;&#25324;&#21495;&#37324;&#30340;&#25968;&#23383;&#21363;&#20026;&#21344;&#20301;&#31526;&#65289;&#12290;</p><pre class="programlisting">&lt;beans&gt;

    <i class="lineannotation"><span class="lineannotation">&lt;!-- this <tt class="interfacename">MessageSource</tt> is being used in a web application --&gt;</span></i>
    &lt;bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource"&gt;
        &lt;property name="baseName" value="WEB-INF/test-messages"/&gt;
    &lt;/bean&gt;
    
    <i class="lineannotation"><span class="lineannotation">&lt;!-- let's inject the above <tt class="interfacename">MessageSource</tt> into this POJO --&gt;</span></i>
    &lt;bean id="example" class="com.foo.Example"&gt;
        &lt;property name="messages" ref="messageSource"/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;</pre><pre class="programlisting">public class Example {

    private MessageSource messages;

    public void setMessages(MessageSource messages) {
        this.messages = messages;
    }

    public void execute() {
        String message = this.messages.getMessage("argument.required",
            new Object [] {"userDao"}, "Required", null);
        System.out.println(message);
    }

}</pre><p>&#35843;&#29992;<tt class="methodname">execute()</tt>&#26041;&#27861;&#30340;&#36755;&#20986;&#32467;&#26524;&#26159;...</p><pre class="programlisting">The 'userDao' argument is required.</pre><p>&#23545;&#20110;&#22269;&#38469;&#21270;&#65288;i18n&#65289;&#65292;Spring&#20013;&#19981;&#21516;&#30340;<tt class="classname">MessageResource</tt>&#23454;&#29616;&#19982;JDK&#26631;&#20934;ResourceBundle&#20013;&#30340;locale&#35299;&#26512;&#35268;&#21017;&#19968;&#26679;&#12290;&#27604;&#22914;&#22312;&#19978;&#38754;&#20363;&#23376;&#20013;&#23450;&#20041;&#30340;<tt class="literal">messageSource</tt> bean&#65292;&#22914;&#26524;&#20320;&#24819;&#35299;&#26512;British (en-GB) locale&#30340;&#28040;&#24687;&#65292;&#37027;&#20040;&#38656;&#35201;&#21019;&#24314;<tt class="literal">format_en_GB.properties</tt>&#65292;<tt class="literal">exceptions_en_GB.properties</tt>&#21644;<tt class="literal">windows_en_GB.properties</tt>&#19977;&#20010;&#36164;&#28304;&#25991;&#20214;&#12290;</p><p>Locale&#35299;&#26512;&#36890;&#24120;&#30001;&#24212;&#29992;&#31243;&#24207;&#26681;&#25454;&#36816;&#34892;&#29615;&#22659;&#26469;&#25351;&#23450;&#12290;&#20986;&#20110;&#31034;&#20363;&#30340;&#30446;&#30340;&#65292;&#25105;&#20204;&#23545;&#23558;&#35201;&#22788;&#29702;&#30340;(British)&#28040;&#24687;&#25163;&#24037;&#25351;&#23450;locale&#21442;&#25968;&#20540;&#12290;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation"># in 'exceptions_en_GB.properties'</span></i>
argument.required=Ebagum lad, the '{0}' argument is required, I say, required.</pre><pre class="programlisting">public static void main(final String[] args) {
    MessageSource resources = new ClassPathXmlApplicationContext("beans.xml");
    String message = resources.getMessage("argument.required",
        new Object [] {"userDao"}, "Required", Locale.UK);
    System.out.println(message);
}</pre><p>&#19978;&#36848;&#31243;&#24207;&#36816;&#34892;&#26102;&#30340;&#36755;&#20986;&#32467;&#26524;&#26159;...</p><pre class="programlisting">Ebagum lad, the 'userDao' argument is required, I say, required.</pre><p><tt class="classname">MessageSourceAware</tt>&#25509;&#21475;&#36824;&#33021;&#29992;&#20110;&#33719;&#21462;&#20219;&#20309;&#24050;&#23450;&#20041;&#30340;<tt class="classname">MessageSource</tt>&#24341;&#29992;&#12290;&#20219;&#20309;&#23454;&#29616;&#20102;<tt class="classname">MessageSourceAware</tt>&#25509;&#21475;&#30340;bean&#23558;&#22312;&#21019;&#24314;&#21644;&#37197;&#32622;&#30340;&#26102;&#20505;&#19982;<tt class="classname">MessageSource</tt>&#19968;&#21516;&#34987;&#27880;&#20837;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="context-functionality-events"></a>3.8.3.&nbsp;&#20107;&#20214;</h3></div></div><div></div></div><p><tt class="interfacename">ApplicationContext</tt>&#20013;&#30340;&#20107;&#20214;&#22788;&#29702;&#26159;&#36890;&#36807;<tt class="literal">ApplicationEvent</tt>&#31867;&#21644;<tt class="literal">ApplicationListener</tt>&#25509;&#21475;&#26469;&#25552;&#20379;&#30340;&#12290;&#22914;&#26524;&#22312;&#19978;&#19979;&#25991;&#20013;&#37096;&#32626;&#19968;&#20010;&#23454;&#29616;&#20102;<tt class="literal">ApplicationListener</tt>&#25509;&#21475;&#30340;bean&#65292;&#37027;&#20040;&#27599;&#24403;&#19968;&#20010;<tt class="literal">ApplicationEvent</tt>&#21457;&#24067;&#21040;<tt class="interfacename">ApplicationContext</tt>&#26102;&#65292;&#36825;&#20010;bean&#23601;&#24471;&#21040;&#36890;&#30693;&#12290;&#23454;&#36136;&#19978;&#65292;&#36825;&#26159;&#26631;&#20934;&#30340;<span class="emphasis"><em>Observer</em></span>&#35774;&#35745;&#27169;&#24335;&#12290;Spring&#25552;&#20379;&#20102;&#19977;&#20010;&#26631;&#20934;&#20107;&#20214;&#65306;</p><div class="table"><a name="beans-ctx-events-tbl"></a><p class="title"><b>Table&nbsp;3.6.&nbsp;&#20869;&#32622;&#20107;&#20214;</b></p><table summary="&#20869;&#32622;&#20107;&#20214;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#20107;&#20214;</th><th>&#35299;&#37322;</th></tr></thead><tbody><tr><td><tt class="classname">ContextRefreshedEvent</tt></td><td>
                    &#24403;<tt class="interfacename">ApplicationContext</tt>&#21021;&#22987;&#21270;&#25110;&#21047;&#26032;&#26102;&#21457;&#36865;&#30340;&#20107;&#20214;&#12290;&#22914;&#20351;&#29992;<tt class="interfacename">ConfigurableApplicationContext</tt>&#25509;&#21475;&#30340;<tt class="methodname">refresh()</tt>&#26041;&#27861;&#12290;&#36825;&#37324;&#30340;&#21021;&#22987;&#21270;&#24847;&#21619;&#30528;&#65306;&#25152;&#26377;&#30340;bean&#34987;&#35013;&#36733;&#65292;&#21518;&#22788;&#29702;bean&#34987;&#26816;&#27979;&#21644;&#28608;&#27963;&#65292;singleton&#34987;&#39044;&#23454;&#20363;&#21270;&#65292;&#20197;&#21450;<tt class="interfacename">ApplicationContext</tt>&#24050;&#23601;&#32490;&#21487;&#29992;&#12290;&#21047;&#26032;&#22312;context&#20851;&#38381;&#20250;&#35302;&#21457;&#22810;&#27425;&#12290;&#36873;&#25321;<tt class="interfacename">ApplicationContext</tt>&#21487;&#20197;&#25552;&#20379;&#8220;&#28909;&#8221;&#21047;&#26032;&#30340;&#21151;&#33021;(&#22914;&#65306;<tt class="classname">XmlWebApplicationContext</tt> &#21487;&#20197;&#20294;&#26159;<tt class="classname">GenericApplicationContext</tt> &#21017;&#19981;&#21487;&#20197;.)
              </td></tr><tr><td><tt class="classname">ContextStartedEvent</tt></td><td>&#24403;<tt class="interfacename">ApplicationContext</tt>&#21551;&#21160;&#26102;&#21457;&#36865;&#30340;&#20107;&#20214;,&#20351;&#29992;<tt class="interfacename">ConfigurableApplicationContext</tt>&#25509;&#21475;&#30340;<tt class="methodname">start()</tt>&#26041;&#27861;&#12290;&#36825;&#37324;"&#21551;&#21160;"&#24847;&#21619;&#30528;<tt class="interfacename">&#29983;&#21629;&#21608;&#26399;</tt> beans&#23558;&#33719;&#24471;&#19968;&#20010;&#30830;&#23454;&#30340;&#21551;&#21160;&#20449;&#21495;&#12290;&#36825;&#32463;&#24120;&#20351;&#29992;&#22312;&#30830;&#23454;&#20572;&#27490;&#21518;&#37325;&#26032;&#21551;&#21160;&#30340;&#22330;&#21512;&#65292;&#20294;&#20063;&#21487;&#20197;&#29992;&#22312;&#21551;&#21160;&#19968;&#20010;&#27809;&#26377;&#34987;&#37197;&#32622;&#20026;&#33258;&#21160;&#21551;&#21160;&#30340;&#32452;&#20214;&#20013;(&#22914;&#65306;&#22312;&#23436;&#25104;&#21021;&#22987;&#21270;&#21518;&#36824;&#27809;&#26377;&#21551;&#21160;)&#12290;
              </td></tr><tr><td><tt class="classname">ContextStoppedEvent</tt></td><td>&#24403;&#20351;&#29992;<tt class="interfacename">ConfigurableApplicationContext</tt>&#25509;&#21475;&#30340;<tt class="methodname">stop()</tt> &#26041;&#27861;&#20351;<tt class="interfacename">ApplicationContext</tt>&#20572;&#27490;&#26102;&#20505;&#21457;&#36865;&#30340;&#20107;&#20214;&#12290;&#36825;&#37324;"&#20572;&#27490;"&#24847;&#21619;&#30528;<tt class="interfacename">&#29983;&#21629;&#21608;&#26399;</tt> beans&#23558;&#33719;&#24471;&#19968;&#20010;&#30830;&#23454;&#30340;&#20572;&#27490;&#20449;&#21495;. &#20572;&#27490;&#30340;context&#21487;&#20197;&#36890;&#36807;&#35843;&#29992;<tt class="methodname">start()</tt>&#26469;&#37325;&#26032;&#21551;&#21160;&#12290;
              </td></tr><tr><td><tt class="classname">ContextClosedEvent</tt></td><td>&#24403;&#20351;&#29992;<tt class="interfacename">ConfigurableApplicationContext</tt>&#25509;&#21475;<tt class="methodname">close()</tt> &#26041;&#27861;&#20351;<tt class="interfacename">ApplicationContext</tt> &#20851;&#38381;&#26102;&#20505;&#21457;&#36865;&#30340;&#20107;&#20214;&#12290;                &#36825;&#37324;&#20851;&#38381;&#24847;&#21619;&#30528;&#25152;&#26377;&#30340;singleton bean&#37117;&#34987;&#38144;&#27585;&#12290;&#20851;&#38381;&#30340;context&#19981;&#33021;&#21047;&#26032;&#21644;&#37325;&#26032;&#21551;&#21160;&#12290;</td></tr><tr><td><tt class="classname">RequestHandledEvent</tt></td><td>web&#29305;&#24615;&#30340;&#20107;&#20214;&#36890;&#21578;&#25152;&#26377;&#30340;bean&#26377;&#19968;&#20010;http request&#65288;&#23558;&#22312;request&#32467;&#26463;&#21518;&#25165;&#20250;&#21457;&#36865;&#65289;&#12290;&#27880;&#24847;&#36825;&#31181;&#20107;&#20214;&#21482;&#20860;&#23481;&#20110;&#20351;&#29992;Spring<tt class="classname">DispatcherServlet</tt>&#20860;&#23481;&#30340;web&#24212;&#29992;&#12290;
              </td></tr></tbody></table></div><p>&#21482;&#35201;&#22312;<tt class="interfacename">ApplicationContext</tt>&#35843;&#29992;<tt class="methodname">publishEvent()</tt>&#26041;&#27861;&#21487;&#20197;&#24456;&#26041;&#20415;&#30340;&#23454;&#29616;&#33258;&#23450;&#20041;&#20107;&#20214;&#65292;&#23558;&#19968;&#20010;&#23454;&#29616;&#20102;<tt class="classname">ApplicationEvent</tt>&#30340;&#33258;&#23450;&#20041;&#20107;&#20214;&#31867;&#20316;&#20026;&#21442;&#25968;&#23601;&#21487;&#20197;&#20102;&#12290;&#20107;&#20214;&#30417;&#21548;&#22120;&#21516;&#27493;&#30340;&#25509;&#25910;&#20107;&#20214;&#12290;&#36825;&#24847;&#21619;&#30528;<tt class="methodname">publishEvent()</tt>&#26041;&#27861;&#23558;&#34987;&#38459;&#22622;&#65292;&#30452;&#21040;&#25152;&#26377;&#30340;&#30417;&#21548;&#22120;&#37117;&#22788;&#29702;&#23436;&#20107;&#20214;(&#21487;&#20197;&#36890;&#36807;&#19968;&#20010;<tt class="interfacename">ApplicationEventMulticaster</tt>&#30340;&#23454;&#29616;&#25552;&#20379;&#21487;&#36873;&#30340;&#20107;&#20214;&#21457;&#36865;&#31574;&#30053;)&#12290;&#27492;&#22806;&#65292;&#22914;&#26524;&#20107;&#21153;context&#21487;&#29992;&#65292;&#30417;&#21548;&#22120;&#20250;&#25509;&#25910;&#21040;&#19968;&#21547;&#26377;&#21457;&#36865;&#32773;&#20107;&#21153;context&#30340;&#20107;&#20214;&#12290;
      </p><p>&#30475;&#19968;&#20010;&#20363;&#23376;,&#39318;&#20808;&#26159;<tt class="interfacename">ApplicationContext</tt>:</p><pre class="programlisting">&lt;bean id="emailer" class="example.EmailBean"&gt;
  &lt;property name="blackList"&gt;
    &lt;list&gt;
      &lt;value&gt;black@list.org&lt;/value&gt;
      &lt;value&gt;white@list.org&lt;/value&gt;
      &lt;value&gt;john@doe.org&lt;/value&gt;
    &lt;/list&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="blackListListener" class="example.BlackListNotifier"&gt;
  &lt;property name="notificationAddress" value="spam@list.org"/&gt;
&lt;/bean&gt;</pre><p>&#20877;&#30475;&#19968;&#19979;&#23454;&#38469;&#30340;&#31867;:</p><pre class="programlisting">public class EmailBean implements ApplicationContextAware {

    private List blackList;
	private ApplicationContext ctx;

    public void setBlackList(List blackList) {
        this.blackList = blackList;
    }

    public void setApplicationContext(ApplicationContext ctx) {
        this.ctx = ctx;
    }

    public void sendEmail(String address, String text) {
        if (blackList.contains(address)) {
            BlackListEvent event = new BlackListEvent(address, text);
            ctx.publishEvent(event);
            return;
        }
        <i class="lineannotation"><span class="lineannotation">// send email...</span></i>
    }
}</pre><pre class="programlisting">public class BlackListNotifier implements ApplicationListener {

    private String notificationAddress;
    
    public void setNotificationAddress(String notificationAddress) {
        this.notificationAddress = notificationAddress;
    }

    public void onApplicationEvent(ApplicationEvent event) {
        if (event instanceof BlackListEvent) {
            <i class="lineannotation"><span class="lineannotation">// notify appropriate person...</span></i>
        }
    }
}</pre><p>&#24403;&#28982;&#65292;&#36825;&#20010;&#20363;&#23376;&#21487;&#20197;&#20351;&#29992;&#26356;&#22909;&#30340;&#26041;&#27861;&#23454;&#29616;&#65288;&#22914;&#37319;&#29992;AOP&#29305;&#24615;&#65289; &#65292;&#20294;&#24212;&#35813;&#36275;&#20197;&#35828;&#26126;&#20107;&#20214;&#30340;&#22522;&#26412;&#26426;&#21046;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="context-functionality-resources"></a>3.8.4.&nbsp;&#24213;&#23618;&#36164;&#28304;&#30340;&#35775;&#38382;</h3></div></div><div></div></div><p>&#20026;&#20102;&#26356;&#22909;&#30340;&#20351;&#29992;&#21644;&#29702;&#35299;&#24212;&#29992;&#19978;&#19979;&#25991;&#65292;&#36890;&#24120;&#29992;&#25143;&#24212;&#24403;&#23545;Spring&#30340;<tt class="interfacename">Resource</tt>&#26377;&#25152;&#20102;&#35299;&#65292;&#35814;&#35265;<a href="resources.html" title="Chapter&nbsp;4.&nbsp;&#36164;&#28304;">Chapter&nbsp;4, <i>&#36164;&#28304;</i></a></p><p>&#24212;&#29992;&#19978;&#19979;&#25991;&#21516;&#26102;&#20063;&#26159;&#20010;&#36164;&#28304;&#21152;&#36733;&#22120;&#65288;ResourceLoader&#65289;&#65292;&#33021;&#34987;&#29992;&#26469;&#21152;&#36733;&#22810;&#20010;<tt class="interfacename">Resource</tt>&#12290;&#19968;&#20010;<tt class="interfacename">Resource</tt>&#23454;&#36136;&#19978;&#21487;&#20197;&#24403;&#25104;&#19968;&#20010;<tt class="literal">java.net.URL</tt>&#65292;&#21487;&#34987;&#29992;&#26469;&#20174;&#22823;&#22810;&#25968;&#20301;&#32622;&#20197;&#36879;&#26126;&#30340;&#26041;&#24335;&#33719;&#21462;&#24213;&#23618;&#30340;&#36164;&#28304;&#65292;&#21253;&#25324;&#20174;classpath&#12289;&#25991;&#20214;&#31995;&#32479;&#20301;&#32622;&#12289;&#20219;&#20309;&#20197;&#26631;&#20934;URL&#25551;&#36848;&#30340;&#20301;&#32622;&#20197;&#21450;&#20854;&#23427;&#19968;&#20123;&#21464;&#31181;&#12290;&#22914;&#26524;&#36164;&#28304;&#20301;&#32622;&#20018;&#26159;&#19968;&#20010;&#27809;&#26377;&#20219;&#20309;&#21069;&#32512;&#30340;&#31616;&#21333;&#36335;&#24452;&#65292;&#36825;&#20123;&#36164;&#28304;&#26469;&#33258;&#20309;&#22788;&#21462;&#20915;&#20110;&#23454;&#38469;&#24212;&#29992;&#19978;&#19979;&#25991;&#30340;&#31867;&#22411;&#12290;</p><p>&#20026;&#20102;&#35753;bean&#33021;&#35775;&#38382;&#38745;&#24577;&#36164;&#28304;&#65292;&#21487;&#20197;&#35937;&#20854;&#23427;&#23646;&#24615;&#19968;&#26679;&#27880;&#20837;Resource&#12290;&#34987;&#27880;&#20837;&#30340;<tt class="interfacename">Resource</tt>&#23646;&#24615;&#20540;&#21487;&#20197;&#26159;&#31616;&#21333;&#30340;&#36335;&#24452;&#23383;&#31526;&#20018;&#65292;ApplicationContext&#20250;&#20351;&#29992;&#24050;&#27880;&#20876;&#30340;<tt class="interfacename">PropertyEditor</tt>&#65292;&#26469;&#23558;&#23383;&#31526;&#20018;&#36716;&#25442;&#20026;&#23454;&#38469;&#30340;<tt class="interfacename">Resource</tt>&#23545;&#35937;&#12290;</p><p><tt class="interfacename">ApplicationContext</tt>&#26500;&#36896;&#22120;&#30340;&#36335;&#24452;&#23601;&#26159;&#23454;&#38469;&#30340;&#36164;&#28304;&#20018;&#65292;&#26681;&#25454;&#19981;&#21516;&#30340;&#19978;&#19979;&#25991;&#23454;&#29616;&#65292;&#23383;&#31526;&#20018;&#21487;&#35270;&#20026;&#19981;&#21516;&#30340;&#24418;&#24335;&#65288;&#20363;&#22914;&#65306;<tt class="classname">ClassPathXmlApplicationContext</tt>&#20250;&#25226;&#36335;&#24452;&#23383;&#31526;&#20018;&#30475;&#20316;&#19968;&#20010;classpath&#36335;&#24452;&#65289;&#12290;&#28982;&#32780;&#65292;&#23427;&#20063;&#21487;&#20197;&#20351;&#29992;&#29305;&#23450;&#30340;&#21069;&#32512;&#26469;&#24378;&#21046;&#22320;&#20174;classpath&#25110;URL&#21152;&#36733;bean&#23450;&#20041;&#25991;&#20214;&#65292;&#32780;&#19981;&#31649;&#23454;&#38469;&#30340;&#19978;&#19979;&#25991;&#31867;&#22411;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="context-create"></a>3.8.5.&nbsp;<tt class="interfacename">ApplicationContext</tt>&#22312;WEB&#24212;&#29992;&#20013;&#30340;&#23454;&#20363;&#21270;</h3></div></div><div></div></div><p>&#19982;<tt class="interfacename">BeanFactory</tt>&#36890;&#24120;&#20197;&#32534;&#31243;&#30340;&#26041;&#24335;&#34987;&#21019;&#24314;&#19981;&#21516;&#30340;&#26159;&#65292;<tt class="interfacename">ApplicationContext</tt>&#33021;&#20197;&#22768;&#26126;&#30340;&#26041;&#24335;&#21019;&#24314;&#65292;&#22914;&#20351;&#29992;<tt class="interfacename">ContextLoader</tt>&#12290;&#24403;&#28982;&#20320;&#20063;&#21487;&#20197;&#20351;&#29992;<tt class="interfacename">ApplicationContext</tt>&#30340;&#23454;&#29616;&#20043;&#19968;&#26469;&#20197;&#32534;&#31243;&#30340;&#26041;&#24335;&#21019;&#24314;<tt class="interfacename">ApplicationContext</tt>&#23454;&#20363;&#12290;&#39318;&#20808;&#65292;&#35753;&#25105;&#20204;&#20808;&#20998;&#26512;<tt class="interfacename">ContextLoader</tt>&#25509;&#21475;&#21450;&#20854;&#23454;&#29616;&#12290;</p><p><tt class="classname">ContextLoader</tt>&#26426;&#21046;&#26377;&#20004;&#31181;&#26041;&#24335;&#65292;<tt class="classname">ContextLoaderListener</tt> &#21644;<tt class="classname">ContextLoaderServlet</tt>&#65292;&#20182;&#20204;&#21151;&#33021;&#30456;&#21516;&#20294;&#26159;listener&#19981;&#33021;&#22312;Servlet2.3&#23481;&#22120;&#19979;&#20351;&#29992;&#12290;Servlet2.4&#35268;&#33539;&#20013;servlet context listeners&#38656;&#35201;&#22312;web&#24212;&#29992;&#21551;&#21160;&#24182;&#33021;&#22788;&#29702;&#21021;&#22987;&#35831;&#27714;&#26102;&#31435;&#21363;&#36816;&#34892;&#12290;(servlet context listener&#20851;&#38381;&#30340;&#26102;&#20505;&#20063;&#26159;&#30456;&#21516;&#30340;)&#12290;servlet context listener&#26159;&#21021;&#22987;&#21270;Spring <tt class="interfacename">ApplicationContext</tt>&#29702;&#24819;&#30340;&#26041;&#24335;&#12290;&#20320;&#21487;&#33021;&#24895;&#24847;&#36873;&#25321;<tt class="classname">ContextLoaderListener</tt>&#65292;&#34429;&#28982;&#26159;&#19968;&#26679;&#30340;&#65292;&#20294;&#20915;&#23450;&#26435;&#22312;&#20110;&#20320;&#12290;&#20320;&#21487;&#20197;&#26597;&#30475;<tt class="classname">ContextLoaderServlet</tt>&#30340;Javadoc&#26469;&#33719;&#24471;&#26356;&#35814;&#32454;&#30340;&#20449;&#24687;&#12290;</p><p>&#21487;&#20197;&#35937;&#19979;&#38754;&#25152;&#31034;&#20363;&#30340;&#19968;&#26679;&#20351;&#29992;<tt class="classname">ContextLoaderListener</tt>&#27880;&#20876;&#19968;&#20010;<tt class="interfacename">ApplicationContext</tt></p><pre class="programlisting">&lt;context-param&gt;
  &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
  &lt;param-value&gt;/WEB-INF/daoContext.xml /WEB-INF/applicationContext.xml&lt;/param-value&gt;
&lt;/context-param&gt;

&lt;listener&gt;
  &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;
&lt;/listener&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- or use the <tt class="classname">ContextLoaderServlet</tt> instead of the above listener</span></i><span class="emphasis"><em>
&lt;servlet&gt;
  &lt;servlet-name&gt;context&lt;/servlet-name&gt;
  &lt;servlet-class&gt;org.springframework.web.context.ContextLoaderServlet&lt;/servlet-class&gt;
  &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
&lt;/servlet&gt;
--</em></span>&gt;</pre><p>&#30417;&#21548;&#22120;&#39318;&#20808;&#26816;&#26597;<tt class="literal">contextConfigLocation</tt>&#21442;&#25968;&#65292;&#22914;&#26524;&#23427;&#19981;&#23384;&#22312;&#65292;&#23427;&#23558;&#20351;&#29992;<tt class="literal">/WEB-INF/applicationContext.xml</tt>&#20316;&#20026;&#40664;&#35748;&#20540;&#12290;&#22914;&#26524;&#24050;&#23384;&#22312;&#65292;&#23427;&#23558;&#20351;&#29992;&#20998;&#38548;&#31526;&#65288;&#36887;&#21495;&#12289;&#20882;&#21495;&#25110;&#31354;&#26684;&#65289;&#23558;&#23383;&#31526;&#20018;&#20998;&#35299;&#25104;&#24212;&#29992;&#19978;&#19979;&#25991;&#20214;&#20301;&#32622;&#36335;&#24452;&#12290;&#21487;&#20197;&#25903;&#25345;ant-&#39118;&#26684;&#30340;&#36335;&#24452;&#27169;&#24335;&#65292;&#22914;<tt class="literal">/WEB-INF/*Context.xml</tt>(WEB-INF&#25991;&#20214;&#22841;&#19979;&#25152;&#26377;&#20197;"Context.xml"&#32467;&#23614;&#30340;&#25991;&#20214;)&#12290;&#25110;&#32773;<tt class="literal">/WEB-INF/**/*Context.xml</tt>(WEB-INF&#25991;&#20214;&#22841;&#21450;&#23376;&#25991;&#20214;&#22841;&#19979;&#30340;&#20197;"Context.xml"&#32467;&#23614;&#30340;&#25991;&#20214;)&#12290;
      </p><p><tt class="classname">ContextLoaderServlet</tt>&#21516;<tt class="classname">ContextLoaderListener</tt>&#19968;&#26679;&#20351;&#29992;<tt class="literal">'contextConfigLocation'</tt>&#21442;&#25968;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="beans-glue-code-and-singletons"></a>3.9.&nbsp;&#31896;&#21512;&#20195;&#30721;&#21644;&#21487;&#24597;&#30340;singleton</h2></div></div><div></div></div><p>&#19968;&#20010;&#24212;&#29992;&#20013;&#30340;&#22823;&#22810;&#25968;&#20195;&#30721;&#26368;&#22909;&#20889;&#25104;&#20381;&#36182;&#27880;&#20837;&#65288;&#25511;&#21046;&#21453;&#36716;&#65289;&#30340;&#39118;&#26684;&#65292;&#36825;&#26679;&#20195;&#30721;&#23601;&#21644;Spring IoC&#23481;&#22120;&#26080;&#20851;&#65292;&#23427;&#20204;&#22312;&#34987;&#21019;&#24314;&#26102;&#20174;&#23481;&#22120;&#24471;&#21040;&#33258;&#24049;&#30340;&#20381;&#36182;&#65292;&#24182;&#19988;&#23436;&#20840;&#19981;&#30693;&#36947;&#23481;&#22120;&#30340;&#23384;&#22312;&#12290;&#28982;&#32780;&#65292;&#23545;&#20110;&#23569;&#37327;&#38656;&#35201;&#19982;&#20854;&#23427;&#20195;&#30721;&#31896;&#21512;&#30340;&#31896;&#21512;&#23618;&#20195;&#30721;&#26469;&#35828;&#65292;&#26377;&#26102;&#20505;&#23601;&#38656;&#35201;&#20197;&#19968;&#31181;singleton&#65288;&#25110;&#32773;&#31867;&#20284;singleton&#65289;&#30340;&#26041;&#24335;&#26469;&#35775;&#38382;Spring IoC&#23481;&#22120;&#12290;&#20363;&#22914;&#65292;&#31532;&#19977;&#26041;&#30340;&#20195;&#30721;&#21487;&#33021;&#35797;&#22270;&#65288;&#20197;<tt class="literal">Class.forName()</tt>&#30340;&#26041;&#24335;&#65289;&#30452;&#25509;&#26500;&#36896;&#19968;&#20010;&#26032;&#30340;&#23545;&#35937;&#65292;&#20294;&#26080;&#27861;&#24378;&#21046;&#23427;&#20204;&#20174;Spring IoC&#23481;&#22120;&#20013;&#24471;&#21040;&#36825;&#20123;&#23545;&#35937;&#12290;&#22914;&#26524;&#31532;&#19977;&#26041;&#20195;&#30721;&#26500;&#36896;&#30340;&#23545;&#35937;&#21482;&#26159;&#19968;&#20010;&#23567;stub&#25110;proxy&#65292;&#24182;&#19988;&#20351;&#29992;singleton&#26041;&#24335;&#35775;&#38382;Spring IoC&#23481;&#22120;&#26469;&#33719;&#24471;&#30495;&#27491;&#30340;&#23545;&#35937;&#65292;&#37027;&#20040;&#22823;&#22810;&#25968;&#30340;&#20195;&#30721;&#65288;&#30001;&#23481;&#22120;&#20135;&#29983;&#30340;&#23545;&#35937;&#65289;&#20173;&#28982;&#21487;&#20197;&#20351;&#29992;&#25511;&#21046;&#21453;&#36716;&#12290;&#22240;&#27492;&#22823;&#22810;&#25968;&#30340;&#20195;&#30721;&#20381;&#28982;&#19981;&#38656;&#35201;&#30693;&#36947;&#23481;&#22120;&#30340;&#23384;&#22312;&#65292;&#25110;&#32773;&#23427;&#22914;&#20309;&#34987;&#35775;&#38382;&#65292;&#24182;&#20445;&#25345;&#19982;&#20854;&#23427;&#20195;&#30721;&#30340;&#35299;&#32806;&#65292;&#36825;&#26679;&#25152;&#24102;&#26469;&#30340;&#30410;&#22788;&#26159;&#24456;&#26174;&#28982;&#30340;&#12290;EJB&#20063;&#21487;&#20197;&#20351;&#29992;&#36825;&#31181;stub/proxy&#26041;&#26696;&#20195;&#29702;&#21040;&#30001;Spring IoC&#23481;&#22120;&#20135;&#29983;&#30340;&#26222;&#36890;&#30340;Java&#23454;&#29616;&#23545;&#35937;&#12290;&#34429;&#28982;&#29702;&#24819;&#24773;&#20917;&#19979;Spring IoC&#23481;&#22120;&#19981;&#38656;&#35201;&#26159;singleton&#65292;&#20294;&#26159;&#22914;&#26524;&#27599;&#20010;bean&#20351;&#29992;&#23427;&#33258;&#24049;&#30340;non-singleton&#30340;Spring IoC&#23481;&#22120;&#65288;&#24403;&#22312;Spring IoC&#23481;&#22120;&#20013;&#20351;&#29992;bean&#26102;&#65292;&#22914;Hibernate <tt class="interfacename">SessionFactory</tt>&#65289;&#65292;&#23545;&#20110;&#20869;&#23384;&#20351;&#29992;&#25110;&#21021;&#22987;&#21270;&#27425;&#25968;&#37117;&#26159;&#19981;&#20999;&#23454;&#38469;&#12290;</p><p>&#21478;&#19968;&#20010;&#20363;&#23376;&#65292;&#22312;&#19968;&#20010;&#22810;&#23618;&#30340;&#22797;&#26434;&#30340;J2EE&#24212;&#29992;&#20013;&#65288;&#27604;&#22914;&#19981;&#21516;&#30340;JAR&#65292;EJB&#65292;&#20197;&#21450;WAR&#25171;&#21253;&#25104;&#19968;&#20010;EAR&#65289;&#65292;&#27599;&#19968;&#23618;&#37117;&#26377;&#33258;&#24049;&#30340;Spring IoC&#23481;&#22120;&#23450;&#20041;&#65288;&#26377;&#25928;&#22320;&#32452;&#25104;&#19968;&#20010;&#23618;&#27425;&#32467;&#26500;&#65289;&#65292;&#22914;&#26524;&#39030;&#23618;&#21482;&#26377;&#19968;&#20010;web-app&#65288;WAR&#65289;&#30340;&#35805;&#65292;&#27604;&#36739;&#22909;&#30340;&#20570;&#27861;&#26159;&#31616;&#21333;&#22320;&#21019;&#24314;&#19968;&#20010;&#30001;&#19981;&#21516;&#23618;&#30340;XML&#23450;&#20041;&#25991;&#20214;&#32452;&#25104;&#30340;&#32452;&#21512;Spring IoC&#23481;&#22120;&#12290;&#25152;&#26377;&#19981;&#21516;&#30340;Spring IoC&#23481;&#22120;&#23454;&#29616;&#37117;&#21487;&#20197;&#20197;&#36825;&#31181;&#26041;&#24335;&#20174;&#22810;&#20010;&#23450;&#20041;&#25991;&#20214;&#26500;&#36896;&#20986;&#26469;&#12290;&#20294;&#26159;&#65292;&#22914;&#26524;&#22312;&#39030;&#23618;&#26377;&#22810;&#20010;&#20804;&#24351;web-apps&#65292;&#20026;&#27599;&#19968;&#20010;web-app&#21019;&#24314;&#19968;&#20010;Spring IoC&#23481;&#22120;&#65292;&#32780;&#27599;&#20010;ApplicationContext&#37117;&#21253;&#21547;&#22823;&#37096;&#20998;&#30456;&#21516;&#30340;&#24213;&#23618;&#30340;bean&#23450;&#20041;&#12290;&#22240;&#32780;&#23601;&#20250;&#22240;&#20869;&#23384;&#20351;&#29992;&#65292;&#24314;bean&#30340;&#22810;&#20010;&#22797;&#26412;&#20250;&#33457;&#24456;&#38271;&#26102;&#38388;&#21021;&#22987;&#21270;&#65288;&#27604;&#22914;Hibernate <tt class="interfacename">SessionFactory</tt>&#65289;&#65292;&#20197;&#21450;&#20854;&#23427;&#21487;&#33021;&#20135;&#29983;&#30340;&#21103;&#20316;&#29992;&#32780;&#20135;&#29983;&#38382;&#39064;&#12290;&#20316;&#20026;&#21478;&#19968;&#21487;&#36873;&#30340;&#26041;&#26696;&#65292;&#35937;<tt class="literal"><a href="http://www.springframework.org/docs/api/org/springframework/context/access/ContextSingletonBeanFactoryLocator.html" target="_top">ContextSingletonBeanFactoryLocator</a></tt>&#21644;<tt class="literal"><a href="http://www.springframework.org/docs/api/org/springframework/beans/factory/access/SingletonBeanFactoryLocator.html" target="_top">SingletonBeanFactoryLocator</a></tt>&#30340;&#31867;&#21487;&#20197;&#22312;&#38656;&#35201;&#30340;&#26102;&#20505;&#20197;&#26377;&#25928;&#30340;singleton&#26041;&#24335;&#65292;&#21152;&#36733;&#22810;&#23618;&#27425;&#30340;&#65288;&#27604;&#22914;&#19968;&#20010;&#26159;&#21478;&#19968;&#20010;&#30340;&#29238;&#20146;&#65289;Spring IoC&#23481;&#22120;&#65292;&#36825;&#20123;&#23558;&#20250;&#20316;&#20026;web&#24212;&#29992;&#30340;Spring IoC&#23481;&#22120;&#30340;&#29238;&#23481;&#22120;&#12290;&#30001;&#27492;&#24213;&#23618;&#30340;bean&#23450;&#20041;&#21482;&#22312;&#38656;&#35201;&#30340;&#26102;&#20505;&#21152;&#36733;&#65288;&#24182;&#19988;&#21482;&#34987;&#21152;&#36733;&#19968;&#27425;&#65289;&#12290;</p><p>&#20320;&#21487;&#20197;&#26597;&#30475;<a href="http://www.springframework.org/docs/api/org/springframework/beans/factory/access/SingletonBeanFactoryLocator.html" target="_top">SingletonBeanFactoryLocator</a>&#21644;<a href="http://www.springframework.org/docs/api/org/springframework/context/access/ContextSingletonBeanFactoryLocator.html" target="_top">ContextSingletonBeanFactoryLocator</a>&#30340;JavaDoc&#26469;&#33719;&#24471;&#35814;&#32454;&#30340;&#20363;&#23376;&#12290;&#27491;&#22914;&#22312;<a href="ejb.html" title="Chapter&nbsp;18.&nbsp;Enterprise Java Beans (EJB) &#38598;&#25104;">EJB</a>&#37027;&#31456;&#25152;&#25552;&#21040;&#30340;&#65292;Spring&#20026;EJB&#25552;&#20379;&#26041;&#20415;&#20351;&#29992;&#30340;&#22522;&#31867;&#65292;&#36890;&#24120;&#20351;&#29992;&#19968;&#20010;non-singleton&#30340;<tt class="interfacename">BeanFactoryLocator</tt>&#23454;&#29616;&#65292;&#36825;&#26679;&#22312;&#38656;&#35201;&#26102;&#23601;&#21487;&#20197;&#24456;&#23481;&#26131;&#22320;&#34987;<tt class="classname">SingletonBeanFactoryLocator</tt>&#21644;<tt class="classname">ContextSingletonBeanFactoryLocator</tt>&#26367;&#25442;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="beans-rar-deployment"></a>3.10.&nbsp;&#20197;J2EE RAR&#25991;&#20214;&#30340;&#24418;&#24335;&#37096;&#32626;Spring ApplicationContext</h2></div></div><div></div></div><p>&#33258;&#20174;Spring 2.5&#20043;&#21518;&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;RAR&#25991;&#20214;&#30340;&#24418;&#24335;&#37096;&#32626;Spring ApplicationContext&#65292;&#35813;&#25991;&#20214;&#23558;&#24212;&#29992;&#19978;&#19979;&#25991;&#65292;&#25152;&#26377;&#38656;&#35201;&#30340;bean&#20197;&#21450;JARs&#25991;&#20214;&#23553;&#35013;&#21040;&#19968;&#20010;J2EE RAR&#37096;&#32626;&#21333;&#20803;&#20013;&#12290;&#36825;&#19982;&#24341;&#23548;&#21551;&#21160;&#19968;&#20010;&#29420;&#31435;&#30340; ApplicationContext &#26159;&#19968;&#26679;&#30340;&#65292;&#21482;&#26159;&#23427;&#35201;&#23492;&#23621;&#20110;J2EE&#29615;&#22659;&#20869;&#65292;&#20197;&#20415;&#33021;&#22815;&#35775;&#38382;J2EE&#26381;&#21153;&#22120;&#25552;&#20379;&#30340;&#22522;&#26412;&#21151;&#33021;&#12290;&#36825;&#31181;RAR&#30340;&#37096;&#32626;&#23545;&#20110;&#37027;&#20123;&#24120;&#35265;&#30340;&#24212;&#29992;&#22330;&#26223;&#20934;&#22791;&#20197;&#19968;&#31181;&#26356;&#21152;&#8220;&#33258;&#28982;&#8221;&#30340;&#26041;&#24335;&#21435;&#37096;&#32626;&#19968;&#20010;&#27809;&#26377;&#22836;(headless)&#30340;WAR&#25991;&#20214;&#8212;&#8212;&#23601;&#26159;&#35828;&#65306;&#19968;&#20010;&#27809;&#26377;&#20219;&#20309;HTTP&#20837;&#21475;&#28857;&#65292;&#32780;&#21482;&#29992;&#20110;&#22312;J2EE&#29615;&#22659;&#20013;&#21551;&#21160;&#19968;&#20010;Spring ApplicationContext&#30340;WAR&#25991;&#20214;&#12290;</p><p>RAR&#37096;&#32626;&#23545;&#20110;&#37027;&#20123;&#19981;&#38656;&#35201;&#20219;&#20309;HTTP&#20837;&#21475;&#28857;&#32780;&#20165;&#21253;&#21547;&#28040;&#24687;&#33410;&#28857;&#19982;&#20219;&#21153;&#23433;&#25490;&#31561;&#30340;&#24212;&#29992;&#19978;&#19979;&#25991;&#26469;&#35828;&#38750;&#24120;&#29702;&#24819;&#12290;&#22312;&#36825;&#26679;&#30340;&#19978;&#19979;&#25991;&#20013;&#30340;Beans&#21487;&#20197;&#20351;&#29992;&#24212;&#29992;&#26381;&#21153;&#22120;&#36164;&#28304;&#65292;&#20363;&#22914;JTA&#20107;&#21153;&#31649;&#29702;&#65292;&#32465;&#23450;&#21040;JNDI&#30340;JDBC&#25968;&#25454;&#28304;&#65292;JMS ConnectionFactory&#23454;&#20363;&#65292;&#21516;&#26102;&#36825;&#20123;beans&#36824;&#21487;&#20197;&#27880;&#20876;&#21040;&#24179;&#21488;&#19978;&#30340;JMX&#26381;&#21153;&#22120;&#8212;&#8212;&#25152;&#26377;&#36825;&#20123;&#37117;&#36890;&#36807;Spring&#26631;&#20934;&#30340;&#20107;&#21153;&#31649;&#29702;&#19982;JNDI&#20197;&#21450;JMX&#25903;&#25345;&#30340;&#21151;&#33021;&#26469;&#23454;&#29616;&#30340;&#12290;&#24212;&#29992;&#32452;&#20214;&#20063;&#21487;&#20197;&#36890;&#36807;Spring&#30340;<tt class="interfacename">TaskExecutor</tt> &#25509;&#21475;&#19982;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;JCA WorkManager&#36827;&#34892;&#20132;&#20114;&#12290;</p><p>&#26597;&#30475;<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/jca/context/SpringContextResourceAdapter.html" target="_top">SpringContextResourceAdapter</a>&#31867;&#30340;JavaDoc&#65292;&#20197;&#20102;&#35299;&#20851;&#20110;RAR&#37096;&#32626;&#30340;&#37197;&#32622;&#32454;&#33410;&#12290;</p><p><span class="emphasis"><em>&#23545;&#20110;&#31616;&#21333;&#30340;&#37096;&#32626;&#65292;&#24744;&#35201;&#20570;&#30340;&#20107;&#24773;&#22914;&#19979;&#65306;</em></span>&#23558;&#25152;&#26377;&#24212;&#29992;&#31867;&#25171;&#21253;&#25104;RAR&#25991;&#20214;&#65288;&#27492;&#25991;&#20214;&#26159;&#26631;&#20934;&#30340; JAR &#25991;&#20214;&#65292;&#21482;&#26159;&#25193;&#23637;&#21517;&#19981;&#21516;&#65289;&#65292;&#23558;&#25152;&#26377;&#38656;&#35201;&#30340;jars&#21253;&#28155;&#21152;&#21040;&#35813;RAR&#25991;&#20214;&#30340;&#26681;&#30446;&#24405;&#20013;&#65292;&#28155;&#21152;&#19968;&#20010;&#8221;META-INF/ra.xml&#8220;&#37096;&#32626;&#25551;&#36848;&#31526;&#65288;&#21442;&#35265;<tt class="classname">SpringContextResourceAdapter</tt>&#30340;JavaDoc&#65289;&#21450;&#30456;&#24212;&#30340;Spring XML bean&#23450;&#20041;&#25991;&#20214;&#65288;&#20856;&#22411;&#24773;&#20917;&#19979;&#20026;"META-INF/applicationContext.xml"&#65289;&#26368;&#21518;&#25226;&#36825;&#20010; RAR &#25991;&#20214;&#25918;&#21040;&#24744;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#37096;&#32626;&#30446;&#24405;&#20013;&#65281;</p><p><span class="emphasis"><em>&#27880;&#24847;&#65306;</em></span>&#36825;&#20010;RAR&#37096;&#32626;&#21333;&#20803;&#19968;&#33324;&#26159;&#33258;&#21253;&#21547;&#30340;&#65307;&#20182;&#20204;&#27809;&#26377;&#23558;&#32452;&#20214;&#26292;&#38706;&#32473;&#8220;&#22806;&#37096;&#8221;&#19990;&#30028;&#65292;&#29978;&#33267;&#20063;&#27809;&#26377;&#26292;&#38706;&#32473;&#24212;&#29992;&#20013;&#30340;&#20854;&#20182;&#27169;&#22359;&#12290;&#25105;&#20204;&#19968;&#33324;&#20351;&#29992;JMS&#65288;&#22810;&#20010;&#27169;&#22359;&#20849;&#20139;&#65289;&#19982;&#22522;&#20110;RAR&#30340;ApplicationContext&#36827;&#34892;&#20132;&#20114;&#12290;&#20363;&#22914;&#35843;&#24230;&#20219;&#21153;&#65292;&#23545;&#26032;&#21152;&#20837;&#25991;&#20214;&#31995;&#32479;&#30340;&#25991;&#20214;&#20316;&#20986;&#21453;&#24212;&#65288;&#25110;&#32773;&#31867;&#20284;&#30340;&#65289;&#12290;&#23454;&#38469;&#19978;&#65292;&#22914;&#26524;&#38656;&#35201;&#32771;&#34385;&#21040;&#22806;&#30028;&#30340;&#21516;&#27493;&#35775;&#38382;&#65292;&#23427;&#21487;&#20197;&#23548;&#20986;RMI&#31471;&#28857;&#65292;&#36825;&#20010;&#36807;&#31243;&#20063;&#21516;&#26679;&#36866;&#29992;&#20110;&#21516;&#19968;&#21488;&#26426;&#22120;&#19978;&#30340;&#20854;&#20182;&#24212;&#29992;&#27169;&#22359;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="beans-annotation-config"></a>3.11.&nbsp;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;</h2></div></div><div></div></div><p>&#22312;<a href="beans.html#beans-factory-extension-bpp-examples-rabpp" title="3.7.1.2.&nbsp;RequiredAnnotationBeanPostProcessor&#31034;&#20363;">Section&nbsp;3.7.1.2, &#8220;RequiredAnnotationBeanPostProcessor&#31034;&#20363;&#8221;</a>&#19968;&#33410;&#20013;&#25105;&#20204;&#25552;&#21040;&#20102;&#22522;&#20110;&#27880;&#35299;&#30340;&#37197;&#32622;&#26041;&#24335;&#65292;&#20351;&#29992;<tt class="interfacename">BeanPostProcessor</tt>&#19982;&#27880;&#35299;&#26159; Spring IoC &#23481;&#22120;&#30340;&#19968;&#20010;&#26222;&#36890;&#25193;&#23637;&#26041;&#27861;&#12290;&#20363;&#22914;&#65292;Spring 2.0 &#23545;&#24517;&#39035;&#30340;&#23646;&#24615;&#24341;&#20837;&#20102;<a href="metadata.html#metadata-annotations-required" title="25.3.1.&nbsp;@Required">@Required</a>&#27880;&#35299;&#12290;&#22312; Spring 2.5&#20013;&#24050;&#32463;&#21487;&#20197;&#29992;&#27880;&#35299;&#30340;&#26041;&#24335;&#21435;&#39537;&#21160; Spring &#30340;&#20381;&#36182;&#27880;&#23556;&#20102;&#12290;&#26356;&#37325;&#35201;&#30340;&#26159;&#65292;<tt class="interfacename">@Autowired</tt>&#27880;&#35299;&#25552;&#20379;&#20102;&#19982;<a href="beans.html#beans-factory-autowire" title="3.3.5.&nbsp;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;">Section&nbsp;3.3.5, &#8220;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;&#8221;</a>&#19968;&#33410;&#20013;&#25551;&#36848;&#30340;&#21516;&#26679;&#21151;&#33021;&#65292;&#24182;&#19988;&#25552;&#20379;&#20102;&#26356;&#32454;&#33268;&#30340;&#25511;&#21046;&#19982;&#26356;&#22909;&#30340;&#36866;&#24212;&#24615;&#12290;Spring 2.5 &#20063;&#25903;&#25345; JSR-250 &#20013;&#30340;&#19968;&#20123;&#27880;&#35299;&#65292;&#20363;&#22914;<tt class="interfacename">@Resource</tt>&#65292;<tt class="interfacename">@PostConstruct</tt>&#65292;&#20197;&#21450;<tt class="interfacename">@PreDestroy</tt>&#12290;&#24403;&#28982;&#65292;&#35201;&#20351;&#27880;&#35299;&#21487;&#29992;&#65292;&#24744;&#24517;&#39035;&#20351;&#29992; Java 5 (Tiger)&#25110;&#26356;&#26032;&#30340;&#29256;&#26412;&#65292;&#20197;&#20351;&#24471;&#21487;&#20197;&#35775;&#38382;&#28304;&#20195;&#30721;&#23618;&#27425;&#30340;&#27880;&#35299;&#12290;&#36825;&#20123;&#27880;&#35299;&#21487;&#20197;&#34987;&#27880;&#20876;&#20026;&#29420;&#31435; bean &#30340;&#23450;&#20041;&#65292;&#20294;&#23427;&#20204;&#20063;&#21487;&#20197;&#34987;&#38544;&#24335;&#22320;&#27880;&#20876;&#65292;&#36890;&#36807;&#22522;&#20110; XML &#30340;&#37197;&#32622;&#26041;&#24335;&#65292;&#22914;&#19979;&#20363;&#65288;&#35831;&#27880;&#24847;&#21253;&#21547; '<tt class="literal">context</tt>' &#21629;&#21517;&#31354;&#38388;&#65289;&#65306;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       <i class="lineannotation"><span class="lineannotation">xmlns:context="http://www.springframework.org/schema/context"</span></i>
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;
               
     <i class="lineannotation"><span class="lineannotation">&lt;context:annotation-config/&gt;</span></i>
     
&lt;/beans&gt;</pre><p>&#65288;&#38544;&#24335;&#27880;&#20876; post-processors &#21253;&#25324;&#20102; <a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessor.html" target="_top"><tt class="classname">AutowiredAnnotationBeanPostProcessor</tt></a>&#65292;<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/context/annotation/CommonAnnotationBeanPostProcessor.html" target="_top"><tt class="classname">CommonAnnotationBeanPostProcessor</tt></a>&#65292;<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/orm/jpa/support/PersistenceAnnotationBeanPostProcessor.html" target="_top"><tt class="classname">PersistenceAnnotationBeanPostProcessor</tt></a>&#65292;&#20063;&#21253;&#25324;&#20102;&#21069;&#38754;&#25552;&#21040;&#30340; <a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/annotation/RequiredAnnotationBeanPostProcessor.html" target="_top"><tt class="classname">RequiredAnnotationBeanPostProcessor</tt></a>&#12290;&#65289;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-autowired-annotation"></a>3.11.1.&nbsp;<tt class="interfacename">@Autowired</tt></h3></div></div><div></div></div><p><tt class="interfacename">@Autowired</tt> &#27880;&#35299;&#21487;&#20197;&#29992;&#20110;&#8220;&#20256;&#32479;&#30340;&#8221;setter &#26041;&#27861;&#65292;&#22914;&#19979;&#20363;&#65306;</p><pre class="programlisting">public class SimpleMovieLister {

    private MovieFinder movieFinder;

    @Autowired
    public void setMovieFinder(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#36825;&#20010;&#27880;&#35299;&#20063;&#21487;&#20197;&#29992;&#20110;&#20197;&#23646;&#24615;&#20026;&#21442;&#25968;&#65295;&#22810;&#20010;&#21442;&#25968;&#30340;&#26041;&#27861;</p><pre class="programlisting">public class MovieRecommender {

    private MovieCatalog movieCatalog;
    
    private CustomerPreferenceDao customerPreferenceDao;

    @Autowired
    public void prepare(MovieCatalog movieCatalog, CustomerPreferenceDao customerPreferenceDao) {
        this.movieCatalog = movieCatalog;
        this.customerPreferenceDao = customerPreferenceDao;
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p><tt class="interfacename">@Autowired</tt>&#27880;&#35299;&#29978;&#33267;&#21487;&#20197;&#29992;&#20110;&#26500;&#36896;&#22120;&#19982;&#23383;&#27573;&#65306;</p><pre class="programlisting">public class MovieRecommender {

    @Autowired
    private MovieCatalog movieCatalog;
    
    private CustomerPreferenceDao customerPreferenceDao;

    @Autowired
    public MovieRecommender(CustomerPreferenceDao customerPreferenceDao) {
        this.customerPreferenceDao = customerPreferenceDao;
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#20063;&#21487;&#20197;&#19968;&#31181;&#25552;&#20379;&#26469;&#33258;<tt class="interfacename">ApplicationContext</tt>&#30340;&#29305;&#27530;&#31867;&#22411;&#30340;<span class="emphasis"><em>&#25152;&#26377;</em></span> beans&#65292;&#27880;&#35299;&#23383;&#27573;&#25110;&#32773;&#26041;&#27861;&#65292;&#20363;&#22914;&#65306;</p><pre class="programlisting">public class MovieRecommender {

    @Autowired
    private MovieCatalog[] movieCatalogs;

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#36825;&#21516;&#26679;&#36866;&#29992;&#20110;&#38598;&#21512;&#31867;&#22411;&#65306;</p><pre class="programlisting">public class MovieRecommender {

    private Set&lt;MovieCatalog&gt; movieCatalogs;
    
    @Autowired
    public void setMovieCatalogs(Set&lt;MovieCatalog&gt; movieCatalogs) {
        this.movieCatalogs = movieCatalogs;
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#29978;&#33267;&#26159; Maps &#20063;&#21487;&#20197;&#36825;&#26679;&#27880;&#35299;&#65292;&#21482;&#35201;&#36825;&#20010; Map &#30340; key &#31867;&#22411;&#20026; <tt class="classname">String</tt>&#12290;&#36825;&#20010; Map &#30340; values &#24212;&#35813;&#26159;&#24050;&#30693;&#30340;&#31867;&#22411;&#65292;&#24182;&#19988; keys &#24212;&#35813;&#21253;&#21547;&#31526;&#21512; bean &#30340;&#21629;&#21517;&#65306;</p><pre class="programlisting">public class MovieRecommender {

    private Map&lt;String, MovieCatalog&gt; movieCatalogs;
    
    @Autowired
    public void setMovieCatalogs(Map&lt;String, MovieCatalog&gt; movieCatalogs) {
        this.movieCatalogs = movieCatalogs;
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#22312;&#32570;&#30465;&#24773;&#20917;&#19979;&#65292;&#24403;&#20986;&#29616;<span class="emphasis"><em>0</em></span>&#20010;&#20505;&#36873;&#30340; beans&#26102;&#33258;&#21160;&#36830;&#25509;&#23558;&#22833;&#36133;&#65307;&#32570;&#30465;&#34892;&#20026;&#25226;&#36830;&#25509;&#26041;&#27861;&#65292;&#26500;&#36896;&#22120;&#65292;&#23383;&#27573;&#20551;&#35774;&#20026; <span class="emphasis"><em>required</em></span> &#30340;&#20381;&#36182;&#12290;&#36825;&#26679;&#30340;&#34892;&#20026;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">public class SimpleMovieLister {

    private MovieFinder movieFinder;

    @Autowired(required=false)
    public void setMovieFinder(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#34429;&#28982;&#24403; <span class="emphasis"><em>&#19968;&#20010;&#31867;&#21482;&#26377;&#19968;&#20010;&#36830;&#25509;&#26500;&#36896;&#22120;&#26102;</em></span>&#23427;&#23558;&#34987;&#26631;&#35760;&#20026; <span class="emphasis"><em>required</em></span>&#65292; &#20294;&#26159;&#36824;&#26159;&#21487;&#20197;&#26631;&#35760;&#22810;&#20010;&#26500;&#36896;&#22120;&#30340;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#27599;&#19968;&#20010;&#26500;&#36896;&#22120;&#37117;&#26377;&#21487;&#33021;&#34987;&#35748;&#20026;&#26159;&#36830;&#25509;&#26500;&#36896;&#22120;&#65292; Spring &#23558;&#20250;&#25226;&#20381;&#36182;&#20851;&#31995;&#33021;&#22815;&#28385;&#36275;&#30340;&#26500;&#36896;&#22120;&#35748;&#20026;&#26159;<span class="emphasis"><em>greediest</em></span> &#30340;&#26500;&#36896;&#22120;&#12290;</p></td></tr></table></div><p><tt class="interfacename">@Autowired</tt>&#20063;&#33021;&#29992;&#20110;&#24635;&#25152;&#21608;&#30693;&#30340;&#8220;&#21487;&#35299;&#20915;&#30340;&#20381;&#36182;&#8221;&#65306;<tt class="interfacename">BeanFactory</tt>&#25509;&#21475;&#65292;<tt class="interfacename">ApplicationContext</tt>&#25509;&#21475;&#65292;<tt class="interfacename">ResourceLoader</tt>&#25509;&#21475;&#65292;<tt class="interfacename">ApplicationEventPublisher</tt>&#25509;&#21475;&#65292;&#36824;&#26377;<tt class="interfacename">MessageSource</tt>&#25509;&#21475;&#12290;&#36825;&#20123;&#25509;&#21475;&#65288;&#36824;&#26377;&#23427;&#20204;&#30340;&#25193;&#23637;&#65292;&#20363;&#22914;<tt class="interfacename">ConfigurableApplicationContext</tt>&#25110;&#32773;<tt class="interfacename">ResourcePatternResolver</tt>&#65289;&#23558;&#21487;&#20197;&#33258;&#21160;&#35299;&#20915;&#20381;&#36182;&#65292;&#27809;&#26377;&#20219;&#20309;&#29305;&#27530;&#24517;&#39035;&#30340;&#20854;&#23427;&#27493;&#39588;&#38656;&#35201;&#12290;</p><pre class="programlisting">public class MovieRecommender {

    @Autowired
    private ApplicationContext context;

    public MovieRecommender() {
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-autowired-annotation-qualifiers"></a>3.11.2.&nbsp;&#22522;&#20110;&#27880;&#35299;&#30340;&#33258;&#21160;&#36830;&#25509;&#24494;&#35843;</h3></div></div><div></div></div><p>&#22240;&#20026;&#36890;&#36807;&#31867;&#22411;&#30340;&#33258;&#21160;&#36830;&#25509;&#21487;&#33021;&#20250;&#26377;&#22810;&#20010;&#20505;&#36873;&#65292;&#22240;&#27492;&#32463;&#24120;&#38656;&#35201;&#22312;&#36873;&#25321;&#36807;&#31243;&#20013;&#21152;&#20197;&#25511;&#21046;&#12290;&#19968;&#31181;&#26041;&#27861;&#21435;&#23436;&#25104;&#36825;&#20010;&#25511;&#21046;&#23601;&#26159;&#20351;&#29992;<tt class="interfacename">@Qualifier</tt>&#27880;&#35299;&#12290;&#22312;&#26368;&#31616;&#21333;&#30340;&#24773;&#20917;&#19979;&#65292;&#24744;&#33021;&#22815;&#36890;&#36807;&#21629;&#21517;&#26041;&#24335;&#21435;&#23454;&#29616;&#36825;&#20010;&#33258;&#21160;&#36830;&#25509;&#65306;</p><pre class="programlisting">public class MovieRecommender {

    @Autowired
    <span class="bold"><b>@Qualifier("mainCatalog")</b></span>
    private MovieCatalog movieCatalog;

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p><tt class="interfacename">@Qualifier</tt>&#27880;&#35299;&#20063;&#33021;&#22815;&#34987;&#25351;&#23450;&#20026;&#26500;&#36896;&#22120;&#30340;&#21442;&#25968;&#25110;&#32773;&#26041;&#27861;&#30340;&#21442;&#25968;&#65306;</p><pre class="programlisting">public class MovieRecommender {

    private MovieCatalog movieCatalog;
    
    private CustomerPreferenceDao customerPreferenceDao;

    @Autowired
    public void prepare(<span class="bold"><b>@Qualifier("mainCatalog")</b></span> MovieCatalog movieCatalog, CustomerPreferenceDao customerPreferenceDao) {
        this.movieCatalog = movieCatalog;
        this.customerPreferenceDao = customerPreferenceDao;
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#24744;&#20063;&#21487;&#20197;&#21019;&#24314;&#24744;&#33258;&#23450;&#20041;&#30340;&#38480;&#23450;&#22120;&#27880;&#35299;&#12290;&#24744;&#21482;&#35201;&#22312;&#23450;&#20041;&#19968;&#20010;&#27880;&#35299;&#26102;&#25552;&#20379;<tt class="interfacename">@Qualifier</tt>&#27880;&#35299;&#23601;&#21487;&#20197;&#20102;&#65306;</p><pre class="programlisting">@Target({ElementType.FIELD, ElementType.PARAMETER})
@Retention(RetentionPolicy.RUNTIME)
<span class="bold"><b>@Qualifier</b></span>
public @interface Genre {

    String value();

}</pre><p>&#28982;&#21518;&#24744;&#23601;&#33021;&#22815;&#23558;&#36825;&#20010;&#33258;&#23450;&#20041;&#30340;&#38480;&#23450;&#22120;&#19982;&#21442;&#25968;&#29992;&#20110;&#33258;&#21160;&#36830;&#25509;&#30340;&#23383;&#27573;&#65306;</p><pre class="programlisting">public class MovieRecommender {

    @Autowired
    <span class="bold"><b>@Genre("Action")</b></span>
    private MovieCatalog actionCatalog;
    
    private MovieCatalog comedyCatalog;
    
    @Autowired
    public void setComedyCatalog(<span class="bold"><b>@Genre("Comedy")</b></span> MovieCatalog comedyCatalog) {
        this.comedyCatalog = comedyCatalog;
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#19979;&#19968;&#27493;&#23601;&#26159;&#25552;&#20379;&#20449;&#24687;&#32473;&#20505;&#36873;&#30340; bean &#30340;&#23450;&#20041;&#12290;&#24744;&#33021;&#22815;&#28155;&#21152;<tt class="literal">&lt;qualifier/&gt;</tt>&#26631;&#31614;&#20316;&#20026;<tt class="literal">&lt;bean/&gt;</tt>&#26631;&#31614;&#30340;&#23376;&#20803;&#32032;&#65292;&#28982;&#21518;&#25351;&#23450;<tt class="literal">'type'</tt>&#36824;&#26377;<tt class="literal">'value'</tt>&#20197;&#21305;&#37197;&#24744;&#30340;&#33258;&#23450;&#20041;&#38480;&#23450;&#22120;&#27880;&#35299;&#12290;&#31867;&#22411;&#24517;&#39035;&#21305;&#37197;&#27880;&#35299;&#30340;&#20840;&#21517;&#65292;&#25110;&#32773;&#26159;&#19968;&#20010;&#19981;&#21361;&#38505;&#30340;&#12289;&#26041;&#20415;&#19968;&#28857;&#30340;&#21517;&#23383;&#65292;&#24744;&#20063;&#21487;&#20197;&#20351;&#29992;&#8220;&#30701;&#8221; &#31867;&#21517;&#12290;&#21442;&#30475;&#19979;&#20363;&#65306;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;

    &lt;context:annotation-config/&gt;

    &lt;bean class="example.SimpleMovieCatalog"&gt;
        <span class="bold"><b>&lt;qualifier type="Genre" value="Action"/&gt;</b></span>
        <i class="lineannotation"><span class="lineannotation">&lt;!-- inject any dependencies required by this bean --&gt;</span></i>
    &lt;/bean&gt;

    &lt;bean class="example.SimpleMovieCatalog"&gt;
        <span class="bold"><b>&lt;qualifier type="example.Genre" value="Comedy"/&gt;</b></span>
        <i class="lineannotation"><span class="lineannotation">&lt;!-- inject any dependencies required by this bean --&gt;</span></i>
    &lt;/bean&gt;
    
    &lt;bean id="movieRecommender" class="example.MovieRecommender"/&gt;

&lt;/beans&gt;
</pre><p>&#22312;&#19979;&#19968;&#33410;&#65292;&#39064;&#30446;&#26159;<a href="beans.html#beans-classpath-scanning" title="3.12.&nbsp;&#23545;&#21463;&#31649;&#32452;&#20214;&#30340;Classpath&#25195;&#25551;">Section&nbsp;3.12, &#8220;&#23545;&#21463;&#31649;&#32452;&#20214;&#30340;Classpath&#25195;&#25551;&#8221;</a>&#65292;&#24744;&#23558;&#30475;&#21040;&#20351;&#29992;XML&#25552;&#20379;&#32473;&#38480;&#23450;&#22120;&#20803;&#25968;&#25454;&#19988;&#22522;&#20110;&#27880;&#35299;&#30340;&#21487;&#36873;&#35299;&#20915;&#26041;&#26696;&#12290;&#29305;&#21035;&#22320;&#65292;&#35831;&#21442;&#30475;&#65306;<a href="beans.html#beans-scanning-qualifiers" title="3.12.6.&nbsp;&#29992;&#27880;&#35299;&#25552;&#20379;&#38480;&#23450;&#31526;&#20803;&#25968;&#25454;">Section&nbsp;3.12.6, &#8220;&#29992;&#27880;&#35299;&#25552;&#20379;&#38480;&#23450;&#31526;&#20803;&#25968;&#25454;&#8221;</a>&#12290;</p><p>&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#65292;&#26377;&#36275;&#22815;&#20805;&#20998;&#30340;&#29702;&#30001;&#21435;&#20351;&#29992;&#19981;&#24102;&#20540;&#30340;&#27880;&#35299;&#12290;&#36825;&#20351;&#24471;&#27880;&#35299;&#21487;&#20197;&#25552;&#20379;&#26356;&#22810;&#35299;&#20915;&#19981;&#21516;&#31867;&#22411;&#20381;&#36182;&#30340;&#33021;&#21147;&#12290;&#20363;&#22914;&#65292;&#22312; Internet &#36830;&#25509;&#19981;&#21487;&#29992;&#26102;&#65292;&#24744;&#21487;&#20197;&#25552;&#20379;&#19968;&#20010;<span class="emphasis"><em>&#31163;&#32447;</em></span>&#30340;&#25628;&#32034;&#30446;&#24405;&#12290;&#39318;&#20808;&#23601;&#35201;&#23450;&#20041;&#19968;&#20010;&#31616;&#21333;&#30340;&#27880;&#35299;&#65306;</p><pre class="programlisting">@Target({ElementType.FIELD, ElementType.PARAMETER})
@Retention(RetentionPolicy.RUNTIME)
@Qualifier
public @interface Offline {

}</pre><p>&#28982;&#21518;&#28155;&#21152;&#36825;&#20010;&#27880;&#35299;&#32473;&#23383;&#27573;&#20316;&#20026;&#33258;&#21160;&#36830;&#25509;&#65306;</p><pre class="programlisting">public class MovieRecommender {

    @Autowired
    <span class="bold"><b>@Offline</b></span>
    private MovieCatalog offlineCatalog;

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#29616;&#22312;&#65292;&#36825;&#20010; bean &#30340;&#23450;&#24433;&#21482;&#32452;&#35201;&#19968;&#20010;&#38480;&#23450;&#22120;&#20102;&#65306;</p><pre class="programlisting">&lt;bean class="example.SimpleMovieCatalog"&gt;
    <span class="bold"><b>&lt;qualifier type="Offline"/&gt;</b></span>
    <i class="lineannotation"><span class="lineannotation">&lt;!-- inject any dependencies required by this bean --&gt;</span></i>
&lt;/bean&gt;</pre><p>&#21478;&#22806;&#65292;&#20063;&#21487;&#20197;&#23450;&#21046;&#33258;&#24049;&#30340;&#38480;&#23450;&#22120;&#27880;&#35299;&#21435;&#20351;&#29992;&#21629;&#21517;&#30340;&#23646;&#24615;&#25110;&#32773;&#31616;&#21333;&#30340;<tt class="literal">'value'</tt>&#23646;&#24615;&#12290;&#22914;&#26524;&#33258;&#21160;&#36830;&#25509;&#26102;&#22810;&#20010;&#23646;&#24615;&#20540;&#34987;&#25351;&#23450;&#32473;&#20102;&#19968;&#20010;&#23383;&#27573;&#25110;&#32773;&#21442;&#25968;&#65292;&#37027;&#20040;&#19968;&#20010; bean &#30340;&#23450;&#20041;&#24517;&#39035;<span class="emphasis"><em>&#20840;&#37096;</em></span>&#21305;&#37197;&#36825;&#20123;&#23646;&#24615;&#30340;&#20540;&#12290;&#20363;&#22914;&#65292;&#32771;&#34385;&#22914;&#19979;&#30340;&#27880;&#35299;&#23450;&#20041;&#65306; </p><pre class="programlisting">@Target({ElementType.FIELD, ElementType.PARAMETER})
@Retention(RetentionPolicy.RUNTIME)
@Qualifier
public @interface MovieQualifier {

    String genre();
    
    Format format();

}</pre><p>&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;<tt class="literal">Format</tt>&#26159;&#19968;&#20010;&#26522;&#20030;&#65306;</p><pre class="programlisting">public enum Format {
    
    VHS, DVD, BLURAY
}</pre><p>&#36825;&#20123;&#23383;&#27573;&#23558;&#19982;&#33258;&#23450;&#20041;&#30340;&#38480;&#23450;&#22120;&#36827;&#34892;&#33258;&#21160;&#36830;&#25509;&#65292;&#21253;&#25324;&#20102;&#27599;&#20010;&#23646;&#24615;&#30340;&#20540;&#65306;<tt class="literal">'genre'</tt> &#20197;&#21450; <tt class="literal">'format'</tt>&#12290;</p><pre class="programlisting">public class MovieRecommender {

    @Autowired
    @MovieQualifier(format=Format.VHS, genre="Action")
    private MovieCatalog actionVhsCatalog;

    @Autowired
    @MovieQualifier(format=Format.VHS, genre="Comedy")
    private MovieCatalog comedyVhsCatalog;

    @Autowired
    @MovieQualifier(format=Format.DVD, genre="Action")
    private MovieCatalog actionDvdCatalog;

    @Autowired
    @MovieQualifier(format=Format.BLURAY, genre="Comedy")
    private MovieCatalog comedyBluRayCatalog;
   
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#26368;&#32456;&#65292;&#36825;&#20010; bean &#30340;&#23450;&#20041;&#24212;&#35813;&#19982;&#38480;&#23450;&#22120;&#21305;&#37197;&#30340;&#20540;&#12290;&#36825;&#20010;&#21015;&#23376;&#23558;&#35828;&#26126;bean &#30340;<span class="emphasis"><em>&#20803;</em></span>&#23646;&#24615;&#21487;&#20197;&#29992;&#20110;&#26367;&#20195;<tt class="literal">&lt;qualifier/&gt;</tt>&#30340;&#23376;&#20803;&#32032;&#12290;&#37027;&#26679;&#30340;&#35805;&#65292;<tt class="literal">&lt;qualifier/&gt;</tt>&#20197;&#21450;&#23427;&#30340;&#23646;&#24615;&#23558;&#20248;&#20808;&#32771;&#34385;&#65292;&#20294;&#26159;&#22914;&#26524;&#27809;&#26377;&#38480;&#23450;&#22120;&#30340;&#35805;&#65288;&#21442;&#30475;&#22914;&#19979;&#23450;&#20041;&#30340;&#21518;&#20004;&#20010; bean &#65289;&#65292;&#33258;&#21160;&#36830;&#25509;&#26426;&#21046;&#23558;&#21462;&#28040;&#20197;<tt class="literal">&lt;meta/&gt;</tt>&#26631;&#31614;&#26631;&#35760;&#30340;&#20540;&#12290;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;

    &lt;context:annotation-config/&gt;

    &lt;bean class="example.SimpleMovieCatalog"&gt;
        &lt;qualifier type="MovieQualifier"&gt;
            &lt;attribute name="format" value="VHS"/&gt;
            &lt;attribute name="genre" value="Action"/&gt;
        &lt;/qualifier&gt;
        <i class="lineannotation"><span class="lineannotation">&lt;!-- inject any dependencies required by this bean --&gt;</span></i>
    &lt;/bean&gt;

    &lt;bean class="example.SimpleMovieCatalog"&gt;
        &lt;qualifier type="MovieQualifier"&gt;
            &lt;attribute name="format" value="VHS"/&gt;
            &lt;attribute name="genre" value="Comedy"/&gt;
        &lt;/qualifier&gt;
        <i class="lineannotation"><span class="lineannotation">&lt;!-- inject any dependencies required by this bean --&gt;</span></i>
    &lt;/bean&gt;

    &lt;bean class="example.SimpleMovieCatalog"&gt;
        &lt;meta key="format" value="DVD"/&gt;
        &lt;meta key="genre" value="Action"/&gt;
        <i class="lineannotation"><span class="lineannotation">&lt;!-- inject any dependencies required by this bean --&gt;</span></i>
    &lt;/bean&gt;
    
    &lt;bean class="example.SimpleMovieCatalog"&gt;
        &lt;meta key="format" value="BLURAY"/&gt;
        &lt;meta key="genre" value="Comedy"/&gt;
        <i class="lineannotation"><span class="lineannotation">&lt;!-- inject any dependencies required by this bean --&gt;</span></i>
    &lt;/bean&gt;

&lt;/beans&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-custom-autowire-configurer"></a>3.11.3.&nbsp;<tt class="classname">CustomAutowireConfigurer</tt></h3></div></div><div></div></div><p><a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/config/CustomAutowireConfigurer.html" target="_top"><tt class="classname">CustomAutowireConfigurer</tt></a>&#26159;&#19968;&#20010;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#65292;&#23427;&#21487;&#20197;&#20351;&#24471;&#22312;&#33258;&#21160;&#36830;&#25509;&#36807;&#31243;&#20013;&#20570;&#26356;&#22810;&#30340;&#33258;&#23450;&#20041;&#36873;&#25321;&#12290;&#29305;&#27530;&#22320;&#65292;&#23427;&#20801;&#35768;&#24744;&#27880;&#20876;&#24744;&#33258;&#24049;&#30340;&#33258;&#23450;&#20041;&#38480;&#23450;&#22120;&#27880;&#35299;&#31867;&#22411;&#65292;&#29978;&#33267;&#26159;&#23427;&#20204;&#27809;&#26377;&#20351;&#29992; Spring &#30340;<tt class="interfacename">@Qualifier</tt>&#27880;&#35299;&#26631;&#27880;&#23427;&#20204;&#33258;&#24049;&#12290;</p><pre class="programlisting">&lt;bean id="customAutowireConfigurer" class="org.springframework.beans.factory.annotation.CustomAutowireConfigurer"&gt;
    &lt;property name="customQualifierTypes"&gt;
        &lt;set&gt;
            &lt;value&gt;example.CustomQualifier&lt;/value&gt;
        &lt;/set&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p>&#35831;&#27880;&#24847;&#65292;<tt class="interfacename">AutowireCandidateResolver</tt>&#30340;&#23454;&#29616;&#23558;&#20381;&#36182;&#20110; Java &#29256;&#26412;&#12290;&#22914;&#26524;&#22312; Java 5 &#20197;&#19979;&#65292;&#38480;&#23450;&#22120;&#27880;&#35299;&#26159;&#19981;&#34987;&#25903;&#25345;&#30340;&#65292;&#22240;&#27492;&#33258;&#21160;&#36830;&#25509;&#21518;&#36873;&#23558;&#34987;<tt class="literal">'autowire-candidate'</tt>&#30340;&#20540;&#25110;&#32773;&#22312;<tt class="literal">&lt;beans/&gt;</tt>&#20013;&#20803;&#32032;<tt class="literal">'default-autowire-candidates'</tt>&#21487;&#29992;&#30340;&#27169;&#24335;&#25152;&#20915;&#23450;&#12290;&#22914;&#26524;&#36816;&#34892;&#22312; Java 5 &#25110;&#32773;&#26356;&#26032;&#30340;&#29256;&#26412;&#19978;&#65292;<tt class="interfacename">@Qualifier</tt>&#27880;&#35299;&#25110;&#32773;&#20219;&#20309;&#33258;&#23450;&#20041;&#24182;&#22312;<tt class="classname">CustomAutowireConfigurer</tt>&#19978;&#27880;&#20876;&#36807;&#30340;&#27880;&#35299;&#37117;&#23558;&#27491;&#24120;&#24037;&#20316;&#12290;</p><p>&#24573;&#30053; Java &#29256;&#26412;&#65292;&#20915;&#23450;&#8220;&#20027;&#35201;&#8221;&#30340;&#21518;&#36873;&#65288;&#24403;&#22810;&#20010; beans &#37117;&#37197;&#32622;&#20026;&#33258;&#21160;&#36830;&#25509;&#21518;&#36873;&#26102;&#65289;&#37117;&#26159;&#19968;&#26679;&#30340;&#65306;&#22312;&#36825;&#20123;&#21518;&#36873;&#20013;&#21482;&#35201;&#19968;&#20010; bean &#30340;<tt class="literal">'primary'</tt>&#23646;&#24615;&#23450;&#20041;&#20026;<tt class="literal">'true'</tt>&#21363;&#21487;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-resource-annotation"></a>3.11.4.&nbsp;<tt class="interfacename">@Resource</tt></h3></div></div><div></div></div><p>Spring &#20063;&#25552;&#20379;&#20102;&#20351;&#29992; JSR-250 bean &#23646;&#24615;&#25903;&#25345;&#30340;&#27880;&#23556;&#26041;&#24335;&#12290;&#36825;&#26159;&#19968;&#31181;&#22312; Java EE 5 &#19982; Java 6 &#20013;&#26222;&#36941;&#20351;&#29992;&#30340;&#26041;&#24335;&#65288;&#20363;&#22914;&#65292;&#22312; JSF 1.2 &#20013;&#26144;&#23556; beans &#25110;&#32773; JAX-WS 2.0 &#31471;&#28857;&#65289;&#65292;&#23545;&#20110;Spring &#25176;&#31649;&#30340;&#23545;&#35937; Spring &#21487;&#20197;&#20197;&#36825;&#31181;&#26041;&#24335;&#25903;&#25345;&#26144;&#23556;&#12290;</p><p><tt class="interfacename">@Resource</tt>&#26377;&#19968;&#20010;&#8216;name&#8217;&#23646;&#24615;&#65292;&#32570;&#30465;&#26102;&#65292;Spring &#23558;&#36825;&#20010;&#20540;&#35299;&#37322;&#20026;&#35201;&#27880;&#23556;&#30340; bean &#30340;&#21517;&#23383;&#12290;&#25442;&#21477;&#35805;&#35828;&#65292;&#22914;&#26524;&#36981;&#24490;<span class="emphasis"><em>by-name</em></span>&#30340;&#35821;&#27861;&#65292;&#22914;&#19979;&#20363;&#65306;</p><pre class="programlisting">public class SimpleMovieLister {

    private MovieFinder movieFinder;

    <span class="bold"><b>@Resource(name="myMovieFinder")</b></span>
    public void setMovieFinder(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }
}</pre><p>&#22914;&#26524;&#27809;&#26377;&#26174;&#24335;&#22320;&#32473;&#20986;&#21517;&#23383;&#65292;&#32570;&#30465;&#30340;&#21517;&#23383;&#23558;&#32487;&#25215;&#20110;&#23383;&#27573;&#21517;&#25110;&#32773; setter &#26041;&#27861;&#21517;&#65306;&#22914;&#26524;&#26159;&#23383;&#27573;&#21517;&#65292;&#23427;&#23558;&#31616;&#21270;&#25110;&#32773;&#31561;&#20215;&#20110;&#23383;&#27573;&#21517;&#65307;&#22914;&#26524;&#26159; setter &#26041;&#27861;&#21517;&#65292;&#23427;&#23558;&#31561;&#20215;&#20110; bean &#23646;&#24615;&#21517;&#12290;&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#20351;&#29992;&#21517;&#23383; "movieFinder" &#27880;&#23556;&#21040;&#23427;&#30340; setter &#26041;&#27861;&#65306;</p><pre class="programlisting">public class SimpleMovieLister {

    private MovieFinder movieFinder;

    <span class="bold"><b>@Resource</b></span>
    public void setMovieFinder(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#27880;&#35299;&#25552;&#20379;&#30340;&#21517;&#23383;&#23558;&#34987;<tt class="interfacename">BeanFactory</tt>&#35299;&#26512;&#20026; bean &#21517;&#12290;&#35831;&#27880;&#24847;&#65292;&#36825;&#20123;&#21517;&#23383;&#20063;&#21487;&#33021;&#36890;&#36807; JNDI &#34987;&#35299;&#26512;&#65288;&#38656;&#35201;&#37197;&#32622; Spring &#30340;<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/jndi/support/SimpleJndiBeanFactory.html" target="_top"><tt class="classname">SimpleJndiBeanFactory</tt></a>&#65289;&#12290;&#19981;&#36807;&#65292;&#24314;&#35758;&#24744;&#20381;&#38752;&#32570;&#30465;&#34892;&#20026;&#19982; Spring &#30340; JNDI &#26597;&#25214;&#21151;&#33021;&#12290;</p></td></tr></table></div><p>&#19982;<tt class="interfacename">@Autowired</tt>&#31867;&#20284;&#65292;<tt class="interfacename">@Resource</tt>&#21487;&#20197;&#22238;&#36864;&#20026;&#19982;&#26631;&#20934; bean &#31867;&#22411;&#21305;&#37197;&#65288;&#20363;&#22914;&#65292;&#20351;&#29992;&#21407;&#22987;&#31867;&#22411;&#21305;&#37197;&#21462;&#20195;&#29305;&#27530;&#21629;&#21517; bean&#65289;&#26469;&#35299;&#20915;&#33879;&#21517;&#30340;"resolvable dependencies"&#65306;<tt class="interfacename">BeanFactory</tt> &#25509;&#21475;&#65292;<tt class="interfacename">ApplicationContext</tt> &#25509;&#21475;&#65292;<tt class="interfacename">ResourceLoader</tt> &#25509;&#21475;&#65292;<tt class="interfacename">ApplicationEventPublisher</tt> &#25509;&#21475;&#20197;&#21450; <tt class="interfacename">MessageSource</tt> &#25509;&#21475;&#12290;&#35831;&#27880;&#24847;&#65306;&#36825;&#21482;&#26377;&#36866;&#29992;&#20110;&#26410;&#25351;&#23450;&#21629;&#21517;&#30340;<tt class="interfacename">@Resource</tt>&#65281;</p><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#26377;&#19968;&#20010;<tt class="literal">customerPreferenceDao</tt>&#23383;&#27573;&#65292;&#39318;&#20808;&#35201;&#26597;&#25214;&#19968;&#20010;&#21517;&#21483; &#8220;customerPreferenceDao&#8221; &#30340; bean&#65292;&#28982;&#21518;&#22238;&#36864;&#20026;&#19968;&#20010;&#21407;&#22987;&#31867;&#22411;&#20197;&#21305;&#37197;&#31867;&#22411;<tt class="classname">CustomerPreferenceDao</tt>&#12290;"context" &#23383;&#27573;&#23558;&#22522;&#20110;&#24050;&#30693;&#35299;&#20915;&#30340;&#20381;&#36182;&#31867;&#22411;<tt class="interfacename">ApplicationContext</tt>&#32780;&#34987;&#27880;&#20837;&#12290;</p><pre class="programlisting">public class MovieRecommender {

    @Resource
    private CustomerPreferenceDao customerPreferenceDao;

    @Resource
    private ApplicationContext context;

    public MovieRecommender() {
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-postconstruct-and-predestroy-annotations"></a>3.11.5.&nbsp;<tt class="interfacename">@PostConstruct</tt> &#19982; <tt class="interfacename">@PreDestroy</tt></h3></div></div><div></div></div><p><tt class="classname">CommonAnnotationBeanPostProcessor</tt> &#19981;&#21482;&#26159;&#33021;&#35782;&#21035;<tt class="interfacename">@Resource</tt>&#27880;&#35299;&#65292;&#32780;&#19988;&#20063;&#33021;&#35782;&#21035; JSR-250 <span class="emphasis"><em>lifecycle</em></span>&#27880;&#35299;&#12290;&#22312; Spring 2.5 &#20013;&#65292;&#36825;&#20123;&#27880;&#35299;&#30340;&#25551;&#36848;&#35831;&#21442;&#30475;<a href="beans.html#beans-factory-lifecycle-initializingbean" title="3.5.1.1.&nbsp;&#21021;&#22987;&#21270;&#22238;&#35843;">initialization callbacks</a> &#19982; <a href="beans.html#beans-factory-lifecycle-disposablebean" title="3.5.1.2.&nbsp;&#26512;&#26500;&#22238;&#35843;">destruction callbacks</a>&#33410;&#12290;<tt class="classname">CommonAnnotationBeanPostProcessor</tt>&#24050;&#32463;&#22312; Spring &#30340;<tt class="interfacename">ApplicationContext</tt>&#20013;&#27880;&#20876;&#65292;&#24403;&#19968;&#20010;&#26041;&#27861;&#24102;&#26377;&#36825;&#20123;&#27880;&#35299;&#20043;&#19968;&#26102;&#65292;&#23558;&#34987;&#22312;&#20854;&#29983;&#21629;&#21608;&#26399;&#19982; Spring &#29983;&#21629;&#21608;&#26399;&#25509;&#21475;&#30340;&#26041;&#27861;&#25110;&#32773;&#26174;&#24335;&#22768;&#26126;&#22238;&#35843;&#26041;&#27861;&#21516;&#19968;&#21051;&#19978;&#35843;&#29992;&#12290;&#19979;&#38754;&#30340;&#20363;&#23376;&#37324;&#65292;&#32531;&#23384;&#23558;&#39044;&#32622;&#20110;&#21021;&#22987;&#21270;&#19982;&#38144;&#27585;&#38454;&#27573;&#12290;</p><pre class="programlisting">public class CachingMovieLister {

    @PostConstruct
    public void populateMovieCache() {
        <i class="lineannotation"><span class="lineannotation">// populates the movie cache upon initialization...</span></i>
    }
    
    @PreDestroy
    public void clearMovieCache() {
        <i class="lineannotation"><span class="lineannotation">// clears the movie cache upon destruction...</span></i>
    }
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>
		&#20851;&#20110;&#32452;&#21512;&#19981;&#21516;&#30340;&#29983;&#21629;&#21608;&#26399;&#26426;&#21046;&#65292;&#35831;&#26597;&#30475;<a href="beans.html#beans-factory-lifecycle-combined-effects" title="3.5.1.4.&nbsp;&#32452;&#21512;&#29983;&#21629;&#21608;&#26399;&#26426;&#21046;">Section&nbsp;3.5.1.4, &#8220;&#32452;&#21512;&#29983;&#21629;&#21608;&#26399;&#26426;&#21046;&#8221;</a>&#12290;</p></td></tr></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="beans-classpath-scanning"></a>3.12.&nbsp;&#23545;&#21463;&#31649;&#32452;&#20214;&#30340;Classpath&#25195;&#25551;</h2></div></div><div></div></div><p>&#21040;&#30446;&#21069;&#20026;&#27490;&#26412;&#31456;&#20013;&#30340;&#22823;&#22810;&#25968;&#20363;&#23376;&#37117;&#20351;&#29992;XML&#26469;&#25351;&#23450;&#37197;&#32622;&#20803;&#25968;&#25454;&#65292;
    &#36825;&#20123;&#20803;&#25968;&#25454;&#20250;&#29983;&#25104;Spring&#23481;&#22120;&#20013;&#30340;&#27599;&#20010;<tt class="interfacename">BeanDefinition</tt>&#12290;
    &#19978;&#19968;&#33410;(<a href="beans.html#beans-annotation-config" title="3.11.&nbsp;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;">Section&nbsp;3.11, &#8220;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;&#8221;</a>)&#28436;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992;&#20195;&#30721;&#32423;&#27880;&#35299;&#26469;&#25552;&#20379;&#22823;&#37327;&#37197;&#32622;&#20803;&#25968;&#25454;&#12290;
    &#28982;&#32780;&#65292;&#21363;&#20351;&#26159;&#22312;&#37027;&#20123;&#20363;&#23376;&#20013;&#65292;&#8220;&#22522;&#30784;&#8221;bean&#23450;&#20041;&#36824;&#26159;&#26174;&#24335;&#22320;&#23450;&#20041;&#22312;XML&#25991;&#20214;&#20013;&#65292;&#27880;&#35299;&#21482;&#26159;&#29992;&#26469;&#39537;&#21160;&#20381;&#36182;&#27880;&#20837;&#30340;&#12290;
    &#26412;&#33410;&#20013;&#20250;&#20171;&#32461;&#19968;&#31181;&#26041;&#27861;&#65292;&#36890;&#36807;&#25195;&#25551;classpath&#24182;&#21305;&#37197;<span class="emphasis"><em>&#36807;&#28388;&#22120;</em></span>&#26469;&#38544;&#24335;&#22320;&#26816;&#27979;<span class="emphasis"><em>&#20505;&#36873;&#32452;&#20214;</em></span> (candidate components)&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-stereotype-annotations"></a>3.12.1.&nbsp;<tt class="interfacename">@Component</tt>&#21644;&#26356;&#22810;&#20856;&#22411;&#21270;&#27880;&#35299;</h3></div></div><div></div></div><p>&#20174;Spring 2.0&#24320;&#22987;&#65292;&#24341;&#20837;&#20102;<tt class="interfacename">@Repository</tt>&#27880;&#35299;&#65292;
      &#29992;&#23427;&#26469;&#26631;&#35760;&#20805;&#24403;&#20648;&#23384;&#24211;(&#21448;&#31216; Data Access Object&#25110;DAO)&#35282;&#33394;&#25110;&#20856;&#22411;&#30340;&#31867;&#12290;&#21033;&#29992;&#36825;&#20010;&#26631;&#35760;&#21487;&#20197;&#20570;&#24456;&#22810;&#20107;&#65292;
      &#20854;&#20013;&#20043;&#19968;&#23601;&#26159;&#23545;<a href="orm.html#orm-jpa-exceptions" title="12.6.4.&nbsp;&#24322;&#24120;&#36716;&#21270;">Section&nbsp;12.6.4, &#8220;&#24322;&#24120;&#36716;&#21270;&#8221;</a>&#20013;&#25551;&#36848;&#30340;&#24322;&#24120;&#36827;&#34892;&#33258;&#21160;&#36716;&#25442;&#12290;</p><p>Spring 2.5&#24341;&#20837;&#20102;&#26356;&#22810;&#20856;&#22411;&#21270;&#27880;&#35299;(stereotype annotations)&#65306;
      <tt class="interfacename">@Component</tt>&#12289;<tt class="interfacename">@Service</tt>&#21644;
      <tt class="interfacename">@Controller</tt>&#12290;
      <tt class="interfacename">@Component</tt>&#26159;&#25152;&#26377;&#21463;Spring&#31649;&#29702;&#32452;&#20214;&#30340;&#36890;&#29992;&#24418;&#24335;&#65307;
      &#32780;<tt class="interfacename">@Repository</tt>&#12289;<tt class="interfacename">@Service</tt>&#21644;
      <tt class="interfacename">@Controller</tt>&#21017;&#26159;<tt class="interfacename">@Component</tt>&#30340;&#32454;&#21270;&#65292;
      &#29992;&#26469;&#34920;&#31034;&#26356;&#20855;&#20307;&#30340;&#29992;&#20363;(&#20363;&#22914;&#65292;&#20998;&#21035;&#23545;&#24212;&#20102;&#25345;&#20037;&#21270;&#23618;&#12289;&#26381;&#21153;&#23618;&#21644;&#34920;&#29616;&#23618;)&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;
      &#20320;&#33021;&#29992;<tt class="interfacename">@Component</tt>&#26469;&#27880;&#35299;&#20320;&#30340;&#32452;&#20214;&#31867;&#65292;
      &#20294;&#22914;&#26524;&#29992;<tt class="interfacename">@Repository</tt>&#12289;<tt class="interfacename">@Service</tt>
      &#25110;<tt class="interfacename">@Controller</tt>&#26469;&#27880;&#35299;&#23427;&#20204;&#65292;&#20320;&#30340;&#31867;&#20063;&#35768;&#33021;&#26356;&#22909;&#22320;&#34987;&#24037;&#20855;&#22788;&#29702;&#65292;&#25110;&#19982;&#20999;&#38754;&#36827;&#34892;&#20851;&#32852;&#12290;
      &#20363;&#22914;&#65292;&#36825;&#20123;&#20856;&#22411;&#21270;&#27880;&#35299;&#21487;&#20197;&#25104;&#20026;&#29702;&#24819;&#30340;&#20999;&#20837;&#28857;&#30446;&#26631;&#12290;&#24403;&#28982;&#65292;&#22312;Spring Framework&#20197;&#21518;&#30340;&#29256;&#26412;&#20013;&#65292;
      <tt class="interfacename">@Repository</tt>&#12289;<tt class="interfacename">@Service</tt>&#21644;
      <tt class="interfacename">@Controller</tt>&#20063;&#35768;&#36824;&#33021;&#25658;&#24102;&#26356;&#22810;&#35821;&#20041;&#12290;&#22914;&#27492;&#19968;&#26469;&#65292;&#22914;&#26524;&#20320;&#27491;&#22312;&#32771;&#34385;&#26381;&#21153;&#23618;&#20013;&#26159;&#35813;&#29992;
      <tt class="interfacename">@Component</tt>&#36824;&#26159;<tt class="interfacename">@Service</tt>&#65292;
      &#37027;<tt class="interfacename">@Service</tt>&#26174;&#28982;&#26159;&#26356;&#22909;&#30340;&#36873;&#25321;&#12290;&#21516;&#26679;&#30340;&#65292;&#23601;&#20687;&#21069;&#38754;&#35828;&#30340;&#37027;&#26679;&#65292;
      <tt class="interfacename">@Repository</tt>&#24050;&#32463;&#33021;&#22312;&#25345;&#20037;&#21270;&#23618;&#20013;&#36827;&#34892;&#24322;&#24120;&#36716;&#25442;&#26102;&#34987;&#20316;&#20026;&#26631;&#35760;&#20351;&#29992;&#20102;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-scanning-autodetection"></a>3.12.2.&nbsp;&#33258;&#21160;&#26816;&#27979;&#32452;&#20214;</h3></div></div><div></div></div><p>Spring&#21487;&#20197;&#33258;&#21160;&#26816;&#27979;&#8220;&#34987;&#20856;&#22411;&#21270;&#8221;(stereotyped)&#30340;&#31867;&#65292;&#22312;<tt class="interfacename">ApplicationContext</tt>
      &#20013;&#27880;&#20876;&#30456;&#24212;&#30340;<tt class="interfacename">BeanDefinition</tt>&#12290;&#20363;&#22914;&#65292;&#19979;&#38754;&#30340;&#36825;&#20004;&#20010;&#31867;&#23601;&#28385;&#36275;&#36825;&#31181;&#33258;&#21160;&#26816;&#27979;&#30340;&#35201;&#27714;&#65306;</p><pre class="programlisting">@Service
public class SimpleMovieLister {

    private MovieFinder movieFinder;

    @Autowired
    public SimpleMovieLister(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }
}</pre><pre class="programlisting">@Repository
public class JpaMovieFinder implements MovieFinder {
    <i class="lineannotation"><span class="lineannotation">// implementation elided for clarity</span></i>
}</pre><p>&#35201;&#26816;&#27979;&#36825;&#20123;&#31867;&#24182;&#27880;&#20876;&#30456;&#24212;&#30340;bean&#65292;&#38656;&#35201;&#22312;XML&#20013;&#21253;&#21547;&#20197;&#19979;&#20803;&#32032;&#65292;&#20854;&#20013;'basePackage'&#26159;&#20004;&#20010;&#31867;&#30340;&#20844;&#20849;&#29238;&#21253;
      (&#25110;&#32773;&#21487;&#20197;&#29992;&#36887;&#21495;&#20998;&#38548;&#30340;&#21015;&#34920;&#26469;&#20998;&#21035;&#25351;&#23450;&#21253;&#21547;&#21508;&#20010;&#31867;&#30340;&#21253;)&#12290;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;
               
     &lt;context:component-scan base-package="org.example"/&gt;
     
&lt;/beans&gt;</pre><p>&#27492;&#22806;&#65292;&#22312;&#20351;&#29992;&#32452;&#20214;&#25195;&#25551;&#20803;&#32032;&#26102;&#65292;<tt class="interfacename">AutowiredAnnotationBeanPostProcessor</tt>
      &#21644;<tt class="interfacename">CommonAnnotationBeanPostProcessor</tt>&#20250;&#38544;&#24335;&#22320;&#34987;&#21253;&#25324;&#36827;&#26469;&#12290;
      &#20063;&#23601;&#26159;&#35828;&#65292;&#36830;&#20010;&#32452;&#20214;&#37117;&#20250;&#34987;&#33258;&#21160;&#26816;&#27979;<span class="emphasis"><em>&#24182;</em></span>&#32455;&#20837; - 
      &#25152;&#26377;&#36825;&#19968;&#20999;&#37117;&#19981;&#38656;&#35201;&#22312;XML&#20013;&#25552;&#20379;&#20219;&#20309;bean&#37197;&#32622;&#20803;&#25968;&#25454;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#36890;&#36807;&#21152;&#20837;&#20540;&#20026;'false'&#30340;<span class="emphasis"><em>annotation-config</em></span>&#23646;&#24615;&#21487;&#20197;&#31105;&#27490;&#27880;&#20876;&#36825;&#20123;&#21518;&#32622;&#22788;&#29702;&#22120;&#12290;</p></td></tr></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-scanning-filters"></a>3.12.3.&nbsp;&#20351;&#29992;&#36807;&#28388;&#22120;&#33258;&#23450;&#20041;&#25195;&#25551;</h3></div></div><div></div></div><p>&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#29992;<tt class="interfacename">@Component</tt>&#12289;
      <tt class="interfacename">@Repository</tt>&#12289;<tt class="interfacename">@Service</tt>&#25110;
      <tt class="interfacename">@Controller</tt> (&#25110;&#26412;&#36523;&#20351;&#29992;&#20102;<tt class="interfacename">@Component</tt>&#27880;&#35299;&#30340;&#33258;&#23450;&#20041;&#27880;&#35299;)
      &#27880;&#35299;&#30340;&#31867;&#26159;&#21807;&#19968;&#20250;&#34987;&#26816;&#27979;&#21040;&#30340;&#20505;&#36873;&#32452;&#20214;&#12290;&#20294;&#26159;&#21487;&#20197;&#24456;&#26041;&#20415;&#22320;&#36890;&#36807;&#33258;&#23450;&#20041;&#36807;&#28388;&#22120;&#26469;&#25913;&#21464;&#24182;&#25193;&#23637;&#36825;&#19968;&#34892;&#20026;&#12290;
      &#21487;&#20197;&#29992;'<tt class="literal">component-scan</tt>'&#30340;<span class="emphasis"><em>include-filter</em></span>&#25110;
      <span class="emphasis"><em>exclude-filter</em></span>&#23376;&#20803;&#32032;&#26469;&#36827;&#34892;&#28155;&#21152;&#12290;
      &#27599;&#20010;&#36807;&#28388;&#22120;&#20803;&#32032;&#37117;&#35201;&#27714;&#26377;'<tt class="literal">type</tt>'&#21644;'<tt class="literal">expression</tt>'&#23646;&#24615;&#12290;
      &#19979;&#38754;&#32473;&#20986;&#20102;&#22235;&#20010;&#24050;&#26377;&#30340;&#21487;&#36873;&#36807;&#28388;&#22120;&#12290;</p><div class="table"><a name="beans-scanning-filters-tbl"></a><p class="title"><b>Table&nbsp;3.7.&nbsp;&#36807;&#28388;&#22120;&#31867;&#22411;</b></p><table summary="&#36807;&#28388;&#22120;&#31867;&#22411;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#36807;&#28388;&#22120;&#31867;&#22411;</th><th>&#34920;&#36798;&#24335;&#33539;&#20363;</th></tr></thead><tbody><tr><td>annotation</td><td><p><tt class="classname">org.example.SomeAnnotation</tt></p></td></tr><tr><td>assignable</td><td><p><tt class="classname">org.example.SomeClass</tt></p></td></tr><tr><td>regex</td><td><p>org\.example\.Default.*</p></td></tr><tr><td>aspectj</td><td><p><tt class="interfacename">org.example..*Service+</tt></p></td></tr></tbody></table></div><p>&#19979;&#38754;&#36825;&#20010;XML&#37197;&#32622;&#20250;&#24573;&#30053;&#25152;&#26377;&#30340;<tt class="interfacename">@Repository</tt>&#27880;&#35299;&#24182;&#29992;&#8220;stub&#8221;&#20648;&#23384;&#24211;&#20195;&#26367;&#12290;</p><pre class="programlisting">&lt;beans ...&gt;

     &lt;context:component-scan base-package="org.example"&gt;
        &lt;context:include-filter type="regex" expression=".*Stub.*Repository"/&gt;
        &lt;context:exclude-filter type="annotation" expression="org.springframework.stereotype.Repository"/&gt;
     &lt;/context:component-scan&gt;

&lt;/beans&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#20320;&#20063;&#21487;&#20197;&#29992;&lt;component-scan/&gt;&#20803;&#32032;&#30340;<span class="emphasis"><em>use-default-filters="false"</em></span>
        &#23646;&#24615;&#26469;&#31105;&#29992;&#40664;&#35748;&#30340;&#36807;&#28388;&#22120;&#12290;&#36825;&#20250;&#20851;&#38381;&#23545;&#20351;&#29992;&#20102;<tt class="interfacename">@Component</tt>&#12289;
        <tt class="interfacename">@Repository</tt>&#12289;<tt class="interfacename">@Service</tt>&#25110;
        <tt class="interfacename">@Controller</tt>&#30340;&#31867;&#30340;&#33258;&#21160;&#26816;&#27979;&#12290;</p></td></tr></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-scanning-name-generator"></a>3.12.4.&nbsp;&#33258;&#21160;&#26816;&#27979;&#32452;&#20214;&#30340;&#21629;&#21517;</h3></div></div><div></div></div><p>&#24403;&#19968;&#20010;&#32452;&#20214;&#22312;&#26576;&#20010;&#25195;&#25551;&#36807;&#31243;&#20013;&#34987;&#33258;&#21160;&#26816;&#27979;&#21040;&#26102;&#65292;&#20250;&#26681;&#25454;&#37027;&#20010;&#25195;&#25551;&#22120;&#30340;<tt class="interfacename">BeanNameGenerator</tt>
      &#31574;&#30053;&#29983;&#25104;&#23427;&#30340;bean&#21517;&#31216;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#20219;&#20309;&#21253;&#21547;<tt class="literal">name</tt>&#20540;&#30340;Spring&#8220;&#20856;&#22411;&#8221;&#27880;&#35299;
      (<tt class="interfacename">@Component</tt>&#12289;<tt class="interfacename">@Repository</tt>&#12289;
      <tt class="interfacename">@Service</tt>&#21644;<tt class="interfacename">@Controller</tt>)
      &#20250;&#25226;&#37027;&#20010;&#21517;&#23383;&#25552;&#20379;&#32473;&#30456;&#20851;&#30340;bean&#23450;&#20041;&#12290;&#22914;&#26524;&#36825;&#20010;&#27880;&#35299;&#19981;&#21253;&#21547;<tt class="literal">name</tt>&#20540;&#25110;&#26159;&#20854;&#20182;&#26816;&#27979;&#21040;&#30340;&#32452;&#20214;
      (&#27604;&#22914;&#34987;&#33258;&#23450;&#20041;&#36807;&#28388;&#22120;&#21457;&#29616;&#30340;)&#65292;&#40664;&#35748;bean&#21517;&#31216;&#29983;&#25104;&#22120;&#20250;&#36820;&#22238;&#23567;&#20889;&#24320;&#22836;&#30340;&#38750;&#38480;&#23450;(non-qualified)&#31867;&#21517;&#12290;
      &#20363;&#22914;&#65292;&#22914;&#26524;&#21457;&#29616;&#20102;&#19979;&#38754;&#36825;&#20004;&#20010;&#32452;&#20214;&#65292;&#23427;&#20204;&#30340;&#21517;&#23383;&#20250;&#26159;'myMovieLister'&#21644;'movieFinderImpl'&#65306;</p><pre class="programlisting">@Service("myMovieLister")
public class SimpleMovieLister {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><pre class="programlisting">@Repository
public class MovieFinderImpl implements MovieFinder {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#22914;&#26524;&#20320;&#19981;&#24819;&#20351;&#29992;&#40664;&#35748;bean&#21629;&#21517;&#31574;&#30053;&#65292;&#21487;&#20197;&#25552;&#20379;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340;&#21629;&#21517;&#31574;&#30053;&#12290;&#39318;&#20808;&#23454;&#29616;
        <a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/support/BeanNameGenerator.html" target="_top"><tt class="interfacename">BeanNameGenerator</tt></a>
        &#25509;&#21475;&#65292;&#30830;&#35748;&#21253;&#21547;&#20102;&#19968;&#20010;&#40664;&#35748;&#30340;&#26080;&#21442;&#25968;&#26500;&#36896;&#26041;&#27861;&#12290;&#28982;&#21518;&#22312;&#37197;&#32622;&#25195;&#25551;&#22120;&#26102;&#25552;&#20379;&#19968;&#20010;&#20840;&#38480;&#23450;(fully-qualified)&#31867;&#21517;&#65306;</p></td></tr></table></div><pre class="programlisting">&lt;beans ...&gt;
               
     &lt;context:component-scan base-package="org.example"
                             name-generator="org.example.MyNameGenerator" /&gt;

&lt;/beans&gt;</pre><p>&#20316;&#20026;&#19968;&#26465;&#24120;&#35268;&#65292;&#24403;&#20854;&#20182;&#32452;&#20214;&#21487;&#33021;&#20250;&#26174;&#24335;&#22320;&#24341;&#29992;&#19968;&#20010;&#32452;&#20214;&#26102;&#21487;&#20197;&#32771;&#34385;&#29992;&#27880;&#35299;&#26469;&#25351;&#23450;&#21517;&#31216;&#12290;
      &#21478;&#19968;&#26041;&#38754;&#65292;&#24403;&#23481;&#22120;&#36127;&#36131;&#32455;&#20837;&#26102;&#65292;&#33258;&#21160;&#29983;&#25104;&#30340;&#21517;&#31216;&#23601;&#36275;&#22815;&#20102;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-scanning-scope-resolver"></a>3.12.5.&nbsp;&#20026;&#33258;&#21160;&#26816;&#27979;&#30340;&#32452;&#20214;&#25552;&#20379;&#19968;&#20010;&#20316;&#29992;&#22495;</h3></div></div><div></div></div><p>&#36890;&#24120;&#21463;Spring&#31649;&#29702;&#30340;&#32452;&#20214;&#65292;&#40664;&#35748;&#25110;&#32773;&#26368;&#24120;&#29992;&#30340;&#20316;&#29992;&#22495;&#26159;&#8220;singleton&#8221;&#12290;&#28982;&#32780;&#65292;&#26377;&#26102;&#20063;&#20250;&#38656;&#35201;&#20854;&#20182;&#30340;&#20316;&#29992;&#22495;&#12290;
      &#22240;&#27492;Spring 2.5&#36824;&#24341;&#20837;&#20102;&#19968;&#20010;&#26032;&#30340;<tt class="interfacename">@Scope</tt>&#27880;&#35299;&#12290;&#21482;&#35201;&#22312;&#27880;&#35299;&#20013;&#25552;&#20379;&#20316;&#29992;&#22495;&#30340;&#21517;&#31216;&#23601;&#34892;&#20102;&#65292;
      &#27604;&#26041;&#35828;&#65306;</p><pre class="programlisting">@Scope("prototype")
@Repository
public class MovieFinderImpl implements MovieFinder {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#22914;&#26524;&#20320;&#24819;&#25552;&#20379;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340;&#20316;&#29992;&#22495;&#35299;&#26512;&#31574;&#30053;&#65292;&#19981;&#20351;&#29992;&#22522;&#20110;&#27880;&#35299;&#30340;&#26041;&#27861;&#65292;&#23454;&#29616;<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/context/annotation/ScopeMetadataResolver.html" target="_top"><tt class="interfacename">ScopeMetadataResolver</tt></a>
        &#25509;&#21475;&#65292;&#30830;&#35748;&#21253;&#21547;&#19968;&#20010;&#40664;&#35748;&#30340;&#27809;&#26377;&#21442;&#25968;&#30340;&#26500;&#36896;&#26041;&#27861;&#12290;&#28982;&#21518;&#22312;&#37197;&#32622;&#25195;&#25551;&#22120;&#26102;&#25552;&#20379;&#20840;&#38480;&#23450;&#31867;&#21517;&#65306;</p></td></tr></table></div><pre class="programlisting">&lt;beans ...&gt;
               
     &lt;context:component-scan base-package="org.example"
                             scope-resolver="org.example.MyScopeResolver" /&gt;
     
&lt;/beans&gt;</pre><p>&#24403;&#20351;&#29992;&#26576;&#20123;&#38750;singleton&#30340;&#20316;&#29992;&#22495;&#26102;&#65292;&#21487;&#33021;&#38656;&#35201;&#20026;&#36825;&#20123;&#20316;&#29992;&#22495;&#20013;&#30340;&#23545;&#35937;&#29983;&#25104;&#20195;&#29702;&#12290;
      &#21407;&#22240;&#22312;&#26631;&#39064;&#20026;<a href="beans.html#beans-factory-scopes-other-injection" title="3.4.4.5.&nbsp;&#20316;&#29992;&#22495;bean&#19982;&#20381;&#36182;">Section&nbsp;3.4.4.5, &#8220;&#20316;&#29992;&#22495;bean&#19982;&#20381;&#36182;&#8221;</a>&#30340;&#31456;&#33410;&#20013;&#24050;&#32463;&#35828;&#36807;&#20102;&#12290;
      &#20026;&#20102;&#36825;&#20010;&#30446;&#30340;&#65292;'component-scan'&#20803;&#32032;&#26377;&#19968;&#20010;<span class="emphasis"><em>scoped-proxy</em></span>&#23646;&#24615;&#12290;
      &#19977;&#20010;&#21487;&#33021;&#20540;&#26159;&#65306;'no'&#12289;'interfaces'&#21644;'targetClass'&#12290;&#27604;&#26041;&#35828;&#65292;&#19979;&#38754;&#30340;&#37197;&#32622;&#20250;&#20135;&#29983;&#26631;&#20934;&#30340;JDK&#21160;&#24577;&#20195;&#29702;&#65306;</p><pre class="programlisting">&lt;beans ...&gt;
               
     &lt;context:component-scan base-package="org.example"
                             scoped-proxy="interfaces" /&gt;
     
&lt;/beans&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-scanning-qualifiers"></a>3.12.6.&nbsp;&#29992;&#27880;&#35299;&#25552;&#20379;&#38480;&#23450;&#31526;&#20803;&#25968;&#25454;</h3></div></div><div></div></div><p>&#22312;&#21517;&#20026;<a href="beans.html#beans-autowired-annotation-qualifiers" title="3.11.2.&nbsp;&#22522;&#20110;&#27880;&#35299;&#30340;&#33258;&#21160;&#36830;&#25509;&#24494;&#35843;">Section&nbsp;3.11.2, &#8220;&#22522;&#20110;&#27880;&#35299;&#30340;&#33258;&#21160;&#36830;&#25509;&#24494;&#35843;&#8221;</a>&#30340;&#31456;&#33410;&#37324;&#24341;&#20837;&#20102;<tt class="interfacename">@Qualifier</tt>&#27880;&#35299;&#12290;
      &#37027;&#33410;&#30340;&#20363;&#23376;&#20013;&#28436;&#31034;&#20102;<tt class="interfacename">@Qualifier</tt>&#27880;&#35299;&#30340;&#29992;&#27861;&#65292;&#20197;&#21450;&#22914;&#20309;&#29992;&#33258;&#23450;&#20041;&#38480;&#23450;&#31526;&#27880;&#35299;&#22312;&#33258;&#21160;&#32455;&#20837;&#35299;&#26512;&#26102;&#25552;&#20379;&#31934;&#32454;&#25511;&#21046;&#12290;
      &#37027;&#20123;&#20363;&#23376;&#26159;&#22522;&#20110;XML bean&#23450;&#20041;&#30340;&#65292;&#25152;&#20197;&#38480;&#23450;&#31526;&#20803;&#25968;&#25454;&#26159;&#22312;XML&#20013;&#30001;'<tt class="literal">bean</tt>'&#20803;&#32032;&#30340;
      '<tt class="literal">qualifier</tt>'&#25110;'<tt class="literal">meta</tt>'&#23376;&#20803;&#32032;&#25552;&#20379;&#12290;&#20351;&#29992;classpath&#25195;&#25551;&#26469;&#33258;&#21160;&#26816;&#27979;&#32452;&#20214;&#26102;&#65292;
      &#38480;&#23450;&#31526;&#20803;&#25968;&#25454;&#21487;&#20197;&#30001;&#20505;&#36873;&#31867;&#19978;&#30340;&#31867;&#21035;&#32423;(type-level)&#27880;&#35299;&#26469;&#25552;&#20379;&#12290;&#19979;&#38754;&#30340;&#19977;&#20010;&#20363;&#23376;&#23601;&#28436;&#31034;&#20102;&#36825;&#20010;&#25216;&#26415;&#12290;</p><pre class="programlisting">@Component
<span class="bold"><b>@Qualifier("Action")</b></span>
public class ActionMovieCatalog implements MovieCatalog {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><pre class="programlisting">@Component
<span class="bold"><b>@Genre("Action")</b></span>
public class ActionMovieCatalog implements MovieCatalog {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><pre class="programlisting">@Component
<span class="bold"><b>@Offline</b></span>
public class CachingMovieCatalog implements MovieCatalog {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="http://shouce.jb51.net/images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top">&#21644;&#20854;&#20182;&#22823;&#22810;&#25968;&#22522;&#20110;&#27880;&#35299;&#30340;&#19996;&#35199;&#19968;&#26679;&#65292;&#35831;&#29282;&#35760;&#27880;&#35299;&#20803;&#25968;&#25454;&#26159;&#32465;&#23450;&#21040;&#31867;&#23450;&#20041;&#19978;&#30340;&#65292;
      &#32780;XML&#21017;&#20801;&#35768;&#22810;&#20010;<span class="emphasis"><em>&#30456;&#21516;&#31867;&#22411;</em></span>&#30340;bean&#26681;&#25454;&#38480;&#23450;&#31526;&#20803;&#25968;&#25454;&#25552;&#20379;&#22810;&#31181;&#36873;&#25321;&#65292;
      &#22240;&#20026;&#20803;&#25968;&#25454;&#26159;&#30001;&#27599;&#20010;&#23454;&#20363;&#25552;&#20379;&#30340;&#65292;&#32780;&#19981;&#26159;&#27599;&#20010;&#31867;&#12290;</td></tr></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="context-load-time-weaver"></a>3.13.&nbsp;&#27880;&#20876;&#19968;&#20010;<tt class="interfacename">LoadTimeWeaver</tt></h2></div></div><div></div></div><p>Spring 2.5&#24341;&#20837;&#30340;<tt class="literal">context</tt>&#21517;&#23383;&#31354;&#38388;&#25552;&#20379;&#20102;&#19968;&#20010;<tt class="literal">load-time-weaver</tt>&#20803;&#32032;&#12290;</p><pre class="programlisting">&lt;beans ...&gt;
     
     &lt;context:load-time-weaver/&gt;
     
&lt;/beans&gt;</pre><p>&#22312;&#19968;&#20010;&#22522;&#20110;XML&#30340;Spring&#37197;&#32622;&#25991;&#20214;&#20013;&#21152;&#20837;&#36825;&#20010;&#20803;&#32032;&#33021;&#20026;<tt class="interfacename">ApplicationContext</tt>
    &#28608;&#27963;&#19968;&#20010;Spring <tt class="interfacename">LoadTimeWeaver</tt>&#12290;
    &#37027;&#20010;<tt class="interfacename">ApplicationContext</tt>&#20013;&#30340;&#20219;&#20309;bean&#37117;&#21487;&#20197;&#23454;&#29616;
    <tt class="interfacename">LoadTimeWeaverAware</tt>&#65292;&#20174;&#32780;&#25910;&#21040;&#19968;&#20010;&#21152;&#36733;&#26102;&#32455;&#20837;&#22120;(load-time weaver)&#30340;&#23454;&#20363;&#12290;
    &#36825;&#22312;&#19982;<a href="orm.html#orm-jpa" title="12.6.&nbsp;JPA">Spring JPA&#25903;&#25345;</a>&#32467;&#21512;&#26102;&#29305;&#21035;&#26377;&#29992;&#65292;JPA&#31867;&#36716;&#25442;&#38656;&#35201;&#21152;&#36733;&#26102;&#32455;&#20837;&#12290;
    &#35831;&#26597;&#30475;<tt class="classname">LocalContainerEntityManagerFactoryBean</tt>&#30340;Javadoc&#20197;&#33719;&#24471;&#35814;&#32454;&#20449;&#24687;&#12290;
    &#24819;&#35201;&#26356;&#22810;&#22320;&#20102;&#35299;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#30340;&#35805;&#65292;&#35831;&#21442;&#32771;<a href="aop.html#aop-aj-ltw" title="6.8.4.&nbsp;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;">Section&nbsp;6.8.4, &#8220;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;&#8221;</a>&#12290;</p></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.d0e1159" href="beans.html#d0e1159">1</a>] </sup>&#21442;&#35265;<a href="introduction.html#background-ioc" title="&#32972;&#26223;">&#32972;&#26223;</a>&#30340;&#30456;&#20851;&#20869;&#23481;</p></div><div class="footnote"><p><sup>[<a name="ftn.d0e3180" href="beans.html#d0e3180">2</a>] </sup>&#21442;&#35265;<a href="beans.html#beans-factory-collaborators" title="3.3.1.&nbsp;&#27880;&#20837;&#20381;&#36182;">Section&nbsp;3.3.1, &#8220;&#27880;&#20837;&#20381;&#36182;&#8221;</a></p></div></div></div><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="spring-core.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="resources.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Part&nbsp;I.&nbsp;&#26680;&#24515;&#25216;&#26415;&nbsp;</td><td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="http://www.springsource.com/" title="SpringSource">Sponsored by SpringSource</a></span></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;4.&nbsp;&#36164;&#28304;</td></tr></table></div></body></html>