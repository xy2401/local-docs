<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;18.&nbsp;Enterprise Java Beans (EJB) &#38598;&#25104;</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.60.1"><link rel="home" href="index.html" title="Spring Framework &#24320;&#21457;&#21442;&#32771;&#25163;&#20876;"><link rel="up" href="spring-integration.html" title="Part&nbsp;IV.&nbsp;&#25972;&#21512;"><link rel="previous" href="remoting.html" title="Chapter&nbsp;17.&nbsp;&#20351;&#29992;Spring&#36827;&#34892;&#36828;&#31243;&#35775;&#38382;&#19982;Web&#26381;&#21153;"><link rel="next" href="jms.html" title="Chapter&nbsp;19.&nbsp;JMS (Java Message Service)"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color:white;border:none;height:73px;border:1px solid black;"><a style="border:none;" href="http://www.springframework.org/" title="The Spring Framework"><img style="border:none;" src="images/xdev-spring_logo.jpg"></a><a style="border:none;" href="http://www.springsource.com/" title="SpringSource"><img style="border:none;position:absolute;padding-top:5px;right:42px;" src="images/springsource-banner-rhs.png"></a></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="ejb"></a>Chapter&nbsp;18.&nbsp;Enterprise Java Beans (EJB) &#38598;&#25104;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ejb-introduction"></a>18.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>&#20570;&#20026;&#19968;&#20010;&#36731;&#37327;&#32423;&#30340;&#23481;&#22120;&#65292;Spring&#24120;&#34987;&#35748;&#20026;&#26159;EJB&#30340;&#26367;&#20195;&#21697;&#12290;&#25105;&#20204;&#20063;&#30456;&#20449;&#65292;&#23545;&#20110;&#24456;&#22810;&#65288;&#29978;&#33267;&#26159;&#32477;&#22823;&#22810;&#25968;&#65289;&#24212;&#29992;&#21644;&#24773;&#20917;&#65292;&#37319;&#29992;Spring&#20316;&#20026;&#23481;&#22120;&#65292;&#24182;&#20511;&#21161;&#23427;&#23545;&#20107;&#21153;&#12289;ORM&#21644;JDBC&#35775;&#38382;&#31561;&#30340;&#25903;&#25345;&#65292;&#26159;&#19968;&#31181;&#27604;&#37319;&#29992;EJB&#21450;EJB&#23481;&#22120;&#20197;&#23454;&#29616;&#21516;&#26679;&#30340;&#21151;&#33021;&#26356;&#22909;&#30340;&#36873;&#25321;&#12290;</p><p>&#28982;&#32780;&#65292;&#38656;&#35201;&#29305;&#21035;&#27880;&#24847;&#30340;&#26159;&#65292;&#20351;&#29992;&#20102;Spring&#24182;&#19981;&#26159;&#35828;&#25105;&#20204;&#23601;&#19981;&#33021;&#29992;EJB&#20102;&#12290;&#23454;&#38469;&#19978;&#65292;Spring&#20351;&#24471;&#35775;&#38382;&#21644;&#23454;&#29616;EJB&#21450;&#20854;&#21151;&#33021;&#26356;&#21152;&#26041;&#20415;&#12290;&#21478;&#22806;&#65292;&#22914;&#26524;&#36890;&#36807;Spring&#26469;&#35775;&#38382;EJB&#32452;&#20214;&#26381;&#21153;&#65292;&#20197;&#21518;&#23601;&#21487;&#20197;&#22312;&#26412;&#22320;EJB&#32452;&#20214;&#65292;&#36828;&#31243;EJB&#32452;&#20214;&#65292;&#25110;&#32773;&#26159;POJO(&#31616;&#21333;Java&#23545;&#35937;)&#36825;&#20123;&#21464;&#20307;&#20043;&#38388;&#36879;&#26126;&#22320;&#20999;&#25442;&#23454;&#29616;&#26041;&#24335;&#65292;&#32780;&#19981;&#38656;&#35201;&#25913;&#21464;&#23458;&#25143;&#31471;&#30340;&#20195;&#30721;&#12290;</p><p>&#26412;&#31456;&#65292;&#25105;&#20204;&#26469;&#30475;&#30475;Spring&#26159;&#22914;&#20309;&#24110;&#21161;&#25105;&#20204;&#35775;&#38382;&#21644;&#23454;&#29616;EJB&#32452;&#20214;&#30340;&#12290;Spring&#22312;&#35775;&#38382;&#26080;&#29366;&#24577;Session Bean(SLSBs)&#30340;&#26102;&#20505;&#29305;&#21035;&#26377;&#29992;&#65292;&#29616;&#22312;&#25105;&#20204;&#23601;&#30001;&#27492;&#24320;&#22987;&#35752;&#35770;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ejb-access"></a>18.2.&nbsp;&#35775;&#38382;EJB</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ejb-access-concepts"></a>18.2.1.&nbsp;&#27010;&#24565;</h3></div></div><div></div></div><p>&#35201;&#35843;&#29992;&#19968;&#20010;&#26412;&#22320;&#25110;&#32773;&#36828;&#31243;&#26080;&#29366;&#24577;session bean&#19978;&#30340;&#26041;&#27861;&#65292;&#23458;&#25143;&#31471;&#20195;&#30721;&#24517;&#39035;&#36827;&#34892;JNDI&#26597;&#25214;&#65292;&#20197;&#33719;&#21462;(&#26412;&#22320;&#25110;&#36828;&#31243;&#30340;)EJB Home&#23545;&#35937;&#65292;&#28982;&#21518;&#35843;&#29992;&#35813;&#23545;&#35937;&#30340;"create"&#26041;&#27861;&#65292;&#25165;&#33021;&#24471;&#21040;&#23454;&#38469;&#30340;(&#26412;&#22320;&#25110;&#36828;&#31243;&#30340;)EJB&#23545;&#35937;&#12290;&#28982;&#21518;&#25165;&#33021;&#35843;&#29992;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;EJB&#32452;&#20214;&#30340;&#26041;&#27861;&#12290;</p><p>&#20026;&#20102;&#36991;&#20813;&#37325;&#22797;&#30340;&#24213;&#23618;&#20195;&#30721;&#65292;&#24456;&#22810;EJB&#24212;&#29992;&#20351;&#29992;&#20102;&#26381;&#21153;&#23450;&#20301;&#22120;(Service Locator)&#21644;&#19994;&#21153;&#22996;&#25176;(Bussiness Delegate)&#27169;&#24335;&#65292;&#36825;&#26679;&#27604;&#22312;&#23458;&#25143;&#31471;&#20195;&#30721;&#20013;&#21040;&#22788;&#37117;&#36827;&#34892;JNDI&#26597;&#25214;&#35201;&#22909;&#20123;&#65292;&#19981;&#36807;&#23427;&#20204;&#30340;&#24120;&#35265;&#23454;&#29616;&#37117;&#26377;&#20005;&#37325;&#30340;&#32570;&#38519;&#12290;&#20363;&#22914;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#36890;&#24120;&#22914;&#26524;&#20195;&#30721;&#36890;&#36807;&#26381;&#21153;&#23450;&#20301;&#22120;&#25110;&#19994;&#21153;&#20195;&#29702;&#21333;&#20214;&#26469;&#20351;&#29992;EJB&#65292;&#21017;&#24456;&#38590;&#23545;&#20854;&#36827;&#34892;&#27979;&#35797;&#12290;</p></li><li><p>&#22914;&#26524;&#21482;&#20351;&#29992;&#20102;&#26381;&#21153;&#23450;&#20301;&#22120;&#27169;&#24335;&#32780;&#19981;&#20351;&#29992;&#19994;&#21153;&#22996;&#25176;&#27169;&#24335;&#65292;&#24212;&#29992;&#31243;&#24207;&#20195;&#30721;&#20173;&#28982;&#38656;&#35201;&#35843;&#29992;EJB Home&#32452;&#20214;&#30340;create&#26041;&#27861;&#65292;&#24182;&#19988;&#35201;&#22788;&#29702;&#30001;&#27492;&#20135;&#29983;&#30340;&#24322;&#24120;&#12290;&#36825;&#26679;&#20195;&#30721;&#20381;&#28982;&#23384;&#22312;&#21644;EJB API&#30340;&#32806;&#21512;&#24182;&#24863;&#26579;&#20102;EJB&#32534;&#31243;&#27169;&#22411;&#30340;&#22797;&#26434;&#24615;&#12290;</p></li><li><p>&#23454;&#29616;&#19994;&#21153;&#22996;&#25176;&#27169;&#24335;&#36890;&#24120;&#20250;&#23548;&#33268;&#22823;&#37327;&#30340;&#37325;&#22797;&#20195;&#30721;&#65292;&#22240;&#20026;&#23545;&#20110;EJB&#32452;&#20214;&#30340;&#21516;&#19968;&#20010;&#26041;&#27861;&#65292;&#25105;&#20204;&#19981;&#24471;&#19981;&#32534;&#20889;&#24456;&#22810;&#26041;&#27861;&#21435;&#35843;&#29992;&#23427;&#12290;</p></li></ul></div><p>Spring&#30340;&#35299;&#20915;&#26041;&#24335;&#26159;&#20801;&#35768;&#29992;&#25143;&#21019;&#24314;&#24182;&#20351;&#29992;&#20195;&#30721;&#37327;&#24456;&#23569;&#30340;&#19994;&#21153;&#22996;&#25176;&#20195;&#29702;&#23545;&#35937;&#65292;&#36890;&#24120;&#22312;Spring&#30340;&#23481;&#22120;&#37324;&#37197;&#32622;&#12290;&#32780;&#19981;&#20877;&#38656;&#35201;&#32534;&#20889;&#39069;&#22806;&#30340;&#26381;&#21153;&#23450;&#20301;&#22120;&#25110;JNDI&#26597;&#25214;&#30340;&#20195;&#30721;&#65292;&#20197;&#21450;&#32534;&#30721;&#30340;&#19994;&#21153;&#22996;&#25176;&#23545;&#35937;&#37324;&#38754;&#30340;&#20887;&#20313;&#26041;&#27861;&#65292;&#38500;&#38750;&#23427;&#20204;&#21487;&#20197;&#24102;&#26469;&#23454;&#36136;&#24615;&#30340;&#22909;&#22788;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ejb-access-local"></a>18.2.2.&nbsp;&#35775;&#38382;&#26412;&#22320;&#30340;&#26080;&#29366;&#24577;Session Bean(SLSB)</h3></div></div><div></div></div><p>&#20551;&#35774;web&#25511;&#21046;&#22120;&#38656;&#35201;&#20351;&#29992;&#26412;&#22320;EJB&#32452;&#20214;&#12290;&#25105;&#20204;&#23558;&#36981;&#24490;&#26368;&#20339;&#23454;&#36341;&#32463;&#39564;&#65292;&#20351;&#29992;EJB&#30340;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;(Business Methods Interface)&#27169;&#24335;&#65292;&#36825;&#26679;&#65292;&#36825;&#20010;EJB&#32452;&#20214;&#30340;&#26412;&#22320;&#25509;&#21475;&#23558;&#32487;&#25215;&#19968;&#20010;&#19981;&#21463;EJB&#35268;&#33539;&#32422;&#26463;&#30340;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;&#12290;&#35753;&#25105;&#20204;&#25226;&#36825;&#20010;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;&#31216;&#20026;MyComponent&#12290;</p><pre class="programlisting">public interface MyComponent {
    ...
}</pre><p>&#20351;&#29992;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;&#27169;&#24335;&#30340;&#19968;&#20010;&#20027;&#35201;&#21407;&#22240;&#26159;&#20026;&#20102;&#20445;&#35777;&#26412;&#22320;&#25509;&#21475;&#21644;bean&#30340;&#23454;&#29616;&#31867;&#20043;&#38388;&#30340;&#26041;&#27861;&#31614;&#21517;&#33258;&#21160;&#21516;&#27493;&#12290;&#21478;&#22806;&#19968;&#20010;&#21407;&#22240;&#26159;&#23427;&#20351;&#24471;&#25105;&#20204;&#26356;&#23481;&#26131;&#25913;&#29992;&#22522;&#20110;POJO(&#31616;&#21333;Java&#23545;&#35937;)&#30340;&#26381;&#21153;&#23454;&#29616;&#26041;&#24335;&#65292;&#21482;&#35201;&#36825;&#26679;&#30340;&#25913;&#21464;&#26159;&#26377;&#24847;&#20041;&#30340;&#12290;&#24403;&#28982;&#65292;&#25105;&#20204;&#20063;&#38656;&#35201;&#23454;&#29616;&#26412;&#22320;Home&#25509;&#21475;&#65292;&#24182;&#25552;&#20379;&#19968;&#20010;Bean&#23454;&#29616;&#31867;&#65292;&#29992;&#23427;&#26469;&#23454;&#29616;&#25509;&#21475;<tt class="classname">SessionBean</tt>&#21644;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;<tt class="classname">MyComponent</tt>&#12290;&#29616;&#22312;&#20026;&#20102;&#25226;Web&#23618;&#30340;&#25511;&#21046;&#22120;&#21644;EJB&#30340;&#23454;&#29616;&#38142;&#25509;&#36215;&#26469;&#65292;&#25105;&#20204;&#21807;&#19968;&#35201;&#20889;&#30340;Java&#20195;&#30721;&#23601;&#26159;&#22312;&#25511;&#21046;&#22120;&#19978;&#21457;&#24067;&#19968;&#20010;&#31867;&#22411;&#20026;<tt class="classname">MyComponent</tt>&#30340;setter&#26041;&#27861;&#12290;&#36825;&#26679;&#23601;&#21487;&#20197;&#25226;&#36825;&#20010;&#24341;&#29992;&#20445;&#23384;&#22312;&#25511;&#21046;&#22120;&#30340;&#19968;&#20010;&#23454;&#20363;&#21464;&#37327;&#20013;&#12290;</p><pre class="programlisting">private MyComponent myComponent;

public void setMyComponent(MyComponent myComponent) {
    this.myComponent = myComponent;
}</pre><p>&#28982;&#21518;&#25105;&#20204;&#21487;&#20197;&#22312;&#25511;&#21046;&#22120;&#30340;&#20219;&#24847;&#19994;&#21153;&#26041;&#27861;&#37324;&#38754;&#20351;&#29992;&#36825;&#20010;&#23454;&#20363;&#21464;&#37327;&#12290;&#20551;&#35774;&#25105;&#20204;&#29616;&#22312;&#20174;Spring&#23481;&#22120;&#33719;&#24471;&#35813;&#25511;&#21046;&#22120;&#23545;&#35937;&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;(&#22312;&#21516;&#19968;&#20010;&#19978;&#19979;&#25991;&#20013;)&#37197;&#32622;&#19968;&#20010;<tt class="literal">LocalStatelessSessionProxyFactoryBean</tt>&#30340;&#23454;&#20363;&#65292;&#20316;&#20026;EJB&#32452;&#20214;&#30340;&#20195;&#29702;&#23545;&#35937;&#12290;&#36825;&#20010;&#20195;&#29702;&#23545;&#35937;&#30340;&#37197;&#32622;&#65292;&#20197;&#21450;&#25511;&#21046;&#22120;&#23646;&#24615;<tt class="literal">myComponent</tt>&#30340;&#35774;&#32622;&#26159;&#20351;&#29992;&#19968;&#20010;&#37197;&#32622;&#39033;&#23436;&#25104;&#30340;&#65292;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;bean id="myComponent"
      class="org.springframework.ejb.access.LocalStatelessSessionProxyFactoryBean"&gt;
  &lt;property name="jndiName" value="myJndiComponent"/&gt;
  &lt;property name="businessInterface" value="com.mycom.MyComponent"/&gt;
&lt;/bean&gt;

&lt;bean id="myController" class="com.mycom.myController"&gt;
  &lt;property name="myComponent" ref="myComponent"/&gt;
&lt;/bean&gt;</pre><p>&#36825;&#20123;&#30475;&#20284;&#31616;&#21333;&#30340;&#20195;&#30721;&#32972;&#21518;&#26377;&#24456;&#22810;&#22797;&#26434;&#30340;&#22788;&#29702;&#65292;&#21463;&#30410;&#20110;Spring&#30340;AOP&#26694;&#26550;&#65292;&#20320;&#29978;&#33267;&#19981;&#24517;&#30693;&#36947;AOP&#27010;&#24565;&#65292;&#23601;&#21487;&#20197;&#20139;&#29992;&#23427;&#30340;&#25104;&#26524;&#12290;Bean <tt class="literal">myComponent</tt>&#30340;&#23450;&#20041;&#21019;&#24314;&#20102;&#19968;&#20010;EJB&#32452;&#20214;&#30340;&#20195;&#29702;&#23545;&#35937;&#65292;&#23427;&#23454;&#29616;&#20102;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;&#12290;&#36825;&#20010;EJB&#32452;&#20214;&#30340;&#26412;&#22320;Home&#23545;&#35937;&#22312;&#21551;&#21160;&#30340;&#26102;&#20505;&#23601;&#34987;&#25918;&#21040;&#20102;&#32531;&#23384;&#20013;&#65292;&#25152;&#20197;&#21482;&#38656;&#35201;&#25191;&#34892;&#19968;&#27425;JNDI&#26597;&#25214;&#12290;&#27599;&#24403;EJB&#32452;&#20214;&#34987;&#35843;&#29992;&#30340;&#26102;&#20505;&#65292;&#36825;&#20010;&#20195;&#29702;&#23545;&#35937;&#23601;&#35843;&#29992;&#26412;&#22320;EJB&#32452;&#20214;&#30340;<tt class="literal">classname</tt>&#26041;&#27861;&#65292;&#24182;&#35843;&#29992;EJB&#32452;&#20214;&#19978;&#30456;&#24212;&#30340;&#19994;&#21153;&#26041;&#27861;&#12290;</p><p>
				The <tt class="literal">myController</tt> bean definition sets the
				<tt class="literal">myComponent</tt> property of the controller class to the
				EJB proxy.
			</p><p>&#22312;Bean <tt class="literal">myController</tt>&#30340;&#23450;&#20041;&#20013;&#65292;&#25511;&#21046;&#22120;&#31867;&#30340;&#23646;&#24615;<tt class="literal">myComponent</tt>&#30340;&#20540;&#34987;&#35774;&#32622;&#20026;&#19978;&#36848;&#30340;EJB&#20195;&#29702;&#23545;&#35937;&#12290;</p><p>
      	&#21478;&#19968;&#31181;&#36873;&#25321;&#65288;&#22312;&#36825;&#26679;&#30340;&#20195;&#29702;&#23450;&#20041;&#24456;&#22810;&#26102;&#65292;&#26356;&#21487;&#21462;&#65289;&#26159;&#20351;&#29992;&#22312;Spring&#30340;"jee"&#21629;&#21517;&#31354;&#38388;&#19979;&#30340;<tt class="literal">local-slsb</tt>&#37197;&#32622;&#20803;&#32032;
      </p><pre class="programlisting">&lt;jee:local-slsb id="myComponent" jndi-name="myJndiComponent"
      business-interface="com.mycom.MyComponent"/&gt;

&lt;bean id="myController" class="com.mycom.myController"&gt;
  &lt;property name="myComponent" ref="myComponent"/&gt;
&lt;/bean&gt;</pre><p>&#36825;&#31181;EJB&#32452;&#20214;&#35775;&#38382;&#26426;&#21046;&#22823;&#22823;&#31616;&#21270;&#20102;&#24212;&#29992;&#31243;&#24207;&#20195;&#30721;&#65306;Web&#23618;(&#25110;&#20854;&#20182;EJB&#23458;&#25143;&#31471;)&#30340;&#20195;&#30721;&#19981;&#20877;&#20381;&#36182;&#20110;EJB&#32452;&#20214;&#30340;&#20351;&#29992;&#12290;&#22914;&#26524;&#25105;&#20204;&#24819;&#25226;&#36825;&#20010;EJB&#30340;&#24341;&#29992;&#26367;&#25442;&#20026;&#19968;&#20010;POJO&#65292;&#25110;&#32773;&#26159;&#27169;&#25311;&#23545;&#35937;&#25110;&#20854;&#20182;&#27979;&#35797;&#26729;&#26550;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#31616;&#21333;&#22320;&#20462;&#25913;Bean <tt class="literal">myComponent</tt>&#30340;&#23450;&#20041;&#32780;&#19981;&#38656;&#20462;&#25913;&#20219;&#20309;Java&#20195;&#30721;&#65292;&#27492;&#22806;&#65292;&#25105;&#20204;&#20063;&#19981;&#24517;&#20877;&#22312;&#24212;&#29992;&#31243;&#24207;&#20013;&#32534;&#20889;&#20219;&#20309;JNDI&#26597;&#25214;&#25110;&#20854;&#23427;EJB&#30456;&#20851;&#30340;&#20195;&#30721;&#12290;</p><p>&#22312;&#23454;&#38469;&#24212;&#29992;&#20013;&#30340;&#35780;&#27979;&#21644;&#32463;&#39564;&#34920;&#26126;&#65292;&#36825;&#31181;&#26041;&#27861;&#65288;&#20351;&#29992;&#21453;&#23556;&#26469;&#35843;&#29992;&#30446;&#26631;EJB&#32452;&#20214;&#65289;&#30340;&#24615;&#33021;&#24320;&#38144;&#24456;&#23567;&#65292;&#19968;&#33324;&#20351;&#29992;&#20013;&#20960;&#20046;&#35273;&#23519;&#19981;&#20986;&#12290;&#34429;&#28982;&#22914;&#27492;&#65292;&#20173;&#35831;&#29282;&#35760;&#19981;&#35201;&#35843;&#29992;&#32454;&#31890;&#24230;EJB&#32452;&#20214;&#65292;&#22240;&#20026;&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;EJB&#30340;&#22522;&#30784;&#26694;&#26550;&#27605;&#31455;&#20250;&#24102;&#26469;&#24615;&#33021;&#25439;&#22833;&#12290;</p><p>&#20851;&#20110;JNDI&#26597;&#25214;&#26377;&#19968;&#28857;&#38656;&#35201;&#29305;&#21035;&#27880;&#24847;&#12290;&#22312;Bean&#23481;&#22120;&#20013;&#65292;&#36825;&#20010;&#31867;&#36890;&#24120;&#26368;&#22909;&#29992;&#20316;&#21333;&#20214;(&#27809;&#29702;&#30001;&#20351;&#20043;&#25104;&#20026;&#21407;&#22411;)&#12290;&#19981;&#36807;&#65292;&#22914;&#26524;&#36825;&#20010;Bean&#23481;&#22120;&#20250;&#39044;&#20808;&#23454;&#20363;&#21270;&#21333;&#20214;(XML <tt class="classname">ApplicationContext</tt>&#30340;&#20960;&#31181;&#21464;&#20307;&#23601;&#20250;&#36825;&#26679;)&#65292;&#24182;&#19988;&#23427;&#22312;EJB&#23481;&#22120;&#21152;&#36733;&#30446;&#26631;EJB&#21069;&#34987;&#21152;&#36733;&#65292;&#25105;&#20204;&#23601;&#20250;&#36935;&#21040;&#38382;&#39064;&#12290;&#22240;&#20026;JNDI&#26597;&#25214;&#20250;&#22312;&#35813;&#31867;&#30340;init&#26041;&#27861;&#20013;&#34987;&#25191;&#34892;&#28982;&#21518;&#32531;&#23384;&#32467;&#26524;&#65292;&#20294;&#26159;&#27492;&#26102;EJB&#36824;&#27809;&#26377;&#34987;&#32465;&#23450;&#21040;&#30446;&#26631;&#20301;&#32622;&#12290;&#35299;&#20915;&#26041;&#26696;&#26159;&#19981;&#35201;&#39044;&#20808;&#23454;&#20363;&#21270;&#36825;&#20010;&#24037;&#21378;&#23545;&#35937;&#65292;&#32780;&#35753;&#23427;&#22312;&#31532;&#19968;&#27425;&#34987;&#29992;&#21040;&#30340;&#26102;&#20505;&#20877;&#21019;&#24314;&#12290;&#22312;XML&#23481;&#22120;&#20013;&#65292;&#36825;&#26159;&#36890;&#36807;&#23646;&#24615;<tt class="literal">lazy-init</tt>&#26469;&#25511;&#21046;&#30340;&#12290;</p><p>&#23613;&#31649;&#22823;&#37096;&#20998;Spring&#30340;&#29992;&#25143;&#19981;&#20250;&#23545;&#36825;&#20123;&#24863;&#20852;&#36259;&#65292;&#20294;&#37027;&#20123;&#23545;EJB&#36827;&#34892;AOP&#32534;&#31243;&#24037;&#20316;&#30340;&#29992;&#25143;&#38656;&#35201;&#30475;<tt class="classname">LocalSlsbInvokerInterceptor</tt>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ejb-access-remote"></a>18.2.3.&nbsp;&#35775;&#38382;&#36828;&#31243;SLSB</h3></div></div><div></div></div><p>&#22522;&#26412;&#19978;&#35775;&#38382;&#36828;&#31243;EJB&#19982;&#35775;&#38382;&#26412;&#22320;EJB&#24046;&#21035;&#19981;&#22823;&#65292;&#21482;&#26159;&#21069;&#32773;&#20351;&#29992;&#30340;&#26159;<tt class="classname">SimpleRemoteStatelessSessionProxyFactoryBean</tt>&#25110;&#32773;<tt class="literal">jee:remote-slsb</tt>&#12290;&#24403;&#28982;&#65292;&#26080;&#35770;&#26159;&#21542;&#20351;&#29992;Spring&#65292;&#36828;&#31243;&#35843;&#29992;&#30340;&#35821;&#20041;&#37117;&#30456;&#21516;&#65307;&#23545;&#20110;&#20351;&#29992;&#22330;&#26223;&#21644;&#38169;&#35823;&#22788;&#29702;&#26469;&#35828;&#65292;&#35843;&#29992;&#21478;&#19968;&#21488;&#35745;&#31639;&#26426;&#19978;&#30340;&#34394;&#25311;&#26426;&#20013;&#23545;&#35937;&#30340;&#26041;&#27861;&#21644;&#26412;&#22320;&#35843;&#29992;&#20250;&#26377;&#25152;&#19981;&#21516;&#12290;</p><p>&#30456;&#27604;&#19981;&#20351;&#29992;Spring&#26041;&#24335;&#30340;EJB&#23458;&#25143;&#31471;&#30456;&#27604;&#65292;Spring&#30340;EJB&#23458;&#25143;&#31471;&#26377;&#22810;&#20010;&#22909;&#22788;&#12290;&#36890;&#24120;&#22914;&#26524;&#35201;&#24819;&#33021;&#38543;&#24847;&#30340;&#22312;&#26412;&#22320;&#21644;&#36828;&#31243;EJB&#35843;&#29992;&#20043;&#38388;&#20999;&#25442;EJB&#23458;&#25143;&#31471;&#20195;&#30721;&#65292;&#26159;&#20250;&#20135;&#29983;&#38382;&#39064;&#30340;&#12290;&#36825;&#26159;&#22240;&#20026;&#36828;&#31243;&#25509;&#21475;&#30340;&#26041;&#27861;&#38656;&#35201;&#22768;&#26126;&#20182;&#20204;&#25243;&#20986;&#30340;<tt class="classname">RemoteException</tt>&#26041;&#27861;
&#65292;&#28982;&#21518;&#23458;&#25143;&#31471;&#20195;&#30721;&#24517;&#39035;&#22788;&#29702;&#36825;&#31181;&#24322;&#24120;&#65292;&#20294;&#26159;&#26412;&#22320;&#25509;&#21475;&#30340;&#26041;&#27861;&#21364;&#19981;&#38656;&#35201;&#36825;&#26679;&#12290;&#22914;&#26524;&#35201;&#25226;&#38024;&#23545;&#26412;&#22320;EJB&#30340;&#20195;&#30721;&#25913;&#20026;&#35775;&#38382;&#36828;&#31243;EJB&#65292;&#23601;&#38656;&#35201;&#20462;&#25913;&#23458;&#25143;&#31471;&#20195;&#30721;&#65292;&#22686;&#21152;&#22788;&#29702;&#36828;&#31243;&#24322;&#24120;&#30340;&#20195;&#30721;&#65292;&#21453;&#20043;&#35201;&#20040;&#20445;&#30041;&#36825;&#20123;&#29992;&#19981;&#19978;&#30340;&#36828;&#31243;&#24322;&#24120;&#22788;&#29702;&#20195;&#30721;&#35201;&#20040;&#23601;&#38656;&#35201;&#36827;&#34892;&#20462;&#25913;&#20197;&#21435;&#38500;&#36825;&#20123;&#24322;&#24120;&#22788;&#29702;&#20195;&#30721;&#12290;&#20351;&#29992;Spring&#30340;&#36828;&#31243;EJB&#20195;&#29702;&#65292;&#25105;&#20204;&#23601;&#19981;&#20877;&#38656;&#35201;&#22312;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;&#21644;EJB&#30340;&#23454;&#29616;&#20195;&#30721;&#20013;&#22768;&#26126;&#35201;&#25243;&#20986;&#30340;<tt class="classname">RemoteException</tt>&#65292;&#32780;&#26159;&#23450;&#20041;&#19968;&#20010;&#30456;&#20284;&#30340;&#36828;&#31243;&#25509;&#21475;&#65292;&#21807;&#19968;&#19981;&#21516;&#23601;&#26159;&#23427;&#25243;&#20986;&#30340;&#26159;<tt class="classname">RemoteException</tt>&#65292; &#28982;&#21518;&#20132;&#32473;&#20195;&#29702;&#23545;&#35937;&#21435;&#21160;&#24577;&#30340;&#21327;&#35843;&#36825;&#20004;&#20010;&#25509;&#21475;&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;&#23458;&#25143;&#31471;&#20195;&#30721;&#19981;&#20877;&#38656;&#35201;&#19982;
<tt class="classname">RemoteException</tt>&#36825;&#20010;checked exception&#25171;&#20132;&#36947;&#65292;&#23454;&#38469;&#19978;&#22312;EJB&#35843;&#29992;&#20013;&#34987;&#25243;&#20986;&#30340;<tt class="classname">RemoteException</tt>&#37117;&#23558;&#34987;&#20197;unchecked exception <tt class="classname">RemoteAccessException</tt>&#30340;&#26041;&#24335;&#37325;&#26032;&#25243;&#20986;&#65292;&#23427;&#26159;<tt class="classname">RuntimeException</tt>&#30340;&#19968;&#20010;&#23376;&#31867;&#12290;&#36825;&#26679;&#30446;&#26631;&#26381;&#21153;&#23601;&#21487;&#20197;&#22312;&#26412;&#22320;EJB&#25110;&#36828;&#31243;EJB(&#29978;&#33267;POJO)&#20043;&#38388;&#38543;&#24847;&#22320;&#20999;&#25442;&#65292;&#23458;&#25143;&#31471;&#19981;&#38656;&#35201;&#20851;&#24515;&#29978;&#33267;&#26681;&#26412;&#19981;&#20250;&#35273;&#23519;&#21040;&#36825;&#31181;&#20999;&#25442;&#12290;&#24403;&#28982;&#65292;&#36825;&#20123;&#37117;&#26159;&#21487;&#36873;&#30340;&#65292;&#27809;&#26377;&#20160;&#20040;&#38459;&#27490;&#20320;&#22312;&#20320;&#30340;&#19994;&#21153;&#25509;&#21475;&#20013;&#22768;&#26126;<tt class="classname">RemoteExceptions</tt>&#24322;&#24120;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ejb-access-ejb2-ejb3"></a>18.2.4.&nbsp;Accessing EJB 2.x SLSBs versus EJB 3 SLSBs</h3></div></div><div></div></div><p>
         &#36890;&#36807;Spring&#21487;&#20197;&#36879;&#26126;&#30340;&#35775;&#38382;EJB2.X&#21644;EJB3&#30340; Session bean&#12290;Spring&#30340;EJB&#35775;&#38382;&#22120;&#21253;&#21547;<tt class="literal">jee:local-slsb</tt>&#21644;<tt class="literal">jee:remote-slsb</tt>&#65292;&#21487;&#22312;&#36816;&#34892;&#26102;&#26080;&#32541;&#36830;&#25509;&#23454;&#38469;&#32452;&#20214;&#12290;
         &#22914;&#26524;&#26159;EJB 2.x&#24418;&#24335;&#30340;&#65292;&#36825;&#20123;&#35775;&#38382;&#22120;&#20250;&#35843;&#29992;home&#25509;&#21475;&#65292;&#22914;&#26524;&#26159;EJB3&#24418;&#24335;&#30340;&#24182;&#19988;&#27809;&#26377;&#21487;&#29992;&#30340;home&#25509;&#21475;&#65292;&#23601;&#20250;&#30452;&#25509;&#35843;&#29992;&#32452;&#20214;&#12290;
      </p><p>
        &#27880;&#24847;:&#21363;&#20351;&#26159;EJB3 session bean&#65292;&#20320;&#20063;&#23436;&#20840;&#21487;&#20197;&#20351;&#29992;<tt class="classname">JndiObjectFactoryBean</tt> / <tt class="literal">jee:jndi-lookup</tt>
        &#22240;&#20026;&#24456;&#22810;&#21487;&#29992;&#30340;&#32452;&#20214;&#24341;&#29992;&#24456;&#22810;&#26159;&#26292;&#38706;&#20026;JNDI&#26597;&#25214;&#30340;&#12290;&#26174;&#24335;&#30340;&#23450;&#20041;<tt class="literal">jee:local-slsb</tt>
        / <tt class="literal">jee:remote-slsb</tt>&#26597;&#25214;&#25552;&#20379;&#20102;&#19968;&#33268;&#24615;&#21644;&#26356;&#28165;&#26970;&#30340;EJB&#35775;&#38382;&#37197;&#32622;&#12290;
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ejb-implementation"></a>18.3.&nbsp;&#20351;&#29992;Spring&#25552;&#20379;&#30340;&#36741;&#21161;&#31867;&#23454;&#29616;EJB&#32452;&#20214;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ejb-implementation-ejb2"></a>18.3.1.&nbsp;EJB 2.x base classes</h3></div></div><div></div></div><p>Spring&#20063;&#25552;&#20379;&#20102;&#19968;&#20123;&#36741;&#21161;&#31867;&#26469;&#20026;EJB&#32452;&#20214;&#30340;&#23454;&#29616;&#25552;&#20379;&#20415;&#21033;&#12290;&#23427;&#20204;&#26159;&#20026;&#20102;&#20513;&#23548;&#19968;&#20123;&#22909;&#30340;&#23454;&#36341;&#32463;&#39564;&#65292;&#27604;&#22914;&#25226;&#19994;&#21153;&#36923;&#36753;&#25918;&#22312;&#22312;EJB&#23618;&#20043;&#21518;&#30340;POJO&#20013;&#23454;&#29616;&#65292;&#21482;&#25226;&#20107;&#21153;&#21010;&#20998;&#21644;&#36828;&#31243;&#35843;&#29992;&#36825;&#20123;&#32844;&#36131;&#30041;&#32473;EJB&#12290;</p><p>&#35201;&#23454;&#29616;&#19968;&#20010;&#26080;&#29366;&#24577;&#25110;&#26377;&#29366;&#24577;&#30340;Session Bean&#65292;&#25110;&#28040;&#24687;&#39537;&#21160;Bean&#65292;&#20320;&#21482;&#38656;&#35201;&#20174;<tt class="classname">AbstractStatelessSessionBean</tt>&#12289;<tt class="classname">AbstractStatefulSessionBean</tt>&#21644;<tt class="classname">AbstractMessageDrivenBean</tt>/<tt class="classname">AbstractJmsMessageDrivenBean</tt>&#20998;&#21035;&#32487;&#25215;&#20320;&#30340;&#23454;&#29616;&#31867;&#12290;</p><p>&#32771;&#34385;&#36825;&#20010;&#26080;&#29366;&#24577;Session bean&#30340;&#20363;&#23376;&#65306;&#23454;&#38469;&#19978;&#25105;&#20204;&#25226;&#26080;&#29366;&#24577;Session Bean&#30340;&#23454;&#29616;&#22996;&#25176;&#32473;&#19968;&#20010;&#26222;&#36890;&#30340;Java&#26381;&#21153;&#23545;&#35937;&#12290;&#19994;&#21153;&#25509;&#21475;&#30340;&#23450;&#20041;&#22914;&#19979;&#65306;</p><pre class="programlisting">public interface MyComponent {
    public void myMethod(...);
    ...
}</pre><p>&#36825;&#26159;&#31616;&#21333;Java&#23545;&#35937;&#30340;&#23454;&#29616;&#65306;</p><pre class="programlisting">public class MyComponentImpl implements MyComponent {
    public String myMethod(...) {
        ...
    }
    ...
}</pre><p>&#26368;&#21518;&#26159;&#26080;&#29366;&#24577;Session Bean&#33258;&#36523;&#65306;</p><pre class="programlisting">public class MyFacadeEJB extends AbstractStatelessSessionBean
        implements MyFacadeLocal {

    private MyComponent myComp;

    /**
     * Obtain our POJO service object from the BeanFactory/ApplicationContext
     * @see org.springframework.ejb.support.AbstractStatelessSessionBean#onEjbCreate()
     */
    protected void onEjbCreate() throws CreateException {
        myComp = (MyComponent) getBeanFactory().getBean(
            ServicesConstants.CONTEXT_MYCOMP_ID);
    }

    // for business method, delegate to POJO service impl.
    public String myFacadeMethod(...) {
        return myComp.myMethod(...);
    }
    ...
}</pre><p>&#32570;&#30465;&#24773;&#20917;&#19979;&#65292;Spring EJB&#25903;&#25345;&#31867;&#30340;&#22522;&#31867;&#22312;&#20854;&#29983;&#21629;&#21608;&#26399;&#20013;&#23558;&#21019;&#24314;&#24182;&#21152;&#36733;&#19968;&#20010;Spring IoC&#23481;&#22120;&#20379;EJB&#20351;&#29992;(&#27604;&#22914;&#20687;&#21069;&#38754;&#33719;&#24471;POJO&#26381;&#21153;&#23545;&#35937;&#30340;&#20195;&#30721;)&#12290;&#21152;&#36733;&#30340;&#24037;&#20316;&#26159;&#36890;&#36807;&#19968;&#20010;&#31574;&#30053;&#23545;&#35937;&#23436;&#25104;&#30340;&#65292;&#23427;&#26159;<tt class="classname">BeanFactoryLocator</tt>&#30340;&#23376;&#31867;&#12290;
&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#23454;&#38469;&#20351;&#29992;&#30340;<tt class="classname">BeanFactoryLocator</tt>&#30340;&#23454;&#29616;&#31867;&#26159;<tt class="classname">ContextJndiBeanFactoryLocator</tt>&#65292;&#23427;&#26681;&#25454;&#19968;&#20010;&#34987;&#25351;&#23450;&#20026;JNDI&#29615;&#22659;&#21464;&#37327;&#30340;&#36164;&#28304;&#20301;&#32622;&#26469;&#21019;&#24314;&#19968;&#20010;ApplicationContext&#23545;&#35937;(&#23545;&#20110;EJB&#31867;&#65292;&#36335;&#24452;&#26159;
<tt class="literal">java:comp/env/ejb/BeanFactoryPath</tt>)&#12290;&#22914;&#26524;&#38656;&#35201;&#25913;&#21464;BeanFactory&#25110;ApplicationContext&#30340;&#36733;&#20837;&#31574;&#30053;&#65292;&#25105;&#20204;&#21487;&#20197;&#22312;
<tt class="literal">setSessionContext()</tt>&#26041;&#27861;&#35843;&#29992;&#25110;&#22312;&#20855;&#20307;EJB&#23376;&#31867;&#30340;&#26500;&#36896;&#20989;&#25968;&#20013;&#35843;&#29992;<tt class="literal">setBeanFactoryLocator()</tt>&#26041;&#27861;&#26469;&#35206;&#30422;&#40664;&#35748;&#20351;&#29992;&#30340;
<tt class="classname">BeanFactoryLocator</tt>&#23454;&#29616;&#31867;&#12290;&#20855;&#20307;&#32454;&#33410;&#35831;&#21442;&#32771;JavaDoc&#12290;
		</p><p>&#22914;JavaDoc&#20013;&#25152;&#36848;&#65292;&#26377;&#29366;&#24577;Session Bean&#22312;&#20854;&#29983;&#21629;&#21608;&#26399;&#20013;&#23558;&#20250;&#34987;&#38045;&#21270;&#24182;&#37325;&#26032;&#28608;&#27963;&#65292;&#30001;&#20110;(&#19968;&#33324;&#24773;&#20917;&#19979;)&#20351;&#29992;&#20102;&#19968;&#20010;&#19981;&#21487;&#20018;&#34892;&#21270;&#30340;&#23481;&#22120;&#23454;&#20363;&#65292;&#19981;&#21487;&#20197;&#34987;EJB&#23481;&#22120;&#20445;&#23384;&#65292;
&#25152;&#20197;&#36824;&#38656;&#35201;&#25163;&#21160;&#22312;<tt class="literal">ejbPassivate</tt>&#21644;<tt class="literal">ejbActivate</tt>
&#36825;&#20004;&#20010;&#26041;&#27861;&#20013;&#20998;&#21035;&#35843;&#29992;<tt class="literal">unloadBeanFactory()</tt>&#21644;<tt class="literal">loadBeanFactory</tt>&#65292;
&#25165;&#33021;&#22312;&#38045;&#21270;&#25110;&#28608;&#27963;&#30340;&#26102;&#20505;&#21368;&#36733;&#25110;&#36733;&#20837;&#12290;</p><p>&#26377;&#20123;&#24773;&#20917;&#19979;&#65292;&#35201;&#36733;&#20837;ApplicationContext&#20197;&#20351;&#29992;EJB&#32452;&#20214;&#65292;<tt class="classname">ContextJndiBeanFactoryLocator</tt>&#30340;&#40664;&#35748;&#23454;&#29616;&#22522;&#26412;&#19978;&#36275;&#22815;&#20102;&#65292;
&#19981;&#36807;&#65292;&#24403;<tt class="classname">ApplicationContext</tt>&#38656;&#35201;&#36733;&#20837;&#22810;&#20010;bean&#65292;&#25110;&#36825;&#20123;bean&#21021;&#22987;&#21270;&#25152;&#38656;&#30340;&#26102;&#38388;&#25110;&#20869;&#23384;
&#24456;&#22810;&#30340;&#26102;&#20505;(&#20363;&#22914;Hibernate&#30340;<tt class="classname">SessionFactory</tt>&#30340;&#21021;&#22987;&#21270;)&#65292;&#23601;&#26377;&#21487;&#33021;&#20986;&#38382;&#39064;&#65292;&#22240;&#20026;
&#27599;&#20010;EJB&#32452;&#20214;&#37117;&#26377;&#33258;&#24049;&#30340;&#21103;&#26412;&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#29992;&#25143;&#20250;&#24819;&#37325;&#36733;<tt class="classname">ContextJndiBeanFactoryLocator</tt>&#30340;&#40664;&#35748;&#23454;&#29616;&#65292;&#24182;&#20351;&#29992;&#20854;&#23427;
<tt class="classname">BeanFactoryLocator</tt>&#30340;&#21464;&#20307;&#65292;&#20363;&#22914;<tt class="classname">ContextSingletonBeanFactoryLocator</tt>
&#65292;&#20182;&#20204;&#21487;&#20197;&#36733;&#20837;&#24182;&#22312;&#22810;&#20010;EJB&#25110;&#32773;&#20854;&#23458;&#25143;&#31471;&#38388;&#20849;&#20139;&#19968;&#20010;&#23481;&#22120;&#12290;&#36825;&#26679;&#20570;&#30456;&#24403;&#31616;&#21333;&#65292;&#21482;&#38656;&#35201;&#32473;EJB&#28155;&#21152;&#31867;&#20284;&#20110;&#22914;&#19979;&#30340;&#20195;&#30721;&#65306;</p><pre class="programlisting">   /**
    * Override default BeanFactoryLocator implementation
    * @see javax.ejb.SessionBean#setSessionContext(javax.ejb.SessionContext)
    */
   public void setSessionContext(SessionContext sessionContext) {
       super.setSessionContext(sessionContext);
       setBeanFactoryLocator(ContextSingletonBeanFactoryLocator.getInstance());
       setBeanFactoryLocatorKey(ServicesConstants.PRIMARY_CONTEXT_ID);
   }</pre><p>&#28982;&#21518;&#38656;&#35201;&#21019;&#24314;&#19968;&#20010;&#21517;&#20026;<tt class="literal">beanRefContext.xml</tt>&#30340;bean&#23450;&#20041;&#25991;&#20214;&#12290;&#36825;&#20010;&#25991;&#20214;&#23450;&#20041;&#20102;EJB&#20013;&#25152;&#26377;&#21487;&#33021;&#29992;&#21040;&#30340;bean&#24037;&#21378;(&#36890;&#24120;&#20197;&#24212;&#29992;&#19978;&#19979;&#25991;&#30340;&#24418;&#24335;)&#12290;&#35768;&#22810;&#24773;&#20917;&#19979;&#65292;&#36825;&#20010;&#25991;&#20214;&#21482;&#21253;&#25324;&#19968;&#20010;bean&#30340;&#23450;&#20041;&#65292;&#22914;&#19979;&#25152;&#31034;(&#25991;&#20214;<tt class="literal">businessApplicationContext.xml</tt>&#21253;&#25324;&#20102;&#25152;&#26377;&#19994;&#21153;&#26381;&#21153;POJO&#30340;bean&#23450;&#20041;)&#65306;</p><pre class="programlisting">&lt;beans&gt;
    &lt;bean id="businessBeanFactory" class="org.springframework.context.support.ClassPathXmlApplicationContext"&gt;
        &lt;constructor-arg value="businessApplicationContext.xml" /&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</pre><p>&#19978;&#20363;&#20013;&#65292;&#24120;&#37327;<tt class="literal">ServicesConstants.PRIMARY_CONTEXT_ID</tt>&#23450;&#20041;&#22914;&#19979;&#65306; </p><pre class="programlisting">public static final String ServicesConstants.PRIMARY_CONTEXT_ID = "businessBeanFactory";</pre><p><tt class="classname">BeanFactoryLocator</tt>&#21644;&#31867;<tt class="classname">ContextSingletonBeanFactoryLocator</tt>&#30340;&#26356;&#22810;&#20351;&#29992;&#20449;&#24687;&#35831;&#20998;&#21035;&#26597;&#30475;&#20182;&#20204;&#21508;&#33258;&#30340;Javadoc&#25991;&#26723;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ejb-implementation-ejb3"></a>18.3.2.&nbsp;EJB 3 &#27880;&#20837;&#25318;&#25130;</h3></div></div><div></div></div><p>
         &#23545;EJB3 Session bean&#21644;Message-Driven Bean&#26469;&#35828;, Spring&#22312;EJB&#32452;&#20214;&#31867;
        <tt class="classname">org.springframework.ejb.interceptor.SpringBeanAutowiringInterceptor</tt>&#20013;&#25552;&#20379;&#20102;&#23454;&#29992;&#30340;&#25318;&#25130;&#22120;&#26469;&#35299;&#26512;Spring2.5&#30340;&#27880;&#35299;<tt class="literal">@Autowired</tt>&#12290;
         &#36825;&#20010;&#25318;&#25130;&#22120;&#30340;&#20351;&#29992;&#26377;&#20004;&#31181;&#26041;&#24335;&#65292;&#21487;&#20197;&#22312;EJB&#32452;&#20214;&#31867;&#37324;&#20351;&#29992;<font color="red">&lt;code&gt;@Interceptors&lt;/code&gt;</font>&#27880;&#35299;&#65292;&#20063;&#21487;&#20197;&#22312;EJB&#37096;&#32626;&#25551;&#36848;&#25991;&#20214;&#20013;&#20351;&#29992;XML&#20803;&#32032;<tt class="literal">interceptor-binding</tt>&#12290;
      </p><pre class="programlisting">@Stateless
@Interceptors(SpringBeanAutowiringInterceptor.class)
public class MyFacadeEJB implements MyFacadeLocal {

    // automatically injected with a matching Spring bean
    @Autowired
    private MyComponent myComp;

    // for business method, delegate to POJO service impl.
    public String myFacadeMethod(...) {
        return myComp.myMethod(...);
    }
    ...
}</pre><p>
        <tt class="classname">SpringBeanAutowiringInterceptor</tt> &#40664;&#35748;&#24773;&#20917;&#19979;&#26159;&#20174;<tt class="classname">ContextSingletonBeanFactoryLocator</tt>&#33719;&#24471;&#30446;&#26631;bean&#30340;&#65292;&#21518;&#32773;&#23450;&#20041;&#22312;<tt class="literal">beanRefContext.xml</tt>&#25991;&#20214;&#20013;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;&#26368;&#22909;&#20351;&#29992;&#21333;&#29420;&#30340;&#19978;&#19979;&#25991;&#23450;&#20041;&#65292;&#24182;&#19988;&#26681;&#25454;&#31867;&#22411;&#32780;&#19981;&#26159;&#21517;&#31216;&#26469;&#33719;&#24471;&#12290;&#28982;&#32780;&#65292;&#22914;&#26524;&#20320;&#38656;&#35201;&#22312;&#22810;&#20010;&#19978;&#19979;&#25991;&#23450;&#20041;&#20013;&#20999;&#25442;&#65292;&#37027;&#20040;&#23601;&#38656;&#35201;&#19968;&#20010;&#29305;&#23450;&#30340;&#23450;&#20301;&#38190;&#12290;&#36825;&#20010;&#23450;&#20301;&#38190;&#65288;&#20363;&#22914;&#23450;&#20041;&#22312;<tt class="literal">beanRefContext.xml</tt>&#20013;&#30340;&#19978;&#19979;&#25991;&#21517;&#31216;&#65289;&#21487;&#20197;&#36890;&#36807;&#20197;&#19979;&#20004;&#31181;&#26041;&#24335;&#26469;&#26126;&#30830;&#30340;&#25351;&#23450;&#12290;&#19968;&#31181;&#26041;&#24335;&#26159;&#22312;&#23450;&#21046;&#30340;<tt class="classname">SpringBeanAutowiringInterceptor</tt>&#23376;&#31867;&#20013;&#37325;&#20889;<tt class="literal">getBeanFactoryLocatorKey</tt>&#26041;&#27861;&#12290;
      </p><p>
        &#21478;&#19968;&#31181;&#26041;&#24335;&#26159;&#37325;&#20889;<tt class="classname">SpringBeanAutowiringInterceptor</tt>&#30340;
        <tt class="literal">getBeanFactory</tt> &#26041;&#27861;&#65292;&#20363;&#22914;&#20174;&#23450;&#21046;&#25903;&#25345;&#31867;&#20013;&#33719;&#24471;&#19968;&#20010;&#20849;&#20139;&#30340;<tt class="interfacename">ApplicationContext</tt>&#12290;
      </p></div></div></div><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="remoting.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="jms.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;17.&nbsp;&#20351;&#29992;Spring&#36827;&#34892;&#36828;&#31243;&#35775;&#38382;&#19982;Web&#26381;&#21153;&nbsp;</td><td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="http://www.springsource.com/" title="SpringSource">Sponsored by SpringSource</a></span></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;19.&nbsp;JMS (Java Message Service)</td></tr></table></div></body></html>